var jg_oe=null;function A3xaAbsEnvironment()
{jg_oe=this;this.jm_bCanEdit=false;this.jm_bCanLike=false;this.jm_IdUser=0;this.jm_Itemid=0;this.jm_sDirBase="/";this.jm_sHomeDir="/";this.jm_sLang="en";var jt_this=this;this.jc_oStorage=null;this.jc_oXUR=null;this.jc_oA3xaDbZero=null;this.jc_oEntity=null;this.jc_oEntityInfo=null;this.jc_oHtml=null;this.jc_oIcons=null;this.jc_oUrls=null;this.jm_bReady=false;jQuery(document).ready(function(){jt_this.jm_bReady=true;jt_this._OnDocumentReady();});this._OnDocumentReady=function()
{return true;};this.IsReady=function(){return this.jm_bReady;};this.jm_DebugLevel=0;this.jm_oModule={};this.Set_Debug=function(ji_DebugLevel,ji_oModule)
{this.jm_DebugLevel=ji_DebugLevel;this.jm_oModule=(ji_oModule||{});return true;};this.CanLogInfo=function(ji_oModule)
{if(!(this.jm_DebugLevel>0))
return false;if(!ji_oModule)
return false;if(ji_oModule.DB&&ji_oModule.DB<=this.jm_oModule.DB)
return true;if(ji_oModule.VW&&ji_oModule.VW<=this.jm_oModule.VW)
return true;return false;};this.LogInfo=function(ji_sMessage,ji_sTask,ji_sMethodName)
{if(!ji_sMessage)
ji_sMessage="*";if(!ji_sTask)
ji_sTask="*";if(!ji_sMethodName)
ji_sMethodName="*";var jt_s=ji_sMessage+" [tk: "+ji_sTask+", md: "+ji_sMethodName+" ]";try
{if(window.console)
console.log(jt_s);}
catch(e)
{}
return true;};this.LogErr=function(ji_sMessage,ji_sTask,ji_sMethodName)
{if(!ji_sMessage)
ji_sMessage="*";if(!ji_sTask)
ji_sTask="*";if(!ji_sMethodName)
ji_sMethodName="*";var jt_s="Error: "+ji_sMessage+" [tk: "+ji_sTask+", md: "+ji_sMethodName+" ]";try
{if(window.console)
console.log(jt_s);}
catch(e)
{}
return true;};this.ExceptionMessage=function(ji_exception,ji_procedure)
{if(!ji_procedure)
ji_procedure="";var jt_sMessage=(ji_exception&&ji_exception.message?ji_exception.message:"unknown");var jt_sFileName=(ji_exception&&ji_exception.fileName?ji_exception.fileName:"unknown");var jt_line=(ji_exception&&ji_exception.lineNumber?ji_exception.lineNumber:"unknown");alert("Turbo Mode Experimental - "+ji_procedure+"Fails with: "+
jt_sMessage+" - in file: "+jt_sFileName+" - at line: "+jt_line);return true;};this.jm_blsbReady=false;this.jm_alsb=new Array();this.IsStatusBarReady=function()
{if(this.jm_blsbReady===true)
return true;if(this.jm_blsbReady==-1)
return false;if(!this.IsReady())
return false;this.jm_blsbReady=-1;var jt_delay=setTimeout(function()
{jt_this.jm_blsbReady=true;},500);return false;};this.LogStatusBar=function(ji_sText,ji_bAsChild,ji_bClear)
{return this.LogStatusBar2(new A3xaString([ji_sText,ji_sText,ji_sText,ji_sText]),ji_bAsChild,ji_bClear);};this.LogStatusBar2=function(ji_o3xsText,ji_bAsChild,ji_bClear)
{if(!ji_o3xsText)
ji_o3xsText=new A3xaString();if(ji_bClear)
this.jm_alsb=new Array();if(!this.IsReady())
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("suspend:"+ji_o3xsText.Get_LString(),"","A3xaAbsEnvironment.LogStatusBar");this.jm_alsb.push({text:ji_o3xsText,bchild:ji_bAsChild,bclean:ji_bClear});return true;}
if(ji_bClear)
{if(!this._ExecLogStatusBar2(null,ji_bAsChild,ji_bClear));}
while(this.jm_alsb&&this.jm_alsb.length)
{var jt_oText=this.jm_alsb.shift();jg_oe.CanLogInfo()&&jg_oe.LogInfo("grant:"+jt_oText.text,"","A3xaAbsEnvironment.LogStatusBar");if(!this._ExecLogStatusBar2(jt_oText.text,jt_oText.bchild,jt_oText.bclean));}
jg_oe.CanLogInfo()&&jg_oe.LogInfo("w2sb:"+ji_o3xsText.Get_LString(),"","A3xaAbsEnvironment.LogStatusBar");if(!this._ExecLogStatusBar2(ji_o3xsText,ji_bAsChild,ji_bClear));return true;};this._ExecLogStatusBar2=function(ji_o3xsText,ji_bAsChild,ji_bClear){return false;};this.Set_CommonValues=function(ji_bDebug,ji_bCanEdit,ji_bCanLike,ji_IdUser,ji_Itemid,ji_sDirBase,ji_sHomeDir,ji_sLang)
{return this.A3xaAbsEnvironment_Set_CommonValues(ji_bDebug,ji_bCanEdit,ji_bCanLike,ji_IdUser,ji_Itemid,ji_sDirBase,ji_sHomeDir,ji_sLang);}
this.A3xaAbsEnvironment_Set_CommonValues=function(ji_bDebug,ji_bCanEdit,ji_bCanLike,ji_IdUser,ji_Itemid,ji_sDirBase,ji_sHomeDir,ji_sLang)
{this.jm_bDebug=(ji_bDebug==true);this.jm_bCanEdit=ji_bCanEdit;this.jm_bCanLike=ji_bCanLike;this.jm_IdUser=ji_IdUser;this.jm_Itemid=ji_Itemid;this.jm_sDirBase=(ji_sDirBase?ji_sDirBase:"/");this.jm_sHomeDir=(ji_sHomeDir?ji_sHomeDir:"/");this.jm_sLang=(ji_sLang?ji_sLang:"en");return true;};this.jm_bTurboZero=false;this.jm_bTurboBasic=false;this.jm_bTurboAuto=false;this.jm_bTurboOff=true;this.Set_TurboStatus=function(ji_b)
{this.jm_bTurboZero=false;this.jm_bTurboBasic=false;this.jm_bTurboAuto=false;this.jm_bTurboOff=false;this.Get_Storage(jg_oe.jc_oStorage.jc_FLY).Enable(true);this.Get_Storage(jg_oe.jc_oStorage.jc_SS).Enable(false);this.Get_Storage(jg_oe.jc_oStorage.jc_LS).Enable(false);this.Get_Storage(jg_oe.jc_oStorage.jc_IDB).Enable(false);if(ji_b==true)
{if(this.Get_Storage(jg_oe.jc_oStorage.jc_IDB).Available())
{this.jm_bTurboZero=true;this.Get_Storage(jg_oe.jc_oStorage.jc_IDB).Enable(true);this.jm_StorageTypeDefault=jg_oe.jc_oStorage.jc_IDB;return true;}
if(this.Get_Storage(jg_oe.jc_oStorage.jc_LS).Available())
{this.jm_bTurboBasic=true;this.Get_Storage(jg_oe.jc_oStorage.jc_LS).Enable(true);this.jm_StorageTypeDefault=jg_oe.jc_oStorage.jc_LS;return true;}}
if(this.Get_Storage(jg_oe.jc_oStorage.jc_SS).Available())
{this.jm_bTurboAuto=true;this.Get_Storage(jg_oe.jc_oStorage.jc_SS).Enable(true);this.jm_StorageTypeDefault=jg_oe.jc_oStorage.jc_SS;return true;}
this.jm_bTurboOff=true;this.jm_StorageTypeDefault=jg_oe.jc_oStorage.jc_FLY;return!ji_b;};this.IsTurboON=function(){return this.jm_bTurboZero||this.jm_bTurboBasic;};this.IsTurboAvailable=function()
{if(this.Get_Storage(jg_oe.jc_oStorage.jc_IDB).Available())
return true;if(this.Get_Storage(jg_oe.jc_oStorage.jc_LS).Available())
return true;return false;};this.Get_TurboString=function()
{var jr_s="";if(this.jm_bTurboZero)
jr_s+="ON,T0";else if(this.jm_bTurboBasic)
jr_s+="ON,TL";else if(this.jm_bTurboAuto)
jr_s+="OFF,TS";else if(this.jm_bTurboOff)
jr_s+="OFF,TF";else
jr_s+="OFF,TF";return jr_s;};this.Get_TurboDescr=function()
{var jr_s="";if(this.jm_bTurboZero)
jr_s+="activo por -=IndexedDB=-";else if(this.jm_bTurboBasic)
jr_s+="limitado por -=Local-Storage=-";else if(this.jm_bTurboAuto)
jr_s+="automÃ¡tico limitado por -=Session-Storage=-";else if(this.jm_bTurboOff)
jr_s+="apagado (navegador en modo privado y/o -=DOM-Storage=- apagado)";else
jr_s+="apagado";return jr_s;};this.jm_oAjax2=new A3xaAjax2();this.jm_StorageTypeDefault=null;this.jm_aoStorage=new Array();this.Set_Storage=function(ji_oStorage)
{if(!ji_oStorage)
return false;this.jm_aoStorage[ji_oStorage.Get_Type()||0]=ji_oStorage;};this.Get_Storage=function(ji_Type)
{if(!this.jm_aoStorage)
return null;ji_Type=(ji_Type||0);if(ji_Type==jg_oe.jc_oStorage.jc_Default)
ji_Type=this.jm_StorageTypeDefault;return this.jm_aoStorage[ji_Type]||null;};this.ClearStorage=function()
{this.Get_Storage(jg_oe.jc_oStorage.jc_FLY).Clear();this.Get_Storage(jg_oe.jc_oStorage.jc_SS).Clear();this.Get_Storage(jg_oe.jc_oStorage.jc_LS).Clear();if(this.IsTurboON())
this.Get_Storage(jg_oe.jc_oStorage.jc_IDB).Clear();return true;};this.jm_odb=null;this.Set_Database=function(ji_odb){this.jm_odb=ji_odb;return true;};this.Get_Database=function(){return this.jm_odb;};this.jm_oHostReporter=null;this.Set_Reporter=function(ji_oHostReporter)
{this.jm_oHostReporter=ji_oHostReporter;return true;};this.Get_Reporter=function(){return this.jm_oHostReporter;};this.jm_oheSet=null;this.Get_HtmlSetEntity=function(){return this.jm_oheSet;};this.Set_HtmlSetEntity=function(ji_oheSet){this.jm_oheSet=ji_oheSet;return true;};this.AbortHttpRequests=function()
{var jt_o3xAppWindow=new A3xaAppWindow();jt_o3xAppWindow.Stop();return true;};this.HideLeftPanel=function()
{var qt_navLeftPanel=jQuery("#nav");if(qt_navLeftPanel&&qt_navLeftPanel.length)
{qt_navLeftPanel.hide();return true;}
return false;};this.ShowPageHeader=function(ji_bShow)
{var qt_oc=jQuery("#contentarea");var qt_oh=jQuery("#header");if(qt_oh&&qt_oh.length&&qt_oc&&qt_oc.length)
{if(ji_bShow)
{qt_oh.css({"visibility":"","position":"","top":"","left":"","height":""});qt_oh.show();qt_oc.css({"position":"","top":"","left":""});}
else
{qt_oh.css({"visibility":"hidden","position":"absolute","top":"0","left":"0","height":"0px"});qt_oh.hide();qt_oc.css({"position":"absolute","top":"0","left":"0"});}
return true;}
return false;};this.AppendPageBreadCrumbs=function(ji_IdHtmlItem,ji_IdHtmlHook)
{if(!ji_IdHtmlItem)
return false;var qt_ohitem=jQuery("#"+ji_IdHtmlItem);if(!(qt_ohitem&&qt_ohitem.length))
return false;var qt_obc=jQuery("#breadcrumbs");if(!(qt_obc&&qt_obc.length))
return false;var qt_ohook=null;if(ji_IdHtmlHook)
{qt_ohook=jQuery("#"+ji_IdHtmlHook);if(!(qt_ohook&&qt_ohook.length))
return false;}
qt_ohitem.detach();if(qt_ohook&&qt_ohook.length)
qt_ohook.append(qt_ohitem);else
qt_obc.append(qt_ohitem);return true;};this.Get_Lang=function(){return this.jm_sLang;};}
function A3xaMathFloor(ji_v,ji_d)
{if(!ji_d)
return Math.floor(Number(ji_v));if(ji_v>=1)
return Math.floor((Number(0.000001)+Number(ji_v))/Number(ji_d));return Math.floor((Number(ji_v)*Number(1.000001))/Number(ji_d));}
function EmailAntispam_Write(ji_Id,ji_email)
{document.getElementById(ji_Id).setAttribute('href',EmailAntispam_UrlLink(ji_email));}
function EmailAntispam_UrlLink(ji_email)
{return"mai"+"lto:"+ji_email.replace(/__nosp__/g,"").replace(/ba__at__/g,"@").replace(/__at2__/g,"@").replace(/__at__/g,"@").replace(/__dot__/g,".");}
function A3xaAppWindow()
{var jt_this=this;this.Stop=function()
{var jt_bIE=false;if(navigator.appName=="Microsoft Internet Explorer")
jt_bIE=true;if(!jt_bIE)
{try
{window.stop();}
catch(e)
{jt_bIE=true;}}
if(jt_bIE)
window.document.execCommand('Stop');return true;};this.Set_EHResize=function(ji_fnEventHandler)
{if(ji_fnEventHandler)
jQuery(window).resize(ji_fnEventHandler);else
jQuery(window).off("resize");return true;};}
function A3xaDateTime(ji_DateJS)
{this.jm_DateJS=(ji_DateJS||null);this.IsValid=function(){return this.jm_DateJS?true:false;};this.Get_Date=function()
{if(!this.IsValid())
return"";var jt_YYYY=this.jm_DateJS.getFullYear()+10000;var jt_MM=this.jm_DateJS.getMonth()+101;var jt_DD=this.jm_DateJS.getDate()+100;return jt_YYYY.toString().substr(1,4)+"-"+
jt_MM.toString().substr(1,2)+"-"+jt_DD.toString().substr(1,2);};this.Get_Time=function()
{if(!this.IsValid())
return"";var jt_hh=this.jm_DateJS.getHours()+100;var jt_mm=this.jm_DateJS.getMinutes()+100;var jt_ss=this.jm_DateJS.getSeconds()+100;return jt_hh.toString().substr(1,2)+":"+
jt_mm.toString().substr(1,2)+":"+jt_ss.toString().substr(1,2);};this.Get_DateTime=function(){return this.IsValid()?this.Get_Date()+" "+this.Get_Time():"";};this.Set_DateTime=function(ji_sDateTime)
{if(!(ji_sDateTime&&ji_sDateTime.length==19))
return false;if(!this.jm_DateJS)
this.jm_DateJS=new Date();var jt_YYYY=ji_sDateTime.substr(0,4);var jt_MM=ji_sDateTime.substr(5,2);var jt_DD=ji_sDateTime.substr(8,2);var jt_hh=ji_sDateTime.substr(11,2);var jt_mm=ji_sDateTime.substr(14,2);var jt_ss=ji_sDateTime.substr(17,2);jt_MM=Number(jt_MM)-1;this.jm_DateJS.setFullYear(jt_YYYY,jt_MM,jt_DD);this.jm_DateJS.setHours(jt_hh,jt_mm,jt_ss,0);return true;};this.Compare=function(ji_o3xDateTime)
{var jt_delta=this.jm_DateJS.getFullYear()-ji_o3xDateTime.jm_DateJS.getFullYear();if(jt_delta!=0)
return jt_delta<0?-1:1;jt_delta=this.jm_DateJS.getMonth()-ji_o3xDateTime.jm_DateJS.getMonth();if(jt_delta!=0)
return jt_delta<0?-1:1;jt_delta=this.jm_DateJS.getDate()-ji_o3xDateTime.jm_DateJS.getDate();if(jt_delta!=0)
return jt_delta<0?-1:1;jt_delta=this.jm_DateJS.getHours()-ji_o3xDateTime.jm_DateJS.getHours();if(jt_delta!=0)
return jt_delta<0?-1:1;jt_delta=this.jm_DateJS.getMinutes()-ji_o3xDateTime.jm_DateJS.getMinutes();if(jt_delta!=0)
return jt_delta<0?-1:1;jt_delta=this.jm_DateJS.getSeconds()-ji_o3xDateTime.jm_DateJS.getSeconds();if(jt_delta!=0)
return jt_delta<0?-1:1;return 0;};}
function A3xaAbsArray()
{this.Get_Count=function(){return 0;};this.Set_Item=function(ji_key,ji_value){return false;};this.Add_Item=function(ji_key,ji_value){return false;};this.Get_Item=function(ji_key){return null;};this.Get_Key=function(ji_ix){return null;};this.Get_Item_ByIndex=function(ji_ix){return null;};this.Find=function(ji_fnCheck){return null;};this.Sort=function(ji_fnCompare){return false;};}
function A3xaArray()
{A3xaAbsArray.call(this);var jt_this=this;this.jm_aa={};this.jm_ax=[];this.Get_Count=function()
{return this.jm_ax?this.jm_ax.length:0;};this.Set_Item=function(ji_key,ji_value)
{if(!ji_key)
return false;if(!ji_value)
return false;if(this.jm_aa&&this.jm_aa[ji_key])
{this.jm_aa[ji_key]=ji_value;return true;}
this.jm_aa[ji_key]=ji_value;this.jm_ax.push(ji_key);return true;};this.Add_Item=function(ji_key,ji_value)
{if(!ji_key)
return false;if(!ji_value)
return false;if(this.jm_aa&&this.jm_aa[ji_key])
return false;this.jm_aa[ji_key]=ji_value;this.jm_ax.push(ji_key);return true;};this.Get_Item=function(ji_key)
{if(!ji_key)
return null;return this.jm_aa[ji_key]||null;};this.Get_Key=function(ji_ix)
{if(!(this.jm_aa&&this.jm_ax))
return null;if(!(ji_ix>=0&&ji_ix<this.jm_ax.length))
return null;return this.jm_ax[ji_ix];};this.Get_Item_ByIndex=function(ji_ix)
{if(!(this.jm_aa&&this.jm_ax))
return null;if(!(ji_ix>=0&&ji_ix<this.jm_ax.length))
return null;return this.Get_Item(this.jm_ax[ji_ix]);};this.Find=function(ji_fnCheck)
{if(!ji_fnCheck)
return null;if(!(this.jm_aa&&this.jm_ax))
return null;var jt_count=this.Get_Count();for(var i=0;i<jt_count;i++)
{var jr_o=this.Get_Item(this.jm_ax[i]);if(!jr_o)
continue;if(ji_fnCheck(jr_o))
return jr_o;}
return null;};this.Sort=function(ji_fnCompare)
{if(!(this.jm_aa&&this.jm_ax))
return false;this.jm_ax.sort(function(ji_key_a,ji_key_b)
{if(!ji_fnCompare)
{if(ji_key_a<ji_key_b)
return-1;return 1;}
return ji_fnCompare(jt_this.jm_aa[ji_key_a]||null,jt_this.jm_aa[ji_key_b]||null);});return true;};}
function A3xaArrayIt(ji_o3xa)
{A3xaAbsArray.call(this);var jt_this=this;this.jm_o3xa=null;this.jm_ix=-1;this.jm_o3xf=null;this.A3xaConstruct=function(ji_o3xa)
{this.Set_3xArray(ji_o3xa);};this.Set_3xArray=function(ji_o3xa)
{this.jm_o3xa=(ji_o3xa||null);return this.Reset();};this.Get_Count=function()
{if(!this.jm_o3xa)
return 0;if(!this.jm_o3xf)
return this.jm_o3xa.Get_Count();return this.jm_o3xf.Get_Count();};this.Set_Item=function(ji_key,ji_value)
{if(!this.jm_o3xa)
return false;if(!this.jm_o3xf)
return this.jm_o3xa.Set_Item(ji_key,ji_value);return this.jm_o3xa.Set_Item(ji_key,ji_value);};this.Add_Item=function(ji_key,ji_value)
{if(!this.jm_o3xa)
return false;if(!this.jm_o3xf)
return this.jm_o3xa.Add_Item(ji_key,ji_value);return this.jm_o3xa.Add_Item(ji_key,ji_value);};this.Get_Item=function(ji_key)
{if(!this.jm_o3xa)
return null;if(!this.jm_o3xf)
return this.jm_o3xa.Get_Item(ji_key);if(this.jm_o3xf.Get_Item(ji_key))
return this.jm_o3xa.Get_Item(ji_key);return null;};this.Get_Key=function(ji_ix)
{if(!this.jm_o3xa)
return null;if(!this.jm_o3xf)
return this.jm_o3xa.Get_Key(ji_ix);return this.jm_o3xf.Get_Key(ji_ix);};this.Get_Item_ByIndex=function(ji_ix)
{if(!this.jm_o3xa)
return null;if(!this.jm_o3xf)
return this.jm_o3xa.Get_Item_ByIndex(ji_ix);var jt_k=this.jm_o3xf.Get_Key(ji_ix);if(jt_k)
return this.jm_o3xa.Get_Item(jt_k);return null;};this.Find=function(ji_fnCheck)
{if(!this.jm_o3xa)
return null;if(!this.jm_o3xf)
return this.jm_o3xa.Find(ji_fnCheck);var jt_c=this.jm_o3xf.Get_Count();if(!(jt_c>0))
return null;for(var ix=0;ix<jt_c;ix++)
{var jr_v=this.jm_o3xa.Get_Item(this.jm_o3xf.Get_Key(ix));if(jr_v&&ji_fnCheck(jr_v))
return jr_v;}
return null;};this.Sort=function(ji_fnCompare)
{if(!this.jm_o3xa)
return false;if(!this.jm_o3xf)
return this.jm_o3xa.Sort(ji_fnCompare);this.jm_o3xf.jm_ax.sort(function(ji_key_a,ji_key_b)
{if(!ji_fnCompare)
{if(ji_key_a<ji_key_b)
return-1;return 1;}
return ji_fnCompare(jt_this.jm_o3xa.Get_Item(ji_key_a),jt_this.jm_o3xa.Get_Item(ji_key_b));});return true;};this.SelectItems=function(ji_fnSelect,ji_MaxItems)
{this.jm_o3xf=null;if(!ji_fnSelect)
return true;var jt_c=(this.jm_o3xa?this.jm_o3xa.Get_Count():0);if(!(jt_c>0))
return true;this.jm_o3xf=new A3xaArray();var ixadd=0;for(var ix=0;ix<jt_c;ix++)
{if(ji_MaxItems>0&&ixadd>=ji_MaxItems)
break;var jt_k=this.jm_o3xa.Get_Key(ix);var jt_v=this.jm_o3xa.Get_Item(jt_k);if(jt_k&&jt_v&&ji_fnSelect(jt_k,jt_v)===1)
{this.jm_o3xf.Add_Item(jt_k,true);ixadd++;}}
return true;};this.Get_Index=function(){return this.jm_ix;};this.Reset=function()
{this.jm_ix=-1;if(this.Get_Count()>0)
this.jm_ix=0;return true;};this.Get_CurrentKey=function()
{if(this.IsEOF())
return null;return this.Get_Key(this.jm_ix);};this.Get_CurrentItem=function()
{var jt_k=this.Get_CurrentKey();if(!jt_k)
return null;return this.Get_Item(jt_k);};this.Next=function()
{if(this.IsEOF())
return false;this.jm_ix++;return!this.IsEOF();};this.IsEOF=function()
{var jt_c=this.Get_Count();if(this.jm_ix<0||this.jm_ix>=jt_c)
return true;return false;};this.A3xaConstruct(ji_o3xa);}
function A3xaString(ji_as)
{var jt_this=this;this.jm_as=["","","",""];this.Set_LString=function(ji_lang,ji_s)
{if(ji_lang=="es")
this.jm_as[1]=(ji_s||"");else if(ji_lang=="pt")
this.jm_as[2]=(ji_s||"");else if(ji_lang=="it")
this.jm_as[3]=(ji_s||"");else if(ji_lang=="en")
this.jm_as[0]=(ji_s||"");else
this.jm_as[0]=(ji_s||"");return true;};this.Set_IString=function(ji_id,ji_s)
{if(ji_id==2)
this.jm_as[1]=(ji_s||"");else if(ji_id==3)
this.jm_as[2]=(ji_s||"");else if(ji_id==4)
this.jm_as[3]=(ji_s||"");else if(ji_id==1)
this.jm_as[0]=(ji_s||"");else
this.jm_as[0]=(ji_s||"");return true;};this.Set_MString=function(ji_sen,ji_ses,ji_spt,ji_sit)
{this.jm_as[0]=ji_sen;this.jm_as[1]=ji_ses;this.jm_as[2]=ji_spt;this.jm_as[3]=ji_sit;return true;};this.Set_AString=function(ji_as)
{for(var i=0;i<this.jm_as.length;i++)
this.jm_as[i]="";if(!ji_as)
return true;for(i=0;i<ji_as.length;i++)
this.jm_as[i]=(ji_as[i]||"");return true;};this.Get_AString=function(){return this.jm_as;};this.Get_LString=function(ji_lang)
{if(!ji_lang)
ji_lang=jg_oe.Get_Lang();if(ji_lang=="es")
return this.jm_as[1];else if(ji_lang=="pt")
return this.jm_as[2];else if(ji_lang=="it")
return this.jm_as[3];else if(ji_lang=="en")
return this.jm_as[0];return this.jm_as[0];};this.CopyFrom=function(ji_o3xs)
{if(!ji_o3xs)
return false;return this.Set_AString(ji_o3xs.Get_AString());};this.Set_AString(ji_as);}
function A3xaToString(ji_v){return ji_v?ji_v:"";}
function A3xaUrl(ji_sUrlBase,ji_sUrlParams)
{this.IsValid=A3xaUrl_IsValid;this.CopyFrom=A3xaUrl_CopyFrom;this.Get_Url=A3xaUrl_Get_Url;this.Set_UrlBase=A3xaUrl_Set_UrlBase;this.Get_UrlBase=A3xaUrl_Get_UrlBase;this.Set_UrlParams=A3xaUrl_Set_UrlParams;this.Get_UrlParams=A3xaUrl_Get_UrlParams;this.Get_UrlParams_Array=A3xaUrl_Get_UrlParams_Array;this.Set_UrlParams_Array=A3xaUrl_Set_UrlParams_Array;this.Add_UrlParam2=A3xaUrl_Add_UrlParam2;this.Get_UrlParam=A3xaUrl_Get_UrlParam;this.Modify_UrlParam=A3xaUrl_Modify_UrlParam;this.Redirect=A3xaUrl_Redirect;this.History_ReplaceState=function(ji_sState,ji_sTitle)
{var jt_sUrl=this.Get_Url();if(!jt_sUrl)
return true;window.history.replaceState(ji_sState?ji_sState:{foo:'bar'},ji_sTitle?ji_sTitle:"A3xaPage",jt_sUrl);return true;};this.jm_sUrlBase=ji_sUrlBase;if(ji_sUrlParams&&ji_sUrlParams.charAt(0)!="&")
this.jm_sUrlParams="&"+ji_sUrlParams;else
this.jm_sUrlParams=ji_sUrlParams;}
function A3xaUrl_IsValid(){return!(!this.jm_sUrlBase);}
function A3xaUrl_CopyFrom(ji_o)
{if(!ji_o)
return false;this.jm_sUrlBase=ji_o.Get_UrlBase();this.jm_sUrlParams=ji_o.Get_UrlParams();return true;}
function A3xaUrl_Get_Url()
{if(!this.IsValid())
return"";var jt_sup=(this.jm_sUrlParams?this.jm_sUrlParams:"");if(!jt_sup)
return this.jm_sUrlBase;if(this.jm_sUrlBase.slice(-1)=="?"&&jt_sup.slice(0,1)=="&")
return this.jm_sUrlBase+jt_sup.slice(1);return this.jm_sUrlBase+jt_sup;}
function A3xaUrl_Set_UrlBase(ji_s){this.jm_sUrlBase=ji_s;}
function A3xaUrl_Get_UrlBase(){return this.jm_sUrlBase;}
function A3xaUrl_Set_UrlParams(ji_sUrlParams){this.jm_sUrlParams=ji_sUrlParams;}
function A3xaUrl_Get_UrlParams(){return this.jm_sUrlParams;}
function A3xaUrl_Get_UrlParams_Array()
{if(this.jm_sUrlParams==null)
return null;var jt_aUrlParamsDirty=this.jm_sUrlParams.replace(/&amp;/g,"&").replace(/&equals;/g,"=").split("&");if(jt_aUrlParamsDirty==null)
return null;var jr_aUrlParams=new Array();for(var i=0;i<jt_aUrlParamsDirty.length;i++)
{if(jt_aUrlParamsDirty[i]==null||jt_aUrlParamsDirty[i]=="")
continue;var jt_aNV=jt_aUrlParamsDirty[i].split("=");if(jt_aNV==null||(!jt_aNV.length)||jt_aNV[0]=="")
continue;if(jt_aNV.length<2)
jt_aNV.push("");jr_aUrlParams.push(jt_aNV);}
return jr_aUrlParams;}
function A3xaUrl_Set_UrlParams_Array(ji_aUrlParams)
{if(ji_aUrlParams==null)
{this.jm_sUrlParams=null;return true;}
var jt_sUrlParams="";for(var i=0;i<ji_aUrlParams.length;i++)
{var jt_aup=ji_aUrlParams[i];if(jt_aup[0])
{jt_sUrlParams+="&"+jt_aup[0]+"="+jt_aup[1];}}
this.jm_sUrlParams=jt_sUrlParams;return true;}
function A3xaUrl_Add_UrlParam2(ji_sUrlParamName,ji_sUrlParamValue,ji_bEscape)
{if(!ji_sUrlParamName)
return false;if(ji_bEscape==true&&typeof(ji_sUrlParamValue)=="string")
ji_sUrlParamValue=ji_sUrlParamValue.replace(/=/g,"__equ__");if(this.jm_sUrlParams==null)
this.jm_sUrlParams="";this.jm_sUrlParams+="&"+ji_sUrlParamName+"="+ji_sUrlParamValue;return true;}
function A3xaUrl_Get_UrlParam(ji_sUrlParamName)
{if(!ji_sUrlParamName)
return null;var jt_aUrlParams=this.Get_UrlParams_Array();if(!jt_aUrlParams)
return null;for(var i=0;i<jt_aUrlParams.length;i++)
{if(ji_sUrlParamName==jt_aUrlParams[i][0])
return jt_aUrlParams[i][1];}
return null;}
function A3xaUrl_Modify_UrlParam(ji_sUrlParamName,ji_sUrlParamValue)
{if(!ji_sUrlParamName)
return false;var jt_sUrlParamValueEscaped=ji_sUrlParamValue.replace(/=/g,"__equ__");var jt_aUrlParams=this.Get_UrlParams_Array();if(!jt_aUrlParams)
return false;var jt_aUrlParamsModified=new Array();for(var i=0;i<jt_aUrlParams.length;i++)
{var jt_aup=jt_aUrlParams[i];if(ji_sUrlParamName==jt_aup[0])
{var jt_aupm=new Array(jt_aup[0],jt_sUrlParamValueEscaped);jt_aUrlParamsModified.push(jt_aupm);}
else
jt_aUrlParamsModified.push(jt_aup);}
return this.Set_UrlParams_Array(jt_aUrlParamsModified);}
function A3xaUrl_Redirect()
{var jt_sUrl=this.Get_Url();if(!jt_sUrl)
return true;window.location.href=jt_sUrl;return true;}
function A3xaHtmlItem2(ji_FullName)
{this.jm_htmlItem=null;this.jm_FullName=ji_FullName;this.Get_FullName=function(){return this.jm_FullName;};this.IsValid=function()
{if(!this.jm_htmlItem)
{if(this.jm_FullName)
{this.jm_htmlItem=document.getElementById(this.jm_FullName);}}
return this.jm_htmlItem!=null;};this.IsVisible=function()
{if(!this.IsValid())
return false;return!(this.jm_htmlItem.style.visibility=="hidden");};this.Set_BkgndPosition=function(ji_right,ji_top)
{var jt_htmlItem=document.getElementById(this.jm_FullName);if(jt_htmlItem)
{jt_htmlItem.style.backgroundPosition=ji_right+"px "+ji_top+"px";}
return true;};this.Set_BkgndPosition2=function(ji_opos)
{if(!ji_opos)
return false;var jt_htmlItem=document.getElementById(this.jm_FullName);if(jt_htmlItem)
{jt_htmlItem.style.backgroundPosition=ji_opos.x+"px "+ji_opos.y+"px";}
return true;};this.Set_Src=function(ji_Src)
{var jt_htmlItem=document.getElementById(this.jm_FullName);if(jt_htmlItem)
{jt_htmlItem.src=ji_Src;}
return true;};this.Show=function(ji_bShow)
{if(!this.IsValid())
return false;if(ji_bShow==true)
{this.jm_htmlItem.style.visibility="inherit";this.jm_htmlItem.style.position="relative";this.jm_htmlItem.style.left="none";this.jm_htmlItem.style.top="none";}
else
{this.jm_htmlItem.style.visibility="hidden";this.jm_htmlItem.style.position="absolute";this.jm_htmlItem.style.left="0px";this.jm_htmlItem.style.top="0px";}
return true;};}
function A3xaHtmItemInfo(ji_sUrlImg,ji_sHtmId,ji_ItemId)
{this.jm_sUrlImg=(ji_sUrlImg||"");this.jm_sHtmId=(ji_sHtmId||"");this.jm_ItemId=(ji_ItemId||null);this.jm_width=null;this.jm_height=null;this.jm_sTitle="";this.jm_sAlt="";this.jm_sUrlLink="";this.jm_bTargetNew=false;this.jm_bShadow=false;this.jm_bParagraph=false;this.jm_BkgndColor=null;this.jm_bRepeatH=null;this.jm_bRepeatW=null;this._A3xaHtmItemInfo=function()
{};this.Set_Image=function(ji_sUrlImg,ji_sHtmId,ji_ItemId)
{return this._A3xaHtmItemInfo_Set_Image(ji_sUrlImg,ji_sHtmId,ji_ItemId);};this._A3xaHtmItemInfo_Set_Image=function(ji_sUrlImg,ji_sHtmId,ji_ItemId)
{this.jm_sUrlImg=(ji_sUrlImg||"");this.jm_sHtmId=(ji_sHtmId||"");this.jm_ItemId=(ji_ItemId||null);return true;};this.Set_Dim=function(ji_width,ji_height,ji_bNotNull)
{if(!ji_bNotNull||(ji_width||ji_width===0))
this.jm_width=(ji_width||null);if(!ji_bNotNull||(ji_height||ji_height===0))
this.jm_height=(ji_height||null);return true;};this.Set_Title=function(ji_sTitle,ji_sAlt)
{this.jm_sTitle=(ji_sTitle||"");this.jm_sAlt=(ji_sAlt||ji_sTitle);return true;};this.Set_UrlLink=function(ji_sUrlLink,ji_bTargetNew)
{this.jm_sUrlLink=(ji_sUrlLink||"");if(ji_bTargetNew===true)
this.jm_bTargetNew=true;else if(ji_bTargetNew===false)
this.jm_bTargetNew=false
return true;};this.Set_Options=function(ji_bShadow,ji_bParagraph,ji_BkgndColor,ji_bRepeatH,ji_bRepeatW)
{if(ji_bShadow===true)
this.jm_bShadow=true;else if(ji_bShadow===false)
this.jm_bShadow=false;if(ji_bParagraph===true)
this.jm_bParagraph=true;else if(ji_bParagraph===false)
this.jm_bParagraph=false;if(ji_BkgndColor!=null)
this.jm_BkgndColor=ji_BkgndColor;if(ji_bRepeatH===true)
this.jm_bRepeatH=true;else if(ji_bRepeatH===false)
this.jm_bRepeatH=false;if(ji_bRepeatW===true)
this.jm_bRepeatW=true;else if(ji_bRepeatW===false)
this.jm_bRepeatW=false;return true;};this.Get_UrlImage=function(){return this.jm_sUrlImg;};this.Get_HtmId=function(){return this.jm_sHtmId;};this.Set_HtmId=function(ji_v){this.jm_sHtmId=(ji_v||null);return true;};this.Get_ItemId=function(){return this.jm_ItemId;};this.Get_Width=function(){return this.jm_width;};this.Get_Height=function(){return this.jm_height;};this.Get_Title=function(){return this.jm_sTitle;};this.Get_Alt=function(){return this.jm_sAlt;};this.Get_UrlLink=function(){return this.jm_sUrlLink;};this.IsTargetNew=function(){return this.jm_bTargetNew;};this.HasShadow=function(){return this.jm_bShadow;};this.HasParagraph=function(){return this.jm_bParagraph;};this.Get_BkgndColor=function(){return this.jm_BkgndColor;};this._A3xaHtmItemInfo();}
function A3xaStaticSpriteInfo()
{this.iddivisor=null;this.rows=null;this.cols=null;this.steprows=null;this.stepcols=null;this.height=null;this.width=null;this.path=null;}
function A3xaHtmIconInfo(ji_sUrlImg,ji_sHtmId,ji_ItemId,ji_oSpriteInfo)
{A3xaHtmItemInfo.call(this);this.jm_oSpriteInfo=(ji_oSpriteInfo||null);this.jm_sUrlImgTransparent=null;this.jm_SpriteRow=null;this.jm_SpriteColumn=null;this._A3xaHtmItemInfo=function()
{this.Set_ImageSprite(ji_sUrlImg,ji_sHtmId,ji_ItemId,ji_oSpriteInfo);};this.Set_ImageSprite=function(ji_sUrlImg,ji_sHtmId,ji_ItemId,ji_oSpriteInfo)
{if(!this._A3xaHtmItemInfo_Set_Image(ji_sUrlImg,ji_sHtmId,ji_ItemId))
return false;this.jm_oSpriteInfo=ji_oSpriteInfo;return this._InitSprite();}
this._InitSprite=function()
{if(!this.IsSprite())
return false;var jt_relcol=(this.Get_ItemId()%this.Get_SpriteInfo().iddivisor);var jt_block=A3xaMathFloor(this.Get_ItemId(),this.Get_SpriteInfo().iddivisor);var jt_col=jt_relcol;var jt_row=jt_block;if(jt_block>this.Get_SpriteInfo().rows)
{jt_row=((jt_block-1)%this.Get_SpriteInfo().rows)+1;jt_col=(A3xaMathFloor((jt_block-1),this.Get_SpriteInfo().rows)*this.Get_SpriteInfo().stepcols+jt_relcol);}
else
{}
this.jm_SpriteRow=jt_row;this.jm_SpriteColumn=jt_col;return true;};this.Set_ImageTransparent=function(ji_sUrlImg)
{this.jm_sUrlImgTransparent=(ji_sUrlImg||null);return true;};this.Get_UrlImageTransparent=function(){return this.jm_sUrlImgTransparent;};this.Get_SpriteInfo=function(){return this.jm_oSpriteInfo;};this.IsSprite=function()
{return this.Get_UrlImage()&&this.Get_ItemId()&&this.Get_SpriteInfo()&&this.Get_SpriteInfo().iddivisor;};this.Get_SpriteRow=function(){return this.jm_SpriteRow;};this.Get_SpriteColumn=function(){return this.jm_SpriteColumn;};this.Get_XHeight=function()
{var jr_h=this.Get_Height();if(jr_h)
return jr_h;return A3xaMathFloor(this.Get_SpriteInfo().height,this.Get_SpriteInfo().rows);};this.Get_XWidth=function()
{var jr_w=this.Get_Width();if(jr_w)
return jr_w;return A3xaMathFloor(this.Get_SpriteInfo().width,this.Get_SpriteInfo().cols);};this.Get_XDim=function(){return{w:this.Get_XWidth(),h:this.Get_XHeight()};};this.Get_XSpriteDim=function(ji_oxcelldim)
{if(!ji_oxcelldim)
ji_oxcelldim=this.Get_XDim();return{celldim:ji_oxcelldim,spw:ji_oxcelldim.w*this.Get_SpriteInfo().cols,sph:ji_oxcelldim.h*this.Get_SpriteInfo().rows};};this.Get_XPos=function(ji_rowOffset,ji_colOffset,ji_oxcelldim)
{var jt_row=this.Get_SpriteRow();var jt_col=this.Get_SpriteColumn();if(!(jt_row>0&&jt_col>0))
return null;if(ji_rowOffset>0)
jt_row+=ji_rowOffset;if(ji_colOffset>0)
jt_col+=ji_colOffset;if(!ji_oxcelldim)
ji_oxcelldim=this.Get_XDim();if(!(ji_oxcelldim.h&&ji_oxcelldim.w))
return null;return{celldim:ji_oxcelldim,x:(1-jt_col)*ji_oxcelldim.w,y:(1-jt_row)*ji_oxcelldim.h};};this.Get_XPos_String=function(ji_rowOffset,ji_colOffset,ji_oxcelldim)
{var jt_oxpos=this.Get_XPos(ji_rowOffset,ji_colOffset,ji_oxcelldim);if(!jt_oxpos)
return"";return jt_oxpos.x+"px "+jt_oxpos.y+"px";}
this.Get_StyleArray=function(ji_rowOffset,ji_colOffset)
{var jr_oCSS={};if(this.IsSprite())
{var jt_oxpos=this.Get_XPos(ji_rowOffset,ji_colOffset);if(!jt_oxpos)
return null;var jt_oxspdim=this.Get_XSpriteDim(jt_oxpos.celldim);jr_oCSS={"background-image":"url(\""+this.Get_UrlImage()+"\")","background-position":jt_oxpos.x+"px "+jt_oxpos.y+"px","background-repeat":this.jm_bRepeatH?"repeat-y":(this.jm_bRepeatW?"repeat-x":"no-repeat"),"background-size":jt_oxspdim.spw+"px "+jt_oxspdim.sph+"px"};return jr_oCSS;}
if(this.jm_bShadow)
jr_oCSS={"box-shadow":"1px 1px 0px #404040"};else
jr_oCSS=null;return jr_oCSS;};this.Get_StyleString=function(ji_rowOffset,ji_colOffset)
{var jr_s="";if(this.IsSprite())
{var jt_oxpos=this.Get_XPos(ji_rowOffset,ji_colOffset);if(!jt_oxpos)
return null;var jt_oxspdim=this.Get_XSpriteDim(jt_oxpos.celldim);jr_s=" background-image: url(\""+this.Get_UrlImage()+"\"); "+" background-position: "+jt_oxpos.x+"px "+jt_oxpos.y+"px; "+" background-repeat: "+
(this.jm_bRepeatH?"repeat-y; ":(this.jm_bRepeatW?"repeat-x; ":"no-repeat; "))+" background-size: "+jt_oxspdim.spw+"px "+jt_oxspdim.sph+"px; ";return jr_s;}
jr_s=(this.jm_bShadow?" box-shadow: 1px 1px 0px #404040; ":"");return jr_s;};this._A3xaHtmItemInfo();}
function A3pButtonStatus()
{this.dis=true;this.off=false;this.on=false;this.mover=false;this.mclick=false;}
function A3xaSimpleButton3(ji_o3xhIconInfo)
{var jt_this=this;this.jm_o3xhIconInfo=ji_o3xhIconInfo;this.jm_bTipPopup=false;this.jm_sSimplePopupPlugin=null;this.jm_fnSimplePopupPluginAlteration=null;this.jm_o3pbtnStatus=null;this.Get_HtmIconInfo=function(){return this.jm_o3xhIconInfo;};this.IsValid=function()
{return this.jm_o3xhIconInfo&&(this.jm_o3xhIconInfo.Get_UrlImage()||this.jm_o3xhIconInfo.Get_Title());};this.Set_Status=function(ji_o3pbtnStatus)
{this.jm_o3pbtnStatus=(ji_o3pbtnStatus||null);return true;};this.Set_Options=function(ji_bTipPopup,ji_sSimplePopupPlugin,ji_fnSimplePopupPluginAlteration)
{if(ji_bTipPopup==true)
this.jm_bTipPopup=true;if(ji_sSimplePopupPlugin&&ji_sSimplePopupPlugin.length)
this.jm_sSimplePopupPlugin=ji_sSimplePopupPlugin;if(ji_fnSimplePopupPluginAlteration)
this.jm_fnSimplePopupPluginAlteration=ji_fnSimplePopupPluginAlteration;return true;};this.BtnStatus2Offsets=function(ji_o3pbtnStatus)
{if(!ji_o3pbtnStatus)
return{};if(ji_o3pbtnStatus.dis)
return(ji_o3pbtnStatus.on?{row:3}:{});if(ji_o3pbtnStatus.off)
{if(ji_o3pbtnStatus.mclick)
return{row:2,col:2};if(ji_o3pbtnStatus.mover)
return{col:2};return{row:2};}
if(ji_o3pbtnStatus.on)
{if(ji_o3pbtnStatus.mclick)
return{row:4,col:2};if(ji_o3pbtnStatus.mover)
return{row:3,col:2};return{row:4};}
return{};};this.Get_Html=function()
{if(!this.IsValid())
return"";var jt_ooffsets=this.BtnStatus2Offsets(this.jm_o3pbtnStatus);var jt_shStyle=this.jm_o3xhIconInfo.Get_StyleString((jt_ooffsets&&jt_ooffsets.row)?jt_ooffsets.row-1:null,(jt_ooffsets&&jt_ooffsets.col)?jt_ooffsets.col-1:null);if(jt_shStyle)
jt_shStyle=" style='"+jt_shStyle+"' ";var jr_shImg="";if(!this.jm_o3xhIconInfo.Get_UrlImage())
{if(!this.jm_o3xhIconInfo.HasShadow())
jr_shImg=this.jm_o3xhIconInfo.Get_Alt();else
jr_shImg="<span style='color: #8080F0; text-shadow: 1px 1px 0px #000000;'>"+"<strong>"+this.jm_o3xhIconInfo.Get_Alt()+"</strong></span>";}
else
{if(this.jm_o3xhIconInfo.IsSprite())
{if(this.jm_o3xhIconInfo.Get_SpriteRow()>0&&this.jm_o3xhIconInfo.Get_SpriteColumn()>0)
{jr_shImg="<img src='"+this.jm_o3xhIconInfo.Get_UrlImageTransparent()+"' "+" width='"+this.jm_o3xhIconInfo.Get_Width()+"' "+" height='"+this.jm_o3xhIconInfo.Get_Height()+"' "+" alt='"+this.jm_o3xhIconInfo.Get_Alt()+"' "+" title='"+this.jm_o3xhIconInfo.Get_Title()+"' "+
jt_shStyle+"/>";}}
else
{jr_shImg="<img src='"+this.jm_o3xhIconInfo.Get_UrlImage()+"' "+" border='0' "+" width='"+this.jm_o3xhIconInfo.Get_Width()+"' "+" height='"+this.jm_o3xhIconInfo.Get_Height()+"' "+" alt='"+this.jm_o3xhIconInfo.Get_Alt()+"' "+" title='"+this.jm_o3xhIconInfo.Get_Title()+"' "+
jt_shStyle+"/>";}}
var jr_sh="";if(this.jm_sSimplePopupPlugin&&this.jm_sSimplePopupPlugin.length)
{jr_sh+=(this.jm_o3xhIconInfo.HasParagraph()?"<p>":"");jr_sh+="<a id='"+this.jm_o3xhIconInfo.Get_HtmId()+"' "+" href='#spu_"+this.jm_o3xhIconInfo.Get_HtmId()+"'"+" title='"+this.jm_o3xhIconInfo.Get_Title()+"'>"+jr_shImg+"</a>";jr_sh+=(this.jm_o3xhIconInfo.HasParagraph()?"</p>":"");jr_sh+="<div style='display: none;'><div id='spu_"+
this.jm_o3xhIconInfo.Get_HtmId()+"' class='spu_content'>";jr_sh+="</div></div>";return jr_sh;}
var jt_sul=this.jm_o3xhIconInfo.Get_UrlLink();if(this.jm_bTipPopup&&!jt_sul)
{jr_sh+=(this.jm_o3xhIconInfo.HasParagraph()?"<p>":"");jr_sh+="<a href='javascript: alert(&quot;"+this.jm_o3xhIconInfo.Get_Title()+"&quot;);'"+" title='"+this.jm_o3xhIconInfo.Get_Title()+"'>"+jr_shImg+"</a>";jr_sh+=(this.jm_o3xhIconInfo.HasParagraph()?"</p>":"");return jr_sh;}
if(!jt_sul)
{jr_sh+=(this.jm_o3xhIconInfo.HasParagraph()?"<p>":"");jr_sh+=jr_shImg;jr_sh+=(this.jm_o3xhIconInfo.HasParagraph()?"</p>":"");return jr_sh;}
jr_sh+=(this.jm_o3xhIconInfo.HasParagraph()?"<p>":"");jr_sh+="<a href='"+this.jm_o3xhIconInfo.Get_UrlLink()+"' "+" title='"+this.jm_o3xhIconInfo.Get_Title()+"'"+
(this.jm_o3xhIconInfo.IsTargetNew()?" target='_blank'":"")+">"+
jr_shImg+"</a>";jr_sh+=(this.jm_o3xhIconInfo.HasParagraph()?"</p>":"");return jr_sh;};this.PrintHtml=function(qi_oParent,ji_bPrepend)
{if(!(qi_oParent&&qi_oParent.length))
return false;var jt_sh=this.Get_Html();if(!(jt_sh&&jt_sh.length))
return false;if(ji_bPrepend)
qi_oParent.prepend(jt_sh);else
qi_oParent.append(jt_sh);if(this.jm_sSimplePopupPlugin&&this.jm_sSimplePopupPlugin.length)
{var qt_spuId='#spu_'+this.jm_o3xhIconInfo.Get_HtmId();var jt_spuContent=this.jm_sSimplePopupPlugin;var jt_fnSimplePopupPluginAlteration=this.jm_fnSimplePopupPluginAlteration;jQuery("#"+this.jm_o3xhIconInfo.Get_HtmId()).fancybox({'titlePosition':'inside','transitionIn':'elastic','transitionOut':'elastic','hideOnOverlayClick':false,'hideOnContentClick':false,'showCloseButton':true,'autoDimensions':true,'titleShow':true,'centerOnScroll':true,'onStart':function()
{qt_ospu=jQuery(qt_spuId);qt_ospuContent=qt_ospu.children().eq(0);if(!(qt_ospuContent&&qt_ospuContent.length))
{qt_ospu.append(jt_spuContent);qt_ospuContent=qt_ospu.children().eq(0);}
if(qt_ospuContent&&qt_ospuContent.length)
{if(jt_fnSimplePopupPluginAlteration)
jt_fnSimplePopupPluginAlteration(qt_ospuContent,qt_ospu);}}});}
return true;};}
function A3xaDDItem2(ji_sKey,ji_sValue,ji_asDescr)
{this.jm_TreeLevel=1;this.jm_bVisible=true;this.jm_bOnChange=true;this.jm_CountChildren=Number(0);this.jm_CountRestricted=Number(0);this.jm_Count=Number(0);this.jm_sKey=(ji_sKey||"");this.jm_sValue=(ji_sValue||"");this.jm_a3xsDescr=new A3xaString(ji_asDescr);this.jm_aoddiChildren=null;this.Get_Children=function(){return this.jm_aoddiChildren;};this.Remove_Children=function(){this.jm_aoddiChildren=null;return true;};this.IsRestricted=function()
{if(this.jm_CountRestricted>0)
return false;return true;};this.Get_CountChildren=function()
{return(this.jm_aoddiChildren?this.jm_aoddiChildren.Get_Count():0);};this.Add_Child=function(ji_oddi)
{if(!ji_oddi)
return false;ji_oddi.jm_TreeLevel=this.jm_TreeLevel+1;if(!this.jm_aoddiChildren)
this.jm_aoddiChildren=new A3xaArray();return this.jm_aoddiChildren.Add_Item(ji_oddi.Get_Key(),ji_oddi);};this.Get_Child=function(ji_key)
{if(!this.jm_aoddiChildren)
return null;return this.jm_aoddiChildren.Get_Item(ji_key);};this.Get_Child_ByIndex=function(ji_index)
{if(!this.jm_aoddiChildren)
return null;return this.jm_aoddiChildren.Get_Item_ByIndex(ji_index);};this.Get_ChildKey=function(ji_index)
{if(!this.jm_aoddiChildren)
return null;return this.jm_aoddiChildren.Get_Key(ji_index);};this.Sort_Children=function(ji_fnCompare,ji_bAllTreeRecursion)
{if(!this.jm_aoddiChildren)
return false;this.jm_aoddiChildren.Sort(ji_fnCompare);if(ji_bAllTreeRecursion)
{var jt_count=this.jm_aoddiChildren.Get_Count();for(var k=0;k<jt_count;k++)
this.jm_aoddiChildren.Get_Item_ByIndex(k).Sort_Children(ji_fnCompare,ji_bAllTreeRecursion);}
return true;};this.IsEmpty=function()
{if(this.Get_Key())
return false;return true;};this.IncrementCounters=function(ji_bRestricted)
{this.jm_Count+=Number(1);if(ji_bRestricted)
this.jm_CountRestricted+=Number(1);return true;};this.Get_Count=function(ji_bRestricted)
{if(!ji_bRestricted)
return Number(this.jm_Count);return Number(this.jm_CountRestricted);};this.Set_Key=function(ji_s)
{this.jm_sKey=(ji_s||"");return true;};this.Get_Key=function()
{return this.jm_sKey;};this.Get_Value=function(){return this.jm_sValue||"";};this.Set_Value=function(ji_s)
{this.jm_sValue=(ji_s||"");return true;};this.ValueMatch=function(ji_s)
{if(!ji_s)
return!this.jm_sValue;return this.jm_sValue==ji_s;};this.Set_ADescr=function(ji_as){return this.Get_3xsDescr().Set_AString(ji_as);};this.Get_LDescr=function(){return this.Get_3xsDescr().Get_LString();};this.Set_3xsDescr=function(ji_o3xs)
{this.jm_a3xsDescr=(ji_o3xs||new A3xaString());return true;};this.Get_3xsDescr=function(){return this.jm_a3xsDescr;};this.Set_DDValue=function(ji_sDD)
{if(!ji_sDD)
return false;var jt_aDD=ji_sDD.split("_;_");if(!(jt_aDD&&jt_aDD.length>=3))
return false;var jt_aDDParams=jt_aDD[0].split(",");if(!(jt_aDDParams&&jt_aDDParams.length>=4))
return false;if(!(jt_aDDParams[0]>0))
return false;this.jm_TreeLevel=jt_aDDParams[0];this.jm_bVisible=(jt_aDDParams[1]=="V");this.jm_bOnChange=(jt_aDDParams[2]=="E");this.jm_CountChildren=jt_aDDParams[3];this.jm_CountRestricted=jt_aDDParams[4];this.jm_Count=jt_aDDParams[5];this.Set_Key(jt_aDD[1]);this.Set_Value(jt_aDD[2]);return true;};this.Get_DDValue=function()
{var jr_s=this.jm_TreeLevel+","+
(this.jm_bVisible?"V":"")+","+
(this.jm_bOnChange?"E":"")+","+
this.Get_CountChildren()+","+
this.Get_Count(true)+","+this.Get_Count(false)+"_;_"+
(this.Get_Key()||"")+"_;_"+(this.Get_Value()||"");return jr_s;};this.Get_DDDescr=function(ji_bShowCount)
{var jr_s="";if(!(ji_bShowCount===false))
jr_s+=this.Get_Count(true)+" ("+this.Get_Count(false)+") ";if(this.jm_TreeLevel==1)
jr_s+=this.Get_LDescr().toUpperCase();else if(this.jm_TreeLevel==2)
jr_s+="---- "+this.Get_LDescr().toUpperCase()+" ----";else if(this.jm_TreeLevel>=3)
jr_s=".  "+jr_s+this.Get_LDescr();return jr_s;};this.FindDDItem=function(ji_oddi)
{if(!ji_oddi)
return null;if(ji_oddi.jm_TreeLevel==this.jm_TreeLevel)
{if(ji_oddi.Get_Key()==this.Get_Key())
return this;return null;}
if(ji_oddi.jm_TreeLevel>this.jm_TreeLevel)
{var jt_countChildren=this.Get_CountChildren();if(!(jt_countChildren>0))
return null;for(var i=0;i<jt_countChildren;i++)
{var jt_oddiChild=this.Get_Child_ByIndex(i);var jr_oddiFound=(jt_oddiChild?jt_oddiChild.FindDDItem(ji_oddi):null);if(jr_oddiFound)
return jr_oddiFound;}}
return null;};}
function A3xaDDItem(ji_sKey,ji_sValue,ji_sDescr)
{A3xaDDItem2.call(this,ji_sKey,ji_sValue,[ji_sDescr,ji_sDescr,ji_sDescr,ji_sDescr]);this.Set_Descr=function(ji_s){return this.Set_ADescr([ji_s,ji_s,ji_s,ji_s]);};this.Get_Descr=function(){return this.Get_LDescr();};}
function A3xaDDItem_Iterator(ji_oddi)
{this.jm_oddi=ji_oddi;this.jm_IndexChild=-1;this.jm_oddiitCurrent=null;this.IsEnd=function()
{if(this.jm_IndexChild<0)
return false;if(this.jm_IndexChild<this.jm_oddi.Get_CountChildren())
return false;return true;};this.Get_DDItem=function()
{if(this.jm_IndexChild<0)
return this.jm_oddi;if(!this.jm_oddiitCurrent)
return null;return this.jm_oddiitCurrent.Get_DDItem();};this.Next=function()
{if(this.IsEnd())
return false;if(this.jm_IndexChild<0)
this.jm_IndexChild=0;else
{if(this.jm_oddiitCurrent&&this.jm_oddiitCurrent.Next())
return true;this.jm_IndexChild++;}
this.jm_oddiitCurrent=null;if(this.jm_IndexChild>=this.jm_oddi.Get_CountChildren())
return false;var jt_oddiChild=this.jm_oddi.Get_Child_ByIndex(this.jm_IndexChild);jg_oe.CanLogInfo()&&jg_oe.LogInfo("Child.dddescr: "+
(jt_oddiChild?jt_oddiChild.Get_DDDescr():"null")+" at:"+this.jm_IndexChild,"","A3xaDDItem_Iterator.Next");this.jm_oddiitCurrent=new A3xaDDItem_Iterator(jt_oddiChild);return true;};}
function A3xaDDSelectBox(ji_oddiRoot,ji_sName,ji_asLabel)
{var jt_this=this;this.jm_oddiRoot=(ji_oddiRoot||null);this.jm_sName=(ji_sName||"");this.jm_o3xsLabel=new A3xaString(ji_asLabel);this.jm_sKeySelected=null;this.jm_sKeyGroupFocus=null;this.jm_bVisibleGroupFocus=false;this.jm_bShowCount=true;this.jm_bGrayRestricted=true;jg_oe.CanLogInfo()&&jg_oe.LogInfo("Label="+this.jm_o3xsLabel.Get_LString(),"","A3xaDDSelectBox");this.jm_aColors=[[["808080","808080"],["808080","808080"]],[["FFFFFF","B0B0B0"],["000000","202020"]],[["FFFFFF","C0C0C0"],["000000","202020"]],[["FFFFFF","E0E0E0"],["000000","404040"]]];this.Set_ColorsBGHL=function(ji_aRGB)
{if(!ji_aRGB)
return false;for(var i=0;i<ji_aRGB.length;i++)
this.jm_aColors[i+1][0][0]=ji_aRGB[i];return true;}
this.Get_Color=function(ji_TreeLevel,ji_Type,ji_bFont)
{if(!ji_TreeLevel)
ji_TreeLevel=0;if(ji_TreeLevel>3)
ji_TreeLevel=3;if(!(ji_Type>=0&&ji_Type<=1))
ji_Type=0;return this.jm_aColors[ji_TreeLevel][ji_bFont?1:0][ji_Type];};this.NewDDItem=function(){return new A3xaDDItem();};this.Get_DDItemUpdated=function(ji_oddiReference)
{if(!ji_oddiReference)
return null;if(!this.jm_oddiRoot)
return null;var jt_LevelReference=ji_oddiReference.jm_TreeLevel;var jt_KeyReference=ji_oddiReference.Get_Key();var jt_oddiit=new A3xaDDItem_Iterator(this.jm_oddiRoot);while(!jt_oddiit.IsEnd())
{var jt_oddiUpd=jt_oddiit.Get_DDItem();if(jt_oddiUpd&&jt_oddiUpd.jm_TreeLevel==jt_LevelReference&&jt_oddiUpd.Get_Key()==jt_KeyReference)
return jt_oddiUpd;jt_oddiit.Next();}
return null;};this.Add_ChildAndHtml=function(ji_oddiParent,ji_oddiChild,ji_bNoHtml)
{if(!ji_oddiChild)
return false;if(!ji_oddiChild.jm_bVisible)
return false;if(!ji_oddiParent)
return false;if(!this.jm_oddiRoot)
return false;if(!this.jm_sName)
return false;ji_oddiParent.Add_Child(ji_oddiChild);if(ji_bNoHtml)
return true;var qt_odd=jQuery("#"+this.jm_sName);if(!(qt_odd&&qt_odd.length))
return false;var jt_selected="";if(!this.jm_sKeySelected||this.jm_sKeySelected==ji_oddiChild.Get_Key())
jt_selected=" selected='selected'";var jt_style="background-color:#"+this.Get_Color(ji_oddiChild.jm_TreeLevel,0,false)+";";jt_shDDItem="<option value='"+ji_oddiChild.Get_DDValue()+"'"+jt_selected+" style='"+jt_style+"'>"+
ji_oddiChild.Get_DDDescr(this.jm_bShowCount)+"</option>";qt_odd.append(jt_shDDItem);return true;};this.PrintHtml=function(qi_oParent)
{if(!(qi_oParent&&qi_oParent.length))
return false;if(!this.jm_oddiRoot)
return false;if(!this.jm_sName)
return false;var jt_oddiit=new A3xaDDItem_Iterator(this.jm_oddiRoot);var jt_shDD="<div class='ccms_form_element cfdiv_select label_over'"+" id='"+this.jm_sName+"1_container_div' style=''>"+"<label>"+this.jm_o3xsLabel.Get_LString()+"</label>"+"<select size='1' class='' title=''"+" id='"+this.jm_sName+"' name='"+this.jm_sName+"'"+" style='width:180px;'>";var jt_selected=" selected='selected'";var jt_bSelected=false;var jt_style="background-color:#"+this.ColorHLRoot+";";var jt_idebug=0;while(!jt_oddiit.IsEnd())
{++jt_idebug;var jt_oddi=jt_oddiit.Get_DDItem();if(jt_oddi.jm_bVisible)
{if(jt_selected&&(!this.jm_sKeySelected||this.jm_sKeySelected==jt_oddi.Get_Key()))
jt_bSelected=true;jg_oe.CanLogInfo()&&jg_oe.LogInfo("Sel,Y/N,Selkey==key: "+jt_selected+","+(jt_bSelected?"Y":"N")+","+(this.jm_sKeySelected||"")+"=="+(jt_oddi?jt_oddi.Get_Key():"null"),"","A3xaDDSelectBox.PrintHtml");jg_oe.CanLogInfo()&&jg_oe.LogInfo("dddescr: "+(jt_oddi?jt_oddi.Get_DDDescr():"null")+" at:"+jt_idebug,"","A3xaDDSelectBox.PrintHtml");jt_style="background-color:#"+this.Get_Color(jt_oddi.jm_TreeLevel,0,false)+";";jt_shDD+="<option value='"+jt_oddi.Get_DDValue()+"'"+(jt_bSelected?jt_selected:"")+" style='"+jt_style+"'>"+
jt_oddi.Get_DDDescr(this.jm_bShowCount)+"</option>";if(jt_bSelected)
{jt_bSelected=false;jt_selected="";}}
jt_oddiit.Next();}
jt_shDD+="</select><div class='clear'></div>"+"<div id='error-message-"+this.jm_sName+"'></div></div>";qi_oParent.append(jt_shDD);var qt_odd=jQuery("#"+this.jm_sName);if(qt_odd&&qt_odd.length)
{qt_odd.change(function(){return jt_this.A3xaDDSelectBox_OnChange(qt_odd);});}
return true;};this.A3xaDDSelectBox_OnChange=function(qi_oddbox)
{var jt_oddi=null;var jt_eddbox=qi_oddbox.get(0);if(!jt_eddbox)
return true;jt_oddi=this.NewDDItem();var jt_selIndex=jt_eddbox.selectedIndex;var jt_selValue=jt_eddbox.options[jt_selIndex].value;jt_oddi.Set_DDValue(jt_selValue);if(!jt_oddi.jm_bOnChange)
return true;return this.OnChange(jt_eddbox,jt_oddi);};this.OnChange=function(ji_eddbox,ji_oddi){return true;};this.ClearAllOptions=function(ji_bClearData)
{if(!this.jm_oddiRoot)
return false;if(!this.jm_sName)
return false;var qt_aoptions=jQuery('#'+this.jm_sName+' option');if(!(qt_aoptions&&qt_aoptions.length))
return false;qt_aoptions.each(function()
{var jt_oddiToRemove=jt_this.NewDDItem();jt_oddiToRemove.Set_DDValue(this.value);if(jt_oddiToRemove.jm_TreeLevel>=2)
jQuery(this).remove();});if(ji_bClearData!==false&&this.jm_oddiRoot)
this.jm_oddiRoot.Remove_Children();return true;};this.Refresh=function()
{if(!this.jm_oddiRoot)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("pxx-1","","A3xaDDSelectBox.Refresh");return false;}
if(!this.jm_sName)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("pxx-2","","A3xaDDSelectBox.Refresh");return false;}
var jt_oddiit=new A3xaDDItem_Iterator(this.jm_oddiRoot);jg_oe.CanLogInfo()&&jg_oe.LogInfo("pxx1","","A3xaDDSelectBox.Refresh");var jt_this=this;var jt_bVisibleCurrentGroupFocus=true;if(this.jm_bVisibleGroupFocus)
jt_bVisibleCurrentGroupFocus=false;if(this.jm_bVisibleGroupFocus)
{jQuery('#'+this.jm_sName+' option').each(function()
{var jt_oddiOld=new A3xaDDItem();jt_oddiOld.Set_DDValue(this.value);if(jt_oddiOld.jm_TreeLevel>=3)
jQuery(this).remove();});jQuery('#'+this.jm_sName+' option').each(function()
{var jt_oddiOld=new A3xaDDItem();jt_oddiOld.Set_DDValue(this.value);if(jt_oddiOld.jm_TreeLevel==2)
{if(jt_oddiOld.Get_Key()==jt_this.jm_sKeyGroupFocus)
{var jt_oddiGroup=jt_this.jm_oddiRoot.Get_Child(jt_this.jm_sKeyGroupFocus);var jt_CountChildren=jt_oddiGroup.Get_CountChildren();for(var i=jt_CountChildren-1;i>=0;i--)
{var jt_oddiChild=jt_oddiGroup.Get_Child_ByIndex(i);jg_oe.CanLogInfo()&&jg_oe.LogInfo("+Focus items:"+jt_oddiChild.Get_DDValue()+";;;"+
jt_oddiChild.Get_DDDescr(),"","A3xaDDSelectBox.Refresh");jQuery(this).after(jQuery("<option></option>").val(jt_oddiChild.Get_DDValue()).text(jt_oddiChild.Get_DDDescr()).prop('selected',jt_this.jm_sKeySelected&&jt_this.jm_sKeySelected==jt_oddiChild.Get_Key()));}}}});}
jg_oe.CanLogInfo()&&jg_oe.LogInfo("pxx2","","A3xaDDSelectBox.Refresh");jQuery('#'+this.jm_sName+' option').each(function()
{var jt_value=this.value;var jt_text=this.text;jg_oe.CanLogInfo()&&jg_oe.LogInfo("pxx3","","A3xaDDSelectBox.Refresh");if(!jt_oddiit.IsEnd())
{var jt_oddiNew=null;var jt_bVisible=false;jg_oe.CanLogInfo()&&jg_oe.LogInfo("pxx4","","A3xaDDSelectBox.Refresh");while(!jt_bVisible)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("pxx5","","A3xaDDSelectBox.Refresh");jt_oddiNew=jt_oddiit.Get_DDItem();jt_bVisible=jt_oddiNew.jm_bVisible;if(jt_bVisible&&jt_this.jm_bVisibleGroupFocus)
{if(jt_oddiNew.jm_TreeLevel==2)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("GroupFocus key:"+jt_oddiNew.Get_Key()+"=="+
jt_this.jm_sKeyGroupFocus,"","A3xaDDSelectBox.Refresh");if(!jt_bVisibleCurrentGroupFocus)
{if(jt_oddiNew.Get_Key()==jt_this.jm_sKeyGroupFocus)
jt_bVisibleCurrentGroupFocus=true;}
else
{if(jt_oddiNew.Get_Key()!=jt_this.jm_sKeyGroupFocus)
jt_bVisibleCurrentGroupFocus=false;}}
else if(jt_oddiNew.jm_TreeLevel>=3)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Hide-Show key:"+jt_oddiNew.Get_Key()+":"+
(jt_bVisibleCurrentGroupFocus?"Show":"Hide"),"","A3xaDDSelectBox.Refresh");jt_bVisible=jt_bVisibleCurrentGroupFocus;}}
jg_oe.CanLogInfo()&&jg_oe.LogInfo("pxx6","","A3xaDDSelectBox.Refresh");if(!jt_bVisible)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("pxx7","","A3xaDDSelectBox.Refresh");jt_oddiit.Next();if(jt_oddiit.IsEnd())
return true;}}
var jt_oddiOld=new A3xaDDItem();jt_oddiOld.Set_DDValue(this.value);if(jt_oddiNew)
jg_oe.CanLogInfo()&&jg_oe.LogInfo("itemnew:l,k,dv,dd"+
jt_oddiNew.jm_TreeLevel+","+jt_oddiNew.Get_Key()+","+
jt_oddiNew.Get_DDValue()+","+jt_oddiNew.Get_DDDescr(),"","A3xaDDSelectBox.Refresh");jg_oe.CanLogInfo()&&jg_oe.LogInfo("itemold:l,k,dv,dd"+
jt_oddiOld.jm_TreeLevel+","+jt_oddiOld.Get_Key()+","+
jt_oddiOld.Get_DDValue()+","+jt_oddiOld.Get_DDDescr(),"","A3xaDDSelectBox.Refresh");var jt_boddiNewOK=false;if(jt_oddiNew&&jt_oddiNew.jm_TreeLevel==jt_oddiOld.jm_TreeLevel&&jt_oddiNew.Get_Key()==jt_oddiOld.Get_Key())
{jt_boddiNewOK=true;}
else
{jt_oddiNew=jt_this.jm_oddiRoot.FindDDItem(jt_oddiOld);if(jt_oddiNew)
jt_boddiNewOK=true;}
if(jt_boddiNewOK)
{var jt_ValueNew=jt_oddiNew.Get_DDValue();var jt_DescrNew=jt_oddiNew.Get_DDDescr(jt_this.jm_bShowCount);this.value=jt_ValueNew;this.text=jt_DescrNew;var qt_oItem=jQuery(this);if(jt_this.jm_bGrayRestricted&&jt_oddiNew.IsRestricted())
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("pxx8-Gray: "+jt_DescrNew,"","A3xaDDSelectBox.Refresh");qt_oItem.css({"background-color":"#"+jt_this.Get_Color(jt_oddiNew.jm_TreeLevel,1,false),"font-style":"italic","color":"#"+jt_this.Get_Color(jt_oddiNew.jm_TreeLevel,1,true)});if(jt_oddiNew.jm_TreeLevel==1)
{}}
else
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("pxx8-HL: "+jt_DescrNew,"","A3xaDDSelectBox.Refresh");qt_oItem.css({"background-color":"#"+jt_this.Get_Color(jt_oddiNew.jm_TreeLevel,0,false),"font-style":"normal","color":"#"+jt_this.Get_Color(jt_oddiNew.jm_TreeLevel,0,true)});}
qt_oItem.prop('selected',jt_this.jm_sKeySelected&&jt_this.jm_sKeySelected==jt_oddiNew.Get_Key());}
jt_oddiit.Next();}});jg_oe.CanLogInfo()&&jg_oe.LogInfo("pxx9","","A3xaDDSelectBox.Refresh");return true;};}
function A3xaAjaxResponse2(ji_responseXML,ji_sResponseText)
{this.IsValid=A3xaAjaxResponse2_IsValid;this.Get_ItemElement=A3xaAjaxResponse2_Get_ItemElement;this.Get_ItemValue=A3xaAjaxResponse2_Get_ItemValue;if(ji_responseXML==null)
{var jt_sResponseTextClean=null;if(ji_sResponseText!=null)
{jt_sResponseTextClean=ji_sResponseText.split("@#xmldata#@");}
if(jt_sResponseTextClean!=null&&jt_sResponseTextClean[1]!=null)
{var jt_xmlParser=new DOMParser();ji_responseXML=jt_xmlParser.parseFromString(jt_sResponseTextClean[1],"text/xml");}}
this.jm_responseXML=null;if(ji_responseXML&&ji_responseXML.documentElement)
this.jm_responseXML=ji_responseXML;}
function A3xaAjaxResponse2_IsValid()
{return this.jm_responseXML!=null&&this.jm_responseXML.documentElement;}
function A3xaAjaxResponse2_Get_ItemElement(ji_sItemName)
{if(!this.IsValid())
return null;if(!ji_sItemName)
return null;var jr_xmlElement=null;try
{jr_xmlElement=this.jm_responseXML.documentElement.getElementsByTagName(ji_sItemName);}
catch(e)
{jr_xmlElement=null;}
return jr_xmlElement;}
function A3xaAjaxResponse2_Get_ItemValue(ji_sItemName)
{var jt_xmlElement=this.Get_ItemElement(ji_sItemName);if(!jt_xmlElement)
return null;var jr_sItemValue=null;try
{var jt_curChild=jt_xmlElement.item(0).firstChild;var jt_lastChild=jt_xmlElement.item(0).lastChild;while(jt_curChild)
{if(jt_curChild.data&&jt_curChild.data.length)
{if(!jr_sItemValue)
jr_sItemValue=jt_curChild.data;else
jr_sItemValue+=jt_curChild.data;}
if(jt_curChild==jt_lastChild)
break;jt_curChild=jt_curChild.nextSibling;}}
catch(e)
{jr_sItemValue=null;}
return jr_sItemValue;}
function A3xaAjaxRequest2(ji_sUrlBase,ji_sUrlParams,ji_oListener)
{this.IsValid=A3xaAjaxRequest2_IsValid;this.GET=A3xaAjaxRequest2_GET;this.Get_UrlBase=A3xaAjaxRequest2_Get_UrlBase;this.Get_UrlParams=A3xaAjaxRequest2_Get_UrlParams;this.OnReadyFn=A3xaAjaxRequest2_OnReadyFn;this.jm_sUrlBase=ji_sUrlBase;this.jm_sUrlParams=ji_sUrlParams;this.jm_oListener=ji_oListener;}
function A3xaAjaxRequest2_IsValid()
{return this.jm_sUrlBase!=null;}
function A3xaAjaxRequest2_GET(ji_bUrlFull)
{var jr_s="";if(ji_bUrlFull==true)
jr_s=this.jm_sUrlBase;jr_s+=this.jm_sUrlParams;return jr_s;}
function A3xaAjaxRequest2_Get_UrlBase(){return this.jm_sUrlBase;}
function A3xaAjaxRequest2_Get_UrlParams(){return this.jm_sUrlParams;}
function A3xaAjaxRequest2_OnReadyFn(ji_ogAjaxResponse)
{if(this.jm_oListener)
return this.jm_oListener.OnAjaxReadyFn(ji_ogAjaxResponse);return false;}
function A3xaAjax2()
{this.QueueRequest=A3xaAjax2_QueueRequest;this.SendRequestQueued=A3xaAjax2_SendRequestQueued;this.SetTimeout=A3xaAjax2_SetTimeout;this.jm_aQueueRequest=new Array();this.jm_oAjaxRequestCurrent=null;this.jm_bBusy=false;this.jm_bTimeout=false;this.jm_oAjaXHR=null;this.jm_2ndTimer=null;this.jm_Id="a3xaajax2tag";}
function A3xaAjax2_QueueRequest(ji_oAjaxRequest2)
{if(ji_oAjaxRequest2==null)
return false;if(this.jm_aQueueRequest.length>3)
return false;this.jm_aQueueRequest.push(ji_oAjaxRequest2);return this.SendRequestQueued();}
function A3xaAjax2_SetTimeout()
{var jt_this=this;if(this.jm_oAjaXHR==null)
return false;this.jm_oAjaXHR.timeout=8000;this.jm_oAjaXHR.ontimeout=function()
{if(jt_this.jm_Id!="a3xaajax2tag")
return;jt_this.jm_bTimeout=true;clearTimeout(jt_this.jm_2ndTimer);alert("Ajax Timeout");};this.jm_2ndTimer=setTimeout(function()
{if(jt_this.jm_Id!="a3xaajax2tag")
return;jt_this.jm_oAjaXHR.abort();jt_this.jm_bTimeout=true;alert("Ajax 2nd Level Timeout");},10000);return true;}
function A3xaAjax2_SendRequestQueued()
{var jt_this=this;if(this.jm_aQueueRequest.length<=0)
return true;if(this.jm_bBusy&&!this.jm_bTimeout)
return true;this.jm_bTimeout=false;this.jm_bBusy=true;if(this.jm_oAjaXHR==null)
{try
{this.jm_oAjaXHR=new XMLHttpRequest();}
catch(e)
{this.jm_oAjaXHR=null;}
if(this.jm_oAjaXHR==null)
{this.jm_bBusy=false;alert("Can't connect to server:\n"+e.ToString());return false;}
else
{}}
var jt_oAjaxRequest=null;do
{jt_oAjaxRequest=this.jm_aQueueRequest.shift();if(jt_oAjaxRequest==null)
{this.jm_bBusy=false;return false;}}
while(jt_oAjaxRequest!=null&&(!jt_oAjaxRequest.IsValid()))
this.jm_oAjaxRequestCurrent=jt_oAjaxRequest;try
{var jt_bPost=true;var jt_sUrlBase=this.jm_oAjaxRequestCurrent.Get_UrlBase();var jt_sUrlParams=this.jm_oAjaxRequestCurrent.Get_UrlParams();this.jm_oAjaXHR.onreadystatechange=function()
{if(jt_this.jm_Id!="a3xaajax2tag")
return;if(jt_this.jm_oAjaXHR.readyState!=4)
return;var jt_oarc=jt_this.jm_oAjaxRequestCurrent;jt_this.jm_oAjaxRequestCurrent=null;clearTimeout(jt_this.jm_2ndTimer);jt_this.jm_bBusy=false;if(jt_this.jm_oAjaXHR.status==200)
{var jt_oxml=new A3xaAjaxResponse2(null,jt_this.jm_oAjaXHR.responseText);var jt_sA3xaDebug=jt_oxml.Get_ItemValue("A3xaDebug");jg_oe.CanLogInfo()&&jg_oe.LogInfo("jt_this.jm_oAjaXHR.responseText="+
jt_this.jm_oAjaXHR.responseText,"","A3xaAjax2_SendRequestQueued.onreadystatechange");if(jt_sA3xaDebug!=null);if(jt_oxml.IsValid()&&jt_oarc!=null)
jt_oarc.OnReadyFn(jt_oxml);}
jt_this.SendRequestQueued();};jg_oe.CanLogInfo()&&jg_oe.LogInfo("urlb,urlp: "+
jt_sUrlBase+","+jt_sUrlParams,"","A3xaAjax2_SendRequestQueued");if(jt_bPost)
{this.jm_oAjaXHR.open("POST",jt_sUrlBase,true);jt_sUrlParams="p_Post=y"+jt_sUrlParams;this.jm_oAjaXHR.setRequestHeader("Content-Type","application/x-www-form-urlencoded");}
else
this.jm_oAjaXHR.open("GET",jt_sUrlBase+jt_sUrlParams,true);this.SetTimeout();if(jt_bPost)
this.jm_oAjaXHR.send(jt_sUrlParams);else
this.jm_oAjaXHR.send(null);}
catch(e)
{this.jm_bBusy=false;alert("Can't connect to server:\n"+e.ToString());}
return true;}
function A3xaTaskManager(ji_fnOnChange)
{this.jm_oDTStatus=new GLDataStatus();this.jm_oDTStatus.jm_Status=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StReady;this.jm_oDTStatus.jm_fnOnChange=(ji_fnOnChange||null);this.jm_Semaph=0;this.jm_oTaskTimer=null;var jt_this=this;this._OnStart=function(){return true;};this._CheckStatus=function(){return null;};this._OnEnd=function(ji_oDTStatusEnd){return ji_oDTStatusEnd;};this.Reset=function()
{this.jm_oDTStatus.jm_Status=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StReady;return this._OnReset();};this._OnReset=function(){return true;};this.Start=function(ji_Operation,ji_Target)
{if(!this.IsReady())
return false;if(ji_Operation)
this.jm_oDTStatus.jm_Operation=ji_Operation;if(ji_Target)
this.jm_oDTStatus.jm_Target=ji_Target;this.jm_oDTStatus.jm_Status=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StOpen;this.jm_oTaskTimer=setTimeout(function()
{jt_this.jm_oTaskTimer=null;var jr_b=jt_this._OnStart();jt_this.Task();return jr_b;},10);};this.Release=function()
{this.jm_oDTStatus.jm_fnOnChange=null;jg_oe.CanLogInfo()&&jg_oe.LogInfo("","","A3xaTaskManager.Release");return this._OnRelease();};this._OnRelease=function(){return true;};this.Task=function()
{if(jt_this.jm_Semaph>0)
{if(jt_this.jm_oDTStatus.IsDone())
return true;if(jt_this.jm_Semaph>=2)
return true;jt_this.jm_Semaph++;return true;}
else
jt_this.jm_Semaph++;while(jt_this.jm_Semaph>0)
{jt_this.jm_Semaph--;jg_oe.CanLogInfo()&&jg_oe.LogInfo("Begin","","A3xaTaskManager.Task");var jt_oDTStatusNext=jt_this._CheckStatus();if(!jt_oDTStatusNext)
return true;jg_oe.CanLogInfo()&&jg_oe.LogInfo("DTSNext-Descr"+jt_oDTStatusNext.Get_Descr2(),"","A3xaTaskManager.Task");if(jt_oDTStatusNext.IsDone())
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("IsDone","","A3xaTaskManager.Task");jt_this.jm_oDTStatus.SetFrom(jt_this._OnEnd(jt_oDTStatusNext));this.Release();}}
return true;};this.IsReady=function(){return this.jm_oDTStatus.IsReady();};this.IsInProgress=function(){return this.jm_oDTStatus.IsInProgress();};this.IsOpening=function(){return this.jm_oDTStatus.IsOpen();};this.IsDone=function(){return this.jm_oDTStatus.IsDone();};this.IsFail=function(){return this.jm_oDTStatus.IsFail();};this.IsSuccess=function(){return this.jm_oDTStatus.IsSuccess();};this.IsEmpty=function(){return this.jm_oDTStatus.IsEmpty();};this.Get_Target=function(){return this.jm_oDTStatus.jm_Target;};this.Get_Operation=function(){return this.jm_oDTStatus.jm_Operation;};this.Get_Status=function(){return this.jm_oDTStatus.jm_Status;};}
function A3xaDefines_Storage()
{this.jc_Default=1;this.jc_FLY=2;this.jc_SS=3;this.jc_LS=4;this.jc_FS=5;this.jc_IDB=6;this.Get_Descr=function(ji_StorageType)
{if(ji_StorageType==this.jc_Default)
return"Default Storage";if(ji_StorageType==this.jc_FLY)
return"FLY Storage";if(ji_StorageType==this.jc_SS)
return"Session Storage";if(ji_StorageType==this.jc_LS)
return"Local Storage";if(ji_StorageType==this.jc_IDB)
return"IDB Storage";return"Unknown Storage";};}
function A3xaDefines_A3xaDbZero()
{this.jc_GLSep_Block="__glk__";this.jc_GLSep_Header="__glv__";this.jc_GLSep_Field="__glf__";this.jc_GLSep_FieldArray="__glr__";this.jc_GLSep_Compact="~";this.jc_GLMID_DT="GLH";this.jc_GLMID_FieldNames="GLN";this.jc_GLMID_GT="GLG";this.jc_GLMID_AX="GLX";this.jc_GLMID_IX="GLI";this.jc_GLIDPREFIXLEN=3;this.jc_GLIDLEN=6;this.jc_GLIDMARKLEN=3;this.jc_GLID_All="ALLA3X";this.jc_GLIDMARKDEFAULT="A3X";this.jc_GLID_MetaSystemControl="RMKA3X";this.jc_GLID_Category="RMBA3X";this.jc_GLID_GeoArea="RGGA3X";this.jc_GLID_GeoRegion="RGRA3X";this.jc_GLID_GeoCity="RGCA3X";this.jc_GLID_GeoCountry="RGPA3X";this.jc_GLID_GeoState="RGSA3X";this.jc_GLID_Enterprise="REEA3X";this.jc_GLID_EnterprisePrefix="REE";this.jc_GLID_NMetaSystemControl="NMKA3X";this.jc_GLID_NCategory="NMBA3X";this.jc_GLID_NGeoArea="NGGA3X";this.jc_GLID_NGeoRegion="NGRA3X";this.jc_GLID_NGeoCity="NGCA3X";this.jc_GLID_NGeoCountry="NGPA3X";this.jc_GLID_NGeoState="NGSA3X";this.jc_GLID_NEnterprise="NEEA3X";this.jc_GLID_NEnterprisePrefix="NEE";this.XGlid2Mark=function(ji_s)
{if(!ji_s)
return"";if(ji_s.length!=this.jc_GLIDLEN+this.jc_GLIDMARKLEN)
return"";return ji_s.substr(this.jc_GLIDLEN+0,this.jc_GLIDMARKLEN);};this.XGlid2Glid=function(ji_s)
{if(!ji_s)
return"";if(ji_s.length==this.jc_GLIDLEN)
return ji_s;if(ji_s.length!=this.jc_GLIDLEN+this.jc_GLIDMARKLEN)
return"";return ji_s.substr(0,this.jc_GLIDLEN);};this.XGlid2Prefix_v2=function(ji_xglid)
{if(!ji_xglid)
return"";if(ji_xglid.length==this.jc_GLIDPREFIXLEN)
return ji_xglid;if(ji_xglid.length<this.jc_GLIDPREFIXLEN)
return"";return ji_xglid.substr(0,this.jc_GLIDPREFIXLEN);};this.XGlid2Mark_v2=function(ji_xglid)
{if(!ji_xglid)
return"";if(ji_xglid.length<this.jc_GLIDLEN)
return"";var jr_mark=ji_xglid.substr(this.jc_GLIDPREFIXLEN,this.jc_GLIDMARKLEN);return jr_mark;};this.CheckGlid=function(ji_s)
{if(!ji_s)
return false;if(ji_s.length!=this.jc_GLIDLEN)
return false;return true;};this.MakeGlid=function(ji_sPrefix,ji_sExtension)
{if(!ji_sPrefix)
return null;if(ji_sPrefix.length!=3)
return null;if(!ji_sExtension)
ji_sExtension="A3X";if(ji_sExtension.length!=3)
return null;return ji_sPrefix+ji_sExtension;};this.IsDefaultGlid=function(ji_s)
{if(!this.CheckGlid(ji_s))
return null;var jt_sExtension=ji_s.substr(this.jc_GLIDPREFIXLEN,this.jc_GLIDLEN-this.jc_GLIDPREFIXLEN);return jt_sExtension=="A3X";};this.Glid2Default=function(ji_s)
{if(!this.CheckGlid(ji_s))
return"";return this.MakeGlid(ji_s.substr(0,this.jc_GLIDPREFIXLEN));};this.jc_SubTable_EID=1;this.jc_SubTable_EBIS=2;this.jc_SubTable_EBID=4;this.jc_SubTable_EI=8;this.jc_sEifaName="glr_info";this.jc_Eifa_Typ=0;this.jc_Eifa_Cod=1;this.jc_Eifa_Id=2;this.jc_Eifa_IdParent=3;this.jc_Eifa_Info=4;this.jc_DTStatus2_StSuccess=1;this.jc_DTStatus2_StFail=4;this.jc_DTStatus2_StEmpty=5;this.jc_DTStatus2_StInProgress=6;this.jc_DTStatus2_StOpen=8;this.jc_DTStatus2_StReady=9;this.jc_DTStatus2_OpCache=10;this.jc_DTStatus2_OpClear=20;this.jc_DTStatus2_OpStore=30;this.jc_DTStatus2_OpLoad=40;this.jc_DTStatus2_TgTable=100;this.jc_DTStatus2_TgTableHeader=200;this.jc_DTStatus2_TgTableHX=300;this.jc_DTStatus2_TgRecord=400;this.jc_DTStatus2_TgCommonTable=1000;this.jc_DTStatus2_TgMainTable=2000;this.jc_DTStatus2_TgDependentTable=3000;this.jc_DTStatus2_TgExtTableHeader=4000;this.jc_DTStatus_Empty=0;this.jc_DTStatus_Cached=1;this.jc_DTStatus_CacheFail=4;this.jc_DTStatus_CacheInProgress=6;this.jc_DTStatus_Loaded=21;this.jc_DTStatus_LoadedRecord=22;this.jc_DTStatus_LoadedTable=23;this.jc_DTStatus_LoadFail=24;this.jc_DTStatus_LoadEmpty=25;this.jc_DTStatus_LoadRecordInProgress=26;this.jc_DTStatus_LoadTableInProgress=27;this.jc_DTStatus_LoadOpen=29;this.jc_DTStatus_Stored=31;this.jc_DTStatus_StoreFail=34;this.jc_DTStatus_StoreEmpty=35;this.jc_DTStatus_StoreInProgress=36;this.jc_DTStatus_StoreOpen=39;this.jc_DTStatus_Cleared=41;this.jc_DTStatus_ClearFail=44;this.jc_DTStatus_ClearInProgress=46;this.jc_DTStatus_ClearOpen=49;this.jc_DbVersion=33;this.jc_sDbDefaultPrimaryKeyName="xkey";this.jc_sDbName="A3xaDbZeroA";this.jc_aSchemaTables=[{jp_sName:this.jc_GLID_MetaSystemControl,jp_bTyp_Common:true,jp_bMandatory:true,jp_bCacheAll:true,jp_bAX:true,jp_sDescr:"ControlPanels"},{jp_sName:this.jc_GLID_Category,jp_bTyp_Common:true,jp_bMandatory:true,jp_bCacheAll:true,jp_bAX:true,jp_sDescr:"Categories"},{jp_sName:this.jc_GLID_GeoArea,jp_bTyp_Common:true,jp_bMandatory:true,jp_bCacheAll:true,jp_bAX:true,jp_sDescr:"Areas"},{jp_sName:this.jc_GLID_GeoRegion,jp_bTyp_Common:true,jp_bMandatory:true,jp_bCacheAll:true,jp_bAX:true,jp_sDescr:"Regions"},{jp_sName:this.jc_GLID_GeoCity,jp_bTyp_Common:true,jp_bMandatory:false,jp_bCacheAll:true,jp_bAX:true,jp_sDescr:"Cities"},{jp_sName:this.jc_GLID_GeoCountry,jp_bTyp_Common:true,jp_bMandatory:false,jp_bCacheAll:true,jp_bAX:true,jp_sDescr:"Countries"},{jp_sName:this.jc_GLID_GeoState,jp_bTyp_Common:true,jp_bMandatory:false,jp_bCacheAll:true,jp_bAX:true,jp_sDescr:"States"},{jp_sName:this.jc_GLID_NMetaSystemControl,jp_bTyp_Common:true,jp_bMandatory:true,jp_bCacheAll:true,jp_SubTable:this.jc_SubTable_EBID,jp_sParent:this.jc_GLID_MetaSystemControl,jp_sDescr:"ControlPanel Scores"},{jp_sName:this.jc_GLID_NCategory,jp_bTyp_Common:true,jp_bMandatory:true,jp_bCacheAll:true,jp_SubTable:this.jc_SubTable_EBID,jp_sParent:this.jc_GLID_Category,jp_sDescr:"Categories Scores"},{jp_sName:this.jc_GLID_NGeoArea,jp_bTyp_Common:true,jp_bMandatory:true,jp_bCacheAll:true,jp_SubTable:this.jc_SubTable_EBID,jp_sParent:this.jc_GLID_GeoArea,jp_sDescr:"Areas Scores"},{jp_sName:this.jc_GLID_NGeoRegion,jp_bTyp_Common:true,jp_bCacheAll:true,jp_SubTable:this.jc_SubTable_EBID,jp_sParent:this.jc_GLID_GeoRegion,jp_sDescr:"Regions Scores"},{jp_sName:this.jc_GLID_NGeoCity,jp_bTyp_Common:true,jp_bCacheAll:true,jp_SubTable:this.jc_SubTable_EBID,jp_sParent:this.jc_GLID_GeoCity,jp_sDescr:"Cities Scores"},{jp_sName:this.jc_GLID_NGeoCountry,jp_bTyp_Common:true,jp_bCacheAll:true,jp_SubTable:this.jc_SubTable_EBID,jp_sParent:this.jc_GLID_GeoCountry,jp_sDescr:"Countries Scores"},{jp_sName:this.jc_GLID_NGeoState,jp_bTyp_Common:true,jp_bCacheAll:true,jp_SubTable:this.jc_SubTable_EBID,jp_sParent:this.jc_GLID_GeoState,jp_sDescr:"States Scores"},{jp_sName:this.jc_GLID_Enterprise,jp_bTyp_Main:true,jp_bMandatory:true,jp_sDescr:"Enterprises"},{jp_sName:this.jc_GLID_NEnterprise,jp_bTyp_Main:true,jp_bMandatory:true,jp_SubTable:this.jc_SubTable_EBID,jp_sParent:this.jc_GLID_Enterprise,jp_sDescr:"Enterprises Scores"}];this.Init=function(jc_oStorage)
{for(var i=0;i<this.jc_aSchemaTables.length;i++)
{if(this.jc_aSchemaTables[i].jp_bTyp_Main)
{this.jc_aSchemaTables[i].jp_DefaultStorageType=jc_oStorage.jc_FLY;this.jc_aSchemaTables[i].jp_ExtendedStorageType=jc_oStorage.jc_Default;}
else
this.jc_aSchemaTables[i].jp_DefaultStorageType=jc_oStorage.jc_Default;}
return true;}}
function A3xaDefines_XUR()
{this.jc_sUrlBase_A3xaForm="a?";this.jc_XURFN_AjaxEntity="XE";this.jc_XURFN_ListEntity="LE";this.jc_XURFN_EditEntity="EE";this.jc_XURFN_ReloadEntity="RE";this.jc_XURFN_SubmitEntity="SE";this.jc_XURFN_EditEntityInfo="EI";this.jc_XURFN_ReloadEntityInfo="RI";this.jc_XURFN_SubmitEntityInfo="SI";this.jc_sAjaxTypFans="XEF";this.jc_sAjaxTypControlIcons="XCI";this.jc_sAjaxTypEntity="XEN";this.jc_sAjaxTypEntitySet="XES";this.jc_AjaxOp_Write="AWR";this.jc_AjaxOp_WriteDelta="AWD";this.jc_QUR_QuerySBS="S";this.jc_QUR_QuerySBT="T";this.jc_QUR_QuerySBC="C";this.jc_QUR_QuerySBA="A";this.jc_QUR_QuerySBL="L";this.jc_QUR_QueryNewEntity="N";this.jc_QUR_QueryEditEntity="E";this.jc_QUR_QueryViewEntity="V";this.jc_QUR_QueryDeleteEntity="D";this.jc_QUR_QueryUpdateEntity="U";this.jc_XURTG_Single="Y";this.jc_XURTG_Limited="L";this.jc_XURTG_Unlimited="N";this.jc_XURTG_Secundary="S";this.jc_XURTG_Master="M";}
function A3xaDefines_Icons()
{this.jc_sIconExt=".png";this.jm_SpriteDivisor=10000;this.jc_ao3xSprites=new A3xaArray();this.jm_Idsprite_Main=2;this.jm_Absidsprite_Main=this.jm_Idsprite_Main*this.jm_SpriteDivisor;this.jc_ao3xSprites.Add_Item(this.jm_Idsprite_Main,{iddivisor:100,rows:6,cols:40,steprows:1,stepcols:10,height:144,width:960,path:"a3xas/a3xam/Sprite-Main-6x40x24x7"});this.jm_Idsprite_Category=10;this.jm_Absidsprite_Category=this.jm_Idsprite_Category*this.jm_SpriteDivisor;this.jc_ao3xSprites.Add_Item(this.jm_Idsprite_Category,{iddivisor:100,rows:12,cols:10,steprows:1,stepcols:10,height:288,width:240,path:"a3xas/a3xam/Sprite-Category-12x10x24x7"});this.jm_Idsprite_CountryLA=20;this.jm_Absidsprite_CountryLA=this.jm_Idsprite_CountryLA*this.jm_SpriteDivisor;this.jc_ao3xSprites.Add_Item(this.jm_Idsprite_CountryLA,{iddivisor:100,rows:10,cols:10,steprows:1,stepcols:10,height:160,width:240,path:"a3xas/a3xam/Sprite-CountryLA-10x10x16x24x7"});this.jm_Idsprite_AreaFlag=50;this.jm_Absidsprite_AreaFlag=this.jm_Idsprite_AreaFlag*this.jm_SpriteDivisor;this.jc_ao3xSprites.Add_Item(this.jm_Idsprite_AreaFlag,{iddivisor:100,rows:10,cols:10,steprows:1,stepcols:10,height:160,width:240,path:"a3xas/a3xam/Sprite-AreaFlagLA-10x10x16x24x7"});this.jm_Idsprite_AreaBkgnd=(this.jm_Idsprite_AreaFlag+10);this.jm_Absidsprite_AreaBkgnd=this.jm_Idsprite_AreaBkgnd*this.jm_SpriteDivisor;this.jc_ao3xSprites.Add_Item(this.jm_Idsprite_AreaBkgnd,{iddivisor:100,rows:1,cols:100,steprows:1,stepcols:10,height:24,width:2400,path:"a3xas/a3xam/Sprite-AreaBkgndLA-1x100x16x7"});this.jm_Idsprite_StateLA=100;this.jm_Absidsprite_StateLA=this.jm_Idsprite_StateLA*this.jm_SpriteDivisor;this.jc_ao3xSprites.Add_Item(this.jm_Idsprite_StateLA,{iddivisor:100,rows:30,cols:40,steprows:1,stepcols:40,height:160,width:960,path:"a3xas/a3xam/Sprite-StateLA-30x40x16x24x7"});this.jc_sIconUrlBase_IMap="a3xas/a3xam/";this.jc_sIconUrlBase_Main="a3xas/a3xam/";this.jc_sIcon_Transparent="Icon-Transparent";this.jc_sIcon_Star="Icon-Star-32x32";this.jc_sIcon_Turista="Icon-Turista-64x96";this.jc_sIcon_Logo="Logo-84x84";this.jc_sIconUrlBase_QUR="a3xas/a3xam/";this.jc_sIconPrefix_QTT="QTop10gold-icon-32x32-";this.jc_sIconPrefix_QEN="QENT-icon-32x32-";this.jc_sIconPrefix_QLE="QLE-icon-32x32-";this.jc_oIconSS_FacebookPage={absid:this.jm_Absidsprite_Main+501};this.jc_oIconSS_FacebookGroup={absid:this.jm_Absidsprite_Main+502};this.jc_oIconSS_FacebookUser={absid:this.jm_Absidsprite_Main+503};this.jc_oIconSS_Twitter={absid:this.jm_Absidsprite_Main+504};this.jc_oIconSS_Gplus={absid:this.jm_Absidsprite_Main+505};this.jc_oIconSS_Pinterest={absid:this.jm_Absidsprite_Main+506};this.jc_oIconSS_Video={absid:this.jm_Absidsprite_Main+507};this.jc_oIconSS_VideoUrl={absid:this.jm_Absidsprite_Main+508};this.jc_oIconSS_Flickr={absid:this.jm_Absidsprite_Main+509};this.jc_oIconSS_Flickrtxt={absid:this.jm_Absidsprite_Main+509};this.jc_oIconSS_Wikipedia={absid:this.jm_Absidsprite_Main+601};this.jc_oIconSS_Wikiphoneprefix={absid:this.jm_Absidsprite_Main+602};this.jc_oIconSS_Wikitravel={absid:this.jm_Absidsprite_Main+603};this.jc_oIconSS_Skype={absid:this.jm_Absidsprite_Main+604};this.jc_oIconSS_Skypetxt={absid:this.jm_Absidsprite_Main+604};this.jc_oIconSS_Url={absid:this.jm_Absidsprite_Main+605};this.jc_oIconSS_Email={absid:this.jm_Absidsprite_Main+606};this.jc_oIconSS_Phone={absid:this.jm_Absidsprite_Main+607};this.jc_oIconSS_A3xaGallery={absid:this.jm_Absidsprite_Main+608};this.jc_oIconSS_Person={absid:this.jm_Absidsprite_Main+609};this.jc_oIconSS_Sitemap={absid:this.jm_Absidsprite_Main+511};this.jc_oIconSS_WCUrl={absid:this.jm_Absidsprite_Main+512};this.jc_oIconSS_Googlemap={absid:this.jm_Absidsprite_Main+513};this.jc_oIconSS_GooglemapBW={absid:this.jm_Absidsprite_Main+514};this.jc_oIconSS_ViewEntity={absid:this.jm_Absidsprite_Main+515};this.jc_IconMS_OffsetAdmin=this.jm_Absidsprite_Main+531;this.jc_oIconSS_NewEntity={absid:this.jc_IconMS_OffsetAdmin+0};this.jc_oIconSS_NewSEntity={absid:this.jc_IconMS_OffsetAdmin+1};this.jc_oIconSS_EditEntity={absid:this.jc_IconMS_OffsetAdmin+2};this.jc_oIconSS_DeleteEntity={absid:this.jc_IconMS_OffsetAdmin+4};this.jc_oIconSS_NewEntityInfo={absid:this.jc_IconMS_OffsetAdmin+100};this.jc_oIconSS_EditEntityInfo={absid:this.jc_IconMS_OffsetAdmin+102};this.jc_oIconSS_DeleteEntityInfo={absid:this.jc_IconMS_OffsetAdmin+104};this.jc_IconMS_OffsetMain=this.jm_Absidsprite_Main+101;this.jc_oIconMS_Turbo={absid:this.jc_IconMS_OffsetMain+0};this.jc_oIconMS_TurboX={absid:this.jc_IconMS_OffsetMain+1};this.jc_oIconMS_TurboDW={absid:this.jc_IconMS_OffsetMain+2};this.jc_oIconMS_TurboUP={absid:this.jc_IconMS_OffsetMain+2};this.jc_oIconMS_TurboFY={absid:this.jc_IconMS_OffsetMain+3};this.jc_oIconMS_TurboFB={absid:this.jc_IconMS_OffsetMain+3};this.jc_oIconMS_TurboFR={absid:this.jc_IconMS_OffsetMain+4};this.jc_oIconMS_TurboFG={absid:this.jc_IconMS_OffsetMain+4};this.jc_oIconMS_GLMore={absid:this.jc_IconMS_OffsetMain+6};this.jc_oIconMS_GLMoreX={absid:this.jc_IconMS_OffsetMain+7};this.jc_oIconMS_Like={absid:this.jc_IconMS_OffsetMain+8};this.jc_oIconMS_LikeX={absid:this.jc_IconMS_OffsetMain+9};this.jc_IconMS_OffsetStaticMaps=this.jm_Absidsprite_Main+111;this.jc_oIconMS_StaticMapLA={absid:this.jc_IconMS_OffsetStaticMaps+0};this.jc_oIconMS_StaticMapLAX={absid:this.jc_IconMS_OffsetStaticMaps+1};this.jc_oIconMS_StaticMapArea={absid:this.jc_IconMS_OffsetStaticMaps+2};this.jc_oIconMS_StaticMapAreaX={absid:this.jc_IconMS_OffsetStaticMaps+3};this.jc_oIconMS_StaticMapRegion={absid:this.jc_IconMS_OffsetStaticMaps+4};this.jc_oIconMS_StaticMapRegionX={absid:this.jc_IconMS_OffsetStaticMaps+5};this.jc_IconMS_OffsetTopMenu=this.jm_Absidsprite_Main+121;this.jc_oIconMS_TopMenu_Home={absid:this.jc_IconMS_OffsetTopMenu+0,title:"Home",alt:"HOM"};this.jc_oIconMS_TopMenu_LA={absid:this.jc_IconMS_OffsetTopMenu+1,title:"Latin America",alt:"LA0"};this.jc_oIconMS_TopMenu_YB={absid:this.jc_IconMS_OffsetTopMenu+2,title:"Best from Babylon",alt:"YB0"};this.jc_oIconMS_TopMenu_D3={absid:this.jc_IconMS_OffsetTopMenu+3,title:"Third",alt:"D30"};this.jc_IconMS_OffsetQuery=this.jm_Absidsprite_Main+131;this.jc_oIconMS_QueryRank_T10Diamond={absid:this.jc_IconMS_OffsetQuery+0,title:"Top10 Diamond",alt:"TTD"};this.jc_oIconMS_QueryRank_T10Gold={absid:this.jc_IconMS_OffsetQuery+1,title:"Top10 Gold",alt:"TTG"};this.jc_oIconMS_QueryRank_T10Silver={absid:this.jc_IconMS_OffsetQuery+2,title:"Top10 Silver",alt:"TTS"};this.jc_oIconMS_QueryRank_T10Bronze={absid:this.jc_IconMS_OffsetQuery+3,title:"Top10 Bronze",alt:"TTB"};this.jc_oIconMS_QueryRank_T10Iron={absid:this.jc_IconMS_OffsetQuery+4,title:"Top10 Iron",alt:"TTI"};this.jc_oIconMS_QueryRank_List={absid:this.jc_IconMS_OffsetQuery+5,title:"Full List",alt:"TTL"};this.jc_oIconMS_QueryOrderby_Latest={absid:this.jc_IconMS_OffsetQuery+6,title:"Latest",alt:"TTT"};this.jc_oIconMS_XStatus={norm:1,xtra:2,dwup:3,fyfb:4,frfg:5};this.jc_oIconMS_Status={offdis:1,off:2,ondis:3,on:4};this.jc_oIconMS_StatusXtra={offover:1,offclick:2,onover:3,onclick:4};this.jc_oIconCat_Enterprise={absid:this.jm_Absidsprite_Category+702,title:"Enterprise",alt:"ETR"};this.jc_oIconCat_Area={absid:this.jm_Absidsprite_Category+802,title:"Area",alt:"ARA"};this.jc_oIconCat_Region={absid:this.jm_Absidsprite_Category+803,title:"Region",alt:"RGN"};this.jc_oIconCat_City={absid:this.jm_Absidsprite_Category+808,title:"City",alt:"CTY"};this.jc_oIconCat_Country={absid:this.jm_Absidsprite_Category+902,title:"Country",alt:"CNR"};this.jc_oIconCat_State={absid:this.jm_Absidsprite_Category+903,title:"State",alt:"STA"};}
function A3xaDefines_EntityInfo()
{this.jc_TI_4LName="O";this.jc_CI_4LName_Text="O";this.jc_TI_4LDescr="P";this.jc_CI_4LDescr_Text="P";this.jc_TI_Website="W";this.jc_CI_Website_Button="W";this.jc_CI_Website_Text="T";this.jc_CI_Website_Bold="B";this.jc_CI_Website_Html="H";this.jc_TI_Video="V";this.jc_CI_Video_YoutubeId="Y";this.jc_CI_Video_VimeoId="V";this.jc_CI_Video_Url="W";this.jc_TI_Facebook="F";this.jc_CI_Facebook_Page="P";this.jc_CI_Facebook_Group="G";this.jc_CI_Facebook_User="U";this.jc_TI_Twitter="D";this.jc_CI_Twitter_Url="D";this.jc_TI_GooglePlus="E";this.jc_CI_GooglePlus_Url="E";this.jc_TI_Phone="T";this.jc_CI_Phone_Number="T";this.jc_TI_Skype="S";this.jc_CI_Skype_Id="S";this.jc_TI_Note="N";this.jc_CI_Note_Text="N";this.jc_TI_Email="M";this.jc_CI_Email_Addr="M";this.jc_TI_Image="I";this.jc_CI_Image_Url="I";this.jc_CI_Image_StaticMapUrl="M";this.jc_TI_Gallery="G";this.jc_CI_Gallery_FlickrUrl="F";this.jc_CI_Gallery_Flickrset="S";this.jc_CI_Gallery_FlickrGallery="G";this.jc_TI_A3xaGallery="H";this.jc_CI_A3xaGallery_Url="A";this.jc_CI_A3xaGallery_Flickrset="S";this.jc_CI_A3xaGallery_FlickrGallery="G";this.jc_TI_Person="U";this.jc_CI_Person_Name="U";this.jc_CI_Person_Attrib="T";this.jc_TI_Wiki="WIK";this.jc_CI_Wikipedia="W";this.jc_CI_Wikiphoneprefix="P";this.jc_CI_Wikitravel="T";this.jc_TI_WaterCloset="WCL";this.jc_CI_WCUrl="W";this.jc_TI_MetasystemControl="K";this.jc_CI_MetasystemControl_DDCity="C";this.jc_CI_MetasystemControl_DDCategory="B";this.jc_TI_QueryUnifiedRequest="QUR"
this.jc_CI_QueryUnifiedRequest_DD="T";}
function A3xaDefines_Html()
{this.jc_MaxViewRows=50;this.jc_Col_IdTag=1;this.jc_Col_LandIcons=2;this.jc_Col_CtrlInfoIcons=3;this.jc_Col_Identity=4;this.jc_Col_Info=5;this.jc_Col_Last=6;this.jc_Col_DefaultWidth=30;this.jc_Col_IdTagWidth=100;this.jc_Col_CtrlInfoIconsWidth=110;this.jc_Col_IdentityWidth=210;this.jc_Body_MicroWidth=500;this.jc_Body_SmallWidth=800;this.jc_Body_NormalWidth=1000;this.jc_Body_MicroWidthId=3;this.jc_Body_SmallWidthId=2;this.jc_Body_NormalWidthId=1;this.jc_PopupDim_Micro={w:200,h:150};this.jc_PopupDim_Small={w:280,h:210};this.jc_PopupDim_Normal={w:400,h:300};}
function A3xaDefines_HtmlEntityEdit()
{this.jc_Dummy=1;}
function A3xaDefines_Entity()
{this.jc_Typ_MetaSystemControl="K";this.jc_Typ_Category="B";this.jc_Typ_Info="H";this.jc_Typ_Enterprise="E";this.jc_Typ_GeoNA="A";this.jc_Typ_GeoNZ="Z";this.jc_Typ_GeoNR="N";this.jc_Typ_GeoArea="G";this.jc_Typ_GeoRegion="R";this.jc_Typ_GeoCountry="P";this.jc_Typ_GeoState="S";this.jc_Typ_GeoCity="C";this.jc_UCat_Metasystem="M";this.jc_UCat_Category="C";this.jc_UCat_Topic="A";this.jc_UCat_Geo="P";this.jc_VCat_Metasystem_Control="C";this.jc_VCat_Geo_Area="A";this.jc_VCat_Geo_Region="R";this.jc_VCat_Geo_RegionNR="N";this.jc_VCat_Geo_RegionTR="T";this.jc_VCat_Geo_RegionMetr="M";this.jc_VCat_Geo_RegionIsland="I";this.jc_VCat_Geo_City="C";this.jc_VCat_Geo_Country="P";this.jc_VCat_Geo_State="S";this.jc_VCat_Geo_Provincie="V";this.jc_VCat_Geo_Department="D";this.jc_VCat_Geo_RegionAdmin="G";this.jc_o3xeTopA_LatinAmerica={L4Name:["Latin America","AmÃ©rica Latina","AmÃ©rica Latina","America Latina"],Order:100};this.jc_o3xeTopA_Mexico={L4Name:["Mexico","MÃ©xico","MÃ©xico","Messico"],Order:200};this.jc_o3xeTopA_Centroamerica={L4Name:["Central America","CentroamÃ©rica","CentroamÃ©rica","America Centrale"],Order:300};this.jc_o3xeTopA_Caribbean={L4Name:["Caribbean","Caribe","Caribe","Caraibi"],Order:400};this.jc_o3xeTopA_Tropical={L4Name:["Tropical","Tropical","Tropical","Tropicale"],Order:500};this.jc_o3xeTopA_Amazon={L4Name:["Amazon","Amazonia","Amazonia","Amazonia"],Order:600};this.jc_o3xeTopA_Brazil={L4Name:["Brazil","Brasil","Brasil","Brasile"],Order:700};this.jc_o3xeTopA_SE={L4Name:["Southeast","Sureste","Sudeste","Sudest"],Order:800};this.jc_o3xeTopA_Andean={L4Name:["Andean","Andes","Andes","Ande"],Order:900};this.jc_o3xeTopA_YB={L4Name:["Best from Babylon","Mejor desde Babilonia","Melhor da BabilÃ³nia","Meglio da Babilonia"],Order:5000};}
function A3xaDefines_Urls()
{this.jc_sFlickrset_avenidaazul="https://www.flickr.com/photos/avenidaazul/sets/";this.jc_sFlickrgal_avenidaazul="https://www.flickr.com/photos/avenidaazul/galleries/";this.jc_sRelHomeDirLA="a?p3x=LE,,,L,,S,E,,,,,,";this.jc_sRelHomeDirYB="a?p3x=LE,,,L,,S,E,,,,,Y,B";}
function A3xaEntityButton2(ji_Name,ji_Rows,ji_Row,ji_Col,ji_oListener)
{this.jm_oBtnON=null;this.jm_oBtnOFF=null;this.jm_oBtnDIS=null;this.jm_Tag="a3xabutton";this.jm_Name=ji_Name;this.jm_Rows=ji_Rows;this.jm_Row=ji_Row;this.jm_Col=ji_Col;this.jm_oListener=ji_oListener;this.jm_o3xhIconInfo=null;this.jm_sSrcBase="";this.jm_o3xsTitle=new A3xaString();this.jm_sAlt="";this.jm_sfnOnClick="";this.jm_ColTarget="";this.jm_StatusInit="OFF";this.jm_width=24;this.jm_height=24;this.jm_bParagraph=false;this.jm_bMaster=false;this.jm_bHeader=false;this.jm_bAjax=false;this.jm_oTimerFlash=null;this.jm_FlashFR_pending=null;this.jm_FlashFG_pending=null;this.jm_bShowUP_pending=false;this.jm_bShowUP_running=false;this._A3xaEntityButton2=function()
{if(!this.jm_Name)
return;if(!(this.jm_Row>0))
return;if(!(this.jm_Col>0))
return;var jt_Id="CellBtn_"+this.jm_Name+"_"+this.jm_Row+"_"+this.jm_Col;this.jm_oBtnOFF=new A3xaHtmlItem2(jt_Id+"_OFF");if(this.jm_oBtnOFF==null)
return;this.jm_oBtnON=new A3xaHtmlItem2(jt_Id+"_ON");this.jm_oBtnDIS=new A3xaHtmlItem2(jt_Id+"_DIS");};this.IsValid=function(){return!(this.jm_oBtnOFF==null);};this.Get_Name=function(){return this.jm_Name;};this.Get_Part=function(ji_part)
{if(!this.IsValid())
return null;if(ji_part=="OFF")
return this.jm_oBtnOFF;else if(ji_part=="ON")
return this.jm_oBtnON;else if(ji_part=="DIS")
return this.jm_oBtnDIS;return null;};this.PartIsVisible=function(ji_part)
{var jt_oPart=this.Get_Part(ji_part);if(jt_oPart==null)
return false;return jt_oPart.IsVisible();};this.ShowPart=function(ji_part,ji_bShow)
{var jt_oPart=this.Get_Part(ji_part);if(jt_oPart==null)
return false;return jt_oPart.Show(ji_bShow);};this.Get_Status=function()
{if(!this.IsValid())
return"";if(this.PartIsVisible("ON"))
return"ON";if(this.PartIsVisible("OFF"))
return"OFF";if(this.PartIsVisible("DIS"))
return"DIS";return"HID";};this.AsyncChangeStatus=function(ji_NewStatus)
{if(this.jm_oListener==null)
return false;if(!this.jm_oListener.AsyncChangeStatus(this.jm_Name,ji_NewStatus))
{return false;}
return true;};this.OnClick=function(){return this.Set_Status("INV",true);};this.IsFlashing=function(){return this.jm_oTimerFlash!=null;};this.IsMaster=function(){return this.jm_bMaster;};this.IsHeader=function(){return this.jm_bHeader;};this.IsAsync=function(){return this.jm_bAjax;};this.Set_Properties=function(ji_bParagraph)
{if(!(ji_bParagraph===null))
this.jm_bParagraph=(ji_bParagraph==true);return true;};this.AttachProperties=function(ji_bMaster,ji_bHeader,ji_bAjax)
{if(!(ji_bMaster===null))
this.jm_bMaster=(ji_bMaster==true);if(!(ji_bHeader===null))
this.jm_bHeader=(ji_bHeader==true);if(!(ji_bAjax===null))
this.jm_bAjax=(ji_bAjax==true);return true;};this.Set_SrcInfo4=function(ji_o3xhIconInfo,ji_asTitle,ji_sAlt,ji_sfnOnClick,ji_ColTarget,ji_sAjaxUrlParams,ji_StatusInit)
{this.jm_o3xhIconInfo=ji_o3xhIconInfo;this.jm_o3xsTitle=new A3xaString(ji_asTitle);this.jm_sAlt=ji_sAlt;this.jm_sfnOnClick=ji_sfnOnClick;this.jm_ColTarget=ji_ColTarget;this.jm_sAjaxUrlParams=ji_sAjaxUrlParams;if(ji_StatusInit)
this.jm_StatusInit=ji_StatusInit;return true;};this.IsSprite=function()
{return this.jm_o3xhIconInfo&&this.jm_o3xhIconInfo.IsSprite();};this.Get_Html=function()
{if(!(this.IsSprite()&&this.jm_o3xhIconInfo.Get_SpriteRow()>0&&this.jm_o3xhIconInfo.Get_SpriteColumn()>0))
return"";var jt_Id="CellBtn_"+this.Get_Name()+"_"+this.jm_Row+"_"+this.jm_Col;var jt_sHtmlOFF_visibility="visibility:hidden; position:absolute;";var jt_sHtmlON_visibility="visibility:hidden; position:absolute;";var jt_sHtmlDIS_visibility="visibility:hidden; position:absolute;";if((!this.jm_StatusInit)||this.jm_StatusInit=="OFF")
jt_sHtmlOFF_visibility="";else if(this.jm_StatusInit=="ON")
jt_sHtmlON_visibility="";else if(this.jm_StatusInit=="DIS")
jt_sHtmlDIS_visibility="";else if(this.jm_StatusInit=="HID");else;var jt_sfnOnClick_Full="";if(this.jm_sfnOnClick)
jt_sfnOnClick_Full=this.jm_sfnOnClick+"(&quot;"+this.Get_Name()+"&quot;,&quot;"+
this.jm_Rows+"&quot;,&quot;"+
this.jm_Row+"&quot;,&quot;"+this.jm_Col+"&quot;,&quot;"+
this.jm_ColTarget+"&quot;,&quot;"+
this.jm_sAjaxUrlParams+"&quot;);";var jt_shON="";var jt_shOFF="";var jt_shDIS="";var jt_shStyleON=this.jm_o3xhIconInfo.Get_StyleString(jg_oe.jc_oIcons.jc_oIconMS_Status.on-1,null);if(jt_shStyleON)
jt_shStyleON+=" "+jt_sHtmlON_visibility;var jt_shStyleOFF=this.jm_o3xhIconInfo.Get_StyleString(jg_oe.jc_oIcons.jc_oIconMS_Status.off-1,null);if(jt_shStyleOFF)
jt_shStyleOFF+=" "+jt_sHtmlOFF_visibility;var jt_shStyleDIS=this.jm_o3xhIconInfo.Get_StyleString(jg_oe.jc_oIcons.jc_oIconMS_Status.offdis-1,null);if(jt_shStyleDIS)
jt_shStyleDIS+=" "+jt_sHtmlDIS_visibility;var jt_sAttrCommon=" src='"+(this.jm_o3xhIconInfo.Get_UrlImageTransparent()||"")+"' "+" width='"+this.jm_o3xhIconInfo.Get_Width()+"' "+" height='"+this.jm_o3xhIconInfo.Get_Height()+"' "+" border='0' alt='"+this.jm_sAlt+"' title='"+this.jm_o3xsTitle.Get_LString()+"' "+" onclick = '"+jt_sfnOnClick_Full+"' ";jt_shON="<img id='"+jt_Id+"_ON'"+" name='"+jt_Id+"_ON'"+" style='"+jt_shStyleON+"' "+jt_sAttrCommon+"/>";jt_shOFF="<img id='"+jt_Id+"_OFF'"+" name='"+jt_Id+"_OFF'"+" style='"+jt_shStyleOFF+"' "+jt_sAttrCommon+"/>";jt_shDIS="<img id='"+jt_Id+"_DIS'"+" name='"+jt_Id+"_DIS'"+" style='"+jt_shStyleDIS+"' "+jt_sAttrCommon+"/>";var jr_h=(this.jm_bParagraph?"<p>":"")+
jt_shOFF+jt_shON+jt_shDIS+
(this.jm_bParagraph?"</p>":"");return jr_h;};this.PrintHtml=function(qi_oParent)
{if(!(qi_oParent&&qi_oParent.length))
return false;var jt_sh=this.Get_Html();if(!(jt_sh&&jt_sh.length))
return false;qi_oParent.append(jt_sh);if(this.IsSprite())
{var jt_sxposOFF=this.jm_o3xhIconInfo.Get_XPos_String(jg_oe.jc_oIcons.jc_oIconMS_Status.off-1);var jt_sxposOFFOVER=this.jm_o3xhIconInfo.Get_XPos_String(jg_oe.jc_oIcons.jc_oIconMS_StatusXtra.offover-1,jg_oe.jc_oIcons.jc_oIconMS_XStatus.xtra-1);var jt_sxposOFFCLICK=this.jm_o3xhIconInfo.Get_XPos_String(jg_oe.jc_oIcons.jc_oIconMS_StatusXtra.offclick-1,jg_oe.jc_oIcons.jc_oIconMS_XStatus.xtra-1);var jt_IdOFF="#CellBtn_"+this.Get_Name()+"_"+this.jm_Row+"_"+this.jm_Col+"_OFF";var qr_ohOFF=jQuery(jt_IdOFF);if(qr_ohOFF&&qr_ohOFF.length)
{jt_sxposOFF&&qr_ohOFF.mouseout(function()
{jQuery(this).css({"background-position":jt_sxposOFF,"cursor":"default"});});jt_sxposOFFCLICK&&qr_ohOFF.mousedown(function()
{jQuery(this).css({"background-position":jt_sxposOFFCLICK})});jt_sxposOFFOVER&&qr_ohOFF.mouseover(function()
{jQuery(this).css({"background-position":jt_sxposOFFOVER,"cursor":"pointer"});});}
var jt_sxposON=this.jm_o3xhIconInfo.Get_XPos_String(jg_oe.jc_oIcons.jc_oIconMS_Status.on-1);var jt_sxposONOVER=this.jm_o3xhIconInfo.Get_XPos_String(jg_oe.jc_oIcons.jc_oIconMS_StatusXtra.onover-1,jg_oe.jc_oIcons.jc_oIconMS_XStatus.xtra-1);var jt_sxposONCLICK=this.jm_o3xhIconInfo.Get_XPos_String(jg_oe.jc_oIcons.jc_oIconMS_StatusXtra.onclick-1,jg_oe.jc_oIcons.jc_oIconMS_XStatus.xtra-1);var jt_IdON="#CellBtn_"+this.Get_Name()+"_"+this.jm_Row+"_"+this.jm_Col+"_ON";var qr_ohON=jQuery(jt_IdON);if(qr_ohON&&qr_ohON.length)
{jt_sxposON&&qr_ohON.mouseout(function()
{jQuery(this).css({"background-position":jt_sxposON,"cursor":"default"});});jt_sxposONCLICK&&qr_ohON.mousedown(function()
{jQuery(this).css({"background-position":jt_sxposONCLICK})});jt_sxposONOVER&&qr_ohON.mouseover(function()
{jQuery(this).css({"background-position":jt_sxposONOVER,"cursor":"pointer"});});}}
return true;};this.Flash=function(ji_FlashType)
{var jt_this=this;var jt_Tag=this.jm_Tag;if(this.IsFlashing()||this.jm_bShowUP_running)
{if(ji_FlashType=="FR"||ji_FlashType=="FY")
this.jm_FlashFR_pending=ji_FlashType;else if(ji_FlashType=="FG"||ji_FlashType=="FB")
this.jm_FlashFG_pending=ji_FlashType;else
return false;return true;}
if(ji_FlashType=="FR"||ji_FlashType=="FY");else if(ji_FlashType=="FG"||ji_FlashType=="FB");else if(ji_FlashType==""||ji_FlashType==null)
{if(this.jm_FlashFR_pending)
{ji_FlashType=this.jm_FlashFR_pending;this.jm_FlashFR_pending=null;}
else if(this.jm_FlashFG_pending)
{ji_FlashType=this.jm_FlashFG_pending;this.jm_FlashFG_pending=null;}
else if(this.jm_bShowUP_pending)
{this.jm_bShowUP_pending=false;return this.Show("UP");}
else
return false;}
else
return false;var jt_oPartON=this.Get_Part("ON");var jt_oPartOFF=this.Get_Part("OFF");if(!this.IsSprite())
return false;var jt_oxposON=this.jm_o3xhIconInfo.Get_XPos(jg_oe.jc_oIcons.jc_oIconMS_Status.on-1);var jt_oxposOFF=this.jm_o3xhIconInfo.Get_XPos(jg_oe.jc_oIcons.jc_oIconMS_Status.off-1);var jt_oxposONFLASH=null;var jt_oxposOFFFLASH=null;if(ji_FlashType=="FY")
{jt_oxposOFFFLASH=this.jm_o3xhIconInfo.Get_XPos(jg_oe.jc_oIcons.jc_oIconMS_Status.offdis-1,jg_oe.jc_oIcons.jc_oIconMS_XStatus.fyfb-1);jt_oxposONFLASH=this.jm_o3xhIconInfo.Get_XPos(jg_oe.jc_oIcons.jc_oIconMS_Status.ondis-1,jg_oe.jc_oIcons.jc_oIconMS_XStatus.fyfb-1);}
if(ji_FlashType=="FB")
{jt_oxposOFFFLASH=this.jm_o3xhIconInfo.Get_XPos(jg_oe.jc_oIcons.jc_oIconMS_Status.off-1,jg_oe.jc_oIcons.jc_oIconMS_XStatus.fyfb-1);jt_oxposONFLASH=this.jm_o3xhIconInfo.Get_XPos(jg_oe.jc_oIcons.jc_oIconMS_Status.on-1,jg_oe.jc_oIcons.jc_oIconMS_XStatus.fyfb-1);}
else if(ji_FlashType=="FR")
{jt_oxposOFFFLASH=this.jm_o3xhIconInfo.Get_XPos(jg_oe.jc_oIcons.jc_oIconMS_Status.offdis-1,jg_oe.jc_oIcons.jc_oIconMS_XStatus.frfg-1);jt_oxposONFLASH=this.jm_o3xhIconInfo.Get_XPos(jg_oe.jc_oIcons.jc_oIconMS_Status.ondis-1,jg_oe.jc_oIcons.jc_oIconMS_XStatus.frfg-1);}
else if(ji_FlashType=="FG")
{jt_oxposOFFFLASH=this.jm_o3xhIconInfo.Get_XPos(jg_oe.jc_oIcons.jc_oIconMS_Status.off-1,jg_oe.jc_oIcons.jc_oIconMS_XStatus.frfg-1);jt_oxposONFLASH=this.jm_o3xhIconInfo.Get_XPos(jg_oe.jc_oIcons.jc_oIconMS_Status.on-1,jg_oe.jc_oIcons.jc_oIconMS_XStatus.frfg-1);}
jt_oxposONFLASH&&jt_oPartON&&jt_oPartON.Set_BkgndPosition2(jt_oxposONFLASH);jt_oxposOFFFLASH&&jt_oPartOFF&&jt_oPartOFF.Set_BkgndPosition2(jt_oxposOFFFLASH);this.jm_oTimerFlash=setTimeout(function()
{if(jt_this.jm_Tag!="a3xabutton")
{return;}
jt_oxposON&&jt_oPartON&&jt_oPartON.Set_BkgndPosition2(jt_oxposON);jt_oxposOFF&&jt_oPartOFF&&jt_oPartOFF.Set_BkgndPosition2(jt_oxposOFF);jt_this.jm_oTimerFlash=null;jt_this.Flash("");return;},800);return true;};this.Show=function(ji_Status)
{if(!this.IsValid())
return false;var jt_oPartON=this.Get_Part("ON");var jt_oPartOFF=this.Get_Part("OFF");var jt_oPartDIS=this.Get_Part("DIS");if(ji_Status=="UP")
{this.jm_bShowUP_pending=false;if(this.IsSprite())
{if(this.IsFlashing())
{this.jm_bShowUP_running=false;this.jm_bShowUP_pending=true;return true;}
this.jm_bShowUP_running=true;jt_oPartOFF&&jt_oPartOFF.Set_BkgndPosition2(this.jm_o3xhIconInfo.Get_XPos(jg_oe.jc_oIcons.jc_oIconMS_Status.off-1,jg_oe.jc_oIcons.jc_oIconMS_XStatus.dwup-1));jt_oPartON&&jt_oPartON.Set_BkgndPosition2(this.jm_o3xhIconInfo.Get_XPos(jg_oe.jc_oIcons.jc_oIconMS_Status.on-1,jg_oe.jc_oIcons.jc_oIconMS_XStatus.dwup-1));}
return true;}
else
{this.jm_bShowUP_pending=false;this.jm_bShowUP_running=false;if(this.IsSprite())
{jt_oPartON&&jt_oPartON.Set_BkgndPosition2(this.jm_o3xhIconInfo.Get_XPos(jg_oe.jc_oIcons.jc_oIconMS_Status.on-1));jt_oPartOFF&&jt_oPartOFF.Set_BkgndPosition2(this.jm_o3xhIconInfo.Get_XPos(jg_oe.jc_oIcons.jc_oIconMS_Status.off-1));jt_oPartDIS&&jt_oPartDIS.Set_BkgndPosition2(this.jm_o3xhIconInfo.Get_XPos(jg_oe.jc_oIcons.jc_oIconMS_Status.offdis-1));}
this.Flash("");}
var jt_bON=false;var jt_bOFF=false;var jt_bDIS=false;if(ji_Status=="ON")
jt_bON=true;else if(ji_Status=="OFF")
jt_bOFF=true;else if(ji_Status=="DIS")
jt_bDIS=true;this.ShowPart("ON",jt_bON);this.ShowPart("OFF",jt_bOFF);this.ShowPart("DIS",jt_bDIS);return true;};this.Set_Status=function(ji_NewStatus,ji_bAsync,ji_bIgnoreDisabled)
{if(ji_NewStatus=="")
return false;var jt_btnStatus=this.Get_Status();if(jt_btnStatus!=""&&(ji_bIgnoreDisabled||(jt_btnStatus!="HID"&&jt_btnStatus!="DIS")))
{if(ji_NewStatus=="INV")
{ji_NewStatus="ON";if(jt_btnStatus=="ON")
ji_NewStatus="OFF";}
else if(ji_NewStatus=="KS")
{ji_NewStatus=jt_btnStatus;}
if(ji_bAsync&&this.IsAsync()&&this.AsyncChangeStatus(ji_NewStatus))
{this.Show("UP");return false;}
this.Show(ji_NewStatus);jt_btnStatus=this.Get_Status();}
if(this.jm_oListener!=null)
return this.jm_oListener.OnBtnChangeStatus(this.jm_Name,jt_btnStatus);return true;};this._A3xaEntityButton2();}
function A3xaEntityButtonSet2(ji_aNames,ji_Rows,ji_Row,ji_Col,ji_bMasterSlave,ji_bAjax,ji_bOnlyOneON)
{this.Get_Button=A3xaEntityButtonSet2_Get_Button;this.Show=A3xaEntityButtonSet2_Show;this.IsValid=A3xaEntityButtonSet2_IsValid;this.IsMaster=A3xaEntityButtonSet2_IsMaster;this.Get_ButtonStatus=A3xaEntityButtonSet2_Get_ButtonStatus;this.Set_ButtonStatus=A3xaEntityButtonSet2_Set_ButtonStatus;this.FlashButton=A3xaEntityButtonSet2_FlashButton;this.OnButtonClick=A3xaEntityButtonSet2_OnButtonClick;this.Set_SlavesButtonStatus=A3xaEntityButtonSet2_Set_SlavesButtonStatus;this.IsAjaxEnabled=A3xaEntityButtonSet2_IsAjaxEnabled;this.OnBtnChangeStatus=A3xaEntityButtonSet2_OnBtnChangeStatus;this.AsyncChangeStatus=A3xaEntityButtonSet2_AsyncChangeStatus;this.NewSlavePanel=A3xaEntityButtonSet2_NewSlavePanel;this.Get_AjaxUrlParams=A3xaEntityButtonSet2_Get_AjaxUrlParams;this.Set_AjaxUrlParams=A3xaEntityButtonSet2_Set_AjaxUrlParams;this.OnAjaxReadyFn=A3xaEntityButtonSet2_OnAjaxReadyFn;this.PrintHtml_Buttons=A3xaEntityButtonSet2_PrintHtml_Buttons;this.PrintHtml_HeaderButtons=A3xaEntityButtonSet2_PrintHtml_HeaderButtons;this.InitButtonsStatus=A3xaEntityButtonSet2_InitButtonsStatus;this.jm_aoButtons=null;this.jm_Rows=ji_Rows;this.jm_Row=ji_Row;this.jm_Col=ji_Col;this.jm_bMaster=false;this.jm_bAjax=ji_bAjax;this.jm_bOnlyOneON=(ji_bOnlyOneON==true);if(ji_aNames==null||ji_aNames.length<=0)
return;if(!(ji_Row>0&&ji_Col>0))
return;if(ji_bMasterSlave==true)
{if(ji_Row==1)
{var jt_RowElem=document.getElementById("Row_"+ji_Row);if(jt_RowElem==null)
{jt_RowElem=document.getElementById("RowS_"+ji_Row);if(jt_RowElem!=null)
this.jm_bMaster=true;}}}
this.jm_aoButtons=new Array();for(var i=0;i<ji_aNames.length;i++)
{var jt_n=ji_aNames[i];if(jt_n)
{var jt_o=new A3xaEntityButton2(jt_n,ji_Rows,ji_Row,ji_Col,this);this.jm_aoButtons[i]=jt_o;}}}
function A3xaEntityButtonSet2_IsAjaxEnabled(){return this.jm_bAjax;}
function A3xaEntityButtonSet2_IsValid(){return!(this.jm_aoButtons==null);}
function A3xaEntityButtonSet2_Get_Button(ji_Name)
{if(!this.IsValid())
return null;if(!ji_Name)
return null;for(var i=0;i<this.jm_aoButtons.length;i++)
{var jt_o=this.jm_aoButtons[i];var jt_n=jt_o.Get_Name();if(jt_n==ji_Name)
return jt_o;}
return null;}
function A3xaEntityButtonSet2_IsMaster()
{if(!this.IsValid())
return false;return this.jm_bMaster;}
function A3xaEntityButtonSet2_PrintHtml_Buttons(qi_oParent)
{if(!this.IsValid())
return false;var jr_b=true;for(var i=0;i<this.jm_aoButtons.length;i++)
{var jt_o=this.jm_aoButtons[i];if(!jt_o)
continue;if(jt_o.IsHeader())
continue;if(!jt_o.PrintHtml(qi_oParent))
jr_b=false;}
return jr_b;}
function A3xaEntityButtonSet2_PrintHtml_HeaderButtons(qi_oParent)
{if(!this.IsValid())
return false;var jr_b=true;for(var i=0;i<this.jm_aoButtons.length;i++)
{var jt_o=this.jm_aoButtons[i];if(!jt_o)
continue;if(!jt_o.IsHeader())
continue;if(!jt_o.PrintHtml(qi_oParent))
jr_b=false;}
return jr_b;}
function A3xaEntityButtonSet2_Show(ji_Status)
{if(!this.IsValid())
return false;if(ji_Status=="ON")
ji_Status="OFF";var jr_b=true;for(var i=0;i<this.jm_aoButtons.length;i++)
{if(!this.jm_aoButtons[i].Show(ji_Status))
jr_b=false;}
return jr_b;}
function A3xaEntityButtonSet2_Set_AjaxUrlParams(ji_ButtonName,ji_sAjaxUrlParams)
{return false;}
function A3xaEntityButtonSet2_Get_AjaxUrlParams(ji_ButtonName,ji_ButtonStatus)
{return"";}
function A3xaEntityButtonSet2_OnAjaxReadyFn(ji_ogAjaxResponse)
{var jt_ButtonName=ji_ogAjaxResponse.Get_ItemValue("ButtonName");var jt_ButtonStatus=ji_ogAjaxResponse.Get_ItemValue("ButtonStatus");this.Set_ButtonStatus(jt_ButtonName,jt_ButtonStatus,false);return true;}
function A3xaEntityButtonSet2_AsyncChangeStatus(ji_Name,ji_NewStatus)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("name,status,ajax: "+
ji_Name+","+ji_NewStatus+","+(this.IsAjaxEnabled()?"Y":"N"),"","A3xaEntityButtonSet2_AsyncChangeStatus")
if(this.IsAjaxEnabled())
{var jt_oxur=new A3xaXur();jt_oxur.Set_UrlParams(jg_oe.jc_oXUR.jc_XURFN_AjaxEntity,null,jg_oe.jc_oXUR.jc_sAjaxTypControlIcons,null,null,null,null,null);var jt_oUrl=jt_oxur.Get_A3xaUrl(true);var jt_sAjaxUrlParams=jt_oUrl.Get_UrlParams();jt_sAjaxUrlParams+="&p_ButtonName="+ji_Name+"&p_ButtonStatus="+ji_NewStatus;jt_sAjaxUrlParams+=this.Get_AjaxUrlParams(ji_Name,ji_NewStatus);jg_oe.jm_oAjax2.QueueRequest(new A3xaAjaxRequest2(jt_oUrl.Get_UrlBase(),jt_sAjaxUrlParams,this));return true;}
return false;}
function A3xaEntityButtonSet2_OnBtnChangeStatus(ji_name,ji_btnStatus)
{if(!this.IsValid())
return false;var jt_bMaster=false;for(var i=0;i<this.jm_aoButtons.length;i++)
{var jt_o=this.jm_aoButtons[i];if(!jt_o)
continue;var jt_n=jt_o.Get_Name();if(jt_n!=ji_name)
{var jt_s=jt_o.Get_Status();if(jt_s=="ON")
{if(this.jm_bOnlyOneON)
jt_o.Show("OFF");}}
else
jt_bMaster=jt_o.IsMaster();}
if(!(this.IsMaster()&&jt_bMaster))
return true;return this.Set_SlavesButtonStatus(ji_name,ji_btnStatus);}
function A3xaEntityButtonSet2_OnButtonClick(ji_Name)
{if(!this.IsValid())
return false;var jt_o=this.Get_Button(ji_Name);if(jt_o)
{return jt_o.OnClick();}
return false;}
function A3xaEntityButtonSet2_Set_ButtonStatus(ji_Name,ji_NewStatus,ji_bAsync)
{if(!this.IsValid())
return false;var jt_o=this.Get_Button(ji_Name);if(jt_o)
return jt_o.Set_Status(ji_NewStatus,ji_bAsync);return false;}
function A3xaEntityButtonSet2_Get_ButtonStatus(ji_Name)
{var jt_o=this.Get_Button(ji_Name);if(jt_o)
return jt_o.Get_Status();return"";}
function A3xaEntityButtonSet2_FlashButton(ji_Name,ji_FlashType)
{if(!this.IsValid())
return false;var jt_o=this.Get_Button(ji_Name);if(jt_o)
{return jt_o.Flash(ji_FlashType);}
return false;}
function A3xaEntityButtonSet2_Set_SlavesButtonStatus(ji_Name,ji_NewStatus)
{if(!this.IsValid())
return false;if(!this.IsMaster())
return false;var jr_b=true;for(var jt_Row=1;jt_Row<=500;jt_Row++)
{if(jt_Row==this.jm_Row)
continue;var jt_RowElem=document.getElementById("Row_"+jt_Row);if(jt_RowElem==null)
jt_RowElem=document.getElementById("RowS_"+jt_Row);if(jt_RowElem==null)
break;var jt_oSlavePanel=this.NewSlavePanel(null,this.jm_Rows,jt_Row,this.jm_Col);if(jt_oSlavePanel!=null&&(!jt_oSlavePanel.Set_ButtonStatus(ji_Name,ji_NewStatus,false)))
jr_b=false;}
return jr_b;}
function A3xaEntityButtonSet2_NewSlavePanel(ji_aNames,ji_Rows,ji_Row,ji_Col)
{return new A3xaEntityButtonSet2(ji_aNames,ji_Rows,ji_Row,ji_Col,false,false);}
function A3xaEntityButtonSet2_InitButtonsStatus(ji_Status)
{if(!this.IsValid())
return false;for(var i=0;i<this.jm_aoButtons.length;i++)
{var jt_o=this.jm_aoButtons[i];jt_o.Set_Status(ji_Status,false);}
return true;}
function GLData(ji_glidmark,ji_fieldseparator)
{this.Get_Glid=GLData_Get_Glid;this.Set_Glid=GLData_Set_Glid;this.Get_Id=GLData_Get_Id;this.Set_Id=GLData_Set_Id;this.Get_Record_Array=GLData_Get_Record_Array;this.Get_Record_RSFieldArray=GLData_Get_Record_RSFieldArray;this.Set_Record_Array=GLData_Set_Record_Array;this.Get_Record_String=GLData_Get_Record_String;this.Get_Record_String2=GLData_Get_Record_String2;this.Set_Record_String=GLData_Set_Record_String;this.ConvertSpecialChars=GLData_ConvertSpecialChars;this.Get_String=GLData_Get_String;this.Get_String2=GLData_Get_String2;this.ConvertField=GLData_ConvertField;this.Set_String=GLData_Set_String;this.Set_XString=GLData_Set_XString;this.LoadFromGLS=GLData_LoadFromGLS;this.StoreToGLS=GLData_StoreToGLS;this.LoadFromGLS_ByString=GLData_LoadFromGLS_ByString;this.IsValid=GLData_IsValid;this.Get_GlidMark=GLData_Get_GlidMark;this.Get_FieldSeparator=GLData_Get_FieldSeparator;this.Get_XGlid=GLData_Get_XGlid;this.Set_XGlid=GLData_Set_XGlid;this.Get_XKey=GLData_Get_XKey;this.jm_oDTStatus=new GLDataStatus();this.jm_glidmark="";this.jm_fieldseparator="";if(ji_glidmark)
this.jm_glidmark=ji_glidmark;if(ji_fieldseparator)
this.jm_fieldseparator=ji_fieldseparator;this.jm_glid=null;this.jm_id=null;this.jm_aRecord=null;this.jm_aarsFieldArray=null;}
function GLData_Get_GlidMark(){return this.jm_glidmark;}
function GLData_Get_FieldSeparator(){return this.jm_fieldseparator;}
function GLData_IsValid(){return this.Get_XGlid()||false;}
function GLData_Get_Glid(){return this.jm_glid;}
function GLData_Set_Glid(ji_glid)
{this.jm_glid=null;if(!ji_glid)
return true;if(!jg_oe.jc_oA3xaDbZero.CheckGlid(ji_glid))
return false;this.jm_glid=ji_glid;return true;}
function GLData_Get_Id(){return this.jm_id;}
function GLData_Set_Id(ji_id){this.jm_id=ji_id;return true;}
function GLData_Get_XKey()
{var jt_xglid=this.Get_XGlid();if(!jt_xglid)
return"";var jt_id=this.Get_Id();if(!jt_id)
return jt_xglid;return jt_xglid.toString()+","+jt_id;}
function GLData_Get_XGlid()
{var jt_xglid=this.Get_Glid();if(!jg_oe.jc_oA3xaDbZero.CheckGlid(jt_xglid))
return"";return jt_xglid+this.Get_GlidMark();}
function GLData_Set_XGlid(ji_xglid)
{this.jm_glid=null;if(!ji_xglid)
return false;var jt_glid=jg_oe.jc_oA3xaDbZero.XGlid2Glid(ji_xglid);var jt_glmark=jg_oe.jc_oA3xaDbZero.XGlid2Mark(ji_xglid);if(jt_glmark&&jt_glmark!=this.Get_GlidMark())
return false;return this.Set_Glid(jt_glid);}
function GLData_Get_Record_RSFieldArray(ji_pos)
{if(!this.IsValid())
return null;if(!(ji_pos>=0))
return null;if(!(this.jm_aarsFieldArray&&this.jm_aarsFieldArray[ji_pos]))
{var jt_aRecord=this.Get_Record_Array();if(!jt_aRecord)
return null;var jt_sfa=jt_aRecord[ji_pos];if(!jt_sfa)
return null;var jt_asrfa=jt_sfa.split(jg_oe.jc_oA3xaDbZero.jc_GLSep_FieldArray);var jt_arsFieldArray=new Array();var jt_nof_fafields=0;if(!this.jm_aarsFieldArray)
this.jm_aarsFieldArray=new Array();for(var i=0;i<jt_asrfa.length;i++)
{if(!jt_asrfa[i])
continue;var jt_arecFieldArray=jt_asrfa[i].split(jg_oe.jc_oA3xaDbZero.jc_GLSep_Compact);if(!jt_arecFieldArray)
continue;if(!jt_nof_fafields)
jt_nof_fafields=jt_arecFieldArray.length;else if(jt_nof_fafields!=jt_arecFieldArray.length)
{jt_arsFieldArray=new Array();break;}
jt_arsFieldArray.push(jt_arecFieldArray);}
this.jm_aarsFieldArray[ji_pos]=jt_arsFieldArray;}
return this.jm_aarsFieldArray[ji_pos];}
function GLData_Get_Record_Array()
{if(!this.IsValid())
return null;return this.jm_aRecord;}
function GLData_Set_Record_Array(ji_xglid,ji_id,ji_aRecord)
{this.jm_aRecord=null;if(!this.Set_XGlid(ji_xglid))
return false;if(!this.Set_Id(ji_id))
return false;this.jm_aRecord=ji_aRecord;return true;}
function GLData_Get_Record_String(){return this.Get_Record_String2(0);}
function GLData_ConvertField(ji_sField,ji_index,ji_OptionConvert){return ji_sField;}
function GLData_Get_Record_String2(ji_OptionConvert)
{var jt_aRecord=this.Get_Record_Array();if(!jt_aRecord||(!jt_aRecord.length))
return"";if(!ji_OptionConvert)
return jt_aRecord.join(this.Get_FieldSeparator());var jr_sRecordConverted="";for(var i=0;i<jt_aRecord.length;i++)
{var jt_sField=this.ConvertField(jt_aRecord[i],i,ji_OptionConvert);if(jt_sField&&jt_sField.length)
jr_sRecordConverted+=jt_sField;}
return jr_sRecordConverted;}
function GLData_Set_Record_String(ji_xglid,ji_id,ji_posid,ji_sRecord,ji_bSpecialChars)
{var jt_aRecord=null;if(ji_sRecord)
jt_aRecord=ji_sRecord.split(this.Get_FieldSeparator());if(!(ji_id||ji_posid===null))
ji_id=jt_aRecord[ji_posid];return this.Set_Record_Array(ji_xglid,ji_id,ji_bSpecialChars?this.ConvertSpecialChars(jt_aRecord):jt_aRecord);}
function GLData_ConvertSpecialChars(ji_aRecord){return ji_aRecord;}
function GLData_Get_String(ji_xglidSpoof){return this.Get_String2(0,ji_xglidSpoof);}
function GLData_Get_String2(ji_OptionConvert,ji_xglidSpoof)
{var jt_xglid=null;if(ji_xglidSpoof)
{var jt_glmark=jg_oe.jc_oA3xaDbZero.XGlid2Mark(ji_xglidSpoof);if(jt_glmark&&jt_glmark!=this.Get_GlidMark())
return"";var jt_glidSpoof=jg_oe.jc_oA3xaDbZero.XGlid2Glid(ji_xglidSpoof);if(jt_glidSpoof)
jt_xglid=jt_glidSpoof+this.Get_GlidMark();}
if(!jt_xglid)
jt_xglid=this.Get_XGlid();if(!jt_xglid)
return"";return jt_xglid+jg_oe.jc_oA3xaDbZero.jc_GLSep_Header+this.Get_Record_String2(ji_OptionConvert);}
function GLData_Set_String(ji_sData)
{return this.Set_XString(null,null,null,ji_sData);}
function GLData_Set_XString(ji_xglid,ji_id,ji_posid,ji_sData)
{if(!ji_sData)
return this.Set_Record_Array(null,null,null);var jt_aData=ji_sData.split(jg_oe.jc_oA3xaDbZero.jc_GLSep_Header);if(!jt_aData||!jt_aData[0])
return this.Set_Record_Array(null,null,null);if(ji_xglid==null)
ji_xglid=jt_aData[0];else if(ji_id==null&&ji_posid===null)
ji_id=jt_aData[0];return this.Set_Record_String(ji_xglid,ji_id,ji_posid,jt_aData[1],true);}
function GLData_LoadFromGLS(ji_oDbTransaction,ji_xglid,ji_id)
{if(ji_xglid)
this.Set_XGlid(ji_xglid);if(ji_id)
this.Set_Id(ji_id);if(!this.IsValid())
return false;jg_oe.CanLogInfo()&&jg_oe.LogInfo("GLData_LoadFromGLS: "+ji_xglid+","+ji_id);if(!ji_oDbTransaction)
return false;try
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadInProgress);}
catch(e)
{jg_oe.ExceptionMessage(e,"");}
var jr_b=ji_oDbTransaction.Get_Storage().Read3(ji_oDbTransaction,new GLData_Value(this.Get_XKey(),null,this));return jr_b;}
function GLData_StoreToGLS(ji_oDbTransaction)
{if(!this.IsValid())
return false;if(!ji_oDbTransaction)
return false;this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreInProgress);if(!ji_oDbTransaction.Get_Storage().Write3(ji_oDbTransaction,new GLData_Value(this.Get_XKey(),this.Get_Record_String(),this)))
return false;return true;}
function GLData_LoadFromGLS_ByString(ji_oDbTransaction,ji_sData)
{if(!this.Set_String(ji_sData))
return false;return this.LoadFromGLS(ji_oDbTransaction,null,null);}
function GLDataStatus(ji_DTStatus,ji_sMessage,ji_fnOnChange)
{this.jm_DTStatus=(ji_DTStatus||jg_oe.jc_oA3xaDbZero.jc_DTStatus_Empty);this.jm_sMessage=(ji_sMessage||"");this.jm_fnOnChange=(ji_fnOnChange||null);this.jm_Operation=null;this.jm_Target=null;this.jm_Status=null;this.IsReady=function()
{return this.jm_Status==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StReady;};this.IsInProgress=function()
{return this.jm_Status==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StInProgress||this.jm_Status==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StOpen;};this.IsOpen=function()
{return this.jm_Status==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StOpen;};this.IsDone=function()
{return this.jm_Status==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StSuccess||this.jm_Status==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StFail||this.jm_Status==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StEmpty;};this.IsFail=function()
{return this.jm_Status==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StFail;};this.IsEmpty=function()
{return this.jm_Status==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StEmpty;};this.IsSuccess=function()
{return this.jm_Status==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StSuccess;};this.IsLoadingTable=function()
{return this.jm_Operation==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpLoad&&this.jm_Target==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_TgTableHX&&this.jm_Status==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StInProgress;};this.IsLoadingRecord=function()
{return this.jm_Operation==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpLoad&&this.jm_Target==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_TgRecord&&this.jm_Status==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StInProgress;};this.IsStoring=function()
{return this.jm_Operation==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpStore&&this.jm_Status==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StInProgress;};this.Set2=GLDataStatus_Set2;this.Get=function(){return this.jm_DTStatus||jg_oe.jc_oA3xaDbZero.jc_DTStatus_Empty;};this.Set=function(ji_DTStatus,ji_sMessage)
{this.jm_DTStatus=ji_DTStatus;this.MakeOTS();return this.Set2(null,null,null,ji_sMessage);};this.SetFrom=function(ji_oDTStatus)
{if(!ji_oDTStatus)
return false;this.jm_DTStatus=ji_oDTStatus.Get();this.jm_Operation=ji_oDTStatus.jm_Operation;this.jm_Target=ji_oDTStatus.jm_Target;return this.Set2(ji_oDTStatus.jm_Status,ji_oDTStatus.jm_sMessage);};this.Get_OperationDescr=function()
{if(this.jm_Operation==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpCache)
return" [ op:Cache ] ";if(this.jm_Operation==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpClear)
return" [ op:ClearDB ] ";if(this.jm_Operation==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpStore)
return" [ op:Store ] ";if(this.jm_Operation==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpLoad)
return" [ op:Load ] ";return" [ op:Unknown ] ";};this.Get_TargetDescr=function()
{if(this.jm_Target==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_TgTable)
return" [ tg:Table ] ";if(this.jm_Target==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_TgTableHeader)
return" [ tg:TbHeader ] ";if(this.jm_Target==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_TgTableHX)
return" [ tg:TbH+X ] ";if(this.jm_Target==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_TgRecord)
return" [ tg:Record ] ";return" [ tg:Any ] ";};this.Get_StatusDescr=function()
{if(this.jm_Status==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StReady)
return" [ st:Ready ] ";if(this.jm_Status==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StOpen)
return" [ st:Open ] ";if(this.jm_Status==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StInProgress)
return" [ st:InProgress ] ";if(this.jm_Status==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StSuccess)
return" [ st:Success ] ";if(this.jm_Status==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StFail)
return" [ st:Fail ] ";if(this.jm_Status==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StEmpty)
return" [ st:Empty ] ";return" [ st:Unknown ] ";};this.Get_Descr2=function()
{return this.Get_OperationDescr()+this.Get_TargetDescr()+this.Get_StatusDescr();};this.Get_Descr=GLDataStatus_Get_Descr;this.MakeOTS=GLDataStatus_MakeOTS;this.MakeOTS();}
function GLDataStatus2(ji_Status,ji_Target,ji_Operation,ji_sMessage,ji_fnOnChange)
{GLDataStatus.call(this,null,ji_sMessage,ji_fnOnChange);this.jm_Target=(ji_Target||null);this.jm_Operation=(ji_Operation||null);this.jm_Status=(ji_Status||null);}
function GLDataStatus_Set2(ji_Status,ji_Target,ji_Operation,ji_sMessage)
{if(ji_Status>0||ji_Status===0)
this.jm_Status=ji_Status;if(ji_Target>0)
this.jm_Target=ji_Target;if(ji_Operation>0)
this.jm_Operation=ji_Operation;this.jm_sMessage=(ji_sMessage||"");if(this.IsFail())
{jg_oe.LogErr(this.jm_sMessage+
this.Get_OperationDescr()+this.Get_TargetDescr()+this.Get_StatusDescr(),null,"GLDataStatus_Set2");}
else if(this.jm_sMessage)
jg_oe.CanLogInfo()&&jg_oe.LogInfo(this.jm_sMessage,null,"GLDataStatus_Set2");if(this.jm_fnOnChange)
this.jm_fnOnChange(this);return true;}
function GLDataStatus_MakeOTS()
{if(!this.jm_DTStatus&&this.jm_DTStatus!=jg_oe.jc_oA3xaDbZero.jc_DTStatus_Empty)
return false;if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_Empty)
{this.jm_Operation=null;this.jm_Target=null;this.jm_Status=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StEmpty;}
else if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_Cached)
{this.jm_Operation=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpCache;this.jm_Target=null;this.jm_Status=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StSuccess;}
else if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_CacheFail)
{this.jm_Operation=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpCache;this.jm_Target=null;this.jm_Status=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StFail;}
else if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_CacheInProgress)
{this.jm_Operation=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpCache;this.jm_Target=null;this.jm_Status=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StInProgress;}
else if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_Loaded)
{this.jm_Operation=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpLoad;this.jm_Target=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_TgTable;this.jm_Status=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StSuccess;}
else if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadedRecord)
{this.jm_Operation=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpLoad;this.jm_Target=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_TgRecord;this.jm_Status=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StSuccess;}
else if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadedTable)
{this.jm_Operation=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpLoad;this.jm_Target=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_TgTableHX;this.jm_Status=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StSuccess;}
else if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail)
{this.jm_Operation=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpLoad;this.jm_Target=null;this.jm_Status=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StFail;}
else if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadEmpty)
{this.jm_Operation=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpLoad;this.jm_Target=null;this.jm_Status=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StEmpty;}
else if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadRecordInProgress)
{this.jm_Operation=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpLoad;this.jm_Target=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_TgRecord;this.jm_Status=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StInProgress;}
else if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadTableInProgress)
{this.jm_Operation=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpLoad;this.jm_Target=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_TgTableHX;this.jm_Status=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StInProgress;}
else if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadOpen)
{this.jm_Operation=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpLoad;this.jm_Target=null;this.jm_Status=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StOpen;}
else if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_Stored)
{this.jm_Operation=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpStore;this.jm_Target=null;this.jm_Status=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StSuccess;}
else if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreFail)
{this.jm_Operation=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpStore;this.jm_Target=null;this.jm_Status=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StFail;}
else if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreEmpty)
{this.jm_Operation=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpStore;this.jm_Target=null;this.jm_Status=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StEmpty;}
else if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreInProgress)
{this.jm_Operation=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpStore;this.jm_Target=null;this.jm_Status=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StInProgress;}
else if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreOpen)
{this.jm_Operation=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpStore;this.jm_Target=null;this.jm_Status=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StOpen;}
else if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_Cleared)
{this.jm_Operation=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpClear;this.jm_Target=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_TgTable;this.jm_Status=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StSuccess;}
else if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_ClearFail)
{this.jm_Operation=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpClear;this.jm_Target=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_TgTable;this.jm_Status=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StFail;}
else if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_ClearInProgress)
{this.jm_Operation=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpClear;this.jm_Target=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_TgTable;this.jm_Status=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StInProgress;}
else if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_ClearOpen)
{this.jm_Operation=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpClear;this.jm_Target=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_TgTable;this.jm_Status=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StOpen;}
return true;}
function GLDataStatus_Get_Descr()
{if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_Empty)
return"-dts-Empty-";if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_Cached)
return"-dts-Cached-";if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_CacheFail)
return"-dts-CacheFail-";if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_CacheInProgress)
return"-dts-CacheInProgress-";if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_Loaded)
return"-dts-Loaded-";if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadedRecord)
return"-dts-LoadedRecord-";if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadedTable)
return"-dts-LoadedTable-";if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail)
return"-dts-LoadFail-";if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadEmpty)
return"-dts-LoadEmpty-";if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadRecordInProgress)
return"-dts-LoadRecordInProgress-";if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadTableInProgress)
return"-dts-LoadTableInProgress-";if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadOpen)
return"-dts-LoadOpen-";if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_Stored)
return"-dts-Stored-";if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreFail)
return"-dts-StoreFail-";if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreEmpty)
return"-dts-StoreEmpty-";if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreInProgress)
return"-dts-StoreInProgress-";if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreOpen)
return"-dts-StoreOpen-";if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_Cleared)
return"-dts-Cleared-";if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_ClearFail)
return"-dts-ClearFail-";if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_ClearInProgress)
return"-dts-ClearInProgress-";if(this.jm_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_ClearOpen)
return"-dts-ClearOpen-";return"-dts-Unknown-";}
function GLData_Value(ji_xkey,ji_value,ji_ogldTarget)
{A3xaStorage_Value.call(this,ji_xkey,ji_value);this.Set_Result=GLData_Value_Set_Result;this.Set_Value=GLData_Value_Set_Value;this.jm_ogldTarget=ji_ogldTarget;}
function GLData_Value_Set_Result(ji_oStorageOpType,ji_sMessage)
{if(!this.jm_ogldTarget)
return false;if(ji_oStorageOpType.bStore)
{if(ji_oStorageOpType.bSuccess)
{this.jm_ogldTarget.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_Stored,ji_sMessage);}
else
{this.jm_ogldTarget.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreFail,ji_sMessage);}}
else
{if(ji_oStorageOpType.bSuccess)
{this.jm_ogldTarget.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_Loaded,ji_sMessage);}
else if(ji_oStorageOpType.bEmpty)
{this.jm_ogldTarget.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadEmpty,ji_sMessage);}
else
{this.jm_ogldTarget.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail,ji_sMessage);}}
return ji_oStorageOpType.bSuccess||false;}
function GLData_Value_Set_Value(ji_value)
{if(!this.jm_ogldTarget)
return false;if(!ji_value)
return this.Set_Result({bLoad:true,bError:true},"Load Record: "+this.Get_Key()+"=Empty Value");if(!this.jm_ogldTarget.Set_Record_String(this.jm_ogldTarget.Get_XGlid(),this.jm_ogldTarget.Get_Id(),null,ji_value,false))
return this.Set_Result({bLoad:true,bError:true},"Load Record: "+this.Get_Key()+ji_value);return this.Set_Result({bLoad:true,bSuccess:true});}
function GLHeader(ji_glidmark,ji_fieldseparator)
{if(ji_glidmark==null)
ji_glidmark=jg_oe.jc_oA3xaDbZero.jc_GLMID_DT;if(ji_fieldseparator==null)
ji_fieldseparator=jg_oe.jc_oA3xaDbZero.jc_GLSep_Field;GLData.call(this,ji_glidmark,ji_fieldseparator);this.Get_Release=GLHeader_Get_Release;this.Get_FieldNames=GLHeader_Get_FieldNames;this.Set_FieldNames=GLHeader_Set_FieldNames;this.Get_Recordset=GLHeader_Get_Recordset;this.Set_Recordset=GLHeader_Set_Recordset;this.Get_FullString=GLHeader_Get_FullString;this.jm_oglNames=null;this.jm_oglRS=null;}
function GLHeader_Get_Release()
{var jt_aRecord=this.Get_Record_Array();if(!jt_aRecord)
return"";return jt_aRecord[0];}
function GLHeader_Get_FieldNames()
{if((!this.jm_oglNames)||(!this.jm_oglNames.IsValid()))
return null;return this.jm_oglNames;}
function GLHeader_Set_FieldNames(jt_oglNames)
{this.jm_oglNames=jt_oglNames;return true;}
function GLHeader_Get_Recordset()
{if((!this.jm_oglRS)||(!this.jm_oglRS.IsValid()))
return null;return this.jm_oglRS;}
function GLHeader_Set_Recordset(jt_oglRS)
{this.jm_oglRS=jt_oglRS;return true;}
function GLHeader_Get_FullString()
{var jr_sHeader=this.Get_String();if(!jr_sHeader)
return"";jt_oglAx=this.Get_Recordset();if(!jt_oglAx)
return"";var jr_sAx=jt_oglAx.Get_String2(2);if(!jr_sAx)
return"";return jr_sHeader+jg_oe.jc_oA3xaDbZero.jc_GLSep_Block+jr_sAx;}
function GLFieldNames()
{GLData.call(this,jg_oe.jc_oA3xaDbZero.jc_GLMID_FieldNames,jg_oe.jc_oA3xaDbZero.jc_GLSep_Field);this.Get_FieldPos=GLFieldNames_Get_FieldPos;this.Get_PosArray=GLFieldNames_Get_PosArray;this.Get_KeyName=GLFieldNames_Get_KeyName;this.jm_aPos=null;}
function GLFieldNames_Get_KeyName()
{var jt_aGLNames=this.Get_Record_Array();if(!jt_aGLNames)
return null;return jt_aGLNames[0];}
function GLFieldNames_Get_FieldPos(ji_name)
{if(!ji_name)
return-1;if(this.jm_aPos==null)
{if(!this.Get_PosArray())
return-1;if(this.jm_aPos==null)
return-1;}
var jr_pos=this.jm_aPos[ji_name];if(jr_pos>=0)
return jr_pos;return-1;}
function GLFieldNames_Get_PosArray()
{var jt_aGLNames=this.Get_Record_Array();if(jt_aGLNames==null)
return false;if(this.jm_aPos==null)
this.jm_aPos=new Array();for(var jt_pos=0;jt_pos<jt_aGLNames.length;jt_pos++)
{var jt_name=jt_aGLNames[jt_pos];if(jt_name)
this.jm_aPos[jt_name]=jt_pos;}
return true;}
function GLRecord(ji_glidmark)
{if(ji_glidmark==null)
ji_glidmark=jg_oe.jc_oA3xaDbZero.jc_GLMID_DT;GLData.call(this,ji_glidmark,jg_oe.jc_oA3xaDbZero.jc_GLSep_Field);this.Set_PosId=GLRecord_Set_PosId;this.Set_String=GLRecord_Set_String;this.Set_Names=GLRecord_Set_Names;this.Get_Field=GLRecord_Get_Field;this.Get_FieldArray_Recordset=GLRecord_Get_FieldArray_Recordset;this.jm_oglFieldNames=null;this.jm_posid=null;this.jm_aoglrSub=new Array();this.GLRecord_Set_SubRecord=function(ji_SubType,ji_oglrSub)
{if(!(ji_SubType&&ji_oglrSub))
return false;this.jm_aoglrSub[ji_SubType]=ji_oglrSub;return true;};this.Set_SubRecord=function(ji_SubType,ji_oglrSub)
{return this.GLRecord_Set_SubRecord(ji_SubType,ji_oglrSub);};this.Get_SubRecord=function(ji_SubType)
{if(!ji_SubType)
return null;return this.jm_aoglrSub[ji_SubType]||null;};}
function GLRecord_Set_PosId(ji_posid){this.jm_posid=ji_posid;return true;}
function GLRecord_Set_String(ji_sData)
{var jt_xglid=this.Get_XGlid();if(!jt_xglid)
return false;return this.Set_XString(jt_xglid,null,this.jm_posid,ji_sData);}
function GLRecord_Set_Names(ji_oglFieldNames)
{this.jm_oglFieldNames=ji_oglFieldNames;return true;}
function GLRecord_Get_Field(ji_name)
{if(!this.IsValid())
return null;if(!this.jm_oglFieldNames)
return null;var jt_aRecord=this.Get_Record_Array();if(!jt_aRecord)
return null;var jt_pos=this.jm_oglFieldNames.Get_FieldPos(ji_name);if(jt_pos<0)
return null;return jt_aRecord[jt_pos];}
function GLRecord_Get_FieldArray_Recordset(ji_name)
{if(!this.IsValid())
return null;if(!this.jm_oglFieldNames)
return null;var jt_pos=this.jm_oglFieldNames.Get_FieldPos(ji_name);if(!(jt_pos>=0))
return null;return this.Get_Record_RSFieldArray(jt_pos);}
function GLGT(ji_glidmark,ji_fieldseparator,ji_bAssoc)
{if(!ji_glidmark)
ji_glidmark=jg_oe.jc_oA3xaDbZero.jc_GLMID_GT;if(!ji_fieldseparator)
ji_fieldseparator=jg_oe.jc_oA3xaDbZero.jc_GLSep_Field
GLData.call(this,ji_glidmark,ji_fieldseparator);this.Get_Id=GLGT_Get_Id;this.SplitAndCacheRows=GLGT_SplitAndCacheRows;this.Get_Field=GLGT_Get_Field;this.Get_IndirectIndex=GLGT_Get_IndirectIndex;this.Get_Field_Indirect=GLGT_Get_Field_Indirect;this.ConvertField=GLGT_ConvertField;this.jm_bAssoc=(ji_bAssoc==true);this.jm_aGTKeys=null;this.jm_aGTIndirectIndex=null;}
function GLGT_Get_Id(ji_index)
{if(this.jm_bAssoc)
return null;if(!(ji_index>=0))
return null;ji_index+=1;var jt_aIndex=this.Get_Record_Array();if((!jt_aIndex)||ji_index>=jt_aIndex.length)
return false;return jt_aIndex[ji_index];}
function GLGT_SplitAndCacheRows()
{if(!this.jm_bAssoc)
return null;this.jm_aGTKeys=null;this.jm_aGTIndirectIndex=null;var jt_aRecord=this.Get_Record_Array();if(!jt_aRecord)
return false;try
{this.jm_aGTKeys=new Array();this.jm_aGTIndirectIndex=new Array();var jt_Length=0;for(var i=1;i<jt_aRecord.length;i++)
{var jt_aAssoc=jt_aRecord[i].split("=");if((!jt_aAssoc)||(!jt_aAssoc[0])||(!jt_aAssoc[1]))
continue;var jt_GTKey=jt_aAssoc[0];var jt_GTFields=jt_aAssoc[1];this.jm_aGTKeys[jt_GTKey]=jt_GTFields;this.jm_aGTIndirectIndex[jt_Length]=jt_GTKey;jt_Length++;}
if(jt_Length<=0)
{this.jm_aGTKeys=null;this.jm_aGTIndirectIndex=null;}}
catch(e)
{this.jm_aGTKeys=null;this.jm_aGTIndirectIndex=null;}
return!(this.jm_aGTKeys==null);}
function GLGT_Get_IndirectIndex()
{if(!this.jm_bAssoc)
return null;if(!this.jm_aGTIndirectIndex)
{if(!this.SplitAndCacheRows())
this.jm_aGTIndirectIndex=null;}
return this.jm_aGTIndirectIndex;}
function GLGT_Get_Field_Indirect(ji_index,ji_pos)
{if(!this.jm_bAssoc)
return null;var jt_aGTIndirectIndex=this.Get_IndirectIndex();if(!jt_aGTIndirectIndex)
return null;if(!(ji_index>=0)||ji_index>=jt_aGTIndirectIndex.length)
return null;return this.Get_Field(jt_aGTIndirectIndex[ji_index],ji_pos);}
function GLGT_Get_Field(ji_GTKey,ji_pos)
{if(!this.jm_bAssoc)
return null;if(!ji_GTKey)
return null;if(this.jm_aGTKeys==null)
{if(!this.SplitAndCacheRows())
return null;}
var jt_sFields=this.jm_aGTKeys[ji_GTKey];if(!jt_sFields)
return null;if(ji_pos===null)
return jt_sFields;var jt_aFields=jt_sFields.split(",");if((!jt_aFields)||(!jt_aFields[0]))
return null;if(jt_aFields.length<=ji_pos)
return null;return jt_aFields[ji_pos];}
function GLGT_ConvertField(ji_sField,ji_index,ji_OptionConvert)
{if(!ji_OptionConvert||(!ji_sField))
return ji_sField;if(ji_index<1);var jt_sleft="";var jt_sright="";if(ji_index<1)
jt_sleft=jt_sright=ji_sField;else if((ji_OptionConvert==1)||(ji_OptionConvert==2))
{var jt_aAssoc=ji_sField.split("=");if((!jt_aAssoc)||(!jt_aAssoc[0])||(!jt_aAssoc[1]))
return"";jt_sleft=jt_aAssoc[0];jt_sright=jt_aAssoc[1];}
if(ji_OptionConvert==1)
return(ji_index>0?jg_oe.jc_oA3xaDbZero.jc_GLSep_Compact:"")+jt_sleft;else if(ji_OptionConvert==2)
return(ji_index>0?jg_oe.jc_oA3xaDbZero.jc_GLSep_Compact:"")+jt_sright;else if(ji_OptionConvert==3)
return(ji_index>0?jg_oe.jc_oA3xaDbZero.jc_GLSep_Compact:"")+ji_sField;return"";}
function GLDataTable(ji_oDatabase,ji_glid)
{this.jm_oDTStatus=new GLDataStatus();this.jm_oglHeader=null;this.jm_aoglr=new A3xaArray();this.jm_aaoglrSelect=new A3xaArray();this.jm_oglIxHeader=null;this.jm_bAX=true;this.jm_oglAxHeader=null;this.jm_AxPosPrimaryKey=null;this.jm_odb=(ji_oDatabase||null);this.NewHeader=GLDataTable_NewHeader;this.NewNames=GLDataTable_NewNames;this.NewRecord=GLDataTable_NewRecord;this.NewIndexHeader=GLDataTable_NewIndexHeader;this.NewIndex=GLDataTable_NewIndex;this.NewAltIndexHeader=GLDataTable_NewAltIndexHeader;this.NewAltIndex=GLDataTable_NewAltIndex;this.NewGTHeader=GLDataTable_NewGTHeader;this.NewGT=GLDataTable_NewGT;this.Get_Header=GLDataTable_Get_Header;this.Get_AxHeader=GLDataTable_Get_AxHeader;this.Get_AltIndex=GLDataTable_Get_AltIndex;this.Get_IxHeader=GLDataTable_Get_IxHeader;this.Get_Index=GLDataTable_Get_Index;this.Get_AltIndex_PosPrimaryKey=GLDataTable_Get_AltIndex_PosPrimaryKey;this.Get_Glid=GLDataTable_Get_Glid;this.Set_Glid=GLDataTable_Set_Glid;this.NewGTFromString=GLDataTable_NewGTFromString;this.Set_String=GLDataTable_Set_String;this.IntegrityCheck=GLDataTable_IntegrityCheck;this.StoreToGLS=GLDataTable_StoreToGLS;this.LoadFromGLS=GLDataTable_LoadFromGLS;this.LoadRecordsFromGLS=GLDataTable_LoadRecordsFromGLS;this.Get_FieldNames=GLDataTable_Get_FieldNames;this.Get_CountRecords=function()
{var jt_oglIx=this.Get_Index();if(!jt_oglIx)
return 0;var jt_aIndex=jt_oglIx.Get_Record_Array();if(!jt_aIndex||jt_aIndex.length<=1)
return 0;return jt_aIndex.length-1;};this.BuildAltKey=GLDataTable_BuildAltKey;this.IndirectIndex_2_PrimaryKey=function(ji_IndirectIndex)
{var jt_oglIx=this.Get_Index();if(!jt_oglIx)
return null;var jr_id=jt_oglIx.Get_Id(ji_IndirectIndex);return jr_id;};this.AltKey_2_PrimaryKey=GLDataTable_AltKey_2_PrimaryKey;this.LoadRecordFromGLS=GLDataTable_LoadRecordFromGLS;this.CheckRecordsStatus=GLDataTable_CheckRecordsStatus;this.OnTransactionError=GLDataTable_OnTransactionError;this.OnTransactionComplete=GLDataTable_OnTransactionComplete;this.CheckLoadTableStatus=GLDataTable_CheckLoadTableStatus;this.SetupLoadedRecords=GLDataTable_SetupLoadedRecords;this.Get_GLRecord=GLDataTable_Get_GLRecord;this.Set_GLRecord=GLDataTable_Set_GLRecord;this.Get_Recordset=function(){return this.jm_aoglr||null;};this.New_Recordsel=function(ji_sSelectName,ji_fnSelect,ji_MaxItems)
{var jr_aoglrSelectNew=new A3xaArrayIt(this.Get_Recordset());if(!jr_aoglrSelectNew.SelectItems(ji_fnSelect,ji_MaxItems))
return null;if(!this.jm_aaoglrSelect.Set_Item(ji_sSelectName||"DefaultSelect",jr_aoglrSelectNew))
return null;return jr_aoglrSelectNew;};this.Get_Recordsel=function(ji_sSelectName)
{return this.jm_aaoglrSelect.Get_Item(ji_sSelectName||"DefaultSelect")||new A3xaArrayIt(this.Get_Recordset());};this.ClearGLSAndFail=GLDataTable_ClearGLSAndFail;this.Get_Database=GLDataTable_Get_Database;this.Get_Storage=GLDataTable_Get_Storage;this.Get_CountByFilter=function(ji_filter){return 0;};this.Find=function(ji_fnCheck){return this.Get_Recordset().Find(ji_fnCheck);};if(this.jm_odb&&ji_glid)
{var jt_oSchemaTable=this.jm_odb.jm_oDbSchema.Get_Table_ByName(ji_glid);if(jt_oSchemaTable&&!jt_oSchemaTable.jp_bAX)
this.jm_bAX=false;this.Set_Glid(ji_glid);}}
function GLDataTable_Get_Database(){return this.jm_odb;}
function GLDataTable_Get_Storage()
{return jg_oe.Get_Database().Get_Storage(this.Get_Glid());}
function GLDataTable_Get_GLRecord(ji_id)
{return this.Get_Recordset().Get_Item(ji_id);}
function GLDataTable_Set_GLRecord(ji_id,ji_oglr)
{return this.Get_Recordset().Set_Item(ji_id,ji_oglr);}
function GLDataTable_ClearGLSAndFail(ji_DTStatus,ji_sMessage)
{this.jm_oDTStatus.Set(ji_DTStatus,ji_sMessage);this.Get_Database().jm_aoglDataTableStore=null;this.Get_Database().jm_aoDTStatus_TableToClear=null;jg_oe.ClearStorage();return false;}
function GLDataTable_NewHeader(){return new GLHeader(null,null);}
function GLDataTable_NewNames(){return new GLFieldNames();}
function GLDataTable_NewRecord(){return null;}
function GLDataTable_NewIndexHeader()
{return new GLHeader(jg_oe.jc_oA3xaDbZero.jc_GLMID_IX,jg_oe.jc_oA3xaDbZero.jc_GLSep_Field);}
function GLDataTable_NewIndex()
{return new GLGT(jg_oe.jc_oA3xaDbZero.jc_GLMID_IX,jg_oe.jc_oA3xaDbZero.jc_GLSep_Field,false);}
function GLDataTable_NewAltIndexHeader()
{return new GLHeader(jg_oe.jc_oA3xaDbZero.jc_GLMID_AX,jg_oe.jc_oA3xaDbZero.jc_GLSep_Field);}
function GLDataTable_NewAltIndex()
{return new GLGT(jg_oe.jc_oA3xaDbZero.jc_GLMID_AX,jg_oe.jc_oA3xaDbZero.jc_GLSep_Field,true);}
function GLDataTable_NewGTHeader()
{return new GLHeader(jg_oe.jc_oA3xaDbZero.jc_GLMID_GT,jg_oe.jc_oA3xaDbZero.jc_GLSep_Field);}
function GLDataTable_NewGT()
{return new GLGT(jg_oe.jc_oA3xaDbZero.jc_GLMID_GT,jg_oe.jc_oA3xaDbZero.jc_GLSep_Field,true);}
function GLDataTable_Get_IxHeader(){return this.jm_oglIxHeader;}
function GLDataTable_Get_Index()
{if((!this.jm_oglIxHeader)||(!this.jm_oglIxHeader.IsValid()))
return null;return this.jm_oglIxHeader.Get_Recordset();}
function GLDataTable_Get_AxHeader(){return this.jm_oglAxHeader;}
function GLDataTable_Get_AltIndex()
{if((!this.jm_oglAxHeader)||(!this.jm_oglAxHeader.IsValid()))
return null;return this.jm_oglAxHeader.Get_Recordset();}
function GLDataTable_Get_AltIndex_PosPrimaryKey(){return this.jm_AxPosPrimaryKey;}
function GLDataTable_Get_Header()
{if((!this.jm_oglHeader)||(!this.jm_oglHeader.IsValid()))
return null;return this.jm_oglHeader;}
function GLDataTable_Get_Glid()
{if((!this.jm_oglHeader)||(!this.jm_oglHeader.IsValid()))
return null;return this.jm_oglHeader.Get_Glid();}
function GLDataTable_Set_Glid(ji_glid)
{if(!this.jm_oglHeader)
this.jm_oglHeader=this.NewHeader();return this.jm_oglHeader.Set_Glid(ji_glid);}
function GLDataTable_Get_FieldNames(){return this.jm_oglHeader.Get_FieldNames();}
function GLDataTable_BuildAltKey(ji_oglr,ji_bSelf)
{var jr_AltKey=null;if(!ji_oglr)
return null;var jt_glid=this.Get_Glid();if(!jt_glid)
return null;return null;}
function GLDataTable_AltKey_2_PrimaryKey(ji_altkey)
{if(!this.jm_bAX)
return null;if(!ji_altkey)
return null;if((!this.jm_oglAxHeader)||(!this.jm_oglAxHeader.IsValid()))
return null;var jt_oglAx=this.jm_oglAxHeader.Get_Recordset();if(!jt_oglAx)
return null;var jr_id=jt_oglAx.Get_Field(ji_altkey,this.jm_AxPosPrimaryKey);return jr_id||null;}
function GLDataTable_LoadRecordFromGLS(ji_oDbTransaction,ji_id)
{var jt_this=this;if(!ji_id)
return false;var jt_glid=this.Get_Glid();if(!jt_glid)
return false;var jt_oglNames=this.jm_oglHeader.Get_FieldNames();if(!jt_oglNames)
return false;var jt_oglRecord=this.NewRecord();if(!jt_oglRecord)
return false;jg_oe.CanLogInfo()&&jg_oe.LogInfo("GLDataTable_LoadRecordFromGLS: Done NewRecord ");if(!jt_oglRecord.Set_Names(jt_oglNames))
return false;this.Set_GLRecord(ji_id,jt_oglRecord);if(!jt_oglRecord.LoadFromGLS(ji_oDbTransaction,jt_glid,ji_id))
return false;jg_oe.CanLogInfo()&&jg_oe.LogInfo("GLDataTable_LoadRecordFromGLS: Done LoadFromGLS");jg_oe.Get_Reporter().OnDataRead();return true;}
function GLDataTable_Set_String(ji_sGLRS)
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_Empty);this.jm_sGLRS=null;if((!ji_sGLRS))
return false;this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_CacheInProgress);var jt_aglRS=ji_sGLRS.split(jg_oe.jc_oA3xaDbZero.jc_GLSep_Block);var jt_oglHeader=this.NewHeader();jt_oglHeader.Set_String(jt_aglRS[0]);var jt_sGlid=jt_oglHeader.Get_Glid();if(!jt_sGlid&&jt_sGlid!=this.Get_Glid())
return false;jg_oe.CanLogInfo()&&jg_oe.LogInfo("glid: "+jt_sGlid,"","GLDataTable_Set_String");if(!jt_oglHeader.IsValid())
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_CacheFail,"Header");return false;}
var jt_oglNames=this.NewNames();jt_oglNames.Set_String(jt_aglRS[1]);if(!jt_oglNames.IsValid())
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_CacheFail,"Field Names");return false;}
if(jt_oglNames.Get_Glid()!=jt_sGlid)
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_CacheFail,"Field Names TBID");return false;}
var jt_sKeyName=jt_oglNames.Get_KeyName();if(!jt_sKeyName)
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_CacheFail,"Missing Key Name");return false;}
this.jm_oglHeader=jt_oglHeader;this.jm_oglHeader.Set_FieldNames(jt_oglNames);var jt_aIndex=new Array();jt_aIndex.push(jt_sKeyName);for(var i=2;i<jt_aglRS.length;i++)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("record N:"+
i,"","GLDataTable_Set_String");var jt_oglRecord=this.NewRecord();if(!jt_oglRecord)
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_CacheFail,"Records: Record null");return false;}
if(!jt_oglRecord.Set_Names(jt_oglNames))
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_CacheFail,"Records: Set_Names");return false;}
var jt_posid=0;if(!jt_oglRecord.Set_XString(jt_sGlid,null,jt_posid,jt_aglRS[i]))
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_CacheFail,"Records: Set_XString");return false;}
var jt_id=jt_oglRecord.Get_Id();if(!(jt_id&&jt_id.length&&jt_id!=0))
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_CacheFail,"Records Id");return false;}
jg_oe.CanLogInfo()&&jg_oe.LogInfo("before:"+
i,"Set_GLRecord(jt_id,jt_oglRecord)","GLDataTable_Set_String");this.Set_GLRecord(jt_id,jt_oglRecord);jg_oe.CanLogInfo()&&jg_oe.LogInfo("after:"+
i,"Set_GLRecord(jt_id,jt_oglRecord)","GLDataTable_Set_String");jt_aIndex.push(jt_id);}
var jt_oglIxHeader=this.NewIndexHeader();var jt_oglIx=this.NewIndex();jt_oglIxHeader.Set_Record_Array(jt_sGlid,null,new Array(this.jm_oglHeader.Get_Release()));if(!jt_oglIxHeader.IsValid())
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_CacheFail,"Index Header not valid");return false;}
jt_oglIx.Set_Record_Array(jt_sGlid,1,jt_aIndex);if(!jt_oglIx.IsValid())
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_CacheFail,"Index not valid");return false;}
jt_oglIxHeader.Set_Recordset(jt_oglIx);this.jm_oglIxHeader=jt_oglIxHeader;this.jm_oDTStatus.SetFrom(this.IntegrityCheck());return true;}
function GLDataTable_NewGTFromString(ji_sGLRS_GT,ji_glidCheck,ji_glidmark)
{if((!ji_sGLRS_GT))
return null;if(!ji_glidCheck)
ji_glidCheck=this.Get_Glid();var jt_aGLRS_GT=ji_sGLRS_GT.split(jg_oe.jc_oA3xaDbZero.jc_GLSep_Block);var jt_oglGTHeader=null;if(ji_glidmark==jg_oe.jc_oA3xaDbZero.jc_GLMID_AX)
jt_oglGTHeader=this.NewAltIndexHeader();else if(ji_glidmark==jg_oe.jc_oA3xaDbZero.jc_GLMID_IX)
jt_oglGTHeader=this.NewIndexHeader();else if(!ji_glidmark||ji_glidmark==jg_oe.jc_oA3xaDbZero.jc_GLMID_GT)
jt_oglGTHeader=this.NewGTHeader();else
return null;jt_oglGTHeader.Set_String(jt_aGLRS_GT[0]);if(!jt_oglGTHeader.IsValid())
return null;var jt_sGTHGLId=jt_oglGTHeader.Get_Glid();if(jt_sGTHGLId!=ji_glidCheck)
return null;var jt_oglGT=null;if(ji_glidmark==jg_oe.jc_oA3xaDbZero.jc_GLMID_AX)
jt_oglGT=this.NewAltIndex();else if(ji_glidmark==jg_oe.jc_oA3xaDbZero.jc_GLMID_IX)
jt_oglGT=this.NewIndex();else if(!ji_glidmark||ji_glidmark==jg_oe.jc_oA3xaDbZero.jc_GLMID_GT)
jt_oglGT=this.NewGT();jt_oglGT.Set_XString(null,1,null,jt_aGLRS_GT[1]);if(!jt_oglGT.IsValid())
return null;var jt_sGTGLId=jt_oglGT.Get_Glid();if(jt_sGTGLId!=ji_glidCheck)
return null;jt_oglGTHeader.Set_Recordset(jt_oglGT);return jt_oglGTHeader;}
function GLDataTable_IntegrityCheck()
{var jt_sGlid=this.Get_Glid();if(!jt_sGlid)
return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_CacheFail,"Missing Table Name");if((!this.jm_oglHeader)||(!this.jm_oglHeader.IsValid()))
return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_CacheFail,"Header not valid");var jt_oglNames=this.jm_oglHeader.Get_FieldNames();if(!jt_oglNames)
return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_CacheFail,"Missing Field Names");if(!(this.jm_oglIxHeader&&this.jm_oglIxHeader.IsValid()))
return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_CacheFail,"Index Header not valid");var jt_oglIx=this.jm_oglIxHeader.Get_Recordset();if(!jt_oglIx)
return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_CacheFail,"Missing Index values");jg_oe.CanLogInfo()&&jg_oe.LogInfo("end:glid"+
jt_sGlid,"","GLDataTable_IntegrityCheck");return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_Cached);}
function GLDataTable_StoreToGLS(ji_oDbTransaction)
{var jt_this=this;var jt_oDTStatus=this.IntegrityCheck();if(!(jt_oDTStatus&&jt_oDTStatus.Get()==jg_oe.jc_oA3xaDbZero.jc_DTStatus_Cached))
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreFail,"Cache not valid for: "+(jt_oDTStatus.jm_sMessage||""));return false;}
var jt_sGlid=this.Get_Glid();var jt_oglNames=this.jm_oglHeader.Get_FieldNames();var jt_oglIx=this.jm_oglIxHeader.Get_Recordset();this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreInProgress);if(!this.jm_oglHeader.StoreToGLS(ji_oDbTransaction))
return this.ClearGLSAndFail(jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreFail,"Store Header");if(!jt_oglNames.StoreToGLS(ji_oDbTransaction))
{return this.ClearGLSAndFail(jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreFail,"Store Field Names");}
if(!this.jm_oglIxHeader.StoreToGLS(ji_oDbTransaction))
{return this.ClearGLSAndFail(jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreFail,"Store Index");}
if(!jt_oglIx.StoreToGLS(ji_oDbTransaction))
{return this.ClearGLSAndFail(jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreFail,"Store Index values");}
if(this.jm_oglAxHeader)
{if(!this.jm_oglAxHeader.StoreToGLS(ji_oDbTransaction))
{return this.ClearGLSAndFail(jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreFail,"Store AltIndex");}
var jt_oglAx=this.jm_oglAxHeader.Get_Recordset();if(!jt_oglAx.StoreToGLS(ji_oDbTransaction))
{return this.ClearGLSAndFail(jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreFail,"Store AltIndex values");}}
var jt_CountRecords=this.Get_Recordset().Get_Count();for(var i=0;i<jt_CountRecords;i++)
{var jt_oglRecord=this.Get_Recordset().Get_Item_ByIndex(i);if(!jt_oglRecord.StoreToGLS(ji_oDbTransaction))
{return this.ClearGLSAndFail(jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreFail,"Store Records");}}
jg_oe.Get_Reporter().OnDataStored();return true;}
function GLDataTable_LoadFromGLS(ji_glid,ji_oDbTransaction,ji_bHeaderOnly)
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadTableInProgress);if(!ji_glid)
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail,"Table ID");return false;}
var jt_oglHeader=this.NewHeader();if(!jt_oglHeader.LoadFromGLS(ji_oDbTransaction,ji_glid,null))
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail,"Load Header");return false;}
if(ji_bHeaderOnly)
{if(!jt_oglHeader.IsValid())
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail,"Load Header Cache");return false;}
this.jm_oglHeader=jt_oglHeader;return true;}
var jt_oglNames=this.NewNames();var jt_oglIxHeader=this.NewIndexHeader();var jt_oglIx=this.NewIndex();if(!jt_oglNames.LoadFromGLS(ji_oDbTransaction,ji_glid,null))
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail,"Load Field Names");return false;}
if(!jt_oglIxHeader.LoadFromGLS(ji_oDbTransaction,ji_glid,null))
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail,"Load Index");return false;}
if(!jt_oglIx.LoadFromGLS(ji_oDbTransaction,ji_glid,1))
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail,"Load Index values");return false;}
if(!jt_oglHeader.IsValid())
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail,"Load Header Cache");return false;}
if(!jt_oglNames.IsValid())
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail,"Load Field Names Cache");return false;}
if((!jt_oglIxHeader.IsValid())||(!jt_oglIx.IsValid()))
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail,"Load Index Cache");return false;}
this.jm_oglHeader=jt_oglHeader;this.jm_oglHeader.Set_FieldNames(jt_oglNames);this.jm_oglHeader.Set_Recordset(null);this.jm_oglIxHeader=jt_oglIxHeader;this.jm_oglIxHeader.Set_Recordset(jt_oglIx);this.jm_oglAxHeader=null;return true;}
function GLDataTable_CheckLoadTableStatus(ji_bHeaderOnly)
{if(!this.jm_oDTStatus.Get()==jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadTableInProgress)
{jg_oe.LogErr("Exit because not in progress, ho: "+(ji_bHeaderOnly?"Y":"N"),"","GLDataTable_CheckLoadTableStatus");return true;}
if(!(this.jm_oglHeader&&this.jm_oglHeader.IsValid()))
{jg_oe.LogErr("Header not valid, ho: "+(ji_bHeaderOnly?"Y":"N"),"","GLDataTable_CheckLoadTableStatus");this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail);return true;}
if(this.jm_oglHeader.jm_oDTStatus.IsFail())
{jg_oe.LogErr("Header Fail, ho: "+(ji_bHeaderOnly?"Y":"N"),"","GLDataTable_CheckLoadTableStatus");this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail);return true;}
if(ji_bHeaderOnly)
{var jt_sRelease=this.jm_oglHeader.Get_Release();if(this.jm_oglHeader.jm_oDTStatus.Get()==jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadEmpty||this.jm_oglHeader.jm_oDTStatus.Get()==jg_oe.jc_oA3xaDbZero.jc_DTStatus_Empty||!(jt_sRelease&&jt_sRelease.length))
{jg_oe.LogErr("HeaderOnly Empty","","GLDataTable_CheckLoadTableStatus");this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadEmpty);}
else
{jg_oe.CanLogInfo({DB:4})&&jg_oe.LogInfo("HeaderOnly Loaded, rel: "+jt_sRelease,"","GLDataTable_CheckLoadTableStatus");this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadedTable);}
return true;}
if(!(this.jm_oglHeader.Get_FieldNames()&&this.jm_oglHeader.Get_FieldNames().IsValid()))
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail);return true;}
if(!(this.jm_oglIxHeader&&this.jm_oglIxHeader.IsValid()))
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail);return true;}
if(this.jm_oglHeader.jm_oDTStatus.Get()==jg_oe.jc_oA3xaDbZero.jc_DTStatus_Loaded&&this.jm_oglHeader.Get_FieldNames().jm_oDTStatus.Get()==jg_oe.jc_oA3xaDbZero.jc_DTStatus_Loaded&&this.jm_oglIxHeader.jm_oDTStatus.Get()==jg_oe.jc_oA3xaDbZero.jc_DTStatus_Loaded)
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadedTable);return true;}
if(this.jm_oglHeader.jm_oDTStatus.Get()==jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail)
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail);return true;}
if(this.jm_oglHeader.Get_FieldNames().jm_oDTStatus.Get()==jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail)
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail);return true;}
if(this.jm_oglIxHeader.jm_oDTStatus.Get()==jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail)
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail);return true;}
if(this.jm_oglHeader.jm_oDTStatus.Get()==jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadEmpty||this.jm_oglHeader.jm_oDTStatus.Get()==jg_oe.jc_oA3xaDbZero.jc_DTStatus_Empty||!this.jm_oglHeader.Get_Release())
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadEmpty);return true;}
if(this.jm_oglHeader.Get_FieldNames().jm_oDTStatus.Get()==jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadEmpty||this.jm_oglHeader.Get_FieldNames().jm_oDTStatus.Get()==jg_oe.jc_oA3xaDbZero.jc_DTStatus_Empty)
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadEmpty);return true;}
if(this.jm_oglIxHeader.jm_oDTStatus.Get()==jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadEmpty||this.jm_oglIxHeader.jm_oDTStatus.Get()==jg_oe.jc_oA3xaDbZero.jc_DTStatus_Empty)
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadEmpty);return true;}
this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail);return true;}
function GLDataTable_LoadRecordsFromGLS(ji_oDbTransaction)
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadRecordInProgress);jg_oe.CanLogInfo()&&jg_oe.LogInfo("Begin","GLDataTable_LoadRecordsFromGLS");if(!(this.jm_oglHeader&&this.jm_oglHeader.IsValid()&&this.jm_oglHeader.Get_FieldNames()&&this.jm_oglHeader.Get_FieldNames().IsValid()))
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail,"Load Records Cache");return false;}
if(!(this.jm_oglIxHeader&&this.jm_oglIxHeader.IsValid()&&this.jm_oglIxHeader.Get_Recordset()&&this.jm_oglIxHeader.Get_Recordset().IsValid()))
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail,"Load Records Cache");return false;}
jg_oe.CanLogInfo()&&jg_oe.LogInfo("GLDataTable_LoadRecordsFromGLS: p3");var jt_glid=this.Get_Glid();var jt_nRecords=this.Get_CountRecords();jg_oe.CanLogInfo()&&jg_oe.LogInfo("GLDataTable_LoadRecordsFromGLS: p2="+jt_nRecords);if(!(jt_nRecords>0))
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadedRecord,"Loaded Records Cache");return false;}
var jt_bResult=true;var jt_RecordsInProgress=0;for(var jt_Record=0;jt_Record<jt_nRecords;jt_Record++)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("GLDataTable_LoadRecordsFromGLS: "+jt_Record);var jt_id=this.IndirectIndex_2_PrimaryKey(jt_Record);if(!(jt_id&&this.LoadRecordFromGLS(ji_oDbTransaction,jt_id)))
{}
else
jt_RecordsInProgress++;}
if(!jt_RecordsInProgress)
this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_Empty);return true;}
function GLDataTable_CheckRecordsStatus(ji_bStore)
{if(ji_bStore)
{}
else
{if(this.jm_oDTStatus.Get()==jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail)
return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail,"Load Database Recordset: Table "+this.Get_Glid());jg_oe.CanLogInfo()&&jg_oe.LogInfo("GLDataTable_CheckRecordsStatus: "+this.Get_Glid());var jt_nRecords=this.Get_CountRecords();if(!(jt_nRecords>0))
{return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_Empty);}
var jr_odtStatus=new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadedRecord);jg_oe.CanLogInfo()&&jg_oe.LogInfo("GLDataTable_CheckRecordsStatus: "+this.Get_Glid()+" n="+jt_nRecords);for(var i=0;i<jt_nRecords;i++)
{var jt_id=this.IndirectIndex_2_PrimaryKey(i);var jt_oglr=this.Get_GLRecord(jt_id);if(!jt_oglr)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("GLDataTable_CheckRecordsStatus: "+
this.Get_Glid()+" null Record="+this.IndirectIndex_2_PrimaryKey(i));if(jr_odtStatus.Get()==jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadedRecord)
jr_odtStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_Empty);continue;}
var jt_DTStatus=jt_oglr.jm_oDTStatus.Get();if(jt_DTStatus!=jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadedRecord&&jt_DTStatus!=jg_oe.jc_oA3xaDbZero.jc_DTStatus_Loaded)
{if(jt_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail)
{return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail);}
else if(jt_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadInProgress)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("GLDataTable_CheckRecordsStatus: "+this.Get_Glid()+" LoadInPro");jr_odtStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadInProgress);}
else if(jt_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_Empty)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("GLDataTable_CheckRecordsStatus: "+this.Get_Glid()+" Quit="+jt_DTStatus);if(jr_odtStatus.Get()==jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadedRecord)
jr_odtStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_Empty);}
else
{return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail);}}}}
return jr_odtStatus;}
function GLDataTable_SetupLoadedRecords(ji_ogldtParent)
{var jt_odb=this.Get_Database();var jt_nRecords=this.Get_CountRecords();var jt_glid=this.Get_Glid();var jt_oSchemaTable=jt_odb.jm_oDbSchema.Get_Table_ByName(jt_glid);var jt_oglNames=null;if(this.jm_oglHeader)
jt_oglNames=this.jm_oglHeader.Get_FieldNames();var jt_sKeyName="";if(jt_oglNames)
jt_sKeyName=jt_oglNames.Get_KeyName();var jt_oa3xRecordset=this.Get_Recordset();if(this.jm_bAX&&jt_sKeyName)
{var jt_aAltIndex=[];jt_aAltIndex.push(jt_sKeyName);for(var jrec=0;jrec<jt_nRecords;jrec++)
{var jt_id=jt_oa3xRecordset.Get_Key(jrec);if(!jt_id)
continue;var jt_oglr=jt_oa3xRecordset.Get_Item(jt_id);if(!jt_oglr)
continue;var jt_AltKey=this.BuildAltKey(jt_oglr,true);if(!jt_AltKey)
continue;jt_aAltIndex.push(jt_AltKey+"="+jt_id);}
var jt_oglAxHeader=this.NewAltIndexHeader();var jt_oglAx=this.NewAltIndex();jt_oglAxHeader.Set_Record_Array(jt_glid,null,new Array(this.jm_oglHeader.Get_Release()));if(!jt_oglAxHeader.IsValid())
return false;jt_oglAx.Set_Record_Array(jt_glid,1,jt_aAltIndex);if(!jt_oglAx.IsValid())
return false;jt_oglAxHeader.Set_Recordset(jt_oglAx);this.jm_oglAxHeader=jt_oglAxHeader;}
if(ji_ogldtParent)
{if(!(jt_oSchemaTable&&jt_oSchemaTable.jp_sParent))
return false;for(var irecord=0;irecord<jt_nRecords;irecord++)
{var jt_id=this.IndirectIndex_2_PrimaryKey(irecord);if(!jt_id)
continue;var jt_oglr=ji_ogldtParent.Get_GLRecord(jt_id);if(!jt_oglr)
continue;jt_oglr.Set_SubRecord(jt_oSchemaTable.jp_SubTable,this.Get_GLRecord(jt_id))}}
else
{}
this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_Loaded);return true;}
function GLDataTable_OnTransactionComplete(ji_oidbEvent,ji_oStorageOpType)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("p1","GLDataTable_OnTransactionComplete");if(ji_oStorageOpType.bStore)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("p3s","GLDataTable_OnTransactionComplete");this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_Stored);}
else if(ji_oStorageOpType.bLoad&&ji_oStorageOpType.bHeaderOnly)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("p4h","GLDataTable_OnTransactionComplete");jg_oe.CanLogInfo({DB:4})&&jg_oe.LogInfo("CountRecords="+
this.Get_CountRecords()+" glid="+this.Get_Glid(),"GLDataTable_OnTransactionComplete");this.CheckLoadTableStatus(true);}
else if(ji_oStorageOpType.bLoad&&!ji_oStorageOpType.bRecord)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("p4t","GLDataTable_OnTransactionComplete");jg_oe.CanLogInfo({DB:4})&&jg_oe.LogInfo("CountRecords="+
this.Get_CountRecords()+" glid="+this.Get_Glid(),"GLDataTable_OnTransactionComplete");this.CheckLoadTableStatus();}
else if(ji_oStorageOpType.bLoad&&ji_oStorageOpType.bRecord)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("p5r","GLDataTable_OnTransactionComplete");var jt_odtStatus=this.CheckRecordsStatus(false);jg_oe.CanLogInfo()&&jg_oe.LogInfo("p6r","GLDataTable_OnTransactionComplete");if(jt_odtStatus.Get()==jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadedRecord)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("p7r","GLDataTable_OnTransactionComplete");this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadedRecord);}
else if(jt_odtStatus.Get()==jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("p8r","GLDataTable_OnTransactionComplete");this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail);}
else if(jt_odtStatus.Get()==jg_oe.jc_oA3xaDbZero.jc_DTStatus_Empty)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("p9r","GLDataTable_OnTransactionComplete");if(this.Get_Database().jm_oDbSchema.IsMandatory(this.Get_Glid()))
this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail);else
this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadedRecord);}
else if(jt_odtStatus.Get()==jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadInProgress)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("p10r","GLDataTable_OnTransactionComplete");this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail);}
else
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("p11r","GLDataTable_OnTransactionComplete");this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail);}}
return true;}
function GLDataTable_OnTransactionError(ji_oidbEvent,ji_sMessage,ji_oStorageOpType)
{if(ji_oStorageOpType.bStore)
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreFail);this.ClearGLSAndFail(jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreFail,"Store Fail");}
else if(ji_oStorageOpType.bLoad)
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail);}
return true;}
function A3xaDatabase(ji_oDbSchema)
{this.Get_Storage=function(ji_glid)
{return this.Get_Storage_ByType(this.Get_StorageType(ji_glid));};this.Get_StorageType=function(ji_glid)
{return this.jm_oDbSchema.Get_StorageType(ji_glid);};this.Get_Storage_ByType=function(ji_StorageType)
{return jg_oe.Get_Storage(ji_StorageType);};this.Open=A3xaDatabase_Open;this.IsOpen=A3xaDatabase_IsOpen;this.IsOpening=A3xaDatabase_IsOpening;this.WriteGLRS2=A3xaDatabase_WriteGLRS2;this.LoadSchemaDefault=function(){return true;};this.LoadSchemaStore=function(){return true;};this.LoadSchemaLoad=function(){return true;};this.OpenTransaction=A3xaDatabase_OpenTransaction;this.StoreAllData=A3xaDatabase_StoreAllData;this.CheckCache=A3xaDatabase_CheckCache;this.ClearStored=A3xaDatabase_ClearStored;this.StoreCache=A3xaDatabase_StoreCache;this.jm_oDbSchema=(ji_oDbSchema||null);this.jm_oDTStatus=new GLDataStatus();this.jm_moreOnStoreAllData=0;this.jm_aoDTStatus_TableToClear=null;this.jm_aoglDataTableStore=new A3xaArray();this.jm_aoglDataTableLoad_Common=new A3xaArray();this.jm_aoglDataTableLoad_ExtHeader=new A3xaArray();this.jm_aoglDataTableLoad_Main=new A3xaArray();this.jm_aoglDataTableLoad_Dependent=new A3xaArray();this.jm_aoglDataTableLoad_TurboHeader=new A3xaArray();this.jm_odbTransaction=null;this.MirrorToTurboHeaders=function()
{this.jm_aoglDataTableLoad_TurboHeader=new A3xaArray();var jt_CountC=(this.jm_aoglDataTableLoad_Common?this.jm_aoglDataTableLoad_Common.Get_Count():0);for(var ic=0;ic<jt_CountC;ic++)
{var jt_odt=this.jm_aoglDataTableLoad_Common.Get_Item_ByIndex(ic);this.jm_aoglDataTableLoad_TurboHeader.Add_Item(jt_odt.Get_Glid(),jt_odt);}
var jt_CountM=(this.jm_aoglDataTableLoad_Main?this.jm_aoglDataTableLoad_Main.Get_Count():0);for(var im=0;im<jt_CountM;im++)
{var jt_odt=this.jm_aoglDataTableLoad_Main.Get_Item_ByIndex(im);this.jm_aoglDataTableLoad_TurboHeader.Add_Item(jt_odt.Get_Glid(),jt_odt);}
jg_oe.CanLogInfo()&&jg_oe.LogInfo("cC,cM,cTH:"+
jt_CountC+","+jt_CountM+","+this.jm_aoglDataTableLoad_TurboHeader.Get_Count(),"","A3xaDatabase.MirrorToTurboHeaders");return true;};this.ClearArrayDTLoad=function(ji_pTypTables)
{if(!ji_pTypTables)
return false;if(ji_pTypTables.jp_bTyp_Common)
this.jm_aoglDataTableLoad_Common=new A3xaArray();else if(ji_pTypTables.jp_bTyp_ExtHeader)
this.jm_aoglDataTableLoad_ExtHeader=new A3xaArray();else if(ji_pTypTables.jp_bTyp_Main)
this.jm_aoglDataTableLoad_Main=new A3xaArray();else if(ji_pTypTables.jp_bTyp_Dependent)
this.jm_aoglDataTableLoad_Dependent=new A3xaArray();else if(ji_pTypTables.jp_bTyp_TurboHeader)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("jp_bTyp_TurboHeader","","A3xaDatabase.ClearArrayDTLoad");this.jm_aoglDataTableLoad_TurboHeader=new A3xaArray();}
else
return false;return true;}
this.Get_ArrayDTLoad=function(ji_pTypTables)
{if(!ji_pTypTables)
return null;if(ji_pTypTables.jp_bTyp_Common)
return this.jm_aoglDataTableLoad_Common;else if(ji_pTypTables.jp_bTyp_ExtHeader)
return this.jm_aoglDataTableLoad_ExtHeader;else if(ji_pTypTables.jp_bTyp_Main)
return this.jm_aoglDataTableLoad_Main;else if(ji_pTypTables.jp_bTyp_Dependent)
return this.jm_aoglDataTableLoad_Dependent;else if(ji_pTypTables.jp_bTyp_TurboHeader)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("jp_bTyp_TurboHeader","","A3xaDatabase.Get_ArrayDTLoad");return this.jm_aoglDataTableLoad_TurboHeader;}
return null;};this.NewDataTable=function(ji_glid){return null;};this.Get_MainDataTable=function(ji_A,ji_Z,ji_N){return null;};this.Get_DataTable=function(ji_glid,ji_bDontCheck,ji_bTurboHeader)
{ji_glid=jg_oe.jc_oA3xaDbZero.XGlid2Glid(ji_glid);ji_glid=jg_oApp.Get_AppXUR().Get_3xXUR().Default2GlidQUR(ji_glid);if(!ji_glid)
return null;var jr_odt=null;var jt_aodt=null;if(ji_bTurboHeader)
{jt_aodt=this.Get_ArrayDTLoad({jp_bTyp_TurboHeader:true});jr_odt=jt_aodt.Get_Item(ji_glid);jg_oe.CanLogInfo()&&jg_oe.LogInfo("turboh glid,odt:"+
ji_glid+","+(jr_odt?"Y":"null"),"","A3xaDatabase_Get_DataTable");}
else
{if(!jr_odt)
{jt_aodt=this.Get_ArrayDTLoad({jp_bTyp_Common:true});jr_odt=jt_aodt.Get_Item(ji_glid);}
if(!jr_odt)
{jt_aodt=this.Get_ArrayDTLoad({jp_bTyp_Main:true});jr_odt=jt_aodt.Get_Item(ji_glid);}
if(!jr_odt)
{jt_aodt=this.Get_ArrayDTLoad({jp_bTyp_ExtHeader:true});jr_odt=jt_aodt.Get_Item(ji_glid);}
if(!jr_odt)
{jt_aodt=this.Get_ArrayDTLoad({jp_bTyp_Dependent:true});jr_odt=jt_aodt.Get_Item(ji_glid);}}
if(ji_bDontCheck)
return jr_odt;if(!(jr_odt&&jr_odt.Get_Glid()==ji_glid))
return null;jg_oe.CanLogInfo()&&jg_oe.LogInfo("A3xaDatabase_Get_DataTable: "+
ji_glid+"="+jr_odt.jm_oDTStatus.Get());if(jr_odt.jm_oDTStatus.Get()!=jg_oe.jc_oA3xaDbZero.jc_DTStatus_Loaded)
return null;return jr_odt;};this.Get_DataTableCacheStore=function(ji_glid)
{if(!ji_glid)
return null;if(!this.jm_aoglDataTableStore)
return null;var jt_ogldt=this.jm_aoglDataTableStore.Get_Item(ji_glid);if(!(jt_ogldt&&jt_ogldt.Get_Glid()==ji_glid))
return null;return jt_ogldt;};}
function A3xaDatabase_IsOpen()
{var jt_os1=jg_oe.Get_Storage(jg_oe.jc_oStorage.jc_FLY);if(!(jt_os1&&jt_os1.IsOpen()))
return false;if(jg_oe.jm_StorageTypeDefault==jg_oe.jc_oStorage.jc_FLY)
return true;var jt_os2=jg_oe.Get_Storage(jg_oe.jc_oStorage.jc_Default);if(!(jt_os2&&jt_os2.IsOpen()))
return false;return true;}
function A3xaDatabase_IsOpening()
{var jt_os1=jg_oe.Get_Storage(jg_oe.jc_oStorage.jc_FLY);if(jt_os1&&jt_os1.IsOpening())
return true;if(jg_oe.jm_StorageTypeDefault==jg_oe.jc_oStorage.jc_FLY)
return false;var jt_os2=jg_oe.Get_Storage(jg_oe.jc_oStorage.jc_Default);if(jt_os2&&jt_os2.IsOpening())
return true;return false;}
function A3xaDatabase_Open(ji_oStorageOpType,ji_otkm)
{var jt_this=this;if(ji_oStorageOpType.bOpenStore)
this.LoadSchemaStore();else if(ji_oStorageOpType.bOpenLoad)
this.LoadSchemaLoad();jg_oe.CanLogInfo()&&jg_oe.LogInfo("Open OSx","A3xaDatabase_Open");var jt_os1=jg_oe.Get_Storage(jg_oe.jc_oStorage.jc_FLY);if(!jt_os1)
return false;jg_oe.CanLogInfo()&&jg_oe.LogInfo("Open OSxx","A3xaDatabase_Open");if(!(jt_os1.IsOpen()||jt_os1.IsOpening()))
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Open OS1","A3xaDatabase_Open");if(!jt_os1.Open(jt_os1.NewTransaction(null,ji_oStorageOpType,new A3xaDatabase_TransactionListener(this,ji_otkm)),this.jm_oDbSchema))
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Open OS1b","A3xaDatabase_Open");return false;}}
jg_oe.CanLogInfo()&&jg_oe.LogInfo("Open OS1c","A3xaDatabase_Open");if(jt_os1.IsOpening())
return-1;jg_oe.CanLogInfo()&&jg_oe.LogInfo("Open OS1d","A3xaDatabase_Open");if(!jt_os1.IsOpen())
return false;jg_oe.CanLogInfo()&&jg_oe.LogInfo("Open OS1e","A3xaDatabase_Open");if(jg_oe.jm_StorageTypeDefault==jg_oe.jc_oStorage.jc_FLY)
return true;jg_oe.CanLogInfo()&&jg_oe.LogInfo("Open OS1f","A3xaDatabase_Open");var jt_os2=jg_oe.Get_Storage(jg_oe.jc_oStorage.jc_Default);if(!jt_os2)
return false;jg_oe.CanLogInfo()&&jg_oe.LogInfo("Open OS1g","A3xaDatabase_Open");if(jt_os2.IsOpen())
return true;if(jt_os2.IsOpening())
return-1;jg_oe.CanLogInfo()&&jg_oe.LogInfo("Open OS2","A3xaDatabase_Open");if(!jt_os2.Open(jt_os2.NewTransaction(null,ji_oStorageOpType,new A3xaDatabase_TransactionListener(this,ji_otkm)),this.jm_oDbSchema))
return false;jg_oe.CanLogInfo()&&jg_oe.LogInfo("Open OS2b","A3xaDatabase_Open");if(jt_os2.IsOpen())
return true;jg_oe.CanLogInfo()&&jg_oe.LogInfo("Open OS2c","A3xaDatabase_Open");if(jt_os2.IsOpening())
return-1;jg_oe.CanLogInfo()&&jg_oe.LogInfo("Open OS2d","A3xaDatabase_Open");return false;}
function A3xaDatabase_WriteGLRS2(ji_glid,ji_sGLRS)
{if(!ji_glid)
return false;ji_glid=jg_oe.jc_oA3xaDbZero.XGlid2Glid(ji_glid);if(!ji_sGLRS)
return false;var jt_ogldt=this.NewDataTable(ji_glid);if(!jt_ogldt)
return false;this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_CacheInProgress,"Cache Tableset "+ji_glid);this.jm_aoglDataTableStore.Set_Item(ji_glid,jt_ogldt);jg_oe.CanLogInfo()&&jg_oe.LogInfo("A3xaDatabase_WriteGLRS2: "+ji_glid+"----"+ji_sGLRS);if(!jt_ogldt.Set_String(ji_sGLRS))
{this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_CacheFail,"Cache Tableset Cache "+ji_glid);return false;}
return true;}
function A3xaDatabase_StoreAllData(ji_bStart)
{if(this.jm_oDTStatus.IsFail())
return true;if(this.jm_moreOnStoreAllData++>0&&!ji_bStart)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Event Queued","","A3xaDatabase_StoreAllData");this.jm_moreOnStoreAllData=2;return true;}
jg_oe.CanLogInfo()&&jg_oe.LogInfo("Event Executive","","A3xaDatabase_StoreAllData");if(ji_bStart)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Begin","Cache Tables In Progress","A3xaDatabase_StoreAllData");this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_CacheInProgress);}
do
{if(this.jm_oDTStatus.Get()==jg_oe.jc_oA3xaDbZero.jc_DTStatus_CacheInProgress)
this.jm_oDTStatus.SetFrom(this.CheckCache(this.jm_oDTStatus));if(this.jm_oDTStatus.Get()==jg_oe.jc_oA3xaDbZero.jc_DTStatus_Cached)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Open Storage","Store Tables","A3xaDatabase_StoreAllData");this.Open({bOpenStore:true});this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreOpen);}
if(this.jm_oDTStatus.Get()==jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreOpen)
{if(this.IsOpen())
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Check pending ","Clear Tables","A3xaDatabase_StoreAllData");this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_ClearOpen);}
else if(!this.IsOpening())
this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreFail,"Opening for Store");}
if(this.jm_oDTStatus.Get()==jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreFail)
{if(this.IsOpen())
this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_ClearOpen);}
if(this.jm_oDTStatus.Get()==jg_oe.jc_oA3xaDbZero.jc_DTStatus_ClearOpen)
{var jt_os2=jg_oe.Get_Storage(jg_oe.jc_oStorage.jc_Default);if(jt_os2&&jt_os2.IsClearRequest())
this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_ClearInProgress);else
this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_Cleared);}
if(this.jm_oDTStatus.Get()==jg_oe.jc_oA3xaDbZero.jc_DTStatus_ClearInProgress)
this.jm_oDTStatus.SetFrom(this.ClearStored(this.jm_oDTStatus));if(this.jm_oDTStatus.Get()==jg_oe.jc_oA3xaDbZero.jc_DTStatus_Cleared)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Begin to","Store Tables","A3xaDatabase_StoreAllData");jg_oe.LogStatusBar2(new A3xaString(["Storing","Almacenamiento","Armazenando","Memorizzando"]));this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreInProgress);}
if(this.jm_oDTStatus.IsStoring())
this.jm_oDTStatus.SetFrom(this.StoreCache(this.jm_oDTStatus));ji_bStart=false;}
while(--this.jm_moreOnStoreAllData>0);return true;}
function A3xaDatabase_CheckCache(ji_oDTStatus)
{if(ji_oDTStatus.Get()!=jg_oe.jc_oA3xaDbZero.jc_DTStatus_CacheInProgress)
return null;var jt_CountDT=0;if(this.jm_aoglDataTableStore)
jt_CountDT=this.jm_aoglDataTableStore.Get_Count();if(!jt_CountDT)
return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_Empty);for(var j=0;j<jt_CountDT;j++)
{var jt_ogldt=this.jm_aoglDataTableStore.Get_Item_ByIndex(j);var jt_DTStatusCur=jt_ogldt.jm_oDTStatus.Get();var jt_this=this;jt_ogldt.jm_oDTStatus.jm_fnOnChange=function(ji_oDTStatus)
{jt_this.StoreAllData(false);}}
var jr_oDTStatus=new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_Cached,"");for(var i=0;i<jt_CountDT;i++)
{var jt_ogldt=this.jm_aoglDataTableStore.Get_Item_ByIndex(i);var jt_DTStatusCur=jt_ogldt.jm_oDTStatus.Get();if(jt_DTStatusCur!=jg_oe.jc_oA3xaDbZero.jc_DTStatus_Cached)
{if(jt_ogldt.jm_oDTStatus.IsFail())
{jg_oe.LogErr("Fail ("+jt_ogldt.Get_Glid()+")","","A3xaDatabase_CheckCache");return new GLDataStatus(jt_DTStatusCur,"Cache Database Tableset");}
else if(jt_DTStatusCur==jg_oe.jc_oA3xaDbZero.jc_DTStatus_CacheInProgress)
{jr_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_CacheInProgress);}
else
{}}
else
jg_oe.CanLogInfo()&&jg_oe.LogInfo("p2000="+"Cached "+jt_ogldt.Get_Glid());}
return jr_oDTStatus;}
function A3xaDatabase_OpenTransaction(ji_oStorageOpType,ji_otkm,ji_aGlid)
{if(!(ji_aGlid&&ji_aGlid[0]))
{var jt_s="Tables not defined";if(ji_oStorageOpType.bStore)
this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreFail,jt_s);else if(ji_oStorageOpType.bLoad)
this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail,jt_s);else if(ji_oStorageOpType.bClear)
this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_ClearFail,jt_s);return null;}
var jt_os=null;if(ji_oStorageOpType.bClear)
jt_os=jg_oe.Get_Storage(jg_oe.jc_oStorage.jc_Default);else
jt_os=this.Get_Storage(ji_aGlid[0]);if(!jt_os)
{var jt_s="Missing Storage Device";if(ji_oStorageOpType.bStore)
this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreFail,jt_s);else if(ji_oStorageOpType.bLoad)
this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail,jt_s);else if(ji_oStorageOpType.bClear)
this.jm_oDTStatus.Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_ClearFail,jt_s);return null;}
var jt_oDbTransaction=jt_os.NewTransaction(ji_aGlid,ji_oStorageOpType,new A3xaDatabase_TransactionListener(this,ji_otkm));return jt_oDbTransaction;}
function A3xaDatabase_ClearStored(ji_oDTStatus)
{if(ji_oDTStatus.Get()!=jg_oe.jc_oA3xaDbZero.jc_DTStatus_ClearInProgress)
return null;var jt_asTableNamesToClear=null;var jt_os2=jg_oe.Get_Storage(jg_oe.jc_oStorage.jc_Default);if(jt_os2)
jt_asTableNamesToClear=jt_os2.Get_TableNames();if(!jt_asTableNamesToClear)
{this.jm_aoDTStatus_TableToClear=null;return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_Cleared);}
for(var i=0;i<jt_asTableNamesToClear.length;i++)
{var jt_glid=jt_asTableNamesToClear[i];if(!jt_glid)
continue;var jt_oDTStatusCur=null;if(!this.jm_aoDTStatus_TableToClear)
this.jm_aoDTStatus_TableToClear=new Array();if(!this.jm_aoDTStatus_TableToClear[jt_glid])
{this.jm_aoDTStatus_TableToClear[jt_glid]=new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_ClearOpen);}}
for(var i=0;i<jt_asTableNamesToClear.length;i++)
{var jt_glid=jt_asTableNamesToClear[i];if(!jt_glid)
continue;var jt_DTStatusCur=this.jm_aoDTStatus_TableToClear[jt_glid].Get();if(jt_DTStatusCur==jg_oe.jc_oA3xaDbZero.jc_DTStatus_ClearInProgress)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("p2000="+"Clear table In Progress "+jt_glid);return new GLDataStatus(jt_DTStatusCur);}}
for(var i=0;i<jt_asTableNamesToClear.length;i++)
{var jt_glid=jt_asTableNamesToClear[i];if(!jt_glid)
continue;var jt_DTStatusCur=this.jm_aoDTStatus_TableToClear[jt_glid].Get();if(jt_DTStatusCur==jg_oe.jc_oA3xaDbZero.jc_DTStatus_ClearOpen)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Clear table "+jt_glid);var jt_oDbTransaction=this.OpenTransaction({bClear:true},null,[jt_glid]);if(!jt_oDbTransaction)
{return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_ClearFail,"Clear Database Table "+jt_glid);}
jt_oDbTransaction.UsingTable(jt_glid);var jt_bResult=jt_os2.Clear(jt_oDbTransaction);jt_oDbTransaction.Release();if(!jt_bResult)
{return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_ClearFail,"Store Database Table "+jt_glid);}
return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_ClearInProgress);}}
for(var i=0;i<jt_asTableNamesToClear.length;i++)
{var jt_glid=jt_asTableNamesToClear[i];if(!jt_glid)
continue;var jt_DTStatusCur=this.jm_aoDTStatus_TableToClear[jt_glid].Get();if(jt_DTStatusCur!=jg_oe.jc_oA3xaDbZero.jc_DTStatus_Cleared)
{return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_ClearFail,"Clear Database Table. Unknown Status"+jt_ogldt.Get_Glid());}}
return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_Cleared,"");}
function A3xaDatabase_StoreCache(ji_oDTStatus)
{if(!ji_oDTStatus.IsStoring())
return null;var jt_CountDT=0;if(this.jm_aoglDataTableStore)
jt_CountDT=this.jm_aoglDataTableStore.Get_Count();if(!jt_CountDT)
return null;for(var i=0;i<jt_CountDT;i++)
{var jt_ogldt=this.jm_aoglDataTableStore.Get_Item_ByIndex(i);var jt_DTStatusCur=jt_ogldt.jm_oDTStatus.Get();if(jt_ogldt.jm_oDTStatus.IsFail())
{jg_oe.LogErr("Fail ("+jt_ogldt.Get_Glid()+")","","A3xaDatabase_StoreCache");return new GLDataStatus(jt_DTStatusCur,"Store Database Tableset");}}
for(i=0;i<jt_CountDT;i++)
{var jt_ogldt=this.jm_aoglDataTableStore.Get_Item_ByIndex(i);var jt_DTStatusCur=jt_ogldt.jm_oDTStatus.Get();if(jt_DTStatusCur==jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreInProgress)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("p2000="+"Store Cache In Progress "+jt_ogldt.Get_Glid());return new GLDataStatus(jt_DTStatusCur);}}
for(i=0;i<jt_CountDT;i++)
{var jt_ogldt=this.jm_aoglDataTableStore.Get_Item_ByIndex(i);var jt_DTStatusCur=jt_ogldt.jm_oDTStatus.Get();if(jt_DTStatusCur==jg_oe.jc_oA3xaDbZero.jc_DTStatus_Cached)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("p2000="+"StoreToGLS Cache "+jt_ogldt.Get_Glid());var jt_oDbTransaction=this.OpenTransaction({bStore:true},null,[jt_ogldt.Get_Glid()]);if(!jt_oDbTransaction)
{return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreFail,"Store Database Table "+jt_ogldt.Get_Glid());}
jg_oe.LogStatusBar2(new A3xaString(["Storing... "+this.jm_oDbSchema.Get_Descr(jt_ogldt.Get_Glid()),"Almacenamiento... "+this.jm_oDbSchema.Get_Descr(jt_ogldt.Get_Glid()),"Armazenando... "+this.jm_oDbSchema.Get_Descr(jt_ogldt.Get_Glid()),"Memorizzando... "+this.jm_oDbSchema.Get_Descr(jt_ogldt.Get_Glid())]),true);jt_oDbTransaction.UsingTable(jt_ogldt.Get_Glid());var jt_bResult=jt_ogldt.StoreToGLS(jt_oDbTransaction);jt_oDbTransaction.Release();if(!jt_bResult)
{return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreFail,"Store Database Table "+jt_ogldt.Get_Glid());}
return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreInProgress);}}
for(i=0;i<jt_CountDT;i++)
{var jt_ogldt=this.jm_aoglDataTableStore.Get_Item_ByIndex(i);var jt_DTStatusCur=jt_ogldt.jm_oDTStatus.Get();if(jt_DTStatusCur!=jg_oe.jc_oA3xaDbZero.jc_DTStatus_Stored)
{return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_StoreFail,"Store Database Table. Unknown Status"+jt_ogldt.Get_Glid());}}
return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_Stored,"");}
function A3xaDatabase_TransactionListener(ji_odb,ji_otkm)
{A3xaStorage_TransactionListener.call(this);this.OnOpenStorage=A3xaDatabase_TransactionListener_OnOpenStorage;this.OnOpenStorageError=A3xaDatabase_TransactionListener_OnOpenStorageError;this.OnTransactionComplete=A3xaDatabase_TransactionListener_OnTransactionComplete;this.OnTransactionError=A3xaDatabase_TransactionListener_OnTransactionError;this.OnClearStorage=A3xaDatabase_TransactionListener_OnClearStorage;this.OnClearStorageError=A3xaDatabase_TransactionListener_OnClearStorageError;this.jm_odb=(ji_odb||null);this.jm_otkm=(ji_otkm||null);}
function A3xaDatabase_TransactionListener_OnOpenStorage(ji_odbtr,ji_oidbEvent)
{if(!ji_odbtr)
return false;if(!this.jm_odb)
return false;if(ji_odbtr.jm_oStorageOpType.bOpenStore)
this.jm_odb.StoreAllData(false);else if(ji_odbtr.jm_oStorageOpType.bOpenLoad)
this.jm_otkm.Task();return true;}
function A3xaDatabase_TransactionListener_OnOpenStorageError(ji_odbtr,ji_oidbEvent,ji_sMessage)
{if(!ji_odbtr)
return false;if(!this.jm_odb)
return false;if(ji_odbtr.jm_oStorageOpType.bOpenStore)
this.jm_odb.StoreAllData(false);else if(ji_odbtr.jm_oStorageOpType.bOpenLoad)
this.jm_otkm.Task();return true;}
function A3xaDatabase_TransactionListener_OnClearStorage(ji_odbtr,ji_oidbEvent)
{if(!ji_odbtr)
return false;if(!this.jm_odb)
return false;if(!ji_odbtr.jm_aDbTableName)
return false;for(var i=0;i<ji_odbtr.jm_aDbTableName.length;i++)
{var jt_glid=ji_odbtr.jm_aDbTableName[i];if(!jt_glid)
continue;jg_oe.CanLogInfo()&&jg_oe.LogInfo("Cleared table: "+jt_glid,"","A3xaDatabase_TransactionListener_OnClearStorage");this.jm_odb.jm_aoDTStatus_TableToClear[jt_glid].Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_Cleared);}
return true;}
function A3xaDatabase_TransactionListener_OnClearStorageError(ji_odbtr,ji_oidbEvent,ji_sMessage)
{if(!ji_odbtr)
return false;if(!this.jm_odb)
return false;if(!ji_odbtr.jm_aDbTableName)
return false;for(var i=0;i<ji_odbtr.jm_aDbTableName.length;i++)
{var jt_glid=ji_odbtr.jm_aDbTableName[i];if(!jt_glid)
continue;this.jm_odb.jm_aoDTStatus_TableToClear[jt_glid].Set(jg_oe.jc_oA3xaDbZero.jc_DTStatus_ClearFail);}
return true;}
function A3xaDatabase_TransactionListener_OnTransactionComplete(ji_odbtr,ji_oidbEvent)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("p1","A3xaDatabase_TransactionListener_OnTransactionComplete");if(!ji_odbtr)
return false;if(!this.jm_odb)
return false;if(!ji_odbtr.jm_aDbTableName)
return false;jg_oe.CanLogInfo()&&jg_oe.LogInfo("p2","A3xaDatabase_TransactionListener_OnTransactionComplete");if(ji_odbtr.jm_oStorageOpType.bStore)
{for(var i=0;i<ji_odbtr.jm_aDbTableName.length;i++)
{var jt_glid=ji_odbtr.jm_aDbTableName[i];var jt_odt=this.jm_odb.Get_DataTableCacheStore(jt_glid);if(jt_odt)
jt_odt.OnTransactionComplete(ji_oidbEvent,ji_odbtr.jm_oStorageOpType);}}
else if(ji_odbtr.jm_oStorageOpType.bLoad)
{for(var i=0;i<ji_odbtr.jm_aDbTableName.length;i++)
{var jt_odt=null;var jt_glid=ji_odbtr.jm_aDbTableName[i];jt_odt=this.jm_odb.Get_DataTable(jt_glid,true,ji_odbtr.jm_oStorageOpType.bTurboHeader);if(jt_odt)
jt_odt.OnTransactionComplete(ji_oidbEvent,ji_odbtr.jm_oStorageOpType);}}
else if(ji_odbtr.jm_oStorageOpType.bClear)
{this.jm_odb.StoreAllData(false);}
return true;}
function A3xaDatabase_TransactionListener_OnTransactionError(ji_odbtr,ji_oidbEvent,ji_sMessage)
{if(!ji_odbtr)
return false;if(!this.jm_odb)
return false;if(!ji_odbtr.jm_aDbTableName)
return false;if(ji_odbtr.jm_oStorageOpType.bStore)
{for(var i=0;i<ji_odbtr.jm_aDbTableName.length;i++)
{var jt_glid=ji_odbtr.jm_aDbTableName[i];var jt_odt=this.jm_odb.Get_DataTableCacheStore(jt_glid);if(jt_odt)
jt_odt.OnTransactionError(ji_oidbEvent,ji_sMessage,ji_odbtr.jm_oStorageOpType);}}
else if(ji_odbtr.jm_oStorageOpType.bLoad)
{for(var i=0;i<ji_odbtr.jm_aDbTableName.length;i++)
{var jt_odt=null;var jt_glid=ji_odbtr.jm_aDbTableName[i];jt_odt=this.jm_odb.Get_DataTable(jt_glid,true,ji_odbtr.jm_oStorageOpType.bTurboHeader);if(jt_odt)
jt_odt.OnTransactionError(ji_oidbEvent,ji_sMessage,ji_odbtr.jm_oStorageOpType);}}
else if(ji_odbtr.jm_oStorageOpType.bClear)
{this.jm_odb.StoreAllData(false);}
return true;}
function A3xaDbLoaderManager(ji_fnOnLoadDone,ji_oDatabase)
{this.jm_fnOnLoadDone=(ji_fnOnLoadDone||null);this.jm_oDatabase=(ji_oDatabase||null);this.jm_odbLoader=null;var jt_this=this;this.Load=function()
{if(!(this.jm_oDatabase.jm_aoglDataTableLoad_Common&&this.jm_oDatabase.jm_aoglDataTableLoad_Common.Get_Count()>0))
this.DatabaseLoadCommon();else if(!(this.jm_oDatabase.jm_aoglDataTableLoad_ExtHeader&&this.jm_oDatabase.jm_aoglDataTableLoad_ExtHeader.Get_Count()>0))
this.DatabaseLoadExtHeader();else
this.DatabaseLoadMain();return true;};this.DatabaseLoadCommon=function()
{var jt_this=this;jg_oe.CanLogInfo({DB:4})&&jg_oe.LogInfo("Start Common","","A3xaDbLoaderManager.DatabaseLoadCommon");jg_oe.LogStatusBar2(new A3xaString(["Loading common","Cargando datos comÃºn","Carregando dados comum","Caricamento dati comuni"]));this.jm_odbLoader=new A3xaDbLoader(function(ji_oDTStatus)
{return jt_this.OnDatabaseLoadCommonDone(ji_oDTStatus);},this.jm_oDatabase);this.jm_odbLoader.LoadCommonTables();return true;};this.OnDatabaseLoadCommonDone=function(ji_oDTStatus)
{jg_oe.CanLogInfo({DB:4})&&jg_oe.LogInfo("Event ("+ji_oDTStatus.Get_Descr()+")","","A3xaDbLoaderManager.OnDatabaseLoadCommonDone");jg_oe.CanLogInfo({DB:4})&&jg_oe.LogInfo("descr2 ("+ji_oDTStatus.Get_Descr2()+")","","A3xaDbLoaderManager.OnDatabaseLoadCommonDone");var jt_this=this;if(ji_oDTStatus.IsFail())
{jg_oe.CanLogInfo({DB:4})&&jg_oe.LogInfo("Fail ("+ji_oDTStatus.Get_Descr()+")","","A3xaDbLoaderManager.OnDatabaseLoadCommonDone");if(this.jm_fnOnLoadDone)
this.jm_fnOnLoadDone(ji_oDTStatus);return true;}
var jt_DTStatus=ji_oDTStatus.Get();if(jt_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_Loaded)
{jg_oe.CanLogInfo({DB:4})&&jg_oe.LogInfo("Loaded Common OK","","A3xaDbLoaderManager.OnDatabaseLoadCommonDone");if(this.jm_odbLoader.IsCommonTables())
return this.DatabaseLoadExtHeader();jg_oe.CanLogInfo({DB:4})&&jg_oe.LogInfo("Unexpected","","A3xaDbLoaderManager.OnDatabaseLoadCommonDone");}
jg_oe.CanLogInfo({DB:4})&&jg_oe.LogInfo("Void event","","A3xaDbLoaderManager.OnDatabaseLoadCommonDone");return true;};this.DatabaseLoadExtHeader=function()
{var jt_this=this;jg_oe.CanLogInfo({DB:4})&&jg_oe.LogInfo("Start Ext Header","","A3xaDbLoaderManager.DatabaseLoadExtHeader");jg_oe.LogStatusBar2(new A3xaString(["Loading Extended Headers","Cargando extendido cabeceras","Carregando extensÃ£o cabeÃ§alhos","Caricamento intestazioni estese"]));this.jm_odbLoader=new A3xaDbLoader(function(ji_oDTStatus)
{return jt_this.OnDatabaseLoadExtHeaderDone(ji_oDTStatus);},this.jm_oDatabase);this.jm_odbLoader.LoadExtHeaderTables();return true;};this.OnDatabaseLoadExtHeaderDone=function(ji_oDTStatus)
{jg_oe.CanLogInfo({DB:4})&&jg_oe.LogInfo("Event ("+ji_oDTStatus.Get_Descr()+")","","A3xaDbLoaderManager.OnDatabaseLoadExtHeaderDone");jg_oe.CanLogInfo({DB:4})&&jg_oe.LogInfo("descr2 ("+ji_oDTStatus.Get_Descr2()+")","","A3xaDbLoaderManager.OnDatabaseLoadExtHeaderDone");var jt_this=this;if(ji_oDTStatus.IsFail())
{jg_oe.CanLogInfo({DB:4})&&jg_oe.LogInfo("Fail ("+ji_oDTStatus.Get_Descr()+")","","A3xaDbLoaderManager.OnDatabaseLoadExtHeaderDone");if(this.jm_fnOnLoadDone)
this.jm_fnOnLoadDone(ji_oDTStatus);return true;}
var jt_DTStatus=ji_oDTStatus.Get();if(jt_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_Loaded)
{jg_oe.CanLogInfo({DB:4})&&jg_oe.LogInfo("Loaded OK","","A3xaDbLoaderManager.OnDatabaseLoadExtHeaderDone");if(this.jm_odbLoader.IsExtHeaderTables())
return this.DatabaseLoadMain();jg_oe.CanLogInfo({DB:4})&&jg_oe.LogInfo("Unexpected","","A3xaDbLoaderManager.OnDatabaseLoadExtHeaderDone");}
jg_oe.CanLogInfo({DB:4})&&jg_oe.LogInfo("Void event","","A3xaDbLoaderManager.OnDatabaseLoadExtHeaderDone");return true;};this.DatabaseLoadMain=function()
{var jt_this=this;jg_oe.CanLogInfo({DB:4})&&jg_oe.LogInfo("Start Load Main","","A3xaDbLoaderManager.DatabaseLoadMain");jg_oe.LogStatusBar2(new A3xaString(["Loading main","Cargando principal","Carregando principal","Caricamento principale"]));this.jm_odbLoader=new A3xaDbLoader(function(ji_oDTStatus)
{return jt_this.OnDatabaseLoadMainDone(ji_oDTStatus);},this.jm_oDatabase);this.jm_odbLoader.LoadMainTable();return true;};this.OnDatabaseLoadMainDone=function(ji_oDTStatus)
{jg_oe.CanLogInfo({DB:4})&&jg_oe.LogInfo("Event ("+ji_oDTStatus.Get_Descr()+")","","A3xaDbLoaderManager.OnDatabaseLoadMainDone");jg_oe.CanLogInfo({DB:4})&&jg_oe.LogInfo("descr2 ("+ji_oDTStatus.Get_Descr2()+")","","A3xaDbLoaderManager.OnDatabaseLoadMainDone");var jt_this=this;if(ji_oDTStatus.IsFail())
{jg_oe.CanLogInfo({DB:4})&&jg_oe.LogInfo("Fail ("+ji_oDTStatus.Get_Descr()+")","","A3xaDbLoaderManager.OnDatabaseLoadMainDone");this.jm_oDatabase.MirrorToTurboHeaders();ji_oDTStatus.Set2(jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StEmpty);if(this.jm_fnOnLoadDone)
this.jm_fnOnLoadDone(ji_oDTStatus);return true;}
var jt_DTStatus=ji_oDTStatus.Get();if(jt_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_Loaded)
{jg_oe.CanLogInfo({DB:4})&&jg_oe.LogInfo("Loaded OK","","A3xaDbLoaderManager.OnDatabaseLoadMainDone");if(this.jm_odbLoader.IsMainTable())
{this.jm_oDatabase.MirrorToTurboHeaders();if(this.jm_fnOnLoadDone)
this.jm_fnOnLoadDone(ji_oDTStatus);}
jg_oe.CanLogInfo({DB:4})&&jg_oe.LogInfo("Unexpected","","A3xaDbLoaderManager.OnDatabaseLoadMainDone");}
jg_oe.CanLogInfo({DB:4})&&jg_oe.LogInfo("Void event","","A3xaDbLoaderManager.OnDatabaseLoadMainDone");return true;};this.DatabaseLoadTurboHeader=function()
{jg_oe.CanLogInfo({DB:4})&&jg_oe.LogInfo("Start Turbo Header","","A3xaDbLoaderManager.DatabaseLoadTurboHeader");jg_oe.LogStatusBar2(new A3xaString(["Loading Turbo Headers","Cargando Turbo cabeceras","Carregando Turbo cabeÃ§alhos","Caricamento intestazioni Turbo"]));this.jm_odbLoader=new A3xaDbLoader(function(ji_oDTStatus)
{return jt_this.OnDatabaseLoadTurboHeaderDone(ji_oDTStatus);},this.jm_oDatabase);this.jm_odbLoader.LoadTurboHeaderTables();return true;};this.OnDatabaseLoadTurboHeaderDone=function(ji_oDTStatus)
{jg_oe.CanLogInfo({DB:4})&&jg_oe.LogInfo("Event ("+ji_oDTStatus.Get_Descr()+")","","A3xaDbLoaderManager.OnDatabaseLoadTurboHeaderDone");jg_oe.CanLogInfo({DB:4})&&jg_oe.LogInfo("descr2 ("+ji_oDTStatus.Get_Descr2()+")","","A3xaDbLoaderManager.OnDatabaseLoadTurboHeaderDone");if(ji_oDTStatus.IsFail())
{jg_oe.CanLogInfo({DB:4})&&jg_oe.LogInfo("Fail ("+ji_oDTStatus.Get_Descr()+")","","A3xaDbLoaderManager.OnDatabaseLoadTurboHeaderDone");if(this.jm_fnOnLoadDone)
return this.jm_fnOnLoadDone(ji_oDTStatus);return true;}
var jt_DTStatus=ji_oDTStatus.Get();if(jt_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_Loaded)
{jg_oe.CanLogInfo({DB:4})&&jg_oe.LogInfo("Loaded OK","","A3xaDbLoaderManager.OnDatabaseLoadTurboHeaderDone");if(this.jm_fnOnLoadDone)
return this.jm_fnOnLoadDone(ji_oDTStatus);jg_oe.CanLogInfo({DB:4})&&jg_oe.LogInfo("Unexpected","","A3xaDbLoaderManager.OnDatabaseLoadTurboHeaderDone");}
jg_oe.CanLogInfo({DB:4})&&jg_oe.LogInfo("Void event","","A3xaDbLoaderManager.OnDatabaseLoadTurboHeaderDone");return true;};}
function A3xaDbLoader(ji_fnOnChange,ji_oDatabase)
{A3xaTaskManager.call(this,ji_fnOnChange);var jt_this=this;this.jm_oDatabase=(ji_oDatabase||null);this.jm_omthxLoader=null;this.jm_omtrLoader=null;this.jm_pTypTables={};this.IsCommonTables=function(){return this.jm_pTypTables.jp_bTyp_Common||false;};this.IsMainTable=function(){return this.jm_pTypTables.jp_bTyp_Main||false;};this.IsDependentTables=function(){return this.jm_pTypTables.jp_bTyp_Dependent||false;};this.IsExtHeaderTables=function(){return this.jm_pTypTables.jp_bTyp_ExtHeader||false;};this.IsTurboHeaderTables=function(){return this.jm_pTypTables.jp_bTyp_TurboHeader||false;};this.LoadCommonTables=function()
{this.jm_pTypTables={jp_bTyp_Common:true};this.jm_oDatabase.ClearArrayDTLoad(this.jm_pTypTables);this.Reset();this.Start(null,jg_oe.jc_oA3xaDbZero.jc_DTStatus2_TgTable);};this.LoadExtHeaderTables=function()
{this.jm_pTypTables={jp_bTyp_ExtHeader:true};this.jm_oDatabase.ClearArrayDTLoad(this.jm_pTypTables);this.Reset();this.Start(null,jg_oe.jc_oA3xaDbZero.jc_DTStatus2_TgTable);};this.LoadMainTable=function()
{this.jm_pTypTables={jp_bTyp_Main:true};this.jm_oDatabase.ClearArrayDTLoad(this.jm_pTypTables);this.Reset();this.Start(null,jg_oe.jc_oA3xaDbZero.jc_DTStatus2_TgTable);};this.LoadTurboHeaderTables=function()
{this.jm_pTypTables={jp_bTyp_TurboHeader:true};this.jm_oDatabase.ClearArrayDTLoad(this.jm_pTypTables);this.Reset();this.Start(null,jg_oe.jc_oA3xaDbZero.jc_DTStatus2_TgTable);};this._OnReset=function()
{if(this.jm_omthxLoader)
this.jm_omthxLoader.Release();this.jm_omthxLoader=null;if(this.jm_omtrLoader)
this.jm_omtrLoader.Release();this.jm_omtrLoader=null;return true;};this._OnRelease=function()
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("","","A3xaDbLoader._OnRelease");return true;};this._OnStart=function()
{if(!this.jm_oDatabase)
return false;this.jm_oDatabase.Open({bOpenLoad:true},this);return true;return false;};this._OnStart_TableHX=function()
{this.jm_omthxLoader=null;if(!this.jm_oDatabase.jm_oDbSchema.IsValid())
return false;var jt_aGlidToLoad=new Array();var jt_posTable=0;while(true)
{var jt_oSchemaTable=this.jm_oDatabase.jm_oDbSchema.Get_Table_ByIndex(jt_posTable,this.IsExtHeaderTables());if(!jt_oSchemaTable)
break;var jt_bTargetTable=false;if(this.IsCommonTables())
jt_bTargetTable=jt_oSchemaTable.jp_bTyp_Common;else if(this.IsExtHeaderTables())
jt_bTargetTable=jt_oSchemaTable.jp_bTyp_ExtHeader;else if(this.IsMainTable())
jt_bTargetTable=jt_oSchemaTable.jp_bTyp_Main;else if(this.IsDependentTables())
jt_bTargetTable=jt_oSchemaTable.jp_bTyp_Dependent;else if(this.IsTurboHeaderTables())
jt_bTargetTable=(jt_oSchemaTable.jp_bTyp_Common||jt_oSchemaTable.jp_bTyp_Main);if(jt_bTargetTable)
{var jt_sTableNameQUR="";jt_sTableNameQUR=(jg_oApp.Get_AppXUR().Get_3xXUR().Default2GlidQUR(jt_oSchemaTable.jp_sName)||"");if(!jt_sTableNameQUR)
break;jg_oe.CanLogInfo()&&jg_oe.LogInfo("Table to load: "+jt_sTableNameQUR,"","A3xaDbLoader._OnStart_TableHX");jt_aGlidToLoad.push(jt_sTableNameQUR);}
jt_posTable++;}
if(!(jt_aGlidToLoad&&jt_aGlidToLoad.length))
return false;if(this.IsExtHeaderTables())
jg_oe.LogStatusBar2(new A3xaString(["Loading... Extended Headers","Cargando... cabeceras extendida","Carregando... cabeÃ§alhos extensÃ£o","Caricamento... intestazioni estese"]),true);this.jm_omthxLoader=new A3xaMTHXLoader(function(){return jt_this.Task();},this.jm_oDatabase,jt_aGlidToLoad,this.jm_oDatabase.Get_ArrayDTLoad(this.jm_pTypTables),this.jm_pTypTables);jg_oe.CanLogInfo()&&jg_oe.LogInfo("","","A3xaDbLoader._OnStart_TableHX");return true;};this._OnStart_Record=function()
{this.jm_omtrLoader=null;this.jm_omtrLoader=new A3xaMTRecordLoader(function(){return jt_this.Task();},this.jm_oDatabase,this.jm_oDatabase.Get_ArrayDTLoad(this.jm_pTypTables));return true;};this._CheckStatus=function()
{if(this.IsOpening())
{if(this.jm_oDatabase.IsOpen())
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Db is Open","","A3xaDbLoader._CheckStatus");this.jm_oDTStatus.jm_Status=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StInProgress;this.jm_oDTStatus.jm_Target=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_TgTableHX;if(this._OnStart_TableHX())
return this._CheckStatus();this.jm_oDTStatus.jm_Status=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StFail;return this.jm_oDTStatus;}
if(!this.jm_oDatabase.IsOpening())
this.jm_oDTStatus.jm_Status=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StFail;return this.jm_oDTStatus;}
if(this.jm_oDTStatus.jm_Target==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_TgTableHX)
return this._CheckStatus_TableHX();if(this.jm_oDTStatus.jm_Target==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_TgRecord)
return this._CheckStatus_Record();return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail,"Load Database Unexpected");};this._CheckStatus_TableHX=function()
{if(!this.jm_omthxLoader)
return null;jg_oe.CanLogInfo()&&jg_oe.LogInfo("Loading");if(this.jm_omthxLoader.IsReady())
{this.jm_omthxLoader.Start();if(!this.jm_omthxLoader)
return null;}
if(this.jm_omthxLoader.IsInProgress())
{return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadTableInProgress);}
if(this.jm_omthxLoader.IsDone())
{if(this.jm_omthxLoader.IsSuccess())
{if(this.IsExtHeaderTables()||this.IsTurboHeaderTables())
return this.jm_omthxLoader.jm_oDTStatus;this.jm_oDTStatus.jm_Status=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StInProgress;this.jm_oDTStatus.jm_Target=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_TgRecord;this.Reset();if(this._OnStart_Record())
return this._CheckStatus();this.jm_oDTStatus.jm_Status=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StFail;return this.jm_oDTStatus;}
return this.jm_omthxLoader.jm_oDTStatus;}
return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail,"Load Database Tableset Unexpected");};this._CheckStatus_Record=function()
{if(!this.jm_omtrLoader)
return null;jg_oe.CanLogInfo()&&jg_oe.LogInfo("Loading Records");if(this.jm_omtrLoader.IsReady())
{this.jm_omtrLoader.Start();if(!this.jm_omtrLoader)
return null;}
if(this.jm_omtrLoader.IsInProgress())
{return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadRecordInProgress);}
if(this.jm_omtrLoader.IsDone())
{var jr_oDTStatus=new GLDataStatus();jr_oDTStatus.SetFrom(this.jm_omtrLoader.jm_oDTStatus);jg_oe.CanLogInfo()&&jg_oe.LogInfo("IsDone","","A3xaDbLOader._CheckStatus_Record");return jr_oDTStatus;}
return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail,"Load Database Records Unexpected");};this._OnEnd=function(ji_oDTStatusEnd)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("","","A3xaDbLOader._OnEnd");if(ji_oDTStatusEnd.IsFail())
return ji_oDTStatusEnd;if(this.jm_oDTStatus.jm_Target==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_TgTableHX)
{if(this.IsExtHeaderTables()||this.IsTurboHeaderTables())
return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_Loaded);return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail,"Loaded only Header");}
if(this.jm_oDTStatus.jm_Target==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_TgRecord)
{return this._OnEnd_Record(ji_oDTStatusEnd);}
return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail,"Load Database Unexpected");};this._OnEnd_Record=function(ji_oDTStatusEnd)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Begin","","A3xaDbLoader._OnEnd_Record");for(var i=0;i<this.jm_oDatabase.jm_oDbSchema.jm_aTables.length;i++)
{var jt_oSchemaTable=this.jm_oDatabase.jm_oDbSchema.Get_Table_ByIndex(i);var jt_sTableNameQUR=(jg_oApp.Get_AppXUR().Get_3xXUR().Default2GlidQUR(jt_oSchemaTable.jp_sName)||"");if(!jt_sTableNameQUR)
continue;if(!jt_oSchemaTable)
continue;var jt_odt=this.jm_oDatabase.Get_ArrayDTLoad(this.jm_pTypTables).Get_Item(jt_sTableNameQUR);if(!jt_odt)
continue;var jt_odtParent=null;if(jt_oSchemaTable.jp_sParent)
{jt_odtParent=null;var jt_sTableParentQUR=(jg_oApp.Get_AppXUR().Get_3xXUR().Default2GlidQUR(jt_oSchemaTable.jp_sParent)||"");if(jt_sTableParentQUR)
{jt_odtParent=this.jm_oDatabase.Get_DataTable(jt_sTableParentQUR,true);if(jt_odtParent&&jt_odtParent.Get_Glid()!=jt_sTableParentQUR)
jt_odtParent=null;}}
if(!jt_odt.SetupLoadedRecords(jt_odtParent))
{}}
jg_oe.CanLogInfo()&&jg_oe.LogInfo("Callback: "+
(this.jm_oDTStatus.jm_fnOnChange?"Y":"null"),"","A3xaDbLOader._OnEnd_Record");return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_Loaded);};}
function A3xaMTHXLoader(ji_fnOnChange,ji_oDatabase,ji_aGlid,ji_aodtToLoad,ji_pTypTables)
{A3xaTaskManager.call(this,ji_fnOnChange);var jt_this=this;this.jm_oDTStatus.jm_Target=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_TgTableHX;this.jm_oDTStatus.jm_Operation=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpLoad;this.jm_oDatabase=(ji_oDatabase||null);this.jm_aGlidToLoad=(ji_aGlid||null);this.jm_aGlidQueue=null;this.jm_otktbLoader=null;this._OnRelease=function()
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("","","A3xaMTHXLoader._OnRelease");return this.ReleaseCurrentTbTaskLoader();};this.ReleaseCurrentTbTaskLoader=function()
{if(!this.jm_otktbLoader)
return false;jg_oe.CanLogInfo()&&jg_oe.LogInfo("","","A3xaMTHXLoader.ReleaseCurrentTbTaskLoader");this.jm_otktbLoader.Release();this.jm_otktbLoader=null;return true;};this.StartNextTbTaskLoader=function()
{if(!(this.jm_aGlidQueue&&this.jm_aGlidQueue.length))
return false;var jt_Glid=this.jm_aGlidQueue.shift();if(!jt_Glid)
return false;if(ji_pTypTables.jp_bTyp_ExtHeader||ji_pTypTables.jp_bTyp_TurboHeader);else
jg_oe.LogStatusBar2(new A3xaString(["Loading... "+this.jm_oDatabase.jm_oDbSchema.Get_Descr(jt_Glid),"Cargando... "+this.jm_oDatabase.jm_oDbSchema.Get_Descr(jt_Glid),"Carregando... "+this.jm_oDatabase.jm_oDbSchema.Get_Descr(jt_Glid),"Caricamento... "+this.jm_oDatabase.jm_oDbSchema.Get_Descr(jt_Glid)]),true);var jt_otktbLoader=new A3xaTaskHXLoader(function(){return jt_this.Task();},this.jm_oDatabase,jt_Glid,ji_pTypTables.jp_bTyp_ExtHeader||ji_pTypTables.jp_bTyp_TurboHeader,ji_pTypTables.jp_bTyp_TurboHeader);if(!jt_otktbLoader.jm_odtToLoad)
return false;jg_oe.CanLogInfo()&&jg_oe.LogInfo("Table id: "+jt_Glid,"","A3xaMTHXLoader.StartNextTbTaskLoader");ji_aodtToLoad.Set_Item(jt_Glid,jt_otktbLoader.jm_odtToLoad);this.jm_otktbLoader=jt_otktbLoader;this.jm_oDTStatus.Set2(jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StInProgress);jt_otktbLoader.Start();return true;};this._OnEnd=function(ji_oDTStatusEnd)
{if(ji_oDTStatusEnd&&ji_oDTStatusEnd.IsFail())
return ji_oDTStatusEnd;if(ji_pTypTables.jp_bTyp_ExtHeader||ji_pTypTables.jp_bTyp_TurboHeader)
return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadedTable);for(var i=0;i<this.jm_aGlidToLoad.length;i++)
{var jt_ogldt=ji_aodtToLoad.Get_Item(this.jm_aGlidToLoad[i]);var jt_glid=null;if(jt_ogldt)
jt_glid=jt_ogldt.Get_Glid();if(!jt_glid||jt_glid!=this.jm_aGlidToLoad[i])
{jg_oe.LogErr("Fail tablename missing or wrong name: "+
jt_glid+"=="+this.jm_aGlidToLoad[i],"","A3xaMTHXLoader._OnEnd");if(!this.jm_aGlidToLoad[i]||this.jm_oDatabase.jm_oDbSchema.IsMandatory(this.jm_aGlidToLoad[i]))
return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail,"Load Database Tableset 1");continue;}
if(jt_ogldt.jm_oDTStatus.IsFail())
{jg_oe.LogErr("Fail ("+jt_glid+")","","A3xaMTHXLoader._OnEnd");if(this.jm_oDatabase.jm_oDbSchema.IsMandatory(jt_glid))
return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail,"Load Database Tableset 1");}
else if(jt_ogldt.jm_oDTStatus.IsEmpty())
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Empty ("+jt_ogldt.Get_Glid()+")","","A3xaMTHXLoader._OnEnd");if(this.jm_oDatabase.jm_oDbSchema.IsMandatory(jt_glid))
return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail,"Load Database Tableset 1");}
else if(!jt_ogldt.jm_oDTStatus.IsSuccess())
{if(this.jm_oDatabase.jm_oDbSchema.IsMandatory(jt_glid))
return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadFail,"Load Database Table. Unknown Status"+jt_glid);}}
return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadedTable);};this._CheckStatus=function()
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("this.jm_otktbLoader="+
(this.jm_otktbLoader?this.jm_otktbLoader.jm_oDTStatus.Get_Descr2():"null"),"","A3xaMTHXLoader._CheckStatus");var jr_oDTStatus=new GLDataStatus();jr_oDTStatus.jm_Target=this.Get_Target();jr_oDTStatus.jm_Operation=this.Get_Operation();jr_oDTStatus.jm_Status=this.Get_Status();if(!this.IsInProgress())
{jg_oe.LogErr("Unexpected Status","","A3xaMTHXLoader._CheckStatus");return null;}
if(this.IsOpening()||(this.jm_otktbLoader&&(this.jm_otktbLoader.IsSuccess()||this.jm_otktbLoader.IsEmpty()||(this.jm_otktbLoader.IsFail()&&ji_pTypTables.jp_bTyp_ExtHeader))))
{this.ReleaseCurrentTbTaskLoader();if(!(this.jm_aGlidQueue&&this.jm_aGlidQueue.length))
{jr_oDTStatus.Set2(jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StSuccess);return jr_oDTStatus;}
if(!this.StartNextTbTaskLoader())
{jr_oDTStatus.Set2(jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StFail);return jr_oDTStatus;}}
if(!this.jm_otktbLoader)
{jg_oe.LogErr("TaskLoader is null","","A3xaMTHXLoader._CheckStatus");return null;}
if(this.jm_otktbLoader.IsInProgress())
{jr_oDTStatus.Set2(jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StInProgress);return jr_oDTStatus;}
if(this.jm_otktbLoader.IsFail())
{jr_oDTStatus.Set2(jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StFail,null,null,this.jm_otktbLoader.jm_oDTStatus.jm_sMessage);this.ReleaseCurrentTbTaskLoader();return jr_oDTStatus;}
if(this.jm_otktbLoader.IsSuccess()||this.jm_otktbLoader.IsEmpty())
{return this._CheckStatus();}
jr_oDTStatus.Set2(jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StFail,null,null,"Unexpected");return jr_oDTStatus;};this._OnStart=function()
{if(!(this.jm_aGlidToLoad&&this.jm_aGlidToLoad.length))
{this.jm_oDTStatus.Set2(jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StFail,null,null,"Tablenames not defined");return false;}
this.jm_aGlidQueue=new Array();for(var i=0;i<this.jm_aGlidToLoad.length;i++)
this.jm_aGlidQueue.push(this.jm_aGlidToLoad[i]);return true;};}
function A3xaMTRecordLoader(ji_fnOnChange,ji_oDatabase,ji_aodtToLoad)
{A3xaTaskManager.call(this,ji_fnOnChange);var jt_this=this;this.jm_oDTStatus.jm_Target=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_TgRecord;this.jm_oDTStatus.jm_Operation=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpLoad;this.jm_oDatabase=(ji_oDatabase||null);this.jm_aodtToLoad=(ji_aodtToLoad||null);this.jm_aodtQueue=null;this.jm_otkrLoader=null;this._OnRelease=function()
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("","","A3xaMTRecordLoader._OnRelease");this.ReleaseCurrentRecordTaskLoader();return true;};this.ReleaseCurrentRecordTaskLoader=function()
{if(!this.jm_otkrLoader)
return false;this.jm_otkrLoader.Release();this.jm_otkrLoader=null;return true;};this.StartNextRecordTaskLoader=function()
{if(!(this.jm_aodtQueue&&this.jm_aodtQueue.length))
return false;var jt_odt=this.jm_aodtQueue.shift();if(!(jt_odt&&jt_odt.Get_Glid()))
return false;jg_oe.LogStatusBar2(new A3xaString(["Loading Records... "+this.jm_oDatabase.jm_oDbSchema.Get_Descr(jt_odt.Get_Glid()),"Cargando Records... "+this.jm_oDatabase.jm_oDbSchema.Get_Descr(jt_odt.Get_Glid()),"Carregando Records... "+this.jm_oDatabase.jm_oDbSchema.Get_Descr(jt_odt.Get_Glid()),"Caricamento Records... "+this.jm_oDatabase.jm_oDbSchema.Get_Descr(jt_odt.Get_Glid())]),true);var jt_otkrLoader=new A3xaTaskRecordLoader(function(){return jt_this.Task();},this.jm_oDatabase,jt_odt);jg_oe.CanLogInfo()&&jg_oe.LogInfo("Table id: "+jt_odt.Get_Glid(),"","A3xaMTRecordLoader.StartNextRecordTaskLoader");this.jm_otkrLoader=jt_otkrLoader;this.jm_oDTStatus.Set2(jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StInProgress);jt_otkrLoader.Start();return true;};this._OnEnd=function(ji_oDTStatusEnd)
{if(ji_oDTStatusEnd&&ji_oDTStatusEnd.IsFail())
return ji_oDTStatusEnd;for(var i=0;i<this.jm_aodtToLoad.Get_Count();i++)
{var jt_odt=this.jm_aodtToLoad.Get_Item_ByIndex(i);if(!jt_odt)
continue;var jt_glid=jt_odt.Get_Glid();if(jt_odt.jm_oDTStatus.IsFail())
{jg_oe.LogErr("Fail ("+jt_glid+")","","A3xaMTRecordLoader._OnEnd");if(this.jm_oDatabase.jm_oDbSchema.IsMandatory(jt_glid))
return jt_odt.jm_oDTStatus;}
else if(jt_odt.jm_oDTStatus.IsEmpty())
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Empty ("+jt_glid+")","","A3xaMTRecordLoader._OnEnd");if(this.jm_oDatabase.jm_oDbSchema.IsMandatory(jt_glid))
return jt_odt.jm_oDTStatus;}
else if(!jt_odt.jm_oDTStatus.IsSuccess())
{if(this.jm_oDatabase.jm_oDbSchema.IsMandatory(jt_glid))
{ji_oDTStatusEnd.Set2(jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StFail,null,null,"Load Records. Unknown Status"+jt_glid);return ji_oDTStatusEnd;}}}
return new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_LoadedRecord);};this._CheckStatus=function()
{var jr_oDTStatus=new GLDataStatus();jr_oDTStatus.jm_Target=this.Get_Target();jr_oDTStatus.jm_Operation=this.Get_Operation();jr_oDTStatus.jm_Status=this.Get_Status();if(!this.IsInProgress())
{jg_oe.LogErr("Unexpected Status","","A3xaMTRecordLoader._CheckStatus");return null;}
if(this.IsOpening()||(this.jm_otkrLoader&&(this.jm_otkrLoader.IsSuccess()||this.jm_otkrLoader.IsEmpty())))
{this.ReleaseCurrentRecordTaskLoader();if(!(this.jm_aodtQueue&&this.jm_aodtQueue.length))
{jr_oDTStatus.Set2(jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StSuccess);return jr_oDTStatus;}
if(!this.StartNextRecordTaskLoader())
{jr_oDTStatus.Set2(jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StFail);return jr_oDTStatus;}}
if(!this.jm_otkrLoader)
{jg_oe.LogErr("TaskLoader is null","","A3xaMTRecordLoader._CheckStatus");return null;}
if(this.jm_otkrLoader.IsInProgress())
{jr_oDTStatus.Set2(jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StInProgress);return jr_oDTStatus;}
if(this.jm_otkrLoader.IsFail())
{jr_oDTStatus.Set2(jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StFail,null,null,this.jm_otkrLoader.jm_oDTStatus.jm_sMessage);this.ReleaseCurrentRecordTaskLoader();return jr_oDTStatus;}
if(this.jm_otkrLoader.IsSuccess()||this.jm_otkrLoader.IsEmpty())
{return this._CheckStatus();}
jr_oDTStatus.Set2(jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StFail,null,null,"Unexpected");return jr_oDTStatus;};this._OnStart=function()
{if(!(this.jm_aodtToLoad&&this.jm_aodtToLoad.Get_Count()))
{this.jm_oDTStatus.Set2(jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StFail,null,null,"Tables cache not defined");return false;}
this.jm_aodtQueue=new Array();for(var i=0;i<this.jm_aodtToLoad.Get_Count();i++)
{var jt_odt=this.jm_aodtToLoad.Get_Item_ByIndex(i);if(jt_odt)
this.jm_aodtQueue.push(jt_odt);}
return true;};}
function A3xaTaskHXLoader(ji_fnOnChange,ji_oDatabase,ji_Glid,ji_bHeaderOnly,ji_bTurboHeader)
{A3xaTaskManager.call(this,ji_fnOnChange);var jt_this=this;this.jm_oDTStatus.jm_Target=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_TgTableHX;this.jm_oDTStatus.jm_Operation=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpLoad;this.jm_oDatabase=(ji_oDatabase||null);this.jm_Glid=(ji_Glid||null);this.jm_odtToLoad=null;if(this.jm_oDatabase&&this.jm_Glid)
this.jm_odtToLoad=this.jm_oDatabase.NewDataTable(this.jm_Glid);this._OnRelease=function()
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("","","A3xaTaskHXLoader._OnRelease");if(!this.jm_odtToLoad)
return false;this.jm_odtToLoad.jm_oDTStatus.jm_fnOnChange=null;this.jm_odtToLoad=null;return true;};this._CheckStatus=function(){return this.jm_odtToLoad?this.jm_odtToLoad.jm_oDTStatus:null;};this._OnStart=function()
{if(!this.jm_oDatabase)
{this.jm_oDTStatus.Set2(jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StFail,null,null,"Database not defined");return false;}
if(!this.jm_Glid)
{this.jm_oDTStatus.Set2(jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StFail,null,null,"Tablename not defined");return false;}
if(!this.jm_odtToLoad)
{this.jm_oDTStatus.Set2(jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StFail,null,null,"Cannot Create Table Cache "+this.jm_Glid);return false;}
this.jm_odtToLoad.jm_oDTStatus.jm_fnOnChange=function(){return jt_this.Task();};var jt_oDbTransaction=this.jm_oDatabase.OpenTransaction({bLoad:true,bHeaderOnly:ji_bHeaderOnly,bTurboHeader:ji_bTurboHeader},this,[this.jm_Glid]);jt_oDbTransaction.UsingTable(this.jm_Glid);var jt_bResult=this.jm_odtToLoad.LoadFromGLS(this.jm_Glid,jt_oDbTransaction,ji_bHeaderOnly);jt_oDbTransaction.Release();if(jt_bResult)
{this.jm_oDTStatus.Set2(jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StInProgress);return true;}
this.jm_oDTStatus.Set2(jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StFail,null,null,"Load Table "+this.jm_Glid);return false;};}
function A3xaTaskRecordLoader(ji_fnOnChange,ji_oDatabase,ji_odtToLoad)
{A3xaTaskManager.call(this,ji_fnOnChange);var jt_this=this;this.jm_oDTStatus.jm_Target=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_TgRecord;this.jm_oDTStatus.jm_Operation=jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpLoad;this.jm_oDatabase=(ji_oDatabase||null);this.jm_odtToLoad=(ji_odtToLoad||null);this._OnRelease=function()
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("","","A3xaTaskRecordLoader._OnRelease");if(!this.jm_odtToLoad)
return false;this.jm_odtToLoad.jm_oDTStatus.jm_fnOnChange=null;this.jm_odtToLoad=null;return true;};this._CheckStatus=function(){return this.jm_odtToLoad?this.jm_odtToLoad.jm_oDTStatus:null;};this._OnStart=function()
{if(!(this.jm_oDatabase&&this.jm_odtToLoad&&this.jm_odtToLoad.Get_Glid()))
{this.jm_oDTStatus.Set2(jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StFail,null,null,"Db or Table not defined");return false;}
if(!(this.jm_odtToLoad.jm_oDTStatus.IsSuccess()&&this.jm_odtToLoad.jm_oDTStatus.jm_Target==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_TgTableHX))
{this.jm_oDTStatus.Set2(jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StFail,null,null,"Table Cache Header and Indexes not valid: "+
this.jm_odtToLoad.Get_Glid());return false;}
if(this.jm_odtToLoad.Get_CountRecords()<=0)
{this.jm_oDTStatus.Set2(jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StEmpty,null,null,"No Records to Load: "+this.jm_odtToLoad.Get_Glid());return false;}
this.jm_odtToLoad.jm_oDTStatus.jm_fnOnChange=function(){return jt_this.Task();};var jt_oDbTransaction=this.jm_oDatabase.OpenTransaction({bLoad:true,bRecord:true},this,[this.jm_odtToLoad.Get_Glid()]);jt_oDbTransaction.UsingTable(this.jm_odtToLoad.Get_Glid());var jt_bResult=this.jm_odtToLoad.LoadRecordsFromGLS(jt_oDbTransaction);jt_oDbTransaction.Release();if(jt_bResult)
{this.jm_oDTStatus.Set2(jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StInProgress);return true;}
this.jm_oDTStatus.Set2(jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StFail,null,null,"Load Records "+this.jm_odtToLoad.Get_Glid());return false;};}
function A3xaStorage()
{this.Get_Type=A3xaStorage_Get_Type;this.Available=A3xaStorage_Available;this.Enable=A3xaStorage_Enable;this.IsOpen=A3xaStorage_IsOpen;this.IsOpening=A3xaStorage_IsOpening;this.ExecOpen=A3xaStorage_ExecOpen;this.Open=A3xaStorage_Open;this.ExecClear=A3xaStorage_ExecClear;this.Clear=A3xaStorage_Clear;this.IsClearRequest=A3xaStorage_IsClearRequest;this.Get_TableNames=function(){return null;}
this.NewTransaction=A3xaStorage_NewTransaction;this.ExecWrite=A3xaStorage_ExecWrite;this.ExecRead=function(ji_oDbTransaction,jio_oStorageValue){return true;}
this.Write3=A3xaStorage_Write3;this.Read3=A3xaStorage_Read3;this.CheckLatestOp=A3xaStorage_CheckLatestOp;this.jm_bAvailable=false;this.jm_bEnable=false;this.jm_LatestWrite=null;this.jm_LatestRead=null;this.jm_bOpen=false;this.jm_bClearRequest=false;}
function A3xaStorage_CheckLatestOp(ji_Op)
{var jr_latest=null;if(ji_Op=="WR")
{jr_latest=this.jm_LatestWrite;this.jm_LatestWrite=null;}
else if(ji_Op=="RD")
{jr_latest=this.jm_LatestRead;this.jm_LatestRead=null;}
return jr_latest;}
function A3xaStorage_Get_Type(){return 0;}
function A3xaStorage_Available(){return this.jm_bAvailable===true;}
function A3xaStorage_Enable(ji_b){this.jm_bEnable=(ji_b===true);return true;}
function A3xaStorage_IsClearRequest(){return this.jm_bClearRequest;}
function A3xaStorage_ExecClear(){return true;}
function A3xaStorage_Clear(ji_oDbTransaction)
{this.jm_LatestWrite=null;this.jm_LatestRead=null;if(ji_oDbTransaction)
{if(!(this.jm_bAvailable))
{if(ji_oDbTransaction)
ji_oDbTransaction.FireClearStorageError(null,"Fail on Clear Storage: Storage not available");return false;}
if(!(this.IsOpen()))
{if(ji_oDbTransaction)
ji_oDbTransaction.FireClearStorageError(null,"Fail on Clear Storage: Storage not open");return false;}
if(!ji_oDbTransaction.IsReady())
{if(ji_oDbTransaction)
ji_oDbTransaction.FireClearStorageError(null,"Fail on Clear Storage: Transaction not ready");return false;}}
var jt_b=this.ExecClear(ji_oDbTransaction);if(jt_b===true)
{if(ji_oDbTransaction)
ji_oDbTransaction.FireClearStorage(null);}
return true;}
function A3xaStorage_NewTransaction(ji_aDbTableName,ji_oStorageOpType,ji_odbtrListener)
{var jr_oDbTransaction=new A3xaStorage_Transaction(ji_aDbTableName,ji_oStorageOpType,ji_odbtrListener);jr_oDbTransaction.jm_oStorage=this;return jr_oDbTransaction;}
function A3xaStorage_IsOpen(){return this.jm_bOpen===true;}
function A3xaStorage_IsOpening(){return this.jm_bOpen===-1;}
function A3xaStorage_ExecOpen(ji_oDbTransaction,ji_oSchema)
{return true;}
function A3xaStorage_Open(ji_oDbTransaction,ji_oSchema)
{if(this.jm_bOpen)
return this.jm_bOpen;this.jm_bOpen=-1;if(!(this.jm_bAvailable&&this.jm_bEnable))
{this.jm_bOpen=false;if(ji_oDbTransaction)
ji_oDbTransaction.FireOpenStorageError(null,"Fail on Open Storage: Storage not available or disabled");return false;}
if(!(ji_oSchema&&ji_oSchema.IsValid()))
{this.jm_bOpen=false;if(ji_oDbTransaction)
ji_oDbTransaction.FireOpenStorageError(null,"Fail on Open Storage: Schema not valid");return false;}
var jt_bOpen=this.ExecOpen(ji_oDbTransaction,ji_oSchema);if(jt_bOpen===true)
{this.jm_bOpen=true;if(ji_oDbTransaction)
ji_oDbTransaction.FireOpenStorage(null);}
else if(jt_bOpen===false)
{this.jm_bOpen=false;}
return this.jm_bOpen;}
function A3xaStorage_ExecWrite(ji_oDbTransaction,ji_oStorageValue)
{return true;}
function A3xaStorage_ExecRead(ji_oDbTransaction,jio_oStorageValue)
{return true;}
function A3xaStorage_Write3(ji_oDbTransaction,ji_oStorageValue)
{if(!ji_oStorageValue)
return false;if(!(this.jm_bAvailable&&this.jm_bEnable))
return false;if(!(this.IsOpen()))
return ji_oStorageValue.Set_Result({bStore:true,bError:true},"Store Record: "+"Storage Not Open");var jt_key=ji_oStorageValue.Get_Key();if(!jt_key)
return ji_oStorageValue.Set_Result({bStore:true,bError:true},"Store Record: "+"Key Empty");if(!(ji_oDbTransaction))
return ji_oStorageValue.Set_Result({bStore:true,bError:true},"Store Record: "+"Transaction undefined");if(!ji_oDbTransaction.IsReady())
return ji_oStorageValue.Set_Result({bStore:true,bError:true},"Store Record: "+"Transaction device not ready");if(this.ExecWrite(ji_oDbTransaction,ji_oStorageValue)===true)
{ji_oStorageValue.Set_Result({bStore:true,bSuccess:true});this.jm_LatestWrite=true;}
return true;}
function A3xaStorage_Read3(ji_oDbTransaction,jio_oStorageValue)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("p1","A3xaStorage_Read3");if(!jio_oStorageValue)
return false;jg_oe.CanLogInfo()&&jg_oe.LogInfo("p2","A3xaStorage_Read3");if(!(this.jm_bAvailable&&this.jm_bEnable))
return false;jg_oe.CanLogInfo()&&jg_oe.LogInfo("p3","A3xaStorage_Read3");if(!(this.IsOpen()))
return jio_oStorageValue.Set_Result({bLoad:true,bError:true},"Load Record: "+"Storage Not Open");jg_oe.CanLogInfo()&&jg_oe.LogInfo("p4","A3xaStorage_Read3");if(!jio_oStorageValue.Get_Key())
return jio_oStorageValue.Set_Result({bLoad:true,bError:true},"Load Record: "+"Key Empty");jg_oe.CanLogInfo()&&jg_oe.LogInfo("p5="+jio_oStorageValue.Get_Key(),"A3xaStorage_Read3");if(!(ji_oDbTransaction))
return jio_oStorageValue.Set_Result({bLoad:true,bError:true},"Load Record: "+"Transaction undefined");if(!ji_oDbTransaction.IsReady())
return jio_oStorageValue.Set_Result({bLoad:true,bError:true},"Load Record: "+"Transaction device not ready");if(this.ExecRead(ji_oDbTransaction,jio_oStorageValue)===true)
{this.jm_LatestRead=true;}
jg_oe.CanLogInfo()&&jg_oe.LogInfo("pend="+jio_oStorageValue.Get_Key(),"A3xaStorage_Read3");return true;}
function A3xaStorage_Transaction(ji_aDbTableName,ji_oStorageOpType,ji_odbtrListener)
{this.FireOpenStorage=A3xaStorage_Transaction_FireOpenStorage;this.FireOpenStorageError=A3xaStorage_Transaction_FireOpenStorageError;this.FireTransactionComplete=A3xaStorage_Transaction_FireTransactionComplete;this.FireTransactionError=A3xaStorage_Transaction_FireTransactionError;this.FireClearStorage=A3xaStorage_Transaction_FireClearStorage;this.FireClearStorageError=A3xaStorage_Transaction_FireClearStorageError;this.UsingTable=A3xaStorage_Transaction_UsingTable;this.Release=A3xaStorage_Transaction_Release;this.IsAsync=A3xaStorage_Transaction_IsAsync;this.Get_Storage=A3xaStorage_Transaction_Get_Storage;this.IsReady=A3xaStorage_Transaction_IsReady;this.jm_oStorage=null;this.jm_aDbTableName=ji_aDbTableName;this.jm_oStorageOpType=(ji_oStorageOpType||{});this.jm_sCurrentTableName=null;this.jm_bAsync=false;this.jm_bReleased=false;this.jm_bCompleted=false;this.jm_bFail=false;this.jm_odbtrListener=(ji_odbtrListener||null);}
function A3xaStorage_Transaction_FireOpenStorage(ji_oEvent)
{if(this.jm_odbtrListener)
return this.jm_odbtrListener.OnOpenStorage(this,ji_oEvent);return true;}
function A3xaStorage_Transaction_FireOpenStorageError(ji_oEvent,ji_sMessage)
{if(this.jm_odbtrListener)
return this.jm_odbtrListener.OnOpenStorageError(this,ji_oEvent,ji_sMessage);return true;}
function A3xaStorage_Transaction_FireClearStorage(ji_oEvent)
{if(this.jm_odbtrListener)
return this.jm_odbtrListener.OnClearStorage(this,ji_oEvent);return true;}
function A3xaStorage_Transaction_FireClearStorageError(ji_oEvent,ji_sMessage)
{if(this.jm_odbtrListener)
return this.jm_odbtrListener.OnClearStorageError(this,ji_oEvent,ji_sMessage);return true;}
function A3xaStorage_Transaction_FireTransactionComplete(ji_oEvent)
{if(this.jm_bCompleted||this.jm_bFail)
return false;this.jm_bCompleted=true;if(this.jm_oStorageOpType.bStore)
jg_oe.CanLogInfo()&&jg_oe.LogInfo("Transaction Completed for Store "+
(this.jm_oStorageOpType.bRecord?", Records":""));else if(this.jm_oStorageOpType.bLoad)
jg_oe.CanLogInfo()&&jg_oe.LogInfo("Transaction Completed for Load "+
(this.jm_oStorageOpType.bRecord?", Records":""));else if(this.jm_oStorageOpType.bClear)
jg_oe.CanLogInfo()&&jg_oe.LogInfo("Transaction Completed for Clear "+
(this.jm_oStorageOpType.bRecord?", Records":""));else
jg_oe.CanLogInfo()&&jg_oe.LogInfo("Transaction Completed for ? "+
(this.jm_oStorageOpType.bRecord?", Records":""));for(var j=0;j<this.jm_aDbTableName.length;j++)
jg_oe.CanLogInfo()&&jg_oe.LogInfo("tablename="+this.jm_aDbTableName[j]);if(this.jm_odbtrListener)
return this.jm_odbtrListener.OnTransactionComplete(this,ji_oEvent);return true;}
function A3xaStorage_Transaction_FireTransactionError(ji_oEvent,ji_sMessage)
{if(this.jm_bCompleted||this.jm_bFail)
return false;this.jm_bFail=true;if(this.jm_oStorageOpType.bStore)
jg_oe.CanLogInfo()&&jg_oe.LogInfo("Transaction Error for Store "+
(this.jm_oStorageOpType.bRecord?", Records":""));else if(this.jm_oStorageOpType.bLoad)
jg_oe.CanLogInfo()&&jg_oe.LogInfo("Transaction Error for Load "+
(this.jm_oStorageOpType.bRecord?", Records":""));else if(this.jm_oStorageOpType.bClear)
jg_oe.CanLogInfo()&&jg_oe.LogInfo("Transaction Error for Clear "+
(this.jm_oStorageOpType.bRecord?", Records":""));else
jg_oe.CanLogInfo()&&jg_oe.LogInfo("Transaction Error for ? "+
(this.jm_oStorageOpType.bRecord?", Records":""));for(var j=0;j<this.jm_aDbTableName.length;j++)
jg_oe.CanLogInfo()&&jg_oe.LogInfo("tablename="+this.jm_aDbTableName[j]);if(this.jm_odbtrListener)
return this.jm_odbtrListener.OnTransactionError(this,ji_oEvent,ji_sMessage);return true;}
function A3xaStorage_Transaction_Get_Storage(){return this.jm_oStorage;}
function A3xaStorage_Transaction_IsAsync(){return this.jm_bAsync||false;}
function A3xaStorage_Transaction_UsingTable(ji_sCurrentTableName)
{if(this.jm_bCompleted||this.jm_bFail)
return false;if(this.jm_sCurrentTableName!=ji_sCurrentTableName||!ji_sCurrentTableName)
{this.jm_sCurrentTableName=(ji_sCurrentTableName||null);jg_oe.CanLogInfo()&&jg_oe.LogInfo("Set name:"+(this.jm_sCurrentTableName||"null"),"","A3xaStorage_Transaction_UsingTable");}
return true;}
function A3xaStorage_Transaction_IsReady()
{if(this.jm_bCompleted||this.jm_bFail||this.jm_bReleased)
{jg_oe.LogErr("tbn,com,fail,rel:"+
(this.jm_aDbTableName||"null")+","+(this.jm_bCompleted?"Y":"N")+","+
(this.jm_bFail?"Y":"N")+","+(this.jm_bReleased?"Y":"N"),"","A3xaStorage_Transaction_IsReady");return false;}
if(!this.jm_aDbTableName)
{jg_oe.LogErr("tbn=null","","A3xaStorage_Transaction_IsReady");return false;}
return true;}
function A3xaStorage_Transaction_Release()
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Release Transaction for: "+(this.jm_aDbTableName?this.jm_aDbTableName[0]:"")+" "+
(this.jm_bReleased?"already released":""));if(this.jm_bReleased)
return false;if(!this.jm_bAsync)
{this.FireTransactionComplete(null);}
this.jm_bReleased=true;return true;}
function A3xaStorage_TransactionListener()
{this.OnOpenStorage=A3xaStorage_TransactionListener_OnOpenStorage;this.OnOpenStorageError=A3xaStorage_TransactionListener_OnOpenStorageError;this.OnClearStorage=A3xaStorage_TransactionListener_OnClearStorage;this.OnClearStorageError=A3xaStorage_TransactionListener_OnClearStorageError;this.OnTransactionComplete=A3xaStorage_TransactionListener_OnTransactionComplete;this.OnTransactionError=A3xaStorage_TransactionListener_OnTransactionError;}
function A3xaStorage_TransactionListener_OnTransactionComplete(ji_odbtr,ji_oEvent)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("A3xaStorage_TransactionListener_OnTransactionComplete");return true;}
function A3xaStorage_TransactionListener_OnTransactionError(ji_odbtr,ji_oEvent,ji_sMessage)
{return true;}
function A3xaStorage_TransactionListener_OnOpenStorage(ji_odbtr,ji_oEvent)
{return true;}
function A3xaStorage_TransactionListener_OnOpenStorageError(ji_odbtr,ji_oEvent,ji_sMessage)
{return true;}
function A3xaStorage_TransactionListener_OnClearStorage(ji_odbtr,ji_oEvent)
{return true;}
function A3xaStorage_TransactionListener_OnClearStorageError(ji_odbtr,ji_oEvent,ji_sMessage)
{return true;}
function A3xaStorage_OpType()
{}
function A3xaStorage_Value(ji_xkey,ji_value)
{this.Get_Key=A3xaStorage_Value_Get_Key;this.Set_Key=A3xaStorage_Value_Set_Key;this.Get_Value=A3xaStorage_Value_Get_Value;this.Set_Value=A3xaStorage_Value_Set_Value;this.Get_Pair=A3xaStorage_Value_Get_Pair;this.Set_Pair=A3xaStorage_Value_Set_Pair;this.Set_Result=A3xaStorage_Value_Set_Result;this.jm_aValue=new Array();this.jm_aValue[jg_oe.jc_oA3xaDbZero.jc_sDbDefaultPrimaryKeyName]=(ji_xkey||null);this.jm_aValue["xvalue"]=(ji_value||null);}
function A3xaStorage_Value_Set_Result(ji_oStorageOpType,ji_sMessage){return true;}
function A3xaStorage_Value_Get_Key()
{return this.jm_aValue[jg_oe.jc_oA3xaDbZero.jc_sDbDefaultPrimaryKeyName]||null;}
function A3xaStorage_Value_Set_Key(ji_xkey)
{if(!ji_xkey)
return false;this.jm_aValue[jg_oe.jc_oA3xaDbZero.jc_sDbDefaultPrimaryKeyName]=ji_xkey;return true;}
function A3xaStorage_Value_Get_Value()
{return this.jm_aValue["xvalue"]||null;}
function A3xaStorage_Value_Set_Value(ji_value)
{this.jm_aValue["xvalue"]=ji_value;return true;}
function A3xaStorage_Value_Get_Pair()
{return this.jm_aValue||null;}
function A3xaStorage_Value_Set_Pair(ji_a,ji_bSkipCheck)
{if(!ji_a)
return false;var jt_key=ji_a[jg_oe.jc_oA3xaDbZero.jc_sDbDefaultPrimaryKeyName];var jt_value=ji_a["xvalue"];if(ji_bSkipCheck===true||!this.Get_Key())
this.Set_Key(jt_key);else if(this.Get_Key()!=jt_key)
return false;return this.Set_Value(jt_value);}
function A3xaDbSchema(ji_sDbName,ji_DbVersion,ji_sDbDefaultKeyName,ji_aTables)
{this.jm_sDbName=ji_sDbName;this.jm_DbVersion=ji_DbVersion;this.jm_sDbDefaultKeyName=ji_sDbDefaultKeyName;this.jm_aTables=ji_aTables;this.jm_aTablesExtension=null;this.IsValid=function()
{if(!(this.jm_sDbName||this.jm_DbVersion||this.jm_sDbDefaultKeyName||this.jm_aTables))
return false;if(!(this.jm_aTables.length>0))
return false;return true;};this.Get_DbName=function(){return this.jm_sDbName||null;}
this.Get_DbVersion=function(){return this.jm_DbVersion||null;}
this.Get_PrimaryKeyName=function(){return this.jm_sDbDefaultKeyName;};this.Get_Table_ByIndex=function(ji_index,ji_bExtension)
{var jt_aTables=this.jm_aTables;if(ji_bExtension===true)
jt_aTables=this.jm_aTablesExtension;if(!(ji_index>=0&&jt_aTables&&ji_index<jt_aTables.length))
return null;return jt_aTables[ji_index]||null;};this.Get_Table_ByName=function(ji_sName,ji_bSkipGlidConversion)
{if(!ji_sName)
return null;if(!ji_bSkipGlidConversion)
ji_sName=jg_oe.jc_oA3xaDbZero.Glid2Default(ji_sName);var jt_aTables=this.jm_aTables;for(var i=0;i<jt_aTables.length;i++)
{if(ji_sName==jt_aTables[i].jp_sName)
return jt_aTables[i];}
return null;};this.Index2Name=function(ji_index,ji_bExtension)
{var jt_pTable=this.Get_Table_ByIndex(ji_index,ji_bExtension);if(!jt_pTable)
return"";return jt_pTable.jp_sName||"";};this.IsMandatory=function(ji_sName)
{var jt_pTable=this.Get_Table_ByName(ji_sName);if(!jt_pTable)
return false;return jt_pTable.jp_bMandatory||false;};this.Get_StorageType=function(ji_sName)
{var jt_sNameDefault=jg_oe.jc_oA3xaDbZero.Glid2Default(ji_sName);var jt_pTable=this.Get_Table_ByName(jt_sNameDefault,true);var jt_bExtendedStorage=false;if(jt_sNameDefault!=ji_sName)
jt_bExtendedStorage=true;var jt_StorageType=jg_oe.jc_oStorage.jc_FLY;if(jt_pTable&&jt_sNameDefault)
{jt_StorageType=jt_pTable.jp_DefaultStorageType;if(jt_bExtendedStorage&&jg_oe.jm_StorageTypeDefault==jg_oe.jc_oStorage.jc_IDB)
jt_StorageType=jt_pTable.jp_ExtendedStorageType;}
jg_oe.CanLogInfo()&&jg_oe.LogInfo("info:"+
jg_oe.jc_oStorage.Get_Descr(jt_StorageType||jg_oe.jc_oStorage.jc_FLY),"","A3xaDbSchema.Get_StorageType");return jt_StorageType||jg_oe.jc_oStorage.jc_FLY;};this.Get_Descr=function(ji_sName)
{var jt_pTable=this.Get_Table_ByName(ji_sName);if(!jt_pTable)
return"";return jt_pTable.jp_sDescr||"";};}
function A3xaStorageFLY()
{A3xaStorage.call(this);this.Get_Type=A3xaStorageFLY_Get_Type;this.ExecClear=A3xaStorageFLY_ExecClear;this.ExecWrite=A3xaStorageFLY_ExecWrite;this.ExecRead=A3xaStorageFLY_ExecRead;this.jm_bAvailable=true;this.jm_aFlyStorage=new Array();}
function A3xaStorageFLY_Get_Type(){return jg_oe.jc_oStorage.jc_FLY;}
function A3xaStorageFLY_ExecClear(ji_oDbTransaction)
{this.jm_aFlyStorage=new Array();return true;}
function A3xaStorageFLY_ExecWrite(ji_oDbTransaction,ji_oStorageValue)
{var jt_key=ji_oStorageValue.Get_Key();var jt_value=ji_oStorageValue.Get_Value();this.jm_aFlyStorage[jt_key]=jt_value;return true;}
function A3xaStorageFLY_ExecRead(ji_oDbTransaction,jio_oStorageValue)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("p1="+(jio_oStorageValue?jio_oStorageValue.Get_Key():"?"),"A3xaStorageFLY_ExecRead");return jio_oStorageValue.Set_Value(this.jm_aFlyStorage[jio_oStorageValue.Get_Key()]);}
function A3xaStorageSS()
{A3xaStorage.call(this);this.Get_Type=A3xaStorageSS_Get_Type;this.Available=A3xaStorageSS_Available;this.ExecClear=A3xaStorageSS_ExecClear;this.ExecWrite=A3xaStorageSS_ExecWrite;this.ExecRead=A3xaStorageSS_ExecRead;}
function A3xaStorageSS_Get_Type(){return jg_oe.jc_oStorage.jc_SS;}
function A3xaStorageSS_Available()
{if(this.jm_bAvailable==true)
return true;try
{if('sessionStorage'in window&&window['sessionStorage']!==null)
{sessionStorage.setItem("GSSSYS","Available1");var jt_text=sessionStorage.getItem("GSSSYS");if(jt_text&&jt_text=="Available1")
{sessionStorage.setItem("GSSSYS","Available2");jt_text=sessionStorage.getItem("GSSSYS");if(jt_text&&jt_text=="Available2")
this.jm_bAvailable=true;}}}
catch(e)
{}
return this.jm_bAvailable;}
function A3xaStorageSS_ExecClear(ji_oDbTransaction)
{sessionStorage.clear();jg_oe.LogStatusBar("Clear Session Storage");return true;}
function A3xaStorageSS_ExecWrite(ji_oDbTransaction,ji_oStorageValue)
{var jt_key=ji_oStorageValue.Get_Key();var jt_value=ji_oStorageValue.Get_Value();sessionStorage.setItem(jt_key,jt_value);return true;}
function A3xaStorageSS_ExecRead(ji_oDbTransaction,jio_oStorageValue)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("p1="+(jio_oStorageValue?jio_oStorageValue.Get_Key():"?"),"A3xaStorageSS_ExecRead");return jio_oStorageValue.Set_Value(sessionStorage.getItem(jio_oStorageValue.Get_Key()));}
function A3xaStorageLS()
{A3xaStorage.call(this);this.Get_Type=A3xaStorageLS_Get_Type;this.Available=A3xaStorageLS_Available;this.ExecClear=A3xaStorageLS_ExecClear;this.ExecWrite=A3xaStorageLS_ExecWrite;this.ExecRead=A3xaStorageLS_ExecRead;}
function A3xaStorageLS_Get_Type(){return jg_oe.jc_oStorage.jc_LS;}
function A3xaStorageLS_Available()
{if(this.jm_bAvailable==true)
return true;try
{if('localStorage'in window&&window['localStorage']!==null)
{localStorage.setItem("GLSSYS","Available1");var jt_text=localStorage.getItem("GLSSYS");if(jt_text&&jt_text=="Available1")
{localStorage.setItem("GLSSYS","Available2");jt_text=localStorage.getItem("GLSSYS");if(jt_text&&jt_text=="Available2")
this.jm_bAvailable=true;}}}
catch(e)
{}
return this.jm_bAvailable;}
function A3xaStorageLS_ExecClear(ji_oDbTransaction)
{localStorage.clear();jg_oe.LogStatusBar("Clear Local Storage");return true;}
function A3xaStorageLS_ExecWrite(ji_oDbTransaction,ji_oStorageValue)
{var jt_key=ji_oStorageValue.Get_Key();var jt_value=ji_oStorageValue.Get_Value();localStorage.setItem(jt_key,jt_value);return true;}
function A3xaStorageLS_ExecRead(ji_oDbTransaction,jio_oStorageValue)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("p1="+(jio_oStorageValue?jio_oStorageValue.Get_Key():"?"),"A3xaStorageLS_ExecRead");return jio_oStorageValue.Set_Value(localStorage.getItem(jio_oStorageValue.Get_Key()));}
function A3xaStorageIDB()
{A3xaStorage.call(this);this.Get_Type=A3xaStorageIDB_Get_Type;this.Available=A3xaStorageIDB_Available;this.ExecOpen=A3xaStorageIDB_ExecOpen;this.ExecOpenGranted=A3xaStorageIDB_ExecOpenGranted;this.Get_IDB=A3xaStorageIDB_Get_IDB;this.ExecClear=A3xaStorageIDB_ExecClear;this.Get_TableNames=function()
{if(!this.IsOpen())
return null;return this.jm_oidb.objectStoreNames||null;}
this.IsOpen=A3xaStorageIDB_IsOpen;this.NewTransaction=A3xaStorageIDB_NewTransaction;this.ExecWrite=A3xaStorageIDB_ExecWrite;var jt_this=this;this.ExecRead=function(ji_oDbTransaction,jio_oStorageValue)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Begin - key: "+jio_oStorageValue.Get_Key(),"IDB Exec Read");var jt_oidbOS=ji_oDbTransaction.Get_ObjectStore();if(!jt_oidbOS)
return false;var jt_oidbRequest=jt_oidbOS.get(jio_oStorageValue.Get_Key());jt_oidbRequest.onsuccess=function(event)
{if(!jio_oStorageValue)
return;var jt_aidb=event.target.result;var jt_osValue=new A3xaStorage_Value(null,null);jt_osValue.Set_Pair(jt_aidb);if(!jt_osValue.Get_Key())
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Empty - ki,ko,vo: "+jio_oStorageValue.Get_Key()+",null,null","IDB Exec Read");jio_oStorageValue.Set_Result({bLoad:true,bEmpty:true},"Load Record Empty ");}
else if(!jio_oStorageValue.Set_Pair(jt_aidb))
{jg_oe.LogErr("Fail - ki,ko,vo: "+jio_oStorageValue.Get_Key()+", "+jt_osValue.Get_Key()+", "+jt_osValue.Get_Value(),"IDB Exec Read");jio_oStorageValue.Set_Result({bLoad:true,bError:true},"Load Record: "+event.target.result+" - "+jt_oidbRequest.error);}
else
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Success - k,v: "+jio_oStorageValue.Get_Key()+", "+
jio_oStorageValue.Get_Value(),"IDB Exec Read");jt_this.jm_LatestRead=true;}};jt_oidbRequest.onerror=function(event)
{var jt_aidb=event.target.result;jg_oe.LogErr("Fail - ki,ko,vo: "+jio_oStorageValue.Get_Key()+", "+(jt_aidb?jt_aidb["xkey"]+", "+jt_aidb["xvalue"]:",null,null"),"IDB Exec Read");if(jio_oStorageValue)
jio_oStorageValue.Set_Result({bLoad:true,bError:true},"Load Record: "+event.target.result+" - "+jt_oidbRequest.error);};return-1;}
this.jm_oidb=null;this.jm_CurrentVersion=null;this.jm_bOpenGranted=false;}
function A3xaStorageIDB_Get_Type(){return jg_oe.jc_oStorage.jc_IDB;}
function A3xaStorageIDB_Available()
{if(this.jm_bAvailable==true)
return true;window.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;window.IDBTransaction=window.IDBTransaction||window.webkitIDBTransaction||window.msIDBTransaction;window.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange;if(window.indexedDB)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Available","Indexeddb","A3xaStorageIDB_Available");this.jm_bAvailable=true;}
else
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Not Available","Indexeddb","A3xaStorageIDB_Available");}
if(window.IDBTransaction&&window.IDBKeyRange);return this.jm_bAvailable;}
function A3xaStorageIDB_ExecClear(ji_oDbTransaction)
{if(!ji_oDbTransaction)
{this.jm_bClearRequest=true;jg_oe.LogStatusBar("Clear Indexeddb");return-1;}
this.jm_bClearRequest=false;var jt_sTableName=ji_oDbTransaction.jm_sCurrentTableName;var jt_oidbOS=ji_oDbTransaction.Get_ObjectStore();if(!jt_oidbOS)
return false;var jt_oidbRequest=null;try
{jt_oidbRequest=jt_oidbOS.clear();}
catch(e)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("ExecClear: "+e);jt_oidbRequest=null;}
if(!jt_oidbRequest)
{if(ji_oDbTransaction)
ji_oDbTransaction.FireClearStorageError(event,"Fail on Clear IndexedDB: "+"Cannot clear");return false;}
jg_oe.CanLogInfo()&&jg_oe.LogInfo("idbreq ok","Clear Indexeddb");jt_oidbRequest.onerror=function(event)
{jg_oe.LogErr("Fail","Clear Indexeddb");if(ji_oDbTransaction)
ji_oDbTransaction.FireClearStorageError(event,"Fail on Clear IndexedDB: "+
event.target.error);};jt_oidbRequest.onsuccess=function(event)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Success","Clear Indexeddb: "+(jt_sTableName||"table"));if(ji_oDbTransaction)
ji_oDbTransaction.FireClearStorage(event);};return-1;}
function A3xaStorageIDB_NewTransaction(ji_aDbTableName,ji_oStorageOpType,ji_odbtrListener)
{var jr_oDbTransaction=new A3xaStorageIDB_Transaction(ji_aDbTableName,ji_oStorageOpType,ji_odbtrListener);jr_oDbTransaction.jm_bAsync=true;jr_oDbTransaction.jm_oStorage=this;return jr_oDbTransaction;}
function A3xaStorageIDB_IsOpen(){return this.jm_bOpen===true&&this.jm_oidb;}
function A3xaStorageIDB_Get_IDB(){return this.jm_oidb;}
function A3xaStorageIDB_ExecOpen(ji_oDbTransaction,ji_oSchema)
{var jt_this=this;if(this.jm_oidb!=null)
return true;jg_oe.CanLogInfo()&&jg_oe.LogInfo("Begin","Open Indexeddb","A3xaStorageIDB_ExecOpen");var jt_oidbRequestCV=window.indexedDB.open(ji_oSchema.Get_DbName());if(!jt_oidbRequestCV)
{jt_this.jm_CurrentVersion=0;if(!ji_oSchema)
return false;if(jt_this.jm_CurrentVersion<ji_oSchema.jm_DbVersion&&!(ji_oSchema.jm_aTablesExtension&&ji_oSchema.jm_aTablesExtension.length>0))
{jg_oe.LogErr("jt_oidbRequestCV==null - missing schema extension","Open Indexeddb","A3xaStorageIDB_ExecOpen");jg_oe.LogStatusBar("--- Reload the page to make the upgrade ---");jg_oe.LogStatusBar("--- Recargar la pÃ¡gina para hacer la actualizaciÃ³n ---");return false;}
jg_oe.CanLogInfo()&&jg_oe.LogInfo("jt_oidbRequestCV==null - Granted","Open Indexeddb","A3xaStorageIDB_ExecOpen");jt_this.jm_bOpenGranted=true;return jt_this.ExecOpenGranted(ji_oDbTransaction,ji_oSchema);}
jt_oidbRequestCV.onerror=function(event)
{jt_this.jm_CurrentVersion=0;if(!ji_oSchema)
return;if(jt_this.jm_CurrentVersion<ji_oSchema.jm_DbVersion&&!(ji_oSchema.jm_aTablesExtension&&ji_oSchema.jm_aTablesExtension.length>0))
{jg_oe.LogErr("jt_oidbRequestCV.onerror - missing schema extension - cv: "+
jt_this.jm_CurrentVersion,"Open Indexeddb","A3xaStorageIDB_ExecOpen");jg_oe.LogStatusBar("--- Reload the page to make the upgrade ---");jg_oe.LogStatusBar("--- Recargar la pÃ¡gina para hacer la actualizaciÃ³n ---");return;}
jg_oe.CanLogInfo()&&jg_oe.LogInfo("jt_oidbRequestCV.onerror - Granted ","Open Indexeddb","A3xaStorageIDB_ExecOpen");jt_this.jm_bOpenGranted=true;jt_this.ExecOpenGranted(ji_oDbTransaction,ji_oSchema);};jt_oidbRequestCV.onsuccess=function(event)
{jt_this.jm_CurrentVersion=0;var jt_oidbCV=jt_oidbRequestCV.result;if(jt_oidbCV&&jt_oidbCV.version>0)
jt_this.jm_CurrentVersion=jt_oidbCV.version;if(!ji_oSchema)
return;if(jt_this.jm_CurrentVersion<ji_oSchema.jm_DbVersion&&!(ji_oSchema.jm_aTablesExtension&&ji_oSchema.jm_aTablesExtension.length>0))
{jg_oe.LogErr("jt_oidbRequestCV.onsuccess - missing schema extension - cv,nv: "+
jt_this.jm_CurrentVersion+","+ji_oSchema.jm_DbVersion+","+(event.target.errorCode||""),"Open Indexeddb","A3xaStorageIDB_ExecOpen");jg_oe.LogStatusBar("--- Reload the page to make the upgrade ---");jg_oe.LogStatusBar("--- Recargar la pÃ¡gina para hacer la actualizaciÃ³n ---");return;}
jg_oe.CanLogInfo()&&jg_oe.LogInfo("jt_oidbRequestCV.onsuccess - Granted - cv,nv:"+
jt_this.jm_CurrentVersion+","+ji_oSchema.jm_DbVersion,"Open Indexeddb","A3xaStorageIDB_ExecOpen");jt_this.jm_bOpenGranted=true;jt_this.ExecOpenGranted(ji_oDbTransaction,ji_oSchema);};return-1;}
function A3xaStorageIDB_ExecOpenGranted(ji_oDbTransaction,ji_oSchema)
{var jt_this=this;if(this.jm_oidb!=null)
return true;if(!this.jm_bOpenGranted)
return false;jg_oe.CanLogInfo()&&jg_oe.LogInfo("Begin","Open Indexeddb","A3xaStorageIDB_ExecOpenGranted");var jt_oidbRequest=window.indexedDB.open(ji_oSchema.Get_DbName(),ji_oSchema.Get_DbVersion());if(!jt_oidbRequest)
{this.jm_bOpen=false;if(ji_oDbTransaction)
ji_oDbTransaction.FireOpenStorageError(event,"Fail on Open IndexedDB: "+"Cannot open");return false;}
jg_oe.CanLogInfo()&&jg_oe.LogInfo("idbreq ok","Open Indexeddb","A3xaStorageIDB_ExecOpenGranted");jt_oidbRequest.onerror=function(event)
{jg_oe.LogErr("Fail","Open Indexeddb","A3xaStorageIDB_ExecOpenGranted");if(ji_oDbTransaction)
ji_oDbTransaction.FireOpenStorageError(event,"Fail on Open IndexedDB: "+event.target.error);};jt_oidbRequest.onsuccess=function(event)
{jt_this.jm_oidb=jt_oidbRequest.result;if(!jt_this.jm_oidb)
{jg_oe.LogErr("Fail (null-db) "+event.target.errorCode,"Open Indexeddb","A3xaStorageIDB_ExecOpenGranted");return;}
jt_this.jm_bOpen=true;jg_oe.CanLogInfo()&&jg_oe.LogInfo("Success","Open Indexeddb","A3xaStorageIDB_ExecOpenGranted");jt_this.jm_oidb.onerror=function(event)
{jg_oe.LogErr("Error "+event.target.errorCode,"Indexeddb","jm_oidb.onerror");};if(ji_oDbTransaction)
ji_oDbTransaction.FireOpenStorage(event);};jt_oidbRequest.onupgradeneeded=function(event)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Begin","Upgrade Indexeddb","A3xaStorageIDB_ExecOpenGranted");var jt_oidb=event.target.result;if(!jt_oidb)
{jg_oe.LogErr("Fail","Upgrade Indexeddb"+jt_oidbRequest.error,"A3xaStorageIDB_ExecOpenGranted");return;}
var jt_aosNames=jt_oidb.objectStoreNames;var jt_osNamesCount=(jt_aosNames&&jt_aosNames.length>0)?jt_aosNames.length:0;for(var i=0;i<jt_osNamesCount;i++)
{if(!jt_aosNames[i])
continue;jg_oe.CanLogInfo()&&jg_oe.LogInfo("Delete old table: "+jt_aosNames[i],"Upgrade Indexeddb","A3xaStorageIDB_ExecOpenGranted");try
{jt_oidb.deleteObjectStore(jt_aosNames[i]);}
catch(e)
{jg_oe.LogErr("Cannot Delete old table: "+jt_aosNames[i],"Upgrade Indexeddb");}}
var jt_posTable=0;var jt_bExtension=false;while(true)
{var jt_sTable=ji_oSchema.Index2Name(jt_posTable,jt_bExtension);var jt_sKey=ji_oSchema.Get_PrimaryKeyName();if(!(jt_sTable&&jt_sKey))
{if(!jt_bExtension)
{jt_bExtension=true;jt_posTable=0;continue;}
else
break;}
jg_oe.CanLogInfo()&&jg_oe.LogInfo("Create new Table "+jt_sTable,"Upgrade Indexeddb","A3xaStorageIDB_ExecOpenGranted");var jt_oidbObjectStore=jt_oidb.createObjectStore(jt_sTable,{keyPath:jt_sKey});jt_posTable++;}};return-1;}
function A3xaStorageIDB_ExecWrite(ji_oDbTransaction,ji_oStorageValue)
{var jt_key=ji_oStorageValue.Get_Key();var jt_value=ji_oStorageValue.Get_Value();var jt_this=this;var jt_oidbOS=ji_oDbTransaction.Get_ObjectStore();if(!jt_oidbOS)
return false;var jt_oidbRequest=null;try
{jt_oidbRequest=jt_oidbOS.put(ji_oStorageValue.Get_Pair());}
catch(e)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Write3-addOS: "+e);return ji_oStorageValue.Set_Result({bStore:true,bError:true},"Store Record: "+"Write Error");}
jt_oidbRequest.onsuccess=function(event)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("pc0000=OK "+event.target.result);if(ji_oStorageValue)
{ji_oStorageValue.Set_Result({bStore:true,bSuccess:true});jt_this.jm_LatestWrite=true;}};jt_oidbRequest.onerror=function(event)
{if(ji_oStorageValue)
ji_oStorageValue.Set_Result({bStore:true,bError:true},"Store Record: "+"Write Error - "+event.target.result+" - "+jt_oidbRequest.error);};return-1;}
function A3xaStorageIDB_ExecRead(ji_oDbTransaction,jio_oStorageValue)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Begin - key: "+jio_oStorageValue.Get_Key(),"IDB Exec Read");var jt_oidbOS=ji_oDbTransaction.Get_ObjectStore();if(!jt_oidbOS)
return false;var jt_oidbRequest=jt_oidbOS.get(jio_oStorageValue.Get_Key());jt_oidbRequest.onsuccess=function(event)
{if(!jio_oStorageValue)
return;var jt_aidb=event.target.result;var jt_osValue=new A3xaStorage_Value(null,null);jt_osValue.Set_Pair(jt_aidb);if(!jt_osValue.Get_Key())
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Empty - ki,ko,vo: "+jio_oStorageValue.Get_Key()+","+jt_aidb["xkey"],"IDB Exec Read");jg_oe.CanLogInfo()&&jg_oe.LogInfo("Empty - ki,ko,vo: "+jio_oStorageValue.Get_Key()+",null,null","IDB Exec Read");jio_oStorageValue.Set_Result({bLoad:true,bEmpty:true},"Load Record Empty ");}
else if(!jio_oStorageValue.Set_Pair(jt_aidb))
{jg_oe.LogErr("Fail - ki,ko,vo: "+jio_oStorageValue.Get_Key()+", "+jt_osValue.Get_Key()+", "+jt_osValue.Get_Value(),"IDB Exec Read");jio_oStorageValue.Set_Result({bLoad:true,bError:true},"Load Record: "+event.target.result+" - "+jt_oidbRequest.error);}
else
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Success - k,v: "+jio_oStorageValue.Get_Key()+", "+
jio_oStorageValue.Get_Value(),"IDB Exec Read");}};jt_oidbRequest.onerror=function(event)
{var jt_aidb=event.target.result;jg_oe.LogErr("Fail - ki,ko,vo: "+jio_oStorageValue.Get_Key()+", "+(jt_aidb?jt_aidb["xkey"]+", "+jt_aidb["xvalue"]:",null,null"),"IDB Exec Read");if(jio_oStorageValue)
jio_oStorageValue.Set_Result({bLoad:true,bError:true},"Load Record: "+event.target.result+" - "+jt_oidbRequest.error);};return-1;}
function A3xaStorageIDB_Transaction(ji_aDbTableName,ji_oStorageOpType,ji_odbtrListener)
{A3xaStorage_Transaction.call(this,ji_aDbTableName,ji_oStorageOpType,ji_odbtrListener);this.IsReady=A3xaStorageIDB_Transaction_IsReady;this.Get_IDBTransaction=A3xaStorageIDB_Transaction_Get_IDBTransaction;this.Get_ObjectStore=A3xaStorageIDB_Transaction_Get_ObjectStore;this.UsingTable=A3xaStorageIDB_Transaction_UsingTable;this.jm_oidbTransaction=null;this.jm_oidbOS=null;}
function A3xaStorageIDB_Transaction_IsReady()
{if(!A3xaStorage_Transaction_IsReady.call(this))
return false;if(!this.jm_oidbOS)
{this.jm_oidbOS=this.Get_ObjectStore();if(!this.jm_oidbOS)
{jg_oe.LogErr("ObjectStore=null - tbn: "+(this.jm_aDbTableName||"null"),"","A3xaStorageIDB_Transaction_IsReady");return false;}}
return true;}
function A3xaStorageIDB_Transaction_Get_IDBTransaction(ji_oidb)
{if(this.jm_oidbTransaction)
return this.jm_oidbTransaction;if(!ji_oidb)
return null;try
{if(this.jm_oStorageOpType.bStore)
this.jm_oidbTransaction=ji_oidb.transaction(this.jm_aDbTableName,"readwrite");else if(this.jm_oStorageOpType.bLoad)
this.jm_oidbTransaction=ji_oidb.transaction(this.jm_aDbTableName,"readonly");else if(this.jm_oStorageOpType.bClear)
this.jm_oidbTransaction=ji_oidb.transaction(this.jm_aDbTableName,"readwrite");}
catch(e)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo('alert("pb4025=")'+e);}
if(!this.jm_oidbTransaction)
return null;jg_oe.CanLogInfo()&&jg_oe.LogInfo('alert("pb4030=")');if(this.jm_oStorageOpType.bStore)
jg_oe.CanLogInfo()&&jg_oe.LogInfo("Transaction Open for Store "+(this.jm_oStorageOpType.bRecord?" Records":""));else if(this.jm_oStorageOpType.bLoad)
jg_oe.CanLogInfo()&&jg_oe.LogInfo("Transaction Open for Load "+(this.jm_oStorageOpType.bRecord?" Records":""));else if(this.jm_oStorageOpType.bClear)
jg_oe.CanLogInfo()&&jg_oe.LogInfo("Transaction Open for Clear "+(this.jm_oStorageOpType.bRecord?" Records":""));else
jg_oe.CanLogInfo()&&jg_oe.LogInfo("Transaction Open for ? "+(this.jm_oStorageOpType.bRecord?" Records":""));for(var j=0;j<this.jm_aDbTableName.length;j++)
jg_oe.CanLogInfo()&&jg_oe.LogInfo("tablename="+this.jm_aDbTableName[j]);var jt_this=this;var jt_oidbTransaction=this.jm_oidbTransaction;this.jm_oidbTransaction.oncomplete=function(ji_oidbEvent)
{jt_this.FireTransactionComplete(ji_oidbEvent);};this.jm_oidbTransaction.onerror=function(ji_oidbEvent)
{jt_this.FireTransactionError(ji_oidbEvent,jt_oidbTransaction.error);};return this.jm_oidbTransaction;}
function A3xaStorageIDB_Transaction_UsingTable(ji_sCurrentTableName)
{if(!A3xaStorage_Transaction_UsingTable.call(this,ji_sCurrentTableName))
return false;this.jm_oidbOS=null;if(!this.jm_sCurrentTableName)
this.jm_oidbTransaction=null;return true;}
function A3xaStorageIDB_Transaction_Get_ObjectStore()
{if(this.jm_oidbOS)
return this.jm_oidbOS;var jt_oidb=this.jm_oStorage.Get_IDB();if(!jt_oidb)
return null;jg_oe.CanLogInfo()&&jg_oe.LogInfo('alert("pb3000=")');var jt_oidbTransaction=this.Get_IDBTransaction(jt_oidb);if(!jt_oidbTransaction)
return null;jg_oe.CanLogInfo()&&jg_oe.LogInfo('alert("pb3010=")');if(!this.jm_sCurrentTableName)
return null;jg_oe.CanLogInfo()&&jg_oe.LogInfo('alert("pb3020=")'+this.jm_sCurrentTableName);try
{this.jm_oidbOS=jt_oidbTransaction.objectStore(this.jm_sCurrentTableName);}
catch(e)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Get_ObjectStore="+e);}
jg_oe.CanLogInfo()&&jg_oe.LogInfo("Get_ObjectStore-Table: "+this.jm_sCurrentTableName+" "+(this.jm_oidbOS?"OK":"Null"));return this.jm_oidbOS;}
function A3xaAZNC()
{this.IsValid=function()
{return true;};this.IsEmpty=function()
{return!this.Get_A();};this.Get_3xAZNC=function(){return this;};this._CopyFrom=function(ji_o3xaznc,ji_bZ,ji_bN,ji_bC)
{if(!ji_o3xaznc)
return false;ji_o3xaznc=ji_o3xaznc.Get_3xAZNC();var jt_A=ji_o3xaznc.Get_A();var jt_Z=null;var jt_N=null;var jt_C=null;if(!(ji_bZ===false))
jt_Z=ji_o3xaznc.Get_Z();if(!(ji_bZ===false||ji_bN===false))
jt_N=ji_o3xaznc.Get_N();if(!(ji_bZ===false||ji_bN===false||ji_bC===false))
jt_C=ji_o3xaznc.Get_C();return this.Set_AZNC(jt_A,jt_Z,jt_N,jt_C);};this.CopyFrom=function(ji_o3xaznc){return this._CopyFrom(ji_o3xaznc);};this.CopyFromAZN=function(ji_o3xaznc){return this._CopyFrom(ji_o3xaznc,true,true,false);};this.CopyFromAZ=function(ji_o3xaznc){return this._CopyFrom(ji_o3xaznc,true,false,false);};this.Clear=function()
{this.jm_A=this.jm_Z=this.jm_N=this.jm_C=null;return true;};this.Clear_C=function(){this.jm_C=null;return true;};this.Clear_NC=function(){this.jm_N=this.jm_C=null;return true;};this.Clear_ZNC=function(){this.jm_Z=this.jm_N=this.jm_C=null;return true;};this.Get_A=function(){return this.jm_A;};this.Get_Z=function(){return this.jm_Z;};this.Get_N=function(){return this.jm_N;};this.Get_C=function()
{return((this.jm_A&&this.jm_Z&&this.jm_N))?this.jm_C:null;};this.Get_Code=function(ji_bN,ji_bC)
{if(!this.Get_A())
return"";if(!this.Get_Z())
return this.Get_A();var jr_s=this.Get_A()+this.Get_Z();if(ji_bN!==false)
{if(!this.Get_N())
return jr_s;jr_s+=this.Get_N();}
if(ji_bC!==false)
{if(!this.Get_C())
return jr_s;jr_s+=this.Get_C();}
return jr_s;};this.Set_AZNC=function(ji_A,ji_Z,ji_N,ji_C)
{if(!ji_A)ji_Z=null;if(!ji_Z)ji_N=null;if(!ji_N)ji_C=null;this.jm_A=(ji_A||null);this.jm_Z=(ji_Z||null);this.jm_N=(ji_N||null);this.jm_C=(ji_C||null);return true;};this.Get_String=function(ji_bN,ji_bC,ji_sep)
{if(!ji_sep)
ji_sep=",";var jr_s="";jr_s+=A3xaToString(this.Get_A())+ji_sep+A3xaToString(this.Get_Z());if(!(ji_bN===false))
{jr_s+=ji_sep+A3xaToString(this.Get_N());if(!(ji_bC===false))
jr_s+=ji_sep+A3xaToString(this.Get_C());}
return jr_s;};this.Set_String=function(ji_s,ji_sep)
{if(!ji_sep)
ji_sep=",";if(!ji_s)
return false;return this.Set_Array(ji_s.split(ji_sep),0)>=0?true:false;};this.Set_Array=function(ji_a,ji_offset)
{if(!ji_a||ji_offset<0||ji_offset>=ji_a.length)
return-1;var jt_bAZNC=false;var jt_A=null;var jt_Z=null;var jt_N=null;var jt_C=null;var jt_i=ji_offset;if(jt_i<ji_a.length)
{jt_bAZNC=true;jt_A=ji_a[jt_i++];if(jt_A&&jt_A.length!=1)
jt_A=null;}
if(jt_i<ji_a.length)
{jt_Z=ji_a[jt_i++];if(jt_Z&&jt_Z.length!=1)
jt_Z=null;}
if(jt_i<ji_a.length)
{jt_N=ji_a[jt_i++];if(jt_N&&jt_N.length!=1)
jt_N=null;}
if(jt_i<ji_a.length)
{jt_C=ji_a[jt_i++];if(jt_C&&jt_C.length!=3)
jt_C=null;}
if(jt_bAZNC)
this.Set_AZNC(jt_A,jt_Z,jt_N,jt_C);return jt_i;};this.MatchesAZ=function(ji_o3xaznc,ji_bSkipSourceNull)
{return this.Matches(ji_o3xaznc,ji_bSkipSourceNull,false,false);};this.MatchesAZN=function(ji_o3xaznc,ji_bSkipSourceNull)
{return this.Matches(ji_o3xaznc,ji_bSkipSourceNull,true,false);};this.Matches=function(ji_o3xaznc,ji_bSkipSourceNull,ji_bN,ji_bC)
{if(ji_o3xaznc)
ji_o3xaznc=ji_o3xaznc.Get_3xAZNC();if(!ji_o3xaznc)
return false;if((this.Get_A()||ji_o3xaznc.Get_A())&&this.Get_A()!=ji_o3xaznc.Get_A()&&((!ji_bSkipSourceNull)||(ji_o3xaznc.Get_A())))
return false;if((this.Get_Z()||ji_o3xaznc.Get_Z())&&this.Get_Z()!=ji_o3xaznc.Get_Z()&&((!ji_bSkipSourceNull)||(ji_o3xaznc.Get_Z())))
return false;if(!(ji_bN===false))
{if((this.Get_N()||ji_o3xaznc.Get_N())&&this.Get_N()!=ji_o3xaznc.Get_N()&&((!ji_bSkipSourceNull)||(ji_o3xaznc.Get_N())))
return false;}
if(!(ji_bC===false))
{if((this.Get_C()||ji_o3xaznc.Get_C())&&this.Get_C()!=ji_o3xaznc.Get_C()&&((!ji_bSkipSourceNull)||(ji_o3xaznc.Get_C())))
return false;}
return true;};this.jm_A=null;this.jm_Z=null;this.jm_N=null;this.jm_C=null;}
function A3xaAZNC_XApp(ji_o3xaznc)
{this.Get_3xAZNC=function(){return this.jm_o3xaznc;};this.TopAreaTo3xDCEntity=function()
{if(!this.jm_o3xaznc)
return null;var jt_A=this.jm_o3xaznc.Get_A();if(!jt_A)
return null;var jr_odce=new A3xaDCEntity();if(jt_A=="L"){jr_odce.Set_FromDefines(jg_oe.jc_oEntity.jc_o3xeTopA_LatinAmerica)}
else if(jt_A=="X"){jr_odce.Set_FromDefines(jg_oe.jc_oEntity.jc_o3xeTopA_Mexico)}
else if(jt_A=="N"){jr_odce.Set_FromDefines(jg_oe.jc_oEntity.jc_o3xeTopA_Centroamerica);}
else if(jt_A=="C"){jr_odce.Set_FromDefines(jg_oe.jc_oEntity.jc_o3xeTopA_Caribbean);}
else if(jt_A=="P"){jr_odce.Set_FromDefines(jg_oe.jc_oEntity.jc_o3xeTopA_Tropical);}
else if(jt_A=="A"){jr_odce.Set_FromDefines(jg_oe.jc_oEntity.jc_o3xeTopA_Amazon);}
else if(jt_A=="B"){jr_odce.Set_FromDefines(jg_oe.jc_oEntity.jc_o3xeTopA_Brazil);}
else if(jt_A=="S"){jr_odce.Set_FromDefines(jg_oe.jc_oEntity.jc_o3xeTopA_SE);}
else if(jt_A=="D"){jr_odce.Set_FromDefines(jg_oe.jc_oEntity.jc_o3xeTopA_Andean);}
else if(jt_A=="Y"){jr_odce.Set_FromDefines(jg_oe.jc_oEntity.jc_o3xeTopA_YB);}
else return null;return jr_odce;};this.TopAreaToName2=function()
{var jt_o3xdce=this.TopAreaTo3xDCEntity();return(jt_o3xdce?jt_o3xdce.Get_LName():"");};this.IsBestFromBabylon=function(){return this.jm_o3xaznc.Get_A()=="Y";};this.IsLA=function(){return this.jm_o3xaznc.Get_A()=="L";};this.IsLatinAmerica=function()
{var jt_A=this.jm_o3xaznc.Get_A();if(!jt_A)
return false;return jt_A=="L"||jt_A=="X"||jt_A=="N"||jt_A=="C"||jt_A=="P"||jt_A=="A"||jt_A=="B"||jt_A=="S"||jt_A=="D";};this.Set_LA=function()
{this.jm_o3xaznc.Set_AZNC('L','A');return this.jm_o3xaznc;};this.jm_o3xaznc=(ji_o3xaznc?ji_o3xaznc.Get_3xAZNC():new A3xaAZNC());}
function New_A3xaAZNC_XApp(ji_o3xaznc){return new A3xaAZNC_XApp(ji_o3xaznc);}
function A3xaPS()
{this.IsValid=function()
{return true;};this.IsEmpty=function()
{return!this.Get_P();};this.Get_3xPS=function(){return this;};this.CopyFrom=function(ji_o3xps)
{if(ji_o3xps)
ji_o3xps=ji_o3xps.Get_3xPS();if(!ji_o3xps)
return false;return this.Set_PS(ji_o3xps.Get_P(),ji_o3xps.Get_S());};this.Clear=function()
{this.jm_P=this.jm_S=null;return true;};this.Clear_S=function()
{this.jm_S=null;return true;};this.Get_P=function(){return this.jm_P;};this.Get_S=function(){return this.jm_S;};this.Get_Code=function()
{if(!this.Get_P())
return"";return A3xaToString(this.Get_P())+A3xaToString(this.Get_S());};this.Set_PS=function(ji_P,ji_S)
{if(!ji_P)ji_S=null;this.jm_P=(ji_P||null);this.jm_S=(ji_S||null);return true;};this.Get_String=function(ji_sep)
{if(!ji_sep)
ji_sep=",";return A3xaToString(this.Get_P())+ji_sep+A3xaToString(this.Get_S());};this.Set_String=function(ji_s,ji_sep)
{if(!ji_sep)
ji_sep=",";if(!ji_s)
return false;return this.Set_Array(ji_s.split(ji_sep),0)>=0?true:false;};this.Set_Array=function(ji_a,ji_offset)
{if(!ji_a||ji_offset<0||ji_offset>=ji_a.length)
return-1;var jt_bPS=false;var jt_P=null;var jt_S=null;var jt_i=ji_offset;if(jt_i<ji_a.length)
{jt_bPS=true;jt_P=ji_a[jt_i++];if(jt_P&&jt_P.length>3)
jt_P=null;}
if(jt_i<ji_a.length)
{jt_S=ji_a[jt_i++];if(jt_S&&jt_S.length>3)
jt_S=null;}
if(jt_bPS)
this.Set_PS(jt_P,jt_S);return jt_i;};this.Matches=function(ji_o3xps,ji_bSkipSourceNull)
{if(ji_o3xps)
ji_o3xps=ji_o3xps.Get_3xPS();if(!ji_o3xps)
return false;if((this.Get_P()||ji_o3xps.Get_P())&&this.Get_P()!=ji_o3xps.Get_P()&&((!ji_bSkipSourceNull)||(ji_o3xps.Get_P())))
return false;if((this.Get_S()||ji_o3xps.Get_S())&&this.Get_S()!=ji_o3xps.Get_S()&&((!ji_bSkipSourceNull)||(ji_o3xps.Get_S())))
return false;return true;};this.jm_P=null;this.jm_S=null;}
function A3xaPS_XApp(ji_o3xps)
{this.Get_3xPS=function(){return this.jm_o3xps;};this.jm_o3xps=(ji_o3xps?ji_o3xps.Get_3xPS():new A3xaPS());}
function New_A3xaPS_XApp(ji_o3xps){return new A3xaPS_XApp(ji_o3xps);}
function A3xaCategoryCode()
{this.IsValid=function()
{return true;};this.IsEmpty=function()
{return!this.Get_Ucat();};this.Get_3xCat=function(){return this;};this.CopyFrom=function(ji_o3xcat)
{if(!ji_o3xcat)
return false;ji_o3xcat=ji_o3xcat.Get_3xCat();return this.Set_Category(ji_o3xcat.Get_Ucat(),ji_o3xcat.Get_Vcat());};this.Clear=function()
{this.jm_Ucat=this.jm_Vcat=null;return true;};this.Get_Ucat=function(){return this.jm_Ucat;};this.Get_Vcat=function(){return this.jm_Vcat;};this.Get_UVcat=function()
{if(!this.jm_Ucat)
return"";return this.jm_Ucat+(this.jm_Vcat?this.jm_Vcat:"");};this.Get_Group=function(){return this.Get_Ucat();};this.Get_Code=function()
{return this.Get_UVcat();};this.Set_Category=function(ji_Ucat,ji_Vcat)
{if(!ji_Ucat){ji_Vcat=null;}
this.jm_Ucat=(ji_Ucat||null);this.jm_Vcat=(ji_Vcat||null);return true;};this.Get_String=function(ji_sep)
{if(!ji_sep)
ji_sep=",";var jr_s="";if(!this.jm_Ucat)
return jr_s+ji_sep;return jr_s+this.jm_Ucat+ji_sep+A3xaToString(this.jm_Vcat);};this.Set_String=function(ji_s,ji_sep)
{if(!ji_sep)
ji_sep=",";if(!ji_s)
return false;return this.Set_Array(ji_s.split(ji_sep),0)>=0?true:false;};this.Set_Array=function(ji_a,ji_offset)
{if(!ji_a||ji_offset<0||ji_offset>=ji_a.length)
return-1;var jt_Ucat=null;var jt_Vcat=null;var jt_i=ji_offset;if(jt_i<ji_a.length)
{jt_Ucat=ji_a[jt_i++];if(jt_Ucat&&jt_Ucat.length!=1)
jt_Ucat=null;}
if(jt_i<ji_a.length)
{jt_Vcat=ji_a[jt_i++];if(jt_Vcat&&jt_Vcat.length!=1)
jt_Vcat=null;}
this.Set_Category(jt_Ucat,jt_Vcat);return jt_i;};this.Matches=function(ji_o3xcat,ji_bSkipSourceNull)
{if(ji_o3xcat)
ji_o3xcat=ji_o3xcat.Get_3xCat();if(!ji_o3xcat)
return false;if(this.IsEmpty())
return ji_o3xcat.IsEmpty()?true:false
var jr_b=false;if(this.Get_Ucat())
{if(this.Get_Ucat()==ji_o3xcat.Get_Ucat())
{if(this.Get_Vcat()==ji_o3xcat.Get_Vcat())
return true;return false;}
else if(ji_o3xcat.Get_Ucat())
return false;else
{jr_b|=(ji_bSkipSourceNull?true:false);}}
return jr_b;};this.jm_Ucat=null;this.jm_Vcat=null;}
function A3xaCategoryCode_XApp(ji_o3xcat)
{this.Get_3xCat=function(){return this.jm_o3xcat;};this.ToTypGeo=function()
{var jr_TypEntity_Geo=null;if(!this.jm_o3xcat)
return null;if(this.jm_o3xcat.IsEmpty())
return null;if(this.IsTypGeo())
{var jt_Vcat=this.jm_o3xcat.Get_Vcat();if(!jt_Vcat)
return null;if(jt_Vcat==jg_oe.jc_oEntity.jc_VCat_Geo_Area)
return jg_oe.jc_oEntity.jc_Typ_GeoArea;jr_TypEntity_Geo=this._ToTypGeoRegion(jt_Vcat);if(jr_TypEntity_Geo)
return jr_TypEntity_Geo;if(jt_Vcat==jg_oe.jc_oEntity.jc_VCat_Geo_City)
return jg_oe.jc_oEntity.jc_Typ_GeoCity;if(jt_Vcat==jg_oe.jc_oEntity.jc_VCat_Geo_Country)
return jg_oe.jc_oEntity.jc_Typ_GeoCountry;jr_TypEntity_Geo=this._ToTypGeoState(jt_Vcat);if(jr_TypEntity_Geo)
return jr_TypEntity_Geo;}
return null;};this.IsTypGeo=function()
{if(!this.jm_o3xcat)
return false;if(this.jm_o3xcat.Get_Ucat())
{if(this.jm_o3xcat.Get_Ucat()==jg_oe.jc_oEntity.jc_UCat_Geo)
return true;}
return false;};this._ToTypGeoRegion=function(ji_Vcat)
{if(ji_Vcat==jg_oe.jc_oEntity.jc_VCat_Geo_Region)
return jg_oe.jc_oEntity.jc_Typ_GeoRegion;if(ji_Vcat==jg_oe.jc_oEntity.jc_VCat_Geo_RegionNR)
return jg_oe.jc_oEntity.jc_Typ_GeoRegion;if(ji_Vcat==jg_oe.jc_oEntity.jc_VCat_Geo_RegionTR)
return jg_oe.jc_oEntity.jc_Typ_GeoRegion;if(ji_Vcat==jg_oe.jc_oEntity.jc_VCat_Geo_RegionMetr)
return jg_oe.jc_oEntity.jc_Typ_GeoRegion;if(ji_Vcat==jg_oe.jc_oEntity.jc_VCat_Geo_RegionIsland)
return jg_oe.jc_oEntity.jc_Typ_GeoRegion;return null;};this._ToTypGeoState=function(ji_Vcat)
{if(ji_Vcat==jg_oe.jc_oEntity.jc_VCat_Geo_State)
return jg_oe.jc_oEntity.jc_Typ_GeoState;if(ji_Vcat==jg_oe.jc_oEntity.jc_VCat_Geo_Provincie)
return jg_oe.jc_oEntity.jc_Typ_GeoState;if(ji_Vcat==jg_oe.jc_oEntity.jc_VCat_Geo_Department)
return jg_oe.jc_oEntity.jc_Typ_GeoState;if(ji_Vcat==jg_oe.jc_oEntity.jc_VCat_Geo_RegionAdmin)
return jg_oe.jc_oEntity.jc_Typ_GeoState;return null;};this.IsMetasystem_Control=function()
{if(!this.jm_o3xcat)
return false;return this.jm_o3xcat.Get_Ucat()==jg_oe.jc_oEntity.jc_UCat_Metasystem&&this.jm_o3xcat.Get_Vcat()==jg_oe.jc_oEntity.jc_VCat_Metasystem_Control;};this.IsGroup_Metasystem=function()
{if(!this.jm_o3xcat)
return false;return this.jm_o3xcat.Get_Ucat()==jg_oe.jc_oEntity.jc_UCat_Metasystem;};this.IsGroup_Category=function()
{if(!this.jm_o3xcat)
return false;return this.jm_o3xcat.Get_Ucat()==jg_oe.jc_oEntity.jc_UCat_Category;};this.IsGroup_Topic=function()
{if(!this.jm_o3xcat)
return false;return this.jm_o3xcat.Get_Ucat()==jg_oe.jc_oEntity.jc_UCat_Topic;};this.IsGroup_Geo=function()
{if(!this.jm_o3xcat)
return false;return this.jm_o3xcat.Get_Ucat()==jg_oe.jc_oEntity.jc_UCat_Geo;};this.jm_o3xcat=(ji_o3xcat?ji_o3xcat.Get_3xCat():new A3xaCategoryCode());}
function New_A3xaCategoryCode_XApp(ji_o3xcat){return new A3xaCategoryCode_XApp(ji_o3xcat);}
function A3xaCategoryList(ji_sCategoryList)
{this.Match=function(ji_o3xcat)
{if(ji_o3xcat)
ji_o3xcat=ji_o3xcat.Get_3xCat();if(!ji_o3xcat||ji_o3xcat.IsEmpty())
return false;if(!(this.jm_ao3xcat&&this.jm_ao3xcat.length))
return false;for(var i=0;i<this.jm_ao3xcat.length;i++)
{if(this.jm_ao3xcat[i].Matches(ji_o3xcat))
return true;}
return false;};this.jm_ao3xcat=new Array();var jt_assCategoryList=((ji_sCategoryList&&ji_sCategoryList.length)?ji_sCategoryList.split("#"):null);for(var iss=0;jt_assCategoryList&&iss<jt_assCategoryList.length;iss++)
{if(!jt_assCategoryList[iss]||jt_assCategoryList[iss].substring(0,3)=="p3x")
continue;var jt_asCategoryList=(jt_assCategoryList[iss]?jt_assCategoryList[iss].split(","):null);if(!jt_asCategoryList)
continue;for(var i=0;i<jt_asCategoryList.length;i++)
{var jt_o3xcat=new A3xaCategoryCode();if(!jt_asCategoryList[i])
continue;jt_o3xcat.Set_String(jt_asCategoryList[i],"-");this.jm_ao3xcat.push(jt_o3xcat);}}}
function A3xaXEID()
{this.IsValid=function()
{return true;};this.IsEmpty=function()
{return!this.Get_TypEntity();};this.Get_3xXEID=function(){return this;};this.CopyFrom=function(ji_o3xxeid)
{if(ji_o3xxeid)
ji_o3xxeid=ji_o3xxeid.Get_3xXEID();if(!ji_o3xxeid)
return false;this.Set_GEID(ji_o3xxeid.Get_TypEntity(),ji_o3xxeid.Get_IdEntity(),ji_o3xxeid.Get_TypGroup(),ji_o3xxeid.Get_IdGroup());this.Set_3xAZNC(ji_o3xxeid);this.Set_3xPS(ji_o3xxeid);this.Set_3xCat(ji_o3xxeid);return true;};this.Clear=function()
{this.Set_GEID(null,null,null,null);this.jm_o3xaznc.Clear();this.jm_o3xps.Clear();this.jm_o3xcat.Clear();return true;};this.Get_PrimaryKey=function()
{var jt_te=this.Get_TypEntity();var jt_ide=this.Get_IdEntity();if(!(jt_te&&jt_ide>0))
return null;return A3xaToString(jt_te)+","+A3xaToString(jt_ide);};this.Get_TypEntity=function(){return this.jm_TypEntity;};this.Set_TypEntity=function(ji_val){this.jm_TypEntity=ji_val;return true;};this.Get_IdEntity=function(){return this.jm_IdEntity;};this.Set_IdEntity=function(ji_val){this.jm_IdEntity=ji_val;return true;};this.Get_TypGroup=function(){return this.jm_TypGroup;};this.Set_TypGroup=function(ji_val){this.jm_TypGroup=ji_val;return true;};this.Get_IdGroup=function(){return this.jm_IdGroup;};this.Set_IdGroup=function(ji_val){this.jm_IdGroup=ji_val;return true;};this.IsGroupMajor=function()
{return(!this.jm_TypGroup||this.jm_TypGroup=='M'||this.jm_TypGroup=='U')&&!(this.jm_IdGroup>0);};this.IsGroupMinor=function(){return this.jm_TypGroup&&this.jm_IdGroup>0;};this.Set_GEID=function(ji_te,ji_ide,ji_tg,ji_idg)
{this.Set_TypEntity(ji_te||null);this.Set_IdEntity(ji_ide||null);this.Set_TypGroup(ji_tg||null);this.Set_IdGroup(ji_idg||null);return true;};this.Clear_GEID=function()
{this.Set_TypEntity(null);this.Set_IdEntity(null);this.Set_TypGroup(null);this.Set_IdGroup(null);return true;};this.Get_3xAZNC=function(){return this.jm_o3xaznc;};this.Set_3xAZNC=function(ji_o3xaznc){return this.jm_o3xaznc.CopyFrom(ji_o3xaznc);};this.Set_3xAZN=function(ji_o3xaznc){return this.jm_o3xaznc.CopyFromAZN(ji_o3xaznc);};this.Set_3xAZ=function(ji_o3xaznc){return this.jm_o3xaznc.CopyFromAZ(ji_o3xaznc);};this.Get_3xPS=function(){return this.jm_o3xps;};this.Set_3xPS=function(ji_o3xps){return this.jm_o3xps.CopyFrom(ji_o3xps);};this.Get_3xCat=function(){return this.jm_o3xcat;};this.Set_3xCat=function(ji_o3xcat){return this.jm_o3xcat.CopyFrom(ji_o3xcat);};this.Get_Code=function()
{return"";};this.Get_String=function(ji_bGEID,ji_bEC,ji_sep)
{if(ji_bGEID===false&&ji_bEC===false)
return"";if(!ji_sep)
ji_sep=",";var jr_s=A3xaToString(this.Get_TypEntity());if(ji_bGEID!==false)
{jr_s+=ji_sep+A3xaToString(this.Get_IdEntity())+
ji_sep+A3xaToString(this.Get_TypGroup())+
ji_sep+A3xaToString(this.Get_IdGroup());}
if(ji_bEC!==false)
{jr_s+=ji_sep+ji_sep+this.Get_3xAZNC().Get_String();jr_s+=ji_sep+this.Get_3xPS().Get_String();jr_s+=ji_sep+this.Get_3xCat().Get_String();}
return jr_s;};this.Set_String=function(ji_s,ji_sep)
{if(!ji_sep)
ji_sep=",";if(!ji_s)
return false;return this.Set_Array(ji_s.split(ji_sep),0)>=0?true:false;};this.Set_Array=function(ji_a,ji_offset)
{if(!ji_a||ji_offset<0||ji_offset>=ji_a.length)
return-1;var jt_i=ji_offset;if(jt_i<ji_a.length)
this.Set_TypEntity(ji_a[jt_i++]);if(jt_i<ji_a.length)
this.Set_IdEntity(ji_a[jt_i++]);if(jt_i<ji_a.length)
this.Set_TypGroup(ji_a[jt_i++]);if(jt_i<ji_a.length)
this.Set_IdGroup(ji_a[jt_i++]);if(jt_i<ji_a.length)
jt_i++;if(jt_i<ji_a.length)
{this.Get_3xAZNC().Set_Array(ji_a,jt_i);jt_i+=4;this.Get_3xPS().Set_Array(ji_a,jt_i);jt_i+=2;this.Get_3xCat().Set_Array(ji_a,jt_i);jt_i+=2;}
return jt_i;};this.Matches=function(ji_oxeid,ji_bSkipSourceNull)
{return this._A3xaXEID_Matches(ji_oxeid,ji_bSkipSourceNull);};this._A3xaXEID_Matches=function(ji_oxeid,ji_bSkipSourceNull)
{if(ji_oxeid)
ji_oxeid=ji_oxeid.Get_3xXEID();if(!ji_oxeid)
return false;if((this.Get_TypEntity()||ji_oxeid.Get_TypEntity())&&this.Get_TypEntity()!=ji_oxeid.Get_TypEntity()&&((!ji_bSkipSourceNull)||(ji_oxeid.Get_TypEntity())))
return false;if((this.Get_IdEntity()||ji_oxeid.Get_IdEntity())&&this.Get_IdEntity()!=ji_oxeid.Get_IdEntity()&&((!ji_bSkipSourceNull)||(ji_oxeid.Get_IdEntity())))
return false;if((this.Get_TypGroup()||ji_oxeid.Get_TypGroup())&&this.Get_TypGroup()!=ji_oxeid.Get_TypGroup()&&((!ji_bSkipSourceNull)||(ji_oxeid.Get_TypGroup())))
return false;if((this.Get_IdGroup()||ji_oxeid.Get_IdGroup())&&this.Get_IdGroup()!=ji_oxeid.Get_IdGroup()&&((!ji_bSkipSourceNull)||(ji_oxeid.Get_IdGroup())))
return false;if(!this.Get_3xCat().Matches(ji_oxeid,ji_bSkipSourceNull))
return false;if(!this.Get_3xAZNC().Matches(ji_oxeid,ji_bSkipSourceNull))
return false;if(!this.Get_3xPS().Matches(ji_oxeid,ji_bSkipSourceNull))
return false;return true;};this.MatchesArray=function(ji_aoxeid,ji_bSkipNull)
{if(!ji_aoxeid)
return false;for(var i=0;i<ji_aoxeid.length;i++)
{if(this.Matches(ji_aoxeid[i],ji_bSkipNull))
return true;}
return false;};this.jm_TypEntity=null;this.jm_IdEntity=null;this.jm_TypGroup=null;this.jm_IdGroup=null;this.jm_o3xaznc=new A3xaAZNC();this.jm_o3xps=new A3xaPS();this.jm_o3xcat=new A3xaCategoryCode();}
function A3xaXEID_XApp(ji_o3xxeid)
{this.Get_3xXEID=function(){return this.jm_o3xxeid;};this.BuildAltKey=function(ji_TypEntityTarget)
{if(!this.jm_o3xxeid)
return null;if(!ji_TypEntityTarget)
{ji_TypEntityTarget=A3xaToString(this.jm_o3xxeid.Get_TypEntity());if(!ji_TypEntityTarget)
return null;}
if(ji_TypEntityTarget==jg_oe.jc_oEntity.jc_Typ_MetaSystemControl)
{return ji_TypEntityTarget+","+this.jm_o3xxeid.Get_3xAZNC().Get_String()+","+this.jm_o3xxeid.Get_3xPS().Get_String();}
else if(ji_TypEntityTarget==jg_oe.jc_oEntity.jc_Typ_Category)
{if(!this.jm_o3xxeid.Get_3xCat().IsEmpty())
return ji_TypEntityTarget+","+this.jm_o3xxeid.Get_3xCat().Get_String();}
else if(ji_TypEntityTarget==jg_oe.jc_oEntity.jc_Typ_GeoArea)
{var jt_o3xaznc=this.jm_o3xxeid.Get_3xAZNC();if(jt_o3xaznc.Get_Z())
return ji_TypEntityTarget+","+jt_o3xaznc.Get_String(false,false);}
else if(ji_TypEntityTarget==jg_oe.jc_oEntity.jc_Typ_GeoRegion)
{var jt_o3xaznc=this.jm_o3xxeid.Get_3xAZNC();if(jt_o3xaznc.Get_N())
return ji_TypEntityTarget+","+jt_o3xaznc.Get_String(true,false);}
else if(ji_TypEntityTarget==jg_oe.jc_oEntity.jc_Typ_GeoCity)
{var jt_o3xaznc=this.jm_o3xxeid.Get_3xAZNC();if(jt_o3xaznc.Get_C())
return ji_TypEntityTarget+","+jt_o3xaznc.Get_String();}
else if(ji_TypEntityTarget==jg_oe.jc_oEntity.jc_Typ_GeoCountry)
{var jt_o3xPS=this.jm_o3xxeid.Get_3xPS();var jt_P=A3xaToString(jt_o3xPS.Get_P());if(jt_P)
return ji_TypEntityTarget+","+jt_P;}
else if(ji_TypEntityTarget==jg_oe.jc_oEntity.jc_Typ_GeoState)
{var jt_o3xPS=this.jm_o3xxeid.Get_3xPS();var jt_P=A3xaToString(jt_o3xPS.Get_P());var jt_S=A3xaToString(jt_o3xPS.Get_S());if(jt_P&&jt_S)
return ji_TypEntityTarget+","+jt_P+","+jt_S;}
else if(ji_TypEntityTarget==jg_oe.jc_oEntity.jc_Typ_Enterprise)
{return null;}
return null;};this.jm_o3xxeid=(ji_o3xxeid?ji_o3xxeid.Get_3xXEID():new A3xaXEID());}
function New_A3xaXEID_XApp(ji_o3xxeid){return new A3xaXEID_XApp(ji_o3xxeid);}
function A3xaEBIS()
{this.IsValid=function()
{return true;};this.IsEmpty=function()
{return false;};this.Get_3xEBIS=function(){return this;};this.CopyFrom=function(ji_o3xebis)
{if(ji_o3xebis)
ji_o3xebis=ji_o3xebis.Get_3xEBIS();if(!ji_o3xebis)
return false;this.Set_Created(ji_o3xebis.Get_Created());this.Set_Modified(ji_o3xebis.Get_Modified());this.Set_Order(ji_o3xebis.Get_Order());this.Set_Idsym(ji_o3xebis.Get_Idsym());this.Set_Name(ji_o3xebis.Get_Name());this.Set_Descr(ji_o3xebis.Get_Descr());this.Set_Website(ji_o3xebis.Get_Website());this.Set_Lat(ji_o3xebis.Get_Lat());this.Set_Lon(ji_o3xebis.Get_Lon());this.Set_Color(ji_o3xebis.Get_Color());return true;};this.Clear=function()
{this.Set_Created("");this.Set_Modified("");this.Set_Order("");this.Set_Idsym("");this.Set_Name("");this.Set_Descr("");this.Set_Website("");this.Set_Lat("");this.Set_Lon("");this.Set_Color("");return true;};this.Get_Created=function(){return this.jm_Created;};this.Get_Modified=function(){return this.jm_Modified;};this.Get_Order=function(){return this.jm_Order;};this.Get_Idsym=function(){return this.jm_Idsym;};this.Get_Name=function(){return this.jm_sName;};this.Get_Descr=function(){return this.jm_sDescr;};this.Get_Website=function(){return this.jm_sWebsite;};this.Get_Lat=function(){return this.jm_Lat;};this.Get_Lon=function(){return this.jm_Lon;};this.Get_Color=function(){return this.jm_Color||this.jm_DefaultColor;};this.Set_Created=function(ji_Created){this.jm_Created=ji_Created;return true;};this.Set_Modified=function(ji_Modified){this.jm_Modified=ji_Modified;return true;};this.Set_Order=function(ji_Order){this.jm_Order=ji_Order;return true;};this.Set_Idsym=function(ji_Idsym){this.jm_Idsym=ji_Idsym;return true;};this.Set_Name=function(ji_sName){this.jm_sName=ji_sName;return true;};this.Set_Descr=function(ji_sDescr){this.jm_sDescr=ji_sDescr;return true;};this.Set_Website=function(ji_sWebsite){this.jm_sWebsite=ji_sWebsite;return true;};this.Set_Lat=function(ji_Lat){this.jm_Lat=ji_Lat;return true;};this.Set_Lon=function(ji_Lon){this.jm_Lon=ji_Lon;return true;};this.Set_Color=function(ji_Color){this.jm_Color=ji_Color;return true;};this.Set_DefaultColor=function(ji_Color){this.jm_DefaultColor=ji_Color;return true;};this.Get_DefaultColor=function(){return this.jm_DefaultColor;};this.jm_Created=null;this.jm_Modified=null;this.jm_Order=null;this.jm_Idsym=null;this.jm_sName=null;this.jm_Color=null;this.jm_sDescr=null;this.jm_sWebsite=null;this.jm_Lat=null;this.jm_Lon=null;this.jm_DefaultColor="FFFFFF";}
function A3xaEBID()
{this.IsValid=function()
{return true;};this.IsEmpty=function()
{return false;};this.Get_3xEBID=function(){return this;};this.CopyFrom=function(ji_o3xebid)
{if(ji_o3xebid)
ji_o3xebid=ji_o3xebid.Get_3xEBID();if(!ji_o3xebid)
return false;this.Set_TypEntity(ji_o3xebid.Set_TypEntity());this.Set_IdEntity(ji_o3xebid.Get_IdEntity());this.Set_Likes(ji_o3xebid.Get_Likes());this.Set_LikesBonus(ji_o3xebid.Get_LikesBonus());this.Set_Clicks(ji_o3xebid.Get_Clicks());this.Set_ClickTime(ji_o3xebid.Get_ClickTime());this.Set_Score(ji_o3xebid.Get_Score());return true;};this.Clear=function()
{this.Set_TypEntity(null);this.Set_IdEntity(null);this.Set_Likes(Number(0));this.Set_LikesBonus(Number(0));this.Set_Clicks(Number(0));this.Set_ClickTime("");this.Set_Score(Number(0));return true;};this.Get_TypEntity=function(){return this.jm_TypEntity;};this.Get_IdEntity=function(){return this.jm_IdEntity;};this.Get_Likes=function(){return Number(this.jm_Likes||0);};this.Get_LikesBonus=function(){return Number(this.jm_LikesBonus||0);};this.Get_LikesTotal=function(){return Number(this.Get_Likes())+Number(this.Get_LikesBonus());};this.Get_Clicks=function(){return Number(this.jm_Clicks||0);};this.Get_ClickTime=function(){return(this.jm_ClickTime||"");};this.Get_Score=function(){return Number(this.jm_Score||0);};this.Set_TypEntity=function(ji_te){this.jm_TypEntity=ji_te;return true;};this.Set_IdEntity=function(ji_ide){this.jm_IdEntity=ji_ide;return true;};this.Set_Likes=function(ji_Likes){this.jm_Likes=Number(ji_Likes||0);return true;};this.Set_LikesBonus=function(ji_LikesBonus){this.jm_LikesBonus=Number(ji_LikesBonus||0);return true;};this.Set_Clicks=function(ji_Clicks){this.jm_Clicks=Number(ji_Clicks||0);return true;};this.Set_ClickTime=function(ji_ClickTime){this.jm_ClickTime=(ji_ClickTime||"");return true;};this.Set_Score=function(ji_Score){this.jm_Score=Number(ji_Score||0);return true;};this.jm_TypEntity=null;this.jm_IdEntity=null;this.jm_Likes=null;this.jm_LikesBonus=null;this.jm_Clicks=null;this.jm_ClickTime="";this.jm_Score=null;}
function A3xaDCEntity()
{this.jm_o3xxeid=new A3xaXEID();this.jm_o3xebis=new A3xaEBIS();this.jm_o3xebid=new A3xaEBID();this.jm_o3xsName=null;this.jm_o3xsDescr=null;this.IsValid=function()
{if(!this.Get_3xXEID().Get_TypEntity())
return false;if(!this.Get_3xXEID().Get_IdEntity())
return false;if(this.Get_3xXEID().Get_3xCat().IsEmpty())
return false;if(!(this.Get_3xEBIS().Get_Name()||this.Get_LName()))
return false;return true;};this.Get_3xXEID=function(){return this.jm_o3xxeid;};this.Get_3xEBIS=function(){return this.jm_o3xebis;};this.Get_3xEBID=function(){return this.jm_o3xebid;};this.Replace_3xEBIS=function(ji_o3xebis)
{if(ji_o3xebis)
ji_o3xebis=ji_o3xebis.Get_3xEBIS();if(!ji_o3xebis)
return false;this.jm_o3xebis=ji_o3xebis;return true;};this.Replace_3xEBID=function(ji_o3xebid)
{if(ji_o3xebid)
ji_o3xebid=ji_o3xebid.Get_3xEBID();if(!ji_o3xebid)
return false;this.jm_o3xebid=ji_o3xebid;return true;};this.Get_EI=function(){return this;};this.A3xaDCEntity_CopyFrom=function(ji_odce,ji_bXEID,ji_bEBIS,ji_bEBID,ji_bEI)
{if(!ji_odce)
return false;if(!(ji_bXEID===false))
{if(!this.Get_3xXEID().CopyFrom(ji_odce.Get_3xXEID()))
return false;}
if(!(ji_bEBIS===false))
this.Get_3xEBIS().CopyFrom(ji_odce.Get_3xEBIS());if(!(ji_bEBID===false))
this.Get_3xEBID().CopyFrom(ji_odce.Get_3xEBID());return true;};this.CopyFrom=function(ji_odc,ji_bXEID,ji_bEBIS,ji_bEBID,ji_bEI)
{return this.A3xaDCEntity_CopyFrom(ji_odc,ji_bXEID,ji_bEBIS,ji_bEBID,ji_bEI);};this.Set_FromDefines=function(ji_o3xdce_def)
{this.Set_3xsName(new A3xaString(ji_o3xdce_def.L4Name),new A3xaString(ji_o3xdce_def.L4Descr));var jt_o3xebis=this.Get_3xEBIS();if(jt_o3xebis)
{jt_o3xebis.Set_Order(ji_o3xdce_def.Order);}
return true;};this.Set_3xsName=function(ji_o3xsName,ji_o3xsDescr)
{this.jm_o3xsName=(ji_o3xsName||null);this.jm_o3xsDescr=(ji_o3xsDescr||null);return true;};this.Copy3xsNameFrom=function(ji_odc)
{if(!ji_odc)
return false;return this.Set_3xsName(ji_odc.Get_3xsName(),ji_odc.Get_3xsDescr());};this.Get_3xsName=function()
{if(this.jm_o3xsName&&this.jm_o3xsName.Get_LString())
return this.jm_o3xsName;var jt_s="";if(this.Get_3xEBIS())
jt_s=this.Get_3xEBIS().Get_Name();return new A3xaString([jt_s,jt_s,jt_s,jt_s]);};this.Get_LName=function(){return this.Get_3xsName().Get_LString();};this.Get_3xsDescr=function()
{if(this.jm_o3xsDescr&&this.jm_o3xsDescr.Get_LString())
return this.jm_o3xsDescr;var jt_s="";if(this.Get_3xEBIS())
jt_s=this.Get_3xEBIS().Get_Descr();return new A3xaString([jt_s,jt_s,jt_s,jt_s]);};this.Get_LDescr=function(){return this.Get_3xsDescr().Get_LString();};this.LinkCommonData=function(ji_odb){return false;};this.Get_CommonLinkedRecord=function(ji_TypEntity){return null;};}
function A3xaDbZero()
{A3xaDatabase.call(this,new A3xaDbSchema(jg_oe.jc_oA3xaDbZero.jc_sDbName,jg_oe.jc_oA3xaDbZero.jc_DbVersion,jg_oe.jc_oA3xaDbZero.jc_sDbDefaultPrimaryKeyName,jg_oe.jc_oA3xaDbZero.jc_aSchemaTables));this.GLID2Typ=function(ji_GLID)
{if(ji_GLID==jg_oe.jc_oA3xaDbZero.jc_GLID_MetaSystemControl)
return jg_oe.jc_oEntity.jc_Typ_MetaSystemControl;if(ji_GLID==jg_oe.jc_oA3xaDbZero.jc_GLID_Category)
return jg_oe.jc_oEntity.jc_Typ_Category;if(ji_GLID==jg_oe.jc_oA3xaDbZero.jc_GLID_GeoArea)
return jg_oe.jc_oEntity.jc_Typ_GeoArea;if(ji_GLID==jg_oe.jc_oA3xaDbZero.jc_GLID_GeoRegion)
return jg_oe.jc_oEntity.jc_Typ_GeoRegion;if(ji_GLID==jg_oe.jc_oA3xaDbZero.jc_GLID_GeoCity)
return jg_oe.jc_oEntity.jc_Typ_GeoCity;if(ji_GLID==jg_oe.jc_oA3xaDbZero.jc_GLID_GeoCountry)
return jg_oe.jc_oEntity.jc_Typ_GeoCountry;if(ji_GLID==jg_oe.jc_oA3xaDbZero.jc_GLID_GeoState)
return jg_oe.jc_oEntity.jc_Typ_GeoState;if(ji_GLID==jg_oe.jc_oA3xaDbZero.jc_GLID_Enterprise)
return jg_oe.jc_oEntity.jc_Typ_Enterprise;return null;};this.Typ2GLID=function(ji_TypEntity)
{if(ji_TypEntity==jg_oe.jc_oEntity.jc_Typ_MetaSystemControl)
return jg_oe.jc_oA3xaDbZero.jc_GLID_MetaSystemControl;if(ji_TypEntity==jg_oe.jc_oEntity.jc_Typ_Category)
return jg_oe.jc_oA3xaDbZero.jc_GLID_Category;if(ji_TypEntity==jg_oe.jc_oEntity.jc_Typ_GeoArea)
return jg_oe.jc_oA3xaDbZero.jc_GLID_GeoArea;if(ji_TypEntity==jg_oe.jc_oEntity.jc_Typ_GeoRegion)
return jg_oe.jc_oA3xaDbZero.jc_GLID_GeoRegion;if(ji_TypEntity==jg_oe.jc_oEntity.jc_Typ_GeoCity)
return jg_oe.jc_oA3xaDbZero.jc_GLID_GeoCity;if(ji_TypEntity==jg_oe.jc_oEntity.jc_Typ_GeoCountry)
return jg_oe.jc_oA3xaDbZero.jc_GLID_GeoCountry;if(ji_TypEntity==jg_oe.jc_oEntity.jc_Typ_GeoState)
return jg_oe.jc_oA3xaDbZero.jc_GLID_GeoState;if(ji_TypEntity==jg_oe.jc_oEntity.jc_Typ_Enterprise)
return jg_oe.jc_oA3xaDbZero.jc_GLID_Enterprise;return null;};this.NewDataTable=function(ji_glid)
{return new GLDTEntity(this,ji_glid);};this.Get_MainDataTable=function(ji_A,ji_Z,ji_N)
{var jt_glid=jg_oe.jc_oA3xaDbZero.jc_GLID_Enterprise;if(!ji_A)
{var jt_oxur=jg_oApp.Get_AppXUR().Get_3xXUR();var jt_te=jt_oxur.Get_3xXEID().Get_TypEntity();if(jt_te==jg_oe.jc_oEntity.jc_Typ_MetaSystemControl)
jt_glid=jg_oe.jc_oA3xaDbZero.jc_GLID_MetaSystemControl;else if(jt_te==jg_oe.jc_oEntity.jc_Typ_Category)
jt_glid=jg_oe.jc_oA3xaDbZero.jc_GLID_Category;else if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoArea)
jt_glid=jg_oe.jc_oA3xaDbZero.jc_GLID_GeoArea;else if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoRegion)
jt_glid=jg_oe.jc_oA3xaDbZero.jc_GLID_GeoRegion;else if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoCity)
jt_glid=jg_oe.jc_oA3xaDbZero.jc_GLID_GeoCity;else if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoCountry)
jt_glid=jg_oe.jc_oA3xaDbZero.jc_GLID_GeoCountry;else if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoState)
jt_glid=jg_oe.jc_oA3xaDbZero.jc_GLID_GeoState;else if(jt_te==jg_oe.jc_oEntity.jc_Typ_Enterprise)
jt_glid=jg_oe.jc_oA3xaDbZero.jc_GLID_Enterprise;var jr_odt=this.Get_DataTable(jt_glid);return jr_odt;}
if(ji_A&&ji_Z&&ji_N)
jt_glid=jg_oe.jc_oA3xaDbZero.MakeGlid(jg_oe.jc_oA3xaDbZero.jc_GLID_EnterprisePrefix,ji_A+ji_Z+ji_N);if(!jt_glid)
return null;var jr_odt=this.Get_DataTable(jt_glid,true);if(!(jr_odt&&jr_odt.jm_oDTStatus.IsSuccess()))
return null;return jr_odt;};this.LoadSchemaDefault=function()
{this.jm_oDbSchema.jm_aTablesExtension=null;return true;}
this.LoadSchemaStore=function()
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Begin","","A3xaDbZero.LoadSchemaStore");return this.LoadSchemaExtended(this.Get_DataTableCacheStore(jg_oe.jc_oA3xaDbZero.jc_GLID_GeoRegion));}
this.LoadSchemaLoad=function()
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Begin","","A3xaDbZero.LoadSchemaLoad");return this.LoadSchemaExtended(this.Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_GeoRegion,true));}
this.LoadSchemaExtended=function(ji_odtRegion)
{if(!ji_odtRegion)
return false;jg_oe.CanLogInfo()&&jg_oe.LogInfo("p1","","A3xaDbZero.LoadSchema");if(!ji_odtRegion.Get_Recordset())
return false;jg_oe.CanLogInfo()&&jg_oe.LogInfo("p2","","A3xaDbZero.LoadSchema");var jt_CountRecords=ji_odtRegion.Get_Recordset().Get_Count();var jt_pTableSource=this.jm_oDbSchema.Get_Table_ByName(jg_oe.jc_oA3xaDbZero.jc_GLID_Enterprise);if(!jt_pTableSource)
return false;var jt_pNTableSource=this.jm_oDbSchema.Get_Table_ByName(jg_oe.jc_oA3xaDbZero.jc_GLID_NEnterprise);if(!jt_pNTableSource)
return false;var jt_aTablesAppend=new Array();var jt_aNTablesAppend=new Array();for(var i=0;i<jt_CountRecords;i++)
{var jt_oglr=ji_odtRegion.Get_Recordset().Get_Item_ByIndex(i);if(!jt_oglr)
continue;var jt_N=jt_oglr.Get_3xXEID().Get_3xAZNC().Get_N();if(!jt_N)
continue;var jt_A=jt_oglr.Get_3xXEID().Get_3xAZNC().Get_A();var jt_Z=jt_oglr.Get_3xXEID().Get_3xAZNC().Get_Z();var jt_pTableSchema={};jQuery.extend(jt_pTableSchema,jt_pTableSource);jt_pTableSchema.jp_sName=jg_oe.jc_oA3xaDbZero.MakeGlid(jg_oe.jc_oA3xaDbZero.jc_GLID_EnterprisePrefix,jt_A+jt_Z+jt_N);jt_pTableSchema.jp_bTyp_Common=false;jt_pTableSchema.jp_bTyp_Main=false;jt_pTableSchema.jp_bTyp_Dependent=false;jt_pTableSchema.jp_bTyp_ExtHeader=true;jt_pTableSchema.jp_bMandatory=false;jt_aTablesAppend.push(jt_pTableSchema);var jt_pNTableSchema={};jQuery.extend(jt_pNTableSchema,jt_pNTableSource);jt_pNTableSchema.jp_sName=jg_oe.jc_oA3xaDbZero.MakeGlid(jg_oe.jc_oA3xaDbZero.jc_GLID_NEnterprisePrefix,jt_A+jt_Z+jt_N);jt_pNTableSchema.jp_sParent=jg_oe.jc_oA3xaDbZero.MakeGlid(jg_oe.jc_oA3xaDbZero.jc_GLID_EnterprisePrefix,jt_A+jt_Z+jt_N);jt_pNTableSchema.jp_bTyp_Common=false;jt_pNTableSchema.jp_bTyp_Main=false;jt_pNTableSchema.jp_bTyp_Dependent=false;jt_pNTableSchema.jp_bTyp_ExtHeader=false;jt_pNTableSchema.jp_bMandatory=false;jt_aNTablesAppend.push(jt_pNTableSchema);}
jg_oe.CanLogInfo()&&jg_oe.LogInfo("p3","","A3xaDbZero.LoadSchema");this.jm_oDbSchema.jm_aTablesExtension=new Array();for(var ii=0;ii<jt_aTablesAppend.length;ii++)
this.jm_oDbSchema.jm_aTablesExtension.push(jt_aTablesAppend[ii]);for(var ij=0;ij<jt_aTablesAppend.length;ij++)
this.jm_oDbSchema.jm_aTablesExtension.push(jt_aNTablesAppend[ij]);return true;};this.OnDataLoadedSetup=function()
{var jt_this=this;var jt_o3xxeCP=this.Get_3xXEMSC_ByXUR();if(jt_o3xxeCP)
{jt_o3xxeCP.LinkCommonData(this);jt_o3xxeCP.Get_3xEBIS().Set_DefaultColor("FFFFFF");}
var jt_ogldtMain=this.Get_MainDataTable();if(!jt_ogldtMain)
return false;jt_ogldtMain.OnDataLoadedSetup();var jt_oxur=jg_oApp.Get_AppXUR().Get_3xXUR();if(!jt_oxur)
return false;var jt_o3xxur_xeid=jt_oxur.Get_3xXEID();var jt_o3xxur_aznc=jt_o3xxur_xeid.Get_3xAZNC();var jt_o3xxur_ps=jt_o3xxur_xeid.Get_3xPS();var jt_o3xxur_cat=jt_o3xxur_xeid.Get_3xCat();var jt_o3xxur_aznc_xapp=New_A3xaAZNC_XApp(jt_o3xxur_xeid);var jt_te=jt_o3xxur_xeid.Get_TypEntity();var jt_MaxRecords=((jt_oxur.IsLimited()||jt_o3xxur_cat.IsEmpty())?20:0);if(jt_oxur.IsSortByTime())
jt_ogldtMain.SortByTime(true);else if(jt_oxur.IsSortByScore()||jt_oxur.IsSortByName())
jt_ogldtMain.SortByScore(true);else if(jt_oxur.IsSortByClick())
jt_ogldtMain.SortByClick(true);else if(jt_oxur.IsSortByLatestClick())
jt_ogldtMain.SortByLatestClick(true);if(jt_te==jg_oe.jc_oEntity.jc_Typ_MetaSystemControl);else if(jt_te==jg_oe.jc_oEntity.jc_Typ_Category)
{jt_ogldtMain.New_Recordsel(null,function(ji_k,ji_oxe)
{var jt_3xxeid=ji_oxe.Get_3xXEID();var jt_3xcat=jt_3xxeid.Get_3xCat();if(jt_o3xxur_xeid.Get_IdEntity()&&jt_3xxeid.Get_IdEntity()!=jt_o3xxur_xeid.Get_IdEntity())
return 0;return 1;});}
else if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoArea)
{jt_ogldtMain.New_Recordsel(null,function(ji_k,ji_oxe)
{var jt_3xxeid=ji_oxe.Get_3xXEID();var jt_3xaznc=jt_3xxeid.Get_3xAZNC();if(jt_o3xxur_xeid.Get_IdEntity()&&jt_3xxeid.Get_IdEntity()!=jt_o3xxur_xeid.Get_IdEntity())
return 0;return(New_A3xaAZNC_XApp(jt_3xxeid).IsBestFromBabylon()?0:1);});}
else if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoRegion)
{jt_ogldtMain.New_Recordsel(null,function(ji_k,ji_oxe)
{var jt_3xxeid=ji_oxe.Get_3xXEID();var jt_3xaznc=jt_3xxeid.Get_3xAZNC();if(jt_o3xxur_xeid.Get_IdEntity()&&jt_3xxeid.Get_IdEntity()!=jt_o3xxur_xeid.Get_IdEntity())
return 0;if(!(jt_3xaznc.Get_A()==jt_o3xxur_aznc.Get_A()&&jt_3xaznc.Get_Z()==jt_o3xxur_aznc.Get_Z()))
return 0;return 1;});}
else if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoCity)
{jt_ogldtMain.New_Recordsel(null,function(ji_k,ji_oxe)
{var jt_3xxeid=ji_oxe.Get_3xXEID();var jt_3xaznc=jt_3xxeid.Get_3xAZNC();if(jt_o3xxur_xeid.Get_IdEntity()&&jt_3xxeid.Get_IdEntity()!=jt_o3xxur_xeid.Get_IdEntity())
return 0;if(!(jt_3xaznc.Get_A()==jt_o3xxur_aznc.Get_A()&&jt_3xaznc.Get_Z()==jt_o3xxur_aznc.Get_Z()&&jt_3xaznc.Get_N()==jt_o3xxur_aznc.Get_N()))
return 0;return 1;});}
else if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoCountry)
{jt_ogldtMain.New_Recordsel(null,function(ji_k,ji_oxe)
{var jt_3xxeid=ji_oxe.Get_3xXEID();var jt_3xps=jt_3xxeid.Get_3xPS();if(jt_o3xxur_xeid.Get_IdEntity()&&jt_3xxeid.Get_IdEntity()!=jt_o3xxur_xeid.Get_IdEntity())
return 0;return 1;});}
else if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoState)
{jt_ogldtMain.New_Recordsel(null,function(ji_k,ji_oxe)
{var jt_3xxeid=ji_oxe.Get_3xXEID();var jt_3xps=jt_3xxeid.Get_3xPS();if(jt_o3xxur_xeid.Get_IdEntity()&&jt_3xxeid.Get_IdEntity()!=jt_o3xxur_xeid.Get_IdEntity())
return 0;if(!(jt_3xps.Get_P()==jt_o3xxur_ps.Get_P()))
return 0;return 1;});}
else if(jt_te==jg_oe.jc_oEntity.jc_Typ_Enterprise)
{if(!jt_o3xxur_xeid.Get_IdEntity())
{jt_ogldtMain.New_Recordsel(null,function(ji_k,ji_oxe)
{var jt_3xxeid=ji_oxe.Get_3xXEID();var jt_3xaznc=jt_3xxeid.Get_3xAZNC();var jt_3xcat=jt_3xxeid.Get_3xCat();if(jt_o3xxur_aznc.Get_A()&&!(jt_3xaznc.Get_A()==jt_o3xxur_aznc.Get_A()))
return 0;if(jt_o3xxur_aznc.Get_Z()&&!(jt_3xaznc.Get_Z()==jt_o3xxur_aznc.Get_Z()))
return 0;if(jt_o3xxur_aznc.Get_N()&&!(jt_3xaznc.Get_N()==jt_o3xxur_aznc.Get_N()))
return 0;if(jt_o3xxur_aznc.Get_C()&&!(jt_3xaznc.Get_C()==jt_o3xxur_aznc.Get_C()))
return 0;if(jt_o3xxur_cat.Get_Ucat()&&!(jt_3xcat.Get_Ucat()==jt_o3xxur_cat.Get_Ucat()))
return 0;if(jt_o3xxur_cat.Get_Vcat()&&!(jt_3xcat.Get_Vcat()==jt_o3xxur_cat.Get_Vcat()))
return 0;return 1;},jt_MaxRecords);}}
if(jt_oxur.IsSortByName())
jt_ogldtMain.SortByName(false);return true;};this.Get_3xXEMSC_ByXUR=function()
{var jt_o3xxeidxur=new A3xaXEID();jt_o3xxeidxur.CopyFrom(jg_oApp.Get_AppXUR().Get_3xXUR().Get_3xXEID());var jt_o3xxeidxur_xapp=new A3xaXEID_XApp(jt_o3xxeidxur);var jt_ogldtMSC=this.Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_MetaSystemControl);if(!jt_ogldtMSC)
return null;var jt_key=null;if(jt_o3xxeidxur.Get_TypEntity()==jg_oe.jc_oEntity.jc_Typ_GeoCountry||jt_o3xxeidxur.Get_TypEntity()==jg_oe.jc_oEntity.jc_Typ_GeoState)
{if(!(New_A3xaAZNC_XApp(jt_o3xxeidxur.Get_3xAZNC()).IsLA()&&jt_o3xxeidxur.Get_3xAZNC().Get_Z()))
New_A3xaAZNC_XApp(jt_o3xxeidxur.Get_3xAZNC()).Set_LA();jt_key=jt_ogldtMSC.AltKey_2_PrimaryKey(jt_o3xxeidxur_xapp.BuildAltKey(jg_oe.jc_oEntity.jc_Typ_MetaSystemControl));if(!jt_key)
{jt_o3xxeidxur.Get_3xPS().Clear_S();jt_key=jt_ogldtMSC.AltKey_2_PrimaryKey(jt_o3xxeidxur_xapp.BuildAltKey(jg_oe.jc_oEntity.jc_Typ_MetaSystemControl));}}
if(!jt_key)
{jt_o3xxeidxur=new A3xaXEID();jt_o3xxeidxur.CopyFrom(jg_oApp.Get_AppXUR().Get_3xXUR().Get_3xXEID());jt_o3xxeidxur_xapp=new A3xaXEID_XApp(jt_o3xxeidxur);jt_o3xxeidxur.Get_3xPS().Clear();if(jt_o3xxeidxur.Get_3xAZNC().Get_C())
jt_key=jt_ogldtMSC.AltKey_2_PrimaryKey(jt_o3xxeidxur_xapp.BuildAltKey(jg_oe.jc_oEntity.jc_Typ_MetaSystemControl));if(!jt_key)
{if(jt_o3xxeidxur.Get_3xAZNC().Get_N())
{jt_o3xxeidxur.Get_3xAZNC().Clear_C();jt_key=jt_ogldtMSC.AltKey_2_PrimaryKey(jt_o3xxeidxur_xapp.BuildAltKey(jg_oe.jc_oEntity.jc_Typ_MetaSystemControl));}}
if(!jt_key)
{if(jt_o3xxeidxur.Get_3xAZNC().Get_Z())
{jt_o3xxeidxur.Get_3xAZNC().Clear_NC();jt_key=jt_ogldtMSC.AltKey_2_PrimaryKey(jt_o3xxeidxur_xapp.BuildAltKey(jg_oe.jc_oEntity.jc_Typ_MetaSystemControl));}}
if(!jt_key)
{New_A3xaAZNC_XApp(jt_o3xxeidxur.Get_3xAZNC()).Set_LA();jt_key=jt_ogldtMSC.AltKey_2_PrimaryKey(jt_o3xxeidxur_xapp.BuildAltKey(jg_oe.jc_oEntity.jc_Typ_MetaSystemControl));}
if(!jt_key)
{jt_o3xxeidxur.Get_3xAZNC().Clear();jt_key=jt_ogldtMSC.AltKey_2_PrimaryKey(jt_o3xxeidxur_xapp.BuildAltKey(jg_oe.jc_oEntity.jc_Typ_MetaSystemControl));}}
if(!jt_key)
return null;var jr_oglrMSC=jt_ogldtMSC.Get_GLRecord(jt_key);return jr_oglrMSC;};}
function GLDTEntity(ji_oDatabase,ji_glid)
{GLDataTable.call(this,ji_oDatabase,ji_glid);this.Get_CountByFilter=function(ji_TypEntity)
{var jt_count=this.Get_Recordset().Get_Count();if(!ji_TypEntity)
return jt_count;var jr_count=0;for(var i=0;i<jt_count;i++)
{var jt_id=this.Get_Recordset().Get_Key(i);if(!jt_id)
continue;var jt_ate=jt_id.split(",");if(jt_ate&&jt_ate.length>0&&jt_ate[0]==ji_TypEntity)
jr_count++;}
return jr_count;};this.NewRecord=function()
{var jt_glid=this.Get_Glid();var jt_oDbSchemaTable=this.Get_Database().jm_oDbSchema.Get_Table_ByName(jt_glid);jg_oe.CanLogInfo()&&jg_oe.LogInfo("info:"+
jt_glid+","+(jt_oDbSchemaTable?jt_oDbSchemaTable.jp_sParent:"null"),"","GLDTEntity_NewRecord");if(!jt_oDbSchemaTable)
return null;if(!jt_oDbSchemaTable.jp_sParent)
{return new GLREBIS(new A3xaXtdEntity());}
else if(jt_oDbSchemaTable.jp_SubTable==jg_oe.jc_oA3xaDbZero.jc_SubTable_EBID)
{return new GLREBID();}
return null;};this.BuildAltKey=function(ji_oglr,ji_bSelf)
{if(ji_oglr==null)
return null;if(ji_bSelf)
return New_A3xaXEID_XApp(ji_oglr).BuildAltKey();var jt_glid=this.Get_Glid();if(!jt_glid)
return null;var jt_TypTarget=this.Get_Database().GLID2Typ(jt_glid);if(!jt_TypTarget)
return null;var jt_o3xxeidr_xapp=new A3xaXEID_XApp(ji_oglr);return jt_o3xxeidr_xapp.BuildAltKey(jt_TypTarget);};this.OnDataLoadedSetup=function()
{var jt_nRows=this.Get_Recordset().Get_Count();if(!(jt_nRows>0))
return false;for(var jt_Row=1;jt_Row<=jt_nRows;jt_Row++)
{var jt_oxe=this.Get_Recordset().Get_Item_ByIndex(jt_Row-1);jt_oxe.LinkCommonData(this.Get_Database());jt_oxe.Get_3xEBIS().Set_DefaultColor("FFFFFF");}
return true;};this.SortByTime=function(ji_bDesc)
{if(!(this.Get_Recordset()&&this.Get_Recordset().Get_Count()>0))
return true;var jt_1=(ji_bDesc?1:-1);this.Get_Recordset().Sort(function(ji_oglr_a,ji_oglr_b)
{if(ji_oglr_a.Get_3xXEID().Get_TypEntity()==jg_oe.jc_oEntity.jc_Typ_MetaSystemControl)
return-jt_1;if(ji_oglr_b.Get_3xXEID().Get_TypEntity()==jg_oe.jc_oEntity.jc_Typ_MetaSystemControl)
return jt_1;var jt_o3xDate_a=new A3xaDateTime();var jt_o3xDate_b=new A3xaDateTime();jt_o3xDate_a.Set_DateTime(ji_oglr_a.Get_3xEBIS().Get_Created());jt_o3xDate_b.Set_DateTime(ji_oglr_b.Get_3xEBIS().Get_Created());if(!(jt_o3xDate_a.IsValid()&&jt_o3xDate_b.IsValid()))
return 0;var jt_result=jt_o3xDate_a.Compare(jt_o3xDate_b);if(jt_result<0)
return jt_1;if(jt_result>0)
return-jt_1;return 0;});return true;};this.SortByLatestClick=function(ji_bDesc)
{if(!(this.Get_Recordset()&&this.Get_Recordset().Get_Count()>0))
return true;var jt_1=(ji_bDesc?1:-1);this.Get_Recordset().Sort(function(ji_oglr_a,ji_oglr_b)
{if(ji_oglr_a.Get_3xXEID().Get_TypEntity()==jg_oe.jc_oEntity.jc_Typ_MetaSystemControl)
return-jt_1;if(ji_oglr_b.Get_3xXEID().Get_TypEntity()==jg_oe.jc_oEntity.jc_Typ_MetaSystemControl)
return jt_1;var jt_o3xDate_a=new A3xaDateTime();var jt_o3xDate_b=new A3xaDateTime();jt_o3xDate_a.Set_DateTime(ji_oglr_a.Get_3xEBID().Get_ClickTime());jt_o3xDate_b.Set_DateTime(ji_oglr_b.Get_3xEBID().Get_ClickTime());var jt_baValid=(ji_oglr_a.Get_3xEBID().Get_ClickTime()&&jt_o3xDate_a.IsValid());var jt_bbValid=(ji_oglr_b.Get_3xEBID().Get_ClickTime()&&jt_o3xDate_b.IsValid());if(jt_baValid&&jt_bbValid)
{var jt_result=jt_o3xDate_a.Compare(jt_o3xDate_b);if(jt_result<0)
return jt_1;if(jt_result>0)
return-jt_1;}
else if(!jt_baValid&&jt_bbValid)
return jt_1;else if(jt_baValid&&!jt_bbValid)
return-jt_1;jt_delta=ji_oglr_a.Get_3xEBID().Get_Score()-ji_oglr_b.Get_3xEBID().Get_Score();if(jt_delta<0)
return jt_1;if(jt_delta>0)
return-jt_1;return 0;});return true;};this.SortByName=function(ji_bDesc)
{if(!(this.Get_Recordsel()&&this.Get_Recordsel().Get_Count()>0))
return true;var jt_1=(ji_bDesc?1:-1);this.Get_Recordsel().Sort(function(ji_oglr_a,ji_oglr_b)
{if(ji_oglr_a.Get_3xXEID().Get_TypEntity()==jg_oe.jc_oEntity.jc_Typ_MetaSystemControl)
return-jt_1;if(ji_oglr_b.Get_3xXEID().Get_TypEntity()==jg_oe.jc_oEntity.jc_Typ_MetaSystemControl)
return jt_1;var jt_oebis_a=ji_oglr_a.Get_3xEBIS();var jt_oebis_b=ji_oglr_b.Get_3xEBIS();if(!(jt_oebis_a&&jt_oebis_b))
return 0;if(ji_oglr_a.Get_LName()==ji_oglr_b.Get_LName())
return 0;if(ji_oglr_a.Get_LName()<ji_oglr_b.Get_LName())
return jt_1;return-jt_1;});return true;};this.SortByScore=function(ji_bDesc)
{if(!(this.Get_Recordset()&&this.Get_Recordset().Get_Count()>0))
return true;var jt_1=(ji_bDesc?1:-1);this.Get_Recordset().Sort(function(ji_oglr_a,ji_oglr_b)
{if(ji_oglr_a.Get_3xXEID().Get_TypEntity()==jg_oe.jc_oEntity.jc_Typ_MetaSystemControl)
return-jt_1;if(ji_oglr_b.Get_3xXEID().Get_TypEntity()==jg_oe.jc_oEntity.jc_Typ_MetaSystemControl)
return jt_1;var jt_oebid_a=ji_oglr_a.Get_3xEBID();var jt_oebid_b=ji_oglr_b.Get_3xEBID();if(!(jt_oebid_a&&jt_oebid_b))
return 0;var jt_delta=jt_oebid_a.Get_Score()-jt_oebid_b.Get_Score();if(jt_delta<0)
return jt_1;if(jt_delta>0)
return-jt_1;return 0;});return true;};this.SortByClick=function(ji_bDesc)
{if(!(this.Get_Recordsel()&&this.Get_Recordsel().Get_Count()>0))
return true;var jt_1=(ji_bDesc?1:-1);this.Get_Recordsel().Sort(function(ji_oglr_a,ji_oglr_b)
{if(ji_oglr_a.Get_3xXEID().Get_TypEntity()==jg_oe.jc_oEntity.jc_Typ_MetaSystemControl)
return-jt_1;if(ji_oglr_b.Get_3xXEID().Get_TypEntity()==jg_oe.jc_oEntity.jc_Typ_MetaSystemControl)
return jt_1;var jt_oebid_a=ji_oglr_a.Get_3xEBID();var jt_oebid_b=ji_oglr_b.Get_3xEBID();if(!(jt_oebid_a&&jt_oebid_b))
return 0;var jt_delta=jt_oebid_a.Get_Clicks()-jt_oebid_b.Get_Clicks();if(jt_delta<0)
return jt_1;if(jt_delta>0)
return-jt_1;jt_delta=jt_oebid_a.Get_Score()-jt_oebid_b.Get_Score();if(jt_delta<0)
return jt_1;if(jt_delta>0)
return-jt_1;return 0;});return true;};}
function A3xaREntityInfo(ji_aMaster,ji_arsSlaves)
{this.Get_Master=A3xaREntityInfo_Get_Master;this.Get_Slaves=A3xaREntityInfo_Get_Slaves;this.Get_SlavesCount=A3xaREntityInfo_Get_SlavesCount;this.Get_Slave=A3xaREntityInfo_Get_Slave;this.CopyFrom=A3xaREntityInfo_CopyFrom;this.Attach_Attributes=A3xaREntityInfo_Attach_Attributes;this.Get_Attributes=A3xaREntityInfo_Get_Attributes;this.jm_aMaster=ji_aMaster;this.jm_arsSlaves=ji_arsSlaves;this.jm_oAttributes=null;}
function A3xaREntityInfo_Get_Master(){return this.jm_aMaster;}
function A3xaREntityInfo_Get_Slaves(){return this.jm_arsSlaves;}
function A3xaREntityInfo_Get_SlavesCount()
{if(!this.jm_arsSlaves)
return 0;return this.jm_arsSlaves.length;}
function A3xaREntityInfo_Get_Slave(ji_index)
{if(!(this.jm_arsSlaves&&this.jm_arsSlaves.length))
return null;if(!(ji_index>=0&&ji_index<this.jm_arsSlaves.length))
return null;return this.jm_arsSlaves[ji_index];}
function A3xaREntityInfo_Attach_Attributes(ji_oAttributes)
{this.jm_oAttributes=ji_oAttributes;return true;}
function A3xaREntityInfo_Get_Attributes(){return this.jm_oAttributes;}
function A3xaREntityInfo_Check(ji_aoeifa,ji_CodInfo)
{if(!(ji_aoeifa&&ji_aoeifa.length))
return false;if(ji_CodInfo===null)
ji_CodInfo="";for(var i=0;i<ji_aoeifa.length;i++)
{var jt_oeifa=jt_aoeifa[i];if(ji_CodInfo==jt_oeifa.Get_Master()[jg_oe.jc_oA3xaDbZero.jc_Eifa_Cod])
return true;}
return false;}
function A3xaREntityInfo_CopyFrom(ji_oeifa)
{if(!ji_oeifa)
return false;this.jm_aMaster=null;this.jm_arsSlaves=null;this.Attach_Attributes(ji_oeifa.Get_Attributes());jt_aMaster=ji_oeifa.Get_Master();if(!jt_aMaster)
return true;this.jm_aMaster=jt_aMaster.slice();jt_arsSlaves=ji_oeifa.Get_Slaves();if(!jt_arsSlaves)
return true;this.jm_arsSlaves=new Array();for(var i=0;jt_arsSlaves.length;i++)
this.jm_arsSlaves.push(jt_arsSlaves[i].slice());return true;}
function A3xaREntity(ji_odcCache)
{GLRecord.call(this,null);this.Get_3xXEID=function()
{var jr_o3xxeid=this.jm_ogle.Get_3xXEID();if(!jr_o3xxeid)
return null;if(this.jm_bCacheXEID)
return jr_o3xxeid;if(!this._CacheXEID());this.jm_bCacheXEID=true;return jr_o3xxeid;};this._CacheXEID=function()
{var jr_o3xxeid=this.jm_ogle.Get_3xXEID();if(!jr_o3xxeid)
return false;jr_o3xxeid.Set_GEID(this.Get_Field("TypEntity"),this.Get_Field("cf_id"),this.Get_Field("TypGroup"),this.Get_Field("IdGroup"));jr_o3xxeid.Get_3xCat().Set_Category(this.Get_Field("U_cat"),this.Get_Field("V_cat"));jr_o3xxeid.Get_3xAZNC().Set_AZNC(this.Get_Field("A_code"),this.Get_Field("Z_code"),this.Get_Field("N_code"),this.Get_Field("City_code"));jr_o3xxeid.Get_3xPS().Set_PS(this.Get_Field("Country_iso3"),this.Get_Field("State_code"));this.jm_ogle.Replace_3xEBID(this.Get_3xEBID());this.jm_ogle.Replace_3xEBIS(this.Get_3xEBIS());return true;};this.Get_3xEBIS=function(){return null;};this.Get_EI=function(){return this;};this.IsReady=function(){return this.IsValid()&&this.Get_3xXEID().IsValid();};this.Set_SubRecord=function(ji_SubType,ji_oglrSub)
{if(!(ji_SubType&&ji_oglrSub))
return false;if(this.Get_3xXEID().Get_TypEntity()!=ji_oglrSub.Get_TypEntity())
return false;if(this.Get_3xXEID().Get_IdEntity()!=ji_oglrSub.Get_IdEntity())
return false;return this.GLRecord_Set_SubRecord(ji_SubType,ji_oglrSub);};this.Get_3xEBID=function(){return this.Get_SubRecord(jg_oe.jc_oA3xaDbZero.jc_SubTable_EBID);};this.Get_Info=function(ji_TypInfo,ji_IdInfo)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("glid-r,jm_aoeifa: "+
this.Get_Glid()+","+(this.jm_aoeifa?"not-null":"null"),"","A3xaREntity_Get_Info");if(!this.jm_aoeifa)
{this.CacheInfo();if(!this.jm_aoeifa)
return null;}
if(!this.jm_aoeifa.length)
return null;var jt_aoeifa_Selected=new Array();for(var i=0;i<this.jm_aoeifa.length;i++)
{var jt_oeifa=this.jm_aoeifa[i];if(!jt_oeifa)
continue;if((!ji_TypInfo||jt_oeifa.jm_aMaster[jg_oe.jc_oA3xaDbZero.jc_Eifa_Typ]==ji_TypInfo)&&(!ji_IdInfo||jt_oeifa.jm_aMaster[jg_oe.jc_oA3xaDbZero.jc_Eifa_Id]==ji_IdInfo))
{jt_aoeifa_Selected.push(jt_oeifa);}}
if(!jt_aoeifa_Selected.length)
return null;return jt_aoeifa_Selected;};this.CacheInfo=function()
{this.jm_aoeifa=null;var jt_arsInfo=this.Get_FieldArray_Recordset(jg_oe.jc_oA3xaDbZero.jc_sEifaName);if(!jt_arsInfo)
return true;var jt_aoeifa=new Array();for(var i=0;i<jt_arsInfo.length;i++)
{var jt_aInfo=jt_arsInfo[i];if(!jt_aInfo)
continue;if(!(jt_aInfo[jg_oe.jc_oA3xaDbZero.jc_Eifa_IdParent]>0))
{var jt_oeifa=new A3xaREntityInfo(jt_aInfo,null);jt_aoeifa.push(jt_oeifa);}}
if(!jt_aoeifa)
return true;for(var m=0;m<jt_aoeifa.length;m++)
{var jt_oeifa=jt_aoeifa[m];for(var i=0;i<jt_arsInfo.length;i++)
{var jt_aInfo=jt_arsInfo[i];if(!jt_aInfo)
continue;if(jt_aInfo[jg_oe.jc_oA3xaDbZero.jc_Eifa_Typ]&&jt_aInfo[jg_oe.jc_oA3xaDbZero.jc_Eifa_Typ]==jt_oeifa.jm_aMaster[jg_oe.jc_oA3xaDbZero.jc_Eifa_Typ]&&jt_aInfo[jg_oe.jc_oA3xaDbZero.jc_Eifa_IdParent]==jt_oeifa.jm_aMaster[jg_oe.jc_oA3xaDbZero.jc_Eifa_Id])
{if(!jt_oeifa.jm_arsSlaves)
jt_oeifa.jm_arsSlaves=new Array();jt_oeifa.jm_arsSlaves.push(jt_aInfo);}}}
this.jm_aoeifa=jt_aoeifa;return true;};this.Get_3xsField=function(ji_TypInfo,ji_CodInfo)
{var jt_aoeifa4L=this.Get_Info(ji_TypInfo,null);var jt_b=false;var jr_o3xs4L=new A3xaString();for(var i=0;jt_aoeifa4L&&i<jt_aoeifa4L.length;i++)
{var jt_aMaster=jt_aoeifa4L[i].Get_Master();var jt_TypInfo=jt_aMaster[jg_oe.jc_oA3xaDbZero.jc_Eifa_Typ];var jt_CodInfo=jt_aMaster[jg_oe.jc_oA3xaDbZero.jc_Eifa_Cod];var jt_IdInfo=jt_aMaster[jg_oe.jc_oA3xaDbZero.jc_Eifa_Id];var jt_sInfo=jt_aMaster[jg_oe.jc_oA3xaDbZero.jc_Eifa_Info];if(jt_CodInfo!=ji_CodInfo)
continue;if(jr_o3xs4L.Set_IString(jt_IdInfo,jt_sInfo))
jt_b=true;}
if(!jt_b)
return null;return jr_o3xs4L;};this.Get_3xsName=function()
{var jr_o3xs4L=this.Get_3xsField(jg_oe.jc_oEntityInfo.jc_TI_4LName,jg_oe.jc_oEntityInfo.jc_CI_4LName_Text);if(jr_o3xs4L&&jr_o3xs4L.Get_LString())
return jr_o3xs4L;var jt_s="";if(this.Get_3xEBIS())
jt_s=this.Get_3xEBIS().Get_Name();return new A3xaString([jt_s,jt_s,jt_s,jt_s]);};this.Get_LName=function(){return this.Get_3xsName().Get_LString();};this.Get_3xsDescr=function()
{var jr_o3xs4L=this.Get_3xsField(jg_oe.jc_oEntityInfo.jc_TI_4LDescr,jg_oe.jc_oEntityInfo.jc_CI_4LDescr_Text);if(jr_o3xs4L&&jr_o3xs4L.Get_LString())
return jr_o3xs4L;var jt_s="";if(this.Get_3xEBIS())
jt_s=this.Get_3xEBIS().Get_Descr();return new A3xaString([jt_s,jt_s,jt_s,jt_s]);};this.Get_LDescr=function(){return this.Get_3xsDescr().Get_LString();};this.LinkCommonData=function(ji_odb,ji_bNoInherit)
{this.Get_3xXEID();return this.jm_ogle.LinkCommonData(ji_odb,ji_bNoInherit);};this.Get_CommonLinkedRecord=function(ji_TypEntity)
{return this.jm_ogle.Get_CommonLinkedRecord(ji_TypEntity);};this.jm_ogle=(ji_odcCache?ji_odcCache:new A3xaDCEntity());this.jm_bCacheXEID=false;this.jm_aoeifa=null;}
function GLREBIS(ji_odcCache)
{A3xaREntity.call(this,ji_odcCache);this.Get_3xEBIS=function(){return this;};this.Get_Created=function(){return this.Get_Field("cf_created");};this.Get_Modified=function(){return this.Get_Field("cf_modified");};this.Get_Order=function(){return this.Get_Field("Orden");};this.Get_Idsym=function(){return this.Get_Field("Idsym");};this.Get_Name=function(){return this.Get_Field("Entity_name");};this.Get_Descr=function(){return this.Get_Field("Descripcion");};this.Get_Website=function(){return this.Get_Field("WebsiteUrl");};this.Get_Lat=function(){return this.Get_Field("Lat");};this.Get_Lon=function(){return this.Get_Field("Lon");};this.Get_Color=function()
{if(!this.jm_Color)
this.jm_Color=this.Get_Field("Color");if(this.jm_Color)
return this.jm_Color;return this.jm_DefaultColor;};this.Set_Color=function(ji_Color){this.jm_Color=ji_Color;return true;};this.jm_Color=null;this.jm_DefaultColor="FFFFFF";this.Set_DefaultColor=function(ji_Color){this.jm_DefaultColor=ji_Color;return true;};this.Get_DefaultColor=function(){return this.jm_DefaultColor;};this.ConvertSpecialChars_Field=function(jio_aRecord,ji_sFieldName)
{if(!(jio_aRecord&&jio_aRecord.length))
return false;if(!(ji_sFieldName&&ji_sFieldName.length))
return false;if(!this.jm_oglFieldNames)
return false;var jt_pos=this.jm_oglFieldNames.Get_FieldPos(ji_sFieldName);if(jt_pos<0)
return false;jio_aRecord[jt_pos]=jio_aRecord[jt_pos].replace(/__at2__/g,"@").replace(/&#40;/g,"(").replace(/&#41;/g,")");return true;};this.ConvertSpecialChars=function(ji_aRecord)
{if(!ji_aRecord)
return ji_aRecord;if(!this.jm_oglFieldNames)
return ji_aRecord;this.ConvertSpecialChars_Field(ji_aRecord,"Entity_name");this.ConvertSpecialChars_Field(ji_aRecord,"Descripcion");this.ConvertSpecialChars_Field(ji_aRecord,"WebsiteUrl");return ji_aRecord;};}
function GLREBID()
{GLRecord.call(this,null);this.Get_3xEBID=function(){return this;};this.IsReady=function()
{if(!this.IsValid())
return false;if(!this.Get_TypEntity())
return false;if(!this.Get_IdEntity())
return false;return true;};this.Get_TypEntity=function()
{return this.Get_Field("TypEntity");};this.Get_IdEntity=function()
{return this.Get_Field("cf_id");};this.Get_LikesTotal=function()
{return Number(this.Get_Field("Likes"))+Number(this.Get_Field("Likes_bonus"));};this.Get_Clicks=function()
{return Number(this.Get_Field("Clicks"));};this.Get_ClickTime=function()
{return this.Get_Field("Clicks_phtime");};this.Get_Score=function()
{return Number(this.Get_Field("Score"));};}
function A3xaXtdEntity()
{this.jm_aoglrCommon=new Array();A3xaDCEntity.call(this);this.IsReady=function()
{return true;};this.Get_CommonLinkedRecord=function(ji_TypEntity)
{if(!ji_TypEntity)
return null;return this.jm_aoglrCommon[ji_TypEntity]||null;};this.LinkCommonData=function(ji_odb,ji_bNoInherit)
{return this.A3xaXtdEntity_LinkCommonData(ji_odb,ji_bNoInherit);};this.A3xaXtdEntity_LinkCommonData=function(ji_odb,ji_bNoInherit)
{if(!ji_odb)
return false;var jt_TypEntity=this.Get_3xXEID().Get_TypEntity();var jt_oThis3xxeid_xapp=new A3xaXEID_XApp(this);var jt_oglrCategory=null;var jt_ogldtCategory=null;{jt_ogldtCategory=ji_odb.Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_Category);if(jt_ogldtCategory)
{jt_oglrCategory=jt_ogldtCategory.Get_GLRecord(jt_ogldtCategory.AltKey_2_PrimaryKey(jt_oThis3xxeid_xapp.BuildAltKey(jg_oe.jc_oEntity.jc_Typ_Category)));}}
var jt_oglrGeoArea=null;var jt_oglrGeoRegion=null;var jt_oglrGeoCity=null;var jt_oglrGeoCountry=null;var jt_oglrGeoState=null;var jt_ogldtGeoArea=null;var jt_ogldtGeoRegion=null;var jt_ogldtGeoCity=null;var jt_ogldtGeoCountry=null;var jt_ogldtGeoState=null;jt_ogldtGeoArea=ji_odb.Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_GeoArea);if(jt_TypEntity!=jg_oe.jc_oEntity.jc_Typ_GeoArea)
jt_ogldtGeoRegion=ji_odb.Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_GeoRegion);if(jt_TypEntity!=jg_oe.jc_oEntity.jc_Typ_GeoArea&&jt_TypEntity!=jg_oe.jc_oEntity.jc_Typ_GeoRegion)
jt_ogldtGeoCity=ji_odb.Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_GeoCity);if(jt_TypEntity!=jg_oe.jc_oEntity.jc_Typ_GeoArea&&jt_TypEntity!=jg_oe.jc_oEntity.jc_Typ_GeoRegion)
jt_ogldtGeoCountry=ji_odb.Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_GeoCountry);if(jt_TypEntity!=jg_oe.jc_oEntity.jc_Typ_GeoArea&&jt_TypEntity!=jg_oe.jc_oEntity.jc_Typ_GeoRegion&&jt_TypEntity!=jg_oe.jc_oEntity.jc_Typ_GeoCountry)
jt_ogldtGeoState=ji_odb.Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_GeoState);if(jt_ogldtGeoArea)
{jt_oglrGeoArea=jt_ogldtGeoArea.Get_GLRecord(jt_ogldtGeoArea.AltKey_2_PrimaryKey(jt_oThis3xxeid_xapp.BuildAltKey(jg_oe.jc_oEntity.jc_Typ_GeoArea)));if(jt_oglrGeoArea&&jt_ogldtGeoRegion)
{jt_oglrGeoRegion=jt_ogldtGeoRegion.Get_GLRecord(jt_ogldtGeoRegion.AltKey_2_PrimaryKey(jt_oThis3xxeid_xapp.BuildAltKey(jg_oe.jc_oEntity.jc_Typ_GeoRegion)));if(jt_oglrGeoRegion&&jt_ogldtGeoCity)
jt_oglrGeoCity=jt_ogldtGeoCity.Get_GLRecord(jt_ogldtGeoCity.AltKey_2_PrimaryKey(jt_oThis3xxeid_xapp.BuildAltKey(jg_oe.jc_oEntity.jc_Typ_GeoCity)));}}
var jt_oglrAltKeySource=null;if(jt_ogldtGeoCountry)
{jt_oglrAltKeySource=jt_oglrGeoCity;if(!jt_oglrAltKeySource)
jt_oglrAltKeySource=this;var jt_oAltKeySource3xxeid_xapp=new A3xaXEID_XApp(jt_oglrAltKeySource);if(jt_oglrAltKeySource&&jt_oglrAltKeySource.Get_3xXEID().Get_3xPS().Get_P())
{jt_oglrGeoCountry=jt_ogldtGeoCountry.Get_GLRecord(jt_ogldtGeoCountry.AltKey_2_PrimaryKey(jt_oAltKeySource3xxeid_xapp.BuildAltKey(jg_oe.jc_oEntity.jc_Typ_GeoCountry)));if(jt_oglrGeoCountry&&jt_oglrAltKeySource.Get_3xXEID().Get_3xPS().Get_S())
{if(jt_ogldtGeoState&&jt_oglrGeoCountry)
jt_oglrGeoState=jt_ogldtGeoState.Get_GLRecord(jt_ogldtGeoState.AltKey_2_PrimaryKey(jt_oAltKeySource3xxeid_xapp.BuildAltKey(jg_oe.jc_oEntity.jc_Typ_GeoState)));}}}
this.jm_aoglrCommon[jg_oe.jc_oEntity.jc_Typ_Category]=jt_oglrCategory;this.jm_aoglrCommon[jg_oe.jc_oEntity.jc_Typ_GeoArea]=jt_oglrGeoArea;this.jm_aoglrCommon[jg_oe.jc_oEntity.jc_Typ_GeoRegion]=jt_oglrGeoRegion;this.jm_aoglrCommon[jg_oe.jc_oEntity.jc_Typ_GeoCity]=jt_oglrGeoCity;this.jm_aoglrCommon[jg_oe.jc_oEntity.jc_Typ_GeoCountry]=jt_oglrGeoCountry;this.jm_aoglrCommon[jg_oe.jc_oEntity.jc_Typ_GeoState]=jt_oglrGeoState;if(!ji_bNoInherit)
{if(jt_oglrAltKeySource)
this.Get_3xXEID().Set_3xPS(jt_oglrAltKeySource.Get_3xXEID());if(jt_oglrCategory)
this.Get_3xEBIS().Set_Color(jt_oglrCategory.Get_3xEBIS().Get_Color());}
return true;};}
function A3xaXur()
{A3xaXtdEntity.call(this);this.jm_FormName=null;this.jm_FormEvent=null;this.jm_TypAjaxResponse=null;this.jm_QUR=null;this.jm_Single=null;this.jm_SubEntity=null;this.jm_oxeidHighlights=null;this.jm_sEnterprise="";this.jm_sCategory="";this.jm_sCity="";this.jm_sState="";this.jm_sCountry="";this.jm_sRegion="";this.jm_sArea="";this.jm_oDTStatus=new GLDataStatus(jg_oe.jc_oA3xaDbZero.jc_DTStatus_Empty);this.jm_oDTStatus.Set2(jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StOpen,jg_oe.jc_oA3xaDbZero.jc_DTStatus2_TgTable,jg_oe.jc_oA3xaDbZero.jc_DTStatus2_OpCache);this.Get_XEIDHighlights=function()
{return this.jm_oxeidHighlights;}
this.Clear=function()
{this.jm_FormName=null;this.jm_FormEvent=null;this.jm_TypAjaxResponse=null;this.jm_QUR=null;this.jm_Single=null;this.jm_SubEntity=null;this.jm_oxeidHighlights=null;this.jm_sEnterprise="";this.jm_sCategory="";this.jm_sCity="";this.jm_sState="";this.jm_sCountry="";this.jm_sRegion="";this.jm_sArea="";return true;};this.Get_3xXUR=function(){return this;};this.CopyFromXUR=function(ji_oxur)
{if(ji_oxur)
ji_oxur=ji_oxur.Get_3xXUR();if(!ji_oxur)
return false;if(!this.A3xaDCEntity_CopyFrom(ji_oxur,true,false,false,false))
return false;this.jm_FormName=ji_oxur.jm_FormName;this.jm_FormEvent=ji_oxur.jm_FormEvent;this.jm_TypAjaxResponse=ji_oxur.jm_TypAjaxResponse;this.jm_QUR=ji_oxur.jm_QUR;this.jm_Single=ji_oxur.jm_Single;this.jm_SubEntity=ji_oxur.jm_SubEntity;this.jm_oxeidHighlights=ji_oxur.jm_oxeidHighlights;this.jm_sEnterprise=ji_oxur.jm_sEnterprise;this.jm_sCategory=ji_oxur.jm_sCategory;this.jm_sCity=ji_oxur.jm_sCity;this.jm_sState=ji_oxur.jm_sState;this.jm_sCountry=ji_oxur.jm_sCountry;this.jm_sRegion=ji_oxur.jm_sRegion;this.jm_sArea=ji_oxur.jm_sArea;return true;};this.Matches=function(ji_o3xxur,ji_bDontCheckOrder)
{if(ji_o3xxur)
ji_o3xxur.Get_3xXUR();if(!ji_o3xxur)
return false;if(this.jm_FormName!=ji_o3xxur.jm_FormName)
return false;if(this.jm_Single!=ji_o3xxur.jm_Single)
return false;if(this.jm_SubEntity!=ji_o3xxur.jm_SubEntity)
return false;if(!ji_bDontCheckOrder&&this.jm_QUR!=ji_o3xxur.jm_QUR)
return false;if(!this.Get_3xXEID()._A3xaXEID_Matches(ji_o3xxur))
return false;return true;};this.Set_UrlParams=function(ji_FormName,ji_FormEvent,ji_TAR,ji_QUR,ji_sxeid,ji_Single,ji_SubEntity,ji_sUrlParams)
{this.Clear();var jt_oUrlParams=new A3xaUrl(null,ji_sUrlParams);var jt_sXUR=jt_oUrlParams.Get_UrlParam("p3x");if(jt_sXUR)
this.Set_XURString(jt_sXUR);if(ji_FormName)
this.jm_FormName=ji_FormName;if(ji_FormEvent)
this.jm_FormEvent=ji_FormEvent;if(ji_TAR)
this.jm_TypAjaxResponse=ji_TAR;if(ji_QUR)
this.jm_QUR=ji_QUR;if(ji_Single)
this.jm_Single=ji_Single;if(ji_SubEntity)
this.jm_SubEntity=ji_SubEntity;if(ji_sxeid)
this.Get_3xXEID().Set_String(ji_sxeid);this.jm_oxeidHighlights=new A3xaDCEntity();this.jm_oxeidHighlights.Get_3xXEID().CopyFrom(this);return true;};this.Set_XURString=function(ji_s)
{var jt_aXUR=null;if(!ji_s)
return false;jt_aXUR=ji_s.split(",");if(!jt_aXUR)
return false;if(jt_aXUR.length>0)
this.jm_FormName=jt_aXUR[0];if(jt_aXUR.length>1)
this.jm_FormEvent=jt_aXUR[1];if(jt_aXUR.length>2)
this.jm_TypAjaxResponse=jt_aXUR[2];if(jt_aXUR.length>3)
this.jm_Single=jt_aXUR[3];if(jt_aXUR.length>4)
this.jm_SubEntity=jt_aXUR[4];if(jt_aXUR.length>5)
this.jm_QUR=jt_aXUR[5];if(jt_aXUR.length>6)
{var jt_sxeid="";for(var ix=6;ix<jt_aXUR.length;ix++)
jt_sxeid+=((ix>6?",":"")+jt_aXUR[ix]);this.Get_3xXEID().Set_String(jt_sxeid);this.jm_oxeidHighlights=new A3xaDCEntity();this.jm_oxeidHighlights.Get_3xXEID().CopyFrom(this);}
return true;};this.IsValid=function()
{return true;}
this.IsSingle=function(){return this.jm_Single==jg_oe.jc_oXUR.jc_XURTG_Single;};this.IsLimited=function(){return this.jm_Single==jg_oe.jc_oXUR.jc_XURTG_Limited||!this.jm_Single;};this.IsUnlimited=function(){return this.jm_Single==jg_oe.jc_oXUR.jc_XURTG_Unlimited;};this.SortByScore=function()
{this.jm_QUR=jg_oe.jc_oXUR.jc_QUR_QuerySBS;return true;};this.SortByClick=function()
{this.jm_QUR=jg_oe.jc_oXUR.jc_QUR_QuerySBC;return true;};this.SortByName=function()
{this.jm_QUR=jg_oe.jc_oXUR.jc_QUR_QuerySBA;return true;};this.SortByTime=function()
{this.jm_QUR=jg_oe.jc_oXUR.jc_QUR_QuerySBT;return true;};this.SortByLatestClick=function()
{this.jm_QUR=jg_oe.jc_oXUR.jc_QUR_QuerySBL;return true;};this.MakeQUR=function(ji_bUnlimited,ji_bSortByTime)
{if(ji_bUnlimited)
{this.jm_Single=jg_oe.jc_oXUR.jc_XURTG_Unlimited;if(ji_bSortByTime)
this.jm_QUR=jg_oe.jc_oXUR.jc_QUR_QuerySBT;else
this.jm_QUR=jg_oe.jc_oXUR.jc_QUR_QuerySBS;}
else
{this.jm_Single=jg_oe.jc_oXUR.jc_XURTG_Limited;if(ji_bSortByTime)
this.jm_QUR=jg_oe.jc_oXUR.jc_QUR_QuerySBT;else
this.jm_QUR=jg_oe.jc_oXUR.jc_QUR_QuerySBS;}
return true;};this.IsSortByScore=function()
{return this.jm_QUR==jg_oe.jc_oXUR.jc_QUR_QuerySBS;};this.IsSortByClick=function()
{return this.jm_QUR==jg_oe.jc_oXUR.jc_QUR_QuerySBC;};this.IsSortByName=function()
{return this.jm_QUR==jg_oe.jc_oXUR.jc_QUR_QuerySBA;};this.IsSortByTime=function()
{return this.jm_QUR==jg_oe.jc_oXUR.jc_QUR_QuerySBT;};this.IsSortByLatestClick=function()
{return this.jm_QUR==jg_oe.jc_oXUR.jc_QUR_QuerySBL;};this.IsUnlimited=function()
{return this.jm_Single==jg_oe.jc_oXUR.jc_XURTG_Unlimited;};this.IsLimited=function()
{return(this.jm_Single==jg_oe.jc_oXUR.jc_XURTG_Limited||!this.jm_Single);};this.Get_QueryRankIcon=function()
{var jr_oQueryRank_Icon=null;var jt_Ucat=this.Get_3xXEID().Get_3xCat().Get_Ucat();var jt_o3xaznc=this.Get_3xXEID().Get_3xAZNC();var jt_te=this.Get_3xXEID().Get_TypEntity();var jt_o3xmngic=jg_oe.Get_3xAppMngIcons();var jt_odfic=jt_o3xmngic.Get_DefIcons();if(this.IsSingle())
return null;if(jt_te==jg_oe.jc_oEntity.jc_Typ_Enterprise)
{if(jt_o3xaznc.Get_C())
{if(jt_Ucat)
jr_oQueryRank_Icon=jt_odfic.jc_oIconMS_QueryRank_List;else
jr_oQueryRank_Icon=jt_odfic.jc_oIconMS_QueryRank_T10Iron;}
else if(jt_o3xaznc.Get_N())
{if(jt_Ucat)
jr_oQueryRank_Icon=jt_odfic.jc_oIconMS_QueryRank_List;else
jr_oQueryRank_Icon=jt_odfic.jc_oIconMS_QueryRank_T10Bronze;}
else if(jt_o3xaznc.Get_Z())
jr_oQueryRank_Icon=jt_odfic.jc_oIconMS_QueryRank_T10Silver;else if(jt_o3xaznc.Get_A())
jr_oQueryRank_Icon=jt_odfic.jc_oIconMS_QueryRank_T10Silver;else if(true)
jr_oQueryRank_Icon=jt_odfic.jc_oIconMS_QueryRank_T10Gold;}
else if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoArea||jt_te==jg_oe.jc_oEntity.jc_Typ_GeoRegion||jt_te==jg_oe.jc_oEntity.jc_Typ_GeoCity||jt_te==jg_oe.jc_oEntity.jc_Typ_GeoCountry||jt_te==jg_oe.jc_oEntity.jc_Typ_GeoState)
{;}
return jr_oQueryRank_Icon;};this.Get_QueryEntityIcon=function()
{var jr_oQueryEntity_Icon=null;var jt_Ucat=this.Get_3xXEID().Get_3xCat().Get_Ucat();var jt_o3xaznc=this.Get_3xXEID().Get_3xAZNC();var jt_te=this.Get_3xXEID().Get_TypEntity();var jt_o3xmngic=jg_oe.Get_3xAppMngIcons();var jt_odfic=jt_o3xmngic.Get_DefIcons();if(this.IsSingle())
return null;if(jt_te==jg_oe.jc_oEntity.jc_Typ_Enterprise);else if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoArea)
jr_oQueryEntity_Icon=jt_odfic.jc_oIconCat_Area;else if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoRegion)
jr_oQueryEntity_Icon=jt_odfic.jc_oIconCat_Region;else if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoCity)
jr_oQueryEntity_Icon=jt_odfic.jc_oIconCat_City;else if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoCountry)
jr_oQueryEntity_Icon=jt_odfic.jc_oIconCat_Country;else if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoState)
jr_oQueryEntity_Icon=jt_odfic.jc_oIconCat_State;return jr_oQueryEntity_Icon;};this.Get_QueryOrderbyIcon=function()
{var jr_oQueryOrderby_Icon=null;var jt_Ucat=this.Get_3xXEID().Get_3xCat().Get_Ucat();var jt_o3xaznc=this.Get_3xXEID().Get_3xAZNC();var jt_te=this.Get_3xXEID().Get_TypEntity();var jt_o3xmngic=jg_oe.Get_3xAppMngIcons();var jt_odfic=jt_o3xmngic.Get_DefIcons();if(this.IsSingle())
return null;if(this.IsSortByScore());else if(this.IsSortByTime())
jr_oQueryOrderby_Icon=jt_odfic.jc_oIconMS_QueryOrderby_Latest;else if(this.IsSortByClick());else if(this.IsSortByName());else if(this.IsSortByLatestClick());return jr_oQueryOrderby_Icon;};this.Get_XURString=function()
{if(!this.IsValid())
return"";var jr_s=(this.jm_FormName||"")+","+(this.jm_FormEvent||"")+","+
(this.jm_TypAjaxResponse||"")+","+
(this.jm_Single||"")+","+(this.jm_SubEntity||"")+","+
(this.jm_QUR||"")+","+this.Get_3xXEID().Get_String();return jr_s;};this.Set_XUDParams=function(ji_sEnterprise,ji_sCategory,ji_sCity,ji_sState,ji_sCountry,ji_sRegion,ji_sArea)
{if(ji_sEnterprise)
this.jm_sEnterprise=(ji_sEnterprise||"");this.jm_sCategory=(ji_sCategory||"");this.jm_sCity=(ji_sCity||"");this.jm_sState=(ji_sState||"");this.jm_sCountry=(ji_sCountry||"");this.jm_sRegion=(ji_sRegion||"");this.jm_sArea=(ji_sArea||"");return true;}
this.Set_XUDString=function(ji_s)
{var jt_aXUD=null;if(!ji_s)
return false;jt_aXUD=ji_s.split(",");if(!(jt_aXUD&&jt_aXUD.length>0))
return false;return this.Set_XUDParams(jt_aXUD[0]||"",jt_aXUD[1]||"",jt_aXUD[2]||"",jt_aXUD[3]||"",jt_aXUD[4]||"",jt_aXUD[5]||"",jt_aXUD[6]||"");}
this.Get_XUDString=function(ji_bUnescape)
{if(!this.IsValid())
return"";var jr_sDelim=",";var jr_s="";if(ji_bUnescape===true)
jr_sDelim=", ";jr_s=this.EscapeSpecialChars(this.jm_sEnterprise,ji_bUnescape)+jr_sDelim+
this.EscapeSpecialChars(this.jm_sCategory,ji_bUnescape)+jr_sDelim+
this.EscapeSpecialChars(this.jm_sCity,ji_bUnescape)+jr_sDelim+
this.EscapeSpecialChars(this.jm_sState,ji_bUnescape)+jr_sDelim+
this.EscapeSpecialChars(this.jm_sCountry,ji_bUnescape)+jr_sDelim+
this.EscapeSpecialChars(this.jm_sRegion,ji_bUnescape)+jr_sDelim+
this.EscapeSpecialChars(this.jm_sArea,ji_bUnescape);return jr_s;}
this.EscapeSpecialChars=function(ji_s,ji_bUnescape)
{if(!ji_s)
return"";var jr_s="";if(ji_bUnescape===true)
return ji_s;jr_s=ji_s.replace(/ |\||\\|\!|\"|\'|\/|\(|\)|\=|\?|\^|\{|\}|\[|\]|\+|\*|\@|\#|\<|\>|\,|\;|\.|\:|\_|&apos;|&quot;|\$|\%|\&/g,"-");jr_s=jr_s.replace("----","-").replace("---","-").replace("--","-").replace("--","-").replace("--","-");if(jr_s.slice(-1)=="-")
jr_s=jr_s.slice(0,-1);return jr_s;}
this.LinkMainData=function(ji_odb)
{if(!ji_odb)
return false;var jt_ogldtMain=ji_odb.Get_MainDataTable();if(!jt_ogldtMain)
return false;var jt_keyMain=this.Get_3xXEID().Get_PrimaryKey();var jt_oglrMain=null;if(this.jm_Single==jg_oe.jc_oXUR.jc_XURTG_Single&&jt_keyMain)
jt_oglrMain=jt_ogldtMain.Get_GLRecord(jt_keyMain);if(jt_oglrMain)
this.CopyFrom(jt_oglrMain,false,true,false,false);return true;}
this.CopyFrom=function(ji_odc,ji_bXEID,ji_bEBIS,ji_bEBID,ji_bEI)
{if(!this.A3xaDCEntity_CopyFrom(ji_odc,ji_bXEID,ji_bEBIS,ji_bEBID,ji_bEI))
return false;this.jm_oxeidHighlights=new A3xaDCEntity();this.jm_oxeidHighlights.Get_3xXEID().CopyFrom(this);var jt_sName=this.Get_LName();var jt_TypEntity=this.Get_3xXEID().Get_TypEntity();if(jt_TypEntity==jg_oe.jc_oEntity.jc_Typ_Category)
this.jm_sCategory=jt_sName;else if(jt_TypEntity==jg_oe.jc_oEntity.jc_Typ_GeoCity)
this.jm_sCity=jt_sName;else if(jt_TypEntity==jg_oe.jc_oEntity.jc_Typ_GeoState)
this.jm_sState=jt_sName;else if(jt_TypEntity==jg_oe.jc_oEntity.jc_Typ_GeoCountry)
this.jm_sCountry=jt_sName;else if(jt_TypEntity==jg_oe.jc_oEntity.jc_Typ_GeoRegion)
this.jm_sRegion=jt_sName;else if(jt_TypEntity==jg_oe.jc_oEntity.jc_Typ_GeoArea)
this.jm_sArea=jt_sName;else
this.jm_sEnterprise=jt_sName;return true;};this.LinkCommonData=function(ji_odb,ji_bNoInherit)
{if(!this.A3xaXtdEntity_LinkCommonData(ji_odb,ji_bNoInherit))
return false;return this.BuildXUDParams();};this.BuildXUDParams=function()
{var jt_oglrCategory=this.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_Category);var jt_sCategory=(jt_oglrCategory?jt_oglrCategory.Get_LName():"");var jt_oglrGeoCity=this.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoCity);var jt_sGeoCity=(jt_oglrGeoCity?jt_oglrGeoCity.Get_LName():"");var jt_oglrGeoState=this.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoState);var jt_sGeoState=(jt_oglrGeoState?jt_oglrGeoState.Get_LName():"");var jt_oglrGeoCountry=this.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoCountry);var jt_sGeoCountry=(jt_oglrGeoCountry?jt_oglrGeoCountry.Get_LName():"");var jt_oglrGeoRegion=this.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoRegion);var jt_sGeoRegion=(jt_oglrGeoRegion?jt_oglrGeoRegion.Get_LName():"");var jt_oglrGeoArea=this.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoArea);var jt_sGeoArea=(jt_oglrGeoArea?jt_oglrGeoArea.Get_LName():"");if(!jt_sGeoArea)
{var jt_A=this.Get_3xXEID().Get_3xAZNC().Get_A();var jt_Z=this.Get_3xXEID().Get_3xAZNC().Get_Z();var jt_o3xaznc_xapp=New_A3xaAZNC_XApp(this.Get_3xXEID());var jt_o3xdce=jt_o3xaznc_xapp.TopAreaTo3xDCEntity();if(jt_o3xdce&&(jt_o3xaznc_xapp.IsLA()||(jt_A&&!jt_Z)))
jt_sGeoArea=jt_o3xdce.Get_LName();}
var jt_TypEntity=this.Get_3xXEID().Get_TypEntity();var jt_o3xaznc=this.Get_3xXEID().Get_3xAZNC();var jt_o3xcat=this.Get_3xXEID().Get_3xCat();if(jt_TypEntity==jg_oe.jc_oEntity.jc_Typ_Category||jt_TypEntity==jg_oe.jc_oEntity.jc_Typ_GeoCity||jt_TypEntity==jg_oe.jc_oEntity.jc_Typ_GeoState||jt_TypEntity==jg_oe.jc_oEntity.jc_Typ_GeoCountry||jt_TypEntity==jg_oe.jc_oEntity.jc_Typ_GeoRegion||jt_TypEntity==jg_oe.jc_oEntity.jc_Typ_GeoArea)
{jt_sCategory="";if(jt_TypEntity==jg_oe.jc_oEntity.jc_Typ_GeoCountry)
{jt_sGeoCity="";jt_sGeoState="";jt_sGeoRegion="";jt_sGeoArea="";}
else if(jt_TypEntity==jg_oe.jc_oEntity.jc_Typ_GeoState)
{jt_sGeoCity="";jt_sGeoArea="";}}
if(this.jm_Single!=jg_oe.jc_oXUR.jc_XURTG_Single)
{var jt_squrDescr=jg_oe.Get_AppXUR().QUR_Get_Descr2(this.jm_QUR,this.jm_Single,this.Get_3xXEID());jt_sCategory=jt_squrDescr+"-"+jt_sCategory;}
this.Set_XUDParams(null,jt_sCategory,jt_sGeoCity,jt_sGeoState,jt_sGeoCountry,jt_sGeoRegion,jt_sGeoArea);return true;};this.Default2GlidQUR=function(ji_glidDefault)
{var jt_bIsDefault=jg_oe.jc_oA3xaDbZero.IsDefaultGlid(ji_glidDefault);if(!jt_bIsDefault)
return ji_glidDefault;ji_glidPrefix=ji_glidDefault.substr(0,jg_oe.jc_oA3xaDbZero.jc_GLIDPREFIXLEN);if(!(ji_glidPrefix==jg_oe.jc_oA3xaDbZero.jc_GLID_EnterprisePrefix||ji_glidPrefix==jg_oe.jc_oA3xaDbZero.jc_GLID_NEnterprisePrefix))
return ji_glidDefault;var jt_oxeidXUR=this.Get_3xXEID();if(!(this.IsUnlimited()&&jt_oxeidXUR&&jt_oxeidXUR.Get_TypEntity()==jg_oe.jc_oEntity.jc_Typ_Enterprise))
{return ji_glidDefault;}
var jt_A=jt_oxeidXUR.Get_3xAZNC().Get_A();var jt_Z=jt_oxeidXUR.Get_3xAZNC().Get_Z();var jt_N=jt_oxeidXUR.Get_3xAZNC().Get_N();if(!(jt_A&&jt_Z&&jt_N))
return ji_glidDefault;var jr_glidQUR=jg_oe.jc_oA3xaDbZero.MakeGlid(ji_glidPrefix,jt_A+jt_Z+jt_N);jg_oe.CanLogInfo()&&jg_oe.LogInfo("gliddef,glidqur: "+ji_glidDefault+","+jr_glidQUR,"","A3xaXUR.Default2GlidQUR");return jr_glidQUR;};this.Get_A3xaUrl=function(ji_bAjax,ji_bAppendDescrParam)
{var jr_oUrl=null;if(ji_bAjax)
{this.jm_FormName=jg_oe.jc_oXUR.jc_XURFN_AjaxEntity;var jt_sxur=this.Get_XURString();jr_oUrl=new A3xaUrl(jg_oe.jc_oXUR.jc_sUrlBase_A3xaForm,"p3x="+jt_sxur);}
else
{var jt_sxur=this.Get_XURString();jr_oUrl=new A3xaUrl(jg_oe.jc_oXUR.jc_sUrlBase_A3xaForm,(ji_bAppendDescrParam===true?"p3d="+this.Get_XUDString()+"&":"")+"p3x="+jt_sxur);}
if(!jt_sxur)
return jr_oUrl;return jr_oUrl;};this.Redirect=function()
{var jt_oUrl=this.Get_A3xaUrl(false,true);if(!jt_oUrl)
return false;return jt_oUrl.Redirect();}}
function A3xaDefines_AppLogger()
{this.jc_asAppLogger=["App Logger","Apl Registrador","Apl Registrador","App Registratore"];this.jc_asUndefined=["???","???","???","???"];this.jc_ColorsBGHL=["80FF80","80FF80","C0FFC0"];}
function A3xaDDItemAppLogger(ji_sKey,ji_sValue,ji_asDescr)
{A3xaDDItem2.call(this,ji_sKey,ji_sValue,ji_asDescr);}
function A3xaAppLogger()
{var jt_this=this;this.jc_o3xdef=new A3xaDefines_AppLogger();this.jm_oddbox=null;this.jm_CurrentTextId=1;this.jm_ChildTextId=1;this.jm_bPrintHtml=false;this._A3xaAppLogger=function()
{this.jm_oddbox=new A3xaDDSelectBox(new A3xaDDItemAppLogger(1,1,this.jc_o3xdef.jc_asAppLogger),"AppLogger",this.jc_o3xdef.jc_asAppLogger);this.jm_oddbox.NewDDItem=function()
{return new A3xaDDItemAppLogger(jt_this.jm_CurrentTextId,jt_this.jm_CurrentTextId,jt_this.jc_o3xdef.jc_asUndefined);};this.jm_oddbox.OnChange=function(ji_eddbox,ji_oddi)
{var jt_sValue=ji_oddi.Get_Value();if(!jt_sValue)
return false;return true;};this.jm_oddbox.Set_ColorsBGHL(this.jc_o3xdef.jc_ColorsBGHL);return true;};this.ConfigDD=function()
{this.jm_bPrintHtml=false;this.jm_oddbox.jm_sKeySelected=null;this.jm_oddbox.jm_bVisibleGroupFocus=false;this.jm_oddbox.jm_bShowCount=false;return true;};this.PrintHtmlDD=function(qi_oParent)
{this.ConfigDD();if(!this.jm_oddbox.PrintHtml(qi_oParent))
return false;this.jm_bPrintHtml=true;{if(!this.RefreshHtmlDD())
return false;}
return true;};this.RefreshHtmlDD=function()
{if(this.jm_bPrintHtml)
{return this.jm_oddbox.Refresh();}
return false;};this.LoadDataDD=function()
{this.ConfigDD();return true;};this.Clear=function()
{this.jm_oddbox.ClearAllOptions();this.jm_CurrentTextId=1;this.jm_ChildTextId=1;return true;};this.Append2=function(ji_o3xsText,ji_bAsChild,ji_bClear)
{var jt_oddiRoot=this.jm_oddbox.jm_oddiRoot;if(!jt_oddiRoot)
return false;if(ji_bClear)
{this.Clear();if(!(ji_o3xsText&&ji_o3xsText.Get_LString()))
{this.RefreshHtmlDD();return true;}}
if(!(ji_o3xsText&&ji_o3xsText.Get_LString()))
ji_o3xsText=new A3xaString(["-","-","-","-"]);if(ji_bAsChild)
{var jt_id=this.jm_CurrentTextId-1;if(jt_id<1)
this.Append2(new A3xaString(["-","-","-","-"]),false,false);var jt_oddiParent=jt_oddiRoot.Get_Child(jt_id);if(!jt_oddiParent)
return false;var jt_oddiChild=new A3xaDDItemAppLogger(this.jm_ChildTextId,this.jm_ChildTextId,ji_o3xsText.Get_AString());this.jm_oddbox.Add_ChildAndHtml(jt_oddiParent,jt_oddiChild,!this.jm_bPrintHtml);this.jm_ChildTextId++;}
else
{this.jm_ChildTextId=1;var jt_oddi=new A3xaDDItemAppLogger(this.jm_CurrentTextId,this.jm_CurrentTextId,ji_o3xsText.Get_AString());this.jm_oddbox.jm_sKeySelected=this.jm_CurrentTextId;this.jm_oddbox.Add_ChildAndHtml(jt_oddiRoot,jt_oddi,!this.jm_bPrintHtml);this.jm_CurrentTextId++;}
return true;};this._A3xaAppLogger();}
function A3xaReporter()
{this.jm_oExecDevice=null;this.jm_oAjaxUrlParams=null;this.jm_bOnPageFooter=false;this.jm_bOnDataStored=false;this.jm_bOnDataRead=false;this.jm_oTimeoutReportToServer=null;this.jm_oTimerDelay=null;this.OnDataStored=function(ji_sGLHeader)
{this.jm_bOnDataStored=true;this.NotifyWrite();return true;};this.OnDataRead=function()
{this.jm_bOnDataRead=true;this.NotifyRead();return true;};this.OnPageFooterEnd=function()
{};this.Set_AjaxUrlParams=function(ji_s)
{this.jm_oAjaxUrlParams=new A3xaUrl("",ji_s);return true;};this.Get_AjaxUrlParams=function()
{if(!this.jm_oAjaxUrlParams)
return"";var jr_oAjaxUrlParams=new A3xaUrl(null,null);jr_oAjaxUrlParams.CopyFrom(this.jm_oAjaxUrlParams);jr_oAjaxUrlParams.Modify_UrlParam("p_GLTurbo",jg_oe.Get_TurboString());var jt_oglHeader=new GLHeader(null,null);var jt_sUrlParam_GLHeader=jr_oAjaxUrlParams.Get_UrlParam("p_GLHeader");if(!jt_sUrlParam_GLHeader)
return jr_oAjaxUrlParams.Get_UrlParams();if(!jt_oglHeader.Set_String(jt_sUrlParam_GLHeader))
return jr_oAjaxUrlParams.Get_UrlParams();var jt_xglid=jt_oglHeader.Get_XGlid();if(!jt_xglid)
return jr_oAjaxUrlParams.Get_UrlParams();if(jt_xglid!=(jg_oe.jc_oA3xaDbZero.jc_GLID_All+jg_oe.jc_oA3xaDbZero.jc_GLMID_DT))
{var jt_odt=jg_oe.Get_Database().Get_DataTable(jt_xglid,true,true);if(!jt_odt)
return jr_oAjaxUrlParams.Get_UrlParams();jt_oglHeader=jt_odt.Get_Header();if(!jt_oglHeader)
return jr_oAjaxUrlParams.Get_UrlParams();var jt_aHeaderRecord=jt_oglHeader.Get_Record_Array();if(!jt_aHeaderRecord||(!jt_aHeaderRecord[0]))
return jr_oAjaxUrlParams.Get_UrlParams();var jt_sGLHeader=jt_oglHeader.Get_String();if(jt_sGLHeader)
jr_oAjaxUrlParams.Modify_UrlParam("p_GLHeader",jt_sGLHeader);}
else
{var jt_release=0;var jt_odt=jg_oe.Get_Database().Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_Category,true,true);if(!jt_odt)
{jg_oe.LogErr("table Category not found","","A3xaReporter_Get_AjaxUrlParams");return jr_oAjaxUrlParams.Get_UrlParams();}
var jt_oglHeaderCommon=jt_odt.Get_Header();if(!jt_oglHeaderCommon)
{jg_oe.LogErr("header Category null","","A3xaReporter_Get_AjaxUrlParams");return jr_oAjaxUrlParams.Get_UrlParams();}
var jt_sGLHeaderReference=jt_oglHeaderCommon.Get_String(jg_oe.jc_oA3xaDbZero.jc_GLID_All);var jt_aHeaderCommonRecord=jt_oglHeaderCommon.Get_Record_Array();if(jt_aHeaderCommonRecord)
jt_release=jt_aHeaderCommonRecord[0];if(!(jt_release>0))
{jg_oe.LogErr("release Category null","","A3xaReporter_Get_AjaxUrlParams");return jr_oAjaxUrlParams.Get_UrlParams();}
for(var i=0;i<jg_oe.jc_oA3xaDbZero.jc_aSchemaTables.length;i++)
{if(jg_oe.jc_oA3xaDbZero.jc_aSchemaTables[i].jp_sName==jg_oe.jc_oA3xaDbZero.jc_GLID_Category)
continue;var jt_odtCur=jg_oe.Get_Database().Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_aSchemaTables[i].jp_sName,true,true);if(!jt_odtCur)
{jg_oe.LogErr("table not found: "+jg_oe.jc_oA3xaDbZero.jc_aSchemaTables[i].jp_sName,"","A3xaReporter_Get_AjaxUrlParams");return jr_oAjaxUrlParams.Get_UrlParams();}
var jt_oglHeaderCur=jt_odtCur.Get_Header();if(!jt_oglHeaderCur)
return jr_oAjaxUrlParams.Get_UrlParams();var jt_aHeaderCurRecord=jt_oglHeaderCur.Get_Record_Array();if(!jt_aHeaderCurRecord||jt_release!=jt_aHeaderCurRecord[0])
return jr_oAjaxUrlParams.Get_UrlParams();}
if(jt_sGLHeaderReference)
jr_oAjaxUrlParams.Modify_UrlParam("p_GLHeader",jt_sGLHeaderReference);}
return jr_oAjaxUrlParams.Get_UrlParams();};this.NotifyWrite=function()
{var jt_this=this;jg_oe.CanLogInfo()&&jg_oe.LogInfo("Begin: ods,xdev,isry: "+
this.jm_bOnDataStored+","+(this.jm_oExecDevice?"y":"n")+","+jg_oe.IsReady(),"Flash","A3xaReporter_NotifyWrite");if(this.jm_bOnDataStored&&this.jm_oExecDevice&&jg_oe.IsReady()&&this.jm_oTimerDelay==null)
{this.jm_bOnDataStored=false;this.jm_oTimeoutReportToServer=null;var jt_FlashColor=null;if(jg_oe.Get_Storage(jg_oe.jc_oStorage.jc_IDB).CheckLatestOp("WR"))
jt_FlashColor="FR";else if(jg_oe.Get_Storage(jg_oe.jc_oStorage.jc_LS).CheckLatestOp("WR"))
jt_FlashColor="FR";else if(jg_oe.Get_Storage(jg_oe.jc_oStorage.jc_SS).CheckLatestOp("WR"))
jt_FlashColor="FY";else if(jg_oe.Get_Storage(jg_oe.jc_oStorage.jc_FLY).CheckLatestOp("WR"))
jt_FlashColor="FY";if(jt_FlashColor)
{this.jm_oExecDevice.FlashButton("Turbo",jt_FlashColor);this.jm_oTimeoutReportToServer=setTimeout(function()
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Ajax-to-Server:","","A3xaReporter_NotifyWrite");jt_this.jm_oExecDevice.Set_ButtonStatus("Turbo","KS",true);jt_this.jm_oTimeoutReportToServer=null;},2000);}
return true;}
return false;};this.NotifyRead=function()
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Begin: odr,xdev,isry: "+
this.jm_bOnDataRead+","+(this.jm_oExecDevice?"y":"n")+","+jg_oe.IsReady(),"Flash","A3xaReporter_NotifyRead");if(this.jm_bOnDataRead&&this.jm_oExecDevice&&jg_oe.IsReady()&&this.jm_oTimerDelay==null)
{this.jm_bOnDataRead=false;var jt_FlashColor=null;if(jg_oe.Get_Storage(jg_oe.jc_oStorage.jc_IDB).CheckLatestOp("RD"))
jt_FlashColor="FG";else if(jg_oe.Get_Storage(jg_oe.jc_oStorage.jc_LS).CheckLatestOp("RD"))
jt_FlashColor="FG";else if(jg_oe.Get_Storage(jg_oe.jc_oStorage.jc_SS).CheckLatestOp("RD"))
jt_FlashColor="FB";else if(jg_oe.Get_Storage(jg_oe.jc_oStorage.jc_FLY).CheckLatestOp("RD"))
jt_FlashColor="FB";if(jt_FlashColor)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Color: "+jt_FlashColor,"Flash","A3xaReporter_NotifyRead");this.jm_oExecDevice.FlashButton("Turbo",jt_FlashColor);}
return true;}
return false;};this.Set_ExecDevice=function(jt_oExecDevice)
{this.jm_oExecDevice=jt_oExecDevice;jt_this=this;this.jm_oTimerDelay=setTimeout(function()
{jt_this.jm_oTimerDelay=null;jt_this.Notify();},100);return true;};this.Notify=function()
{this.NotifyWrite();this.NotifyRead();return true;};this.Get_ExecDevice=function(){return this.jm_oExecDevice;};}
function A3xaAppXUR()
{var jt_this=this;this.jc_oXUR=null;this._A3xaAppXUR=function()
{};this.Set_DefXUR=function(jc_oXUR){this.jc_oXUR=jc_oXUR;return true;};this.Get_DefXUR=function(){return this.jc_oXUR;};this.QUR_Get_Descr2=function(ji_sQUR,ji_Single,ji_o3xxeid)
{if(!(ji_sQUR&&ji_sQUR.length==1))
return null;if(ji_o3xxeid)
ji_o3xxeid=ji_o3xxeid.Get_3xXEID();var jt_te=null;var jt_A=null;var jt_Z=null;var jt_N=null;var jt_C=null;var jt_Ucat=null;var jt_Vcat=null;if(ji_o3xxeid)
{jt_te=ji_o3xxeid.Get_TypEntity();jt_A=ji_o3xxeid.Get_3xAZNC().Get_A();jt_Z=ji_o3xxeid.Get_3xAZNC().Get_Z();jt_N=ji_o3xxeid.Get_3xAZNC().Get_N();jt_C=ji_o3xxeid.Get_3xAZNC().Get_C();jt_Ucat=ji_o3xxeid.Get_3xCat().Get_Ucat();jt_Vcat=ji_o3xxeid.Get_3xCat().Get_Vcat();}
if((ji_sQUR==this.jc_oXUR.jc_QUR_QuerySBS||ji_sQUR==this.jc_oXUR.jc_QUR_QuerySBC||ji_sQUR==this.jc_oXUR.jc_QUR_QuerySBA)&&(ji_Single==this.jc_oXUR.jc_XURTG_Limited||(ji_Single==this.jc_oXUR.jc_XURTG_Unlimited&&!jt_Ucat))&&jt_te==jg_oe.jc_oEntity.jc_Typ_Enterprise)
{if(ji_sQUR==this.jc_oXUR.jc_QUR_QuerySBS||ji_sQUR==this.jc_oXUR.jc_QUR_QuerySBA)
{if(!jt_A)
return(jt_A===null?"Gold-Top10":"Top10");if(!jt_N)
return"Silver-Top10";if(!jt_C)
return"Bronze-Top10";return"Iron-Top10";}
else if(ji_sQUR==this.jc_oXUR.jc_QUR_QuerySBC)
{if(!jt_A)
return(jt_A===null?"Gold-Clicks":"Red-Gold-Clicks");if(!jt_N)
return"Silver-Clicks";if(!jt_C)
return"Bronze-Clicks";return"Iron-Clicks";}}
else if(ji_sQUR==this.jc_oXUR.jc_QUR_QuerySBT&&(ji_Single==this.jc_oXUR.jc_XURTG_Limited||(ji_Single==this.jc_oXUR.jc_XURTG_Unlimited&&!jt_Ucat)))
{if(jt_te==jg_oe.jc_oEntity.jc_Typ_Enterprise)
return"Latest Enterprises";if(jt_te==jg_oe.jc_oEntity.jc_Typ_Category)
return"Latest Categories";if(jt_te==jg_oe.jc_oEntity.jc_Typ_Info)
return"Latest Topics";if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoArea)
return"Latest Areas";if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoRegion)
return"Latest Regions";if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoCity)
return"Latest Cities";if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoCountry)
return"Latest Countries";if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoState)
return"Latest States";return"Latest Items";}
else if((ji_sQUR==this.jc_oXUR.jc_QUR_QuerySBS||ji_sQUR==this.jc_oXUR.jc_QUR_QuerySBT||ji_sQUR==this.jc_oXUR.jc_QUR_QuerySBC||ji_sQUR==this.jc_oXUR.jc_QUR_QuerySBA)&&ji_Single==this.jc_oXUR.jc_XURTG_Unlimited)
{if(!jt_te)
return"Items";if(jt_te==jg_oe.jc_oEntity.jc_Typ_Enterprise)
return"Enterprises";if(jt_te==jg_oe.jc_oEntity.jc_Typ_Category)
return"Categories";if(jt_te==jg_oe.jc_oEntity.jc_Typ_Info)
return"Topics";if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoArea)
return"Areas";if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoRegion)
return"Regions";if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoCity)
return"Cities";if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoCountry)
return"Countries";if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoState)
return"States";return"Items";}
else if(ji_sQUR==this.jc_oXUR.jc_QUR_QuerySBL)
{return"Latest Click";}
else if(ji_Single==this.jc_oXUR.jc_XURTG_Single)
{if(ji_sQUR==this.jc_oXUR.jc_QUR_QueryNewEntity)
return"Nuevo";else if(ji_sQUR==this.jc_oXUR.jc_QUR_QueryEditEntity)
return"Modifica";else if(ji_sQUR==this.jc_oXUR.jc_QUR_QueryDeleteEntity)
return"Borra";else if(ji_sQUR==this.jc_oXUR.jc_QUR_QueryViewEntity)
return"Muestra";else if(ji_sQUR==this.jc_oXUR.jc_QUR_QueryUpdateEntity)
return"Update";}
return ji_sQUR+"_unknown";};this.jm_oxur=new A3xaXur();this.Get_3xXUR=function(){return this.jm_oxur;};this.Set_3xXUR=function(ji_oxur){this.jm_oxur=(ji_oxur||null);return true;};this.jm_ao3xurQueue=new Array();this.Set_XURString=function(ji_sxur)
{this.Set_3xXUR(new A3xaXur());this.Get_3xXUR().Set_XURString(ji_sxur);return true;};this.OnDataLoadedSetup=function()
{var jt_oxur=this.Get_3xXUR();jt_oxur.LinkMainData(jg_oApp.Get_Database());jt_oxur.LinkCommonData(jg_oApp.Get_Database(),true);return true;};this.UpdatePageTitle=function()
{if(!this.Get_3xXUR())
return false;this.Get_3xXUR().jm_TypAjaxResponse=null;if(this.Get_3xXUR().jm_FormName==jg_oe.jc_oXUR.jc_XURFN_AjaxEntity)
this.Get_3xXUR().jm_FormName=jg_oe.jc_oXUR.jc_XURFN_ListEntity;jQuery(document).prop('title',this.Get_3xXUR().Get_XUDString(true));var jt_o3xurl=this.Get_3xXUR().Get_A3xaUrl(false,true);if(jt_o3xurl)
jt_o3xurl.History_ReplaceState("",this.Get_3xXUR().Get_XUDString(true));return true;};this.OnChange_QUR=function(ji_sUrlParams)
{if(!ji_sUrlParams)
return false;var jt_o3xXUR=new A3xaXur();jt_o3xXUR.Set_UrlParams(jg_oe.jc_oXUR.jc_XURFN_ListEntity,null,jg_oe.jc_oXUR.jc_sAjaxTypEntitySet,null,null,null,null,ji_sUrlParams);var jt_oxeidXUR=jt_o3xXUR.Get_3xXEID();var jt_o3xazncXUR=new A3xaAZNC();jt_o3xazncXUR.CopyFrom(jt_oxeidXUR);var jt_te=jt_oxeidXUR.Get_TypEntity();var jt_A=jt_o3xazncXUR.Get_A();var jt_Z=jt_o3xazncXUR.Get_Z();var jt_N=jt_o3xazncXUR.Get_N();var jt_C=jt_o3xazncXUR.Get_C();var jt_odt=null;if((!jt_te||jt_te==jg_oe.jc_oEntity.jc_Typ_Enterprise))
{if(jt_A&&jt_Z&&jt_N)
jt_odt=jg_oApp.Get_Database().Get_MainDataTable(jt_A,jt_Z,jt_N);else if(this.Get_3xXUR().Matches(jt_o3xXUR,true))
jt_odt=jg_oApp.Get_Database().Get_MainDataTable();}
else if(jt_te==jg_oe.jc_oEntity.jc_Typ_MetaSystemControl)
jt_odt=jg_oApp.Get_Database().Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_MetaSystemControl);else if(jt_te==jg_oe.jc_oEntity.jc_Typ_Category)
jt_odt=jg_oApp.Get_Database().Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_Category);else if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoArea)
jt_odt=jg_oApp.Get_Database().Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_GeoArea);else if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoRegion)
jt_odt=jg_oApp.Get_Database().Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_GeoRegion);else if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoCity)
jt_odt=jg_oApp.Get_Database().Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_GeoCity);else if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoCountry)
jt_odt=jg_oApp.Get_Database().Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_GeoCountry);else if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoState)
jt_odt=jg_oApp.Get_Database().Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_GeoState);jg_oApp.ClearView();if(!jt_odt)
{this.jm_ao3xurQueue=new Array();this.jm_ao3xurQueue.push(jt_o3xXUR);this.AjaxQueueQueryRequest();return true;}
this.Set_3xXUR(jt_o3xXUR);jg_oApp.ResetApp();jg_oApp.LoadData();return true;};this.AjaxQueueQueryRequest=function()
{if(!(this.jm_ao3xurQueue&&this.jm_ao3xurQueue.length))
return false;var jt_countDone=0;for(var i=0;i<this.jm_ao3xurQueue.length;i++)
{var jt_o3xXUR=this.jm_ao3xurQueue[i];if(jt_o3xXUR.jm_oDTStatus.IsOpen())
{jt_o3xXUR.jm_oDTStatus.Set2(jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StInProgress);var jt_oUrl=jt_o3xXUR.Get_A3xaUrl(true);jg_oe.jm_oAjax2.QueueRequest(new A3xaAjaxRequest2(jt_oUrl.Get_UrlBase(),jt_oUrl.Get_UrlParams(),this));return true;}
else if(jt_o3xXUR.jm_oDTStatus.IsDone())
jt_countDone++;}
jg_oe.CanLogInfo()&&jg_oe.LogInfo("count==len:"+
jt_countDone+"=="+this.jm_ao3xurQueue.length,"","A3xaAppXUR.AjaxQueueQueryRequest");if(jt_countDone==this.jm_ao3xurQueue.length)
this.AjaxStoreNewTables();return true;}
this.OnAjaxReadyFn=function(ji_ogAjaxResponse)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("begin"+"","","A3xaAppXUR.OnAjaxReadyFn");var jt_xmlAjaxTypEntitySet=ji_ogAjaxResponse.Get_ItemElement(jg_oe.jc_oXUR.jc_sAjaxTypEntitySet);if(jt_xmlAjaxTypEntitySet)
{var jt_oxur=new A3xaXur();jt_oxur.Set_XURString(ji_ogAjaxResponse.Get_ItemValue("p3x"));jt_oxur.Set_XUDString(ji_ogAjaxResponse.Get_ItemValue("p3d"));var jt_glid=ji_ogAjaxResponse.Get_ItemValue("p_GLID");var jt_sGLRS=ji_ogAjaxResponse.Get_ItemValue("p_GL");var jt_glidEBID=ji_ogAjaxResponse.Get_ItemValue("p_GLIDEBID");var jt_sGLRSEBID=ji_ogAjaxResponse.Get_ItemValue("p_GLEBID");jg_oe.CanLogInfo()&&jg_oe.LogInfo("p3x.QUR,p3x.XEID,jt_sGLRS(p_GL)="+
jt_oxur.jm_QUR+","+jt_oxur.Get_3xXEID().Get_String()+","+jt_sGLRS,"","A3xaAppXUR.OnAjaxReadyFn");jg_oApp.WriteGLRS2(jt_glid,jt_sGLRS);jg_oApp.WriteGLRS2(jt_glidEBID,jt_sGLRSEBID);var jt_qulen=(this.jm_ao3xurQueue?this.jm_ao3xurQueue.length:0);for(var i=0;i<jt_qulen;i++)
{var jt_o3xXUR=this.jm_ao3xurQueue[i];var jt_bQUR=(jt_o3xXUR.jm_QUR==jt_oxur.jm_QUR);var jt_bXEID=(jt_o3xXUR.Get_3xXEID().Matches(jt_oxur.Get_3xXEID(),false));var jt_bStInProgress=(jt_o3xXUR.jm_oDTStatus.jm_Status==jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StInProgress);jg_oe.CanLogInfo()&&jg_oe.LogInfo("jt_qulen;qur==qur;xeid==xeid;dtstatus:"+jt_qulen+";"+
jt_o3xXUR.jm_QUR+"=="+jt_oxur.jm_QUR+"?"+(jt_bQUR?"Y":"N")+";"+
jt_o3xXUR.Get_3xXEID().Get_String()+"=="+jt_oxur.Get_3xXEID().Get_String()+"?"+(jt_bXEID?"Y":"N")+";"+
jt_o3xXUR.jm_oDTStatus.Get_Descr2()+"?"+(jt_bStInProgress?"Y":"N")+";","","A3xaAppXUR.OnAjaxReadyFn");if(jt_bQUR&&jt_bXEID&&jt_bStInProgress)
{jt_o3xXUR.jm_oDTStatus.Set2(jg_oe.jc_oA3xaDbZero.jc_DTStatus2_StSuccess);jg_oe.CanLogInfo()&&jg_oe.LogInfo("jc_DTStatus2_StSuccess","","A3xaAppXUR.OnAjaxReadyFn");this.AjaxQueueQueryRequest();return true;}}}
return true;};this.AjaxStoreNewTables=function()
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("begin=","","A3xaAppXUR.AjaxStoreNewTables");var jt_qulen=(this.jm_ao3xurQueue?this.jm_ao3xurQueue.length:0);var i=0;var jt_o3xXUR=this.jm_ao3xurQueue[i];this.jm_ao3xurQueue=new Array();this.Set_3xXUR(jt_o3xXUR);jg_oApp.ResetApp();jg_oApp.jm_odbLoaderManager=null;jg_oApp.Get_Database().ClearArrayDTLoad({jp_bTyp_ExtHeader:true});jg_oApp.Get_Database().ClearArrayDTLoad({jp_bTyp_Main:true});jg_oApp.Get_Database().ClearArrayDTLoad({jp_bTyp_TurboHeader:true});jg_oe.CanLogInfo()&&jg_oe.LogInfo("p2=","","A3xaAppXUR.AjaxStoreNewTables");jg_oApp.StoreData();jg_oe.CanLogInfo()&&jg_oe.LogInfo("end=","","A3xaAppXUR.AjaxStoreNewTables");return true;};this.OnChangeDD_QUR=function(ji_eDropDown)
{var jt_selIndex=ji_eDropDown.selectedIndex;var jt_selValue=ji_eDropDown.options[jt_selIndex].value.trim();if(jt_selValue)
{var jt_oxur=new A3xaXur();jt_oxur.Set_UrlParams(jg_oe.jc_oXUR.jc_XURFN_ListEntity,null,null,null,null,null,null,jt_selValue);jt_oxur.LinkCommonData(jg_oe.Get_Database(),true);jt_oxur.Redirect();}
return true;};this._A3xaAppXUR();}
function A3xaAppMngIcons()
{var jt_this=this;this.jc_oIcons=null;this._A3xaAppMngIcons=function()
{};this.Set_DefIcons=function(jc_oIcons){this.jc_oIcons=jc_oIcons;return true;};this.Get_DefIcons=function(){return this.jc_oIcons;};this.MakeUrlIcon_Base=function(ji_sRelPath,ji_bExt)
{if(!ji_sRelPath)
return null;return jg_oe.jm_sDirBase+ji_sRelPath+(ji_bExt===false?"":this.jc_oIcons.jc_sIconExt);};this.MakeUrlIcon_Main=function(ji_sName,ji_bExt)
{if(!ji_sName)
return null;return this.MakeUrlIcon_Base(this.jc_oIcons.jc_sIconUrlBase_Main+ji_sName,ji_bExt);};this.MakeUrlIcon_QUR=function(ji_sName,ji_bExt)
{if(!ji_sName)
return null;return this.MakeUrlIcon_Base(this.jc_oIcons.jc_sIconUrlBase_QUR+ji_sName,ji_bExt);};this.NewSprite=function(ji_absiconid,ji_SpriteId)
{if(!(ji_absiconid>0))
return null;if(!ji_SpriteId)
ji_SpriteId=A3xaMathFloor(ji_absiconid,this.jc_oIcons.jm_SpriteDivisor);if(!(ji_SpriteId>0))
return null;var jt_oSpriteInfo=this.jc_oIcons.jc_ao3xSprites.Get_Item(ji_SpriteId);if(!jt_oSpriteInfo)
return null;var jt_oUrlImgSprite=this.MakeUrlIcon_Base(jt_oSpriteInfo.path);if(!jt_oUrlImgSprite)
return null;var jt_IconId=(A3xaMathFloor(ji_absiconid%this.jc_oIcons.jm_SpriteDivisor)||null);if(!jt_IconId)
return null;var jr_o3xhIconInfo=new A3xaHtmIconInfo(jt_oUrlImgSprite,"",jt_IconId,jt_oSpriteInfo);jr_o3xhIconInfo.Set_ImageTransparent(this.MakeUrlIcon_Main(this.jc_oIcons.jc_sIcon_Transparent));jr_o3xhIconInfo.Set_Dim(24,24);jr_o3xhIconInfo.Set_UrlLink("",true);jr_o3xhIconInfo.Set_Title("Icon","ICO");jr_o3xhIconInfo.Set_Options(false,true);return jr_o3xhIconInfo;};this.Get_AbsidIconAdmin=function(ji_QUR,ji_bSecundary,ji_bEntityInfo)
{if(ji_QUR==jg_oe.jc_oXUR.jc_QUR_QueryNewEntity)
{if(ji_bSecundary)
return this.jc_oIcons.jc_oIconSS_NewSEntity.absid;return(ji_bEntityInfo?this.jc_oIcons.jc_oIconSS_NewEntityInfo.absid:this.jc_oIcons.jc_oIconSS_NewEntity.absid);}
if(ji_QUR==jg_oe.jc_oXUR.jc_QUR_QueryEditEntity)
return(ji_bEntityInfo?this.jc_oIcons.jc_oIconSS_EditEntityInfo.absid:this.jc_oIcons.jc_oIconSS_EditEntity.absid);if(ji_QUR==jg_oe.jc_oXUR.jc_QUR_QueryDeleteEntity)
return(ji_bEntityInfo?this.jc_oIcons.jc_oIconSS_DeleteEntityInfo.absid:this.jc_oIcons.jc_oIconSS_DeleteEntity.absid);return null;};this.Get_UrlIconQUR=function(ji_QUR,ji_Single,ji_Status)
{var jr_sUrlImg="";if(ji_QUR==jg_oe.jc_oXUR.jc_QUR_QuerySBS&&ji_Single==jg_oe.jc_oXUR.jc_XURTG_Limited)
jr_sUrlImg=this.MakeUrlIcon_QUR(this.jc_oIcons.jc_sIconPrefix_QTT+ji_Status);else if(ji_QUR==jg_oe.jc_oXUR.jc_QUR_QuerySBS&&ji_Single==jg_oe.jc_oXUR.jc_XURTG_Unlimited)
jr_sUrlImg=this.MakeUrlIcon_QUR(this.jc_oIcons.jc_sIconPrefix_QEN+ji_Status);else if(ji_QUR==jg_oe.jc_oXUR.jc_QUR_QuerySBT&&ji_Single==jg_oe.jc_oXUR.jc_XURTG_Unlimited)
jr_sUrlImg=this.MakeUrlIcon_QUR(this.jc_oIcons.jc_sIconPrefix_QEN+ji_Status);else if(ji_QUR==jg_oe.jc_oXUR.jc_QUR_QuerySBT&&ji_Single==jg_oe.jc_oXUR.jc_XURTG_Limited)
jr_sUrlImg=this.MakeUrlIcon_QUR(this.jc_oIcons.jc_sIconPrefix_QLE+ji_Status);return jr_sUrlImg;};this.Get_UrlImageMap=function(ji_sAZN)
{if(!ji_sAZN)
return null;return this.MakeUrlIcon_Base(this.jc_oIcons.jc_sIconUrlBase_IMap+"Map-"+ji_sAZN+"-200x150.jpg",false);};this._A3xaAppMngIcons();}
function A3xaEnvironment()
{A3xaAbsEnvironment.call(this);this.Get_ECPMgr=function(){return null;};this.jm_oAppXUR=null;this.Get_AppXUR=function(){return this.jm_oAppXUR;};this.jm_oAppMngIcons=null;this.Get_3xAppMngIcons=function(){return this.jm_oAppMngIcons;};this.Get_DefIcons=function(){return this.Get_3xAppMngIcons().Get_DefIcons();};this.jm_oPopupDim={w:400,h:300};this.Set_PopupDim=function(ji_oPopupDim)
{if(!ji_oPopupDim)return false;this.jm_oPopupDim=ji_oPopupDim;return true;};this.Get_PopupDim=function(){return this.jm_oPopupDim;};this.Set_PopupDimNarrowView=function(ji_IdNarrowView)
{if(ji_IdNarrowView==jg_oe.jc_oHtml.jc_Body_NormalWidthId)
this.Set_PopupDim(jg_oe.jc_oHtml.jc_PopupDim_Normal);else if(ji_IdNarrowView==jg_oe.jc_oHtml.jc_Body_SmallWidthId)
this.Set_PopupDim(jg_oe.jc_oHtml.jc_PopupDim_Small);else if(ji_IdNarrowView==jg_oe.jc_oHtml.jc_Body_MicroWidthId)
this.Set_PopupDim(jg_oe.jc_oHtml.jc_PopupDim_Micro);else
return false;return true;};this.Set_ItemsNarrowView=function(ji_IdNarrowView){return true;};}
function A3xaEntity_HtmlBoxEnv()
{this.jm_oxe=null;this.jm_o3xehf=null;this.jm_bNoShiftIdTag=false;}
function A3xaEntity_HtmlBox(ji_o3xehbenv)
{var jt_this=this;this.jm_o3xehbenv=ji_o3xehbenv;this.jm_bClean=true;this.jm_col=null;this.jm_ao3xehbox=null;this._A3xaEntity_HtmlBox=function()
{};this.AddChild=function(ji_o3xehbox,ji_col,ji_bCleanable)
{if(!ji_o3xehbox)
return false;ji_o3xehbox.jm_col=ji_col;ji_o3xehbox.jm_bClean=(ji_bCleanable===true);if(!this.jm_ao3xehbox)
this.jm_ao3xehbox=new Array();this.jm_ao3xehbox.push(ji_o3xehbox);return true;};this.Get_Child=function(ji_col)
{if(!(ji_col>0))
return null;if(this.jm_ao3xehbox)
{for(var i=0;i<this.jm_ao3xehbox.length;i++)
{if(this.jm_ao3xehbox[i].jm_col==ji_col)
return this.jm_ao3xehbox[i];}}
return null;};this.CountChildren=function(){return(this.jm_ao3xehbox?this.jm_ao3xehbox.length:0);};this.Set_DataSource=function(ji_oxe)
{this.jm_o3xehbenv.jm_oxe=ji_oxe;return true;};this.DoNotShiftIdTag=function()
{this.jm_o3xehbenv.jm_bNoShiftIdTag=true;return true;};this.ClearHtml=function(ji_bHeader)
{if(this.jm_bClean&&this.jm_col)
{var jt_oci=this._Get_CellInfo(this.jm_col);if(jt_oci&&ji_bHeader&&jt_oci.qm_oCellH&&jt_oci.qm_oCellH.length)
jt_oci.qm_oCellH.text("");else if(jt_oci&&(!ji_bHeader)&&jt_oci.qm_oCell&&jt_oci.qm_oCell.length)
jt_oci.qm_oCell.text("");}
if(this.jm_ao3xehbox)
{for(var i=0;i<this.jm_ao3xehbox.length;i++)
this.jm_ao3xehbox[i].ClearHtml(ji_bHeader);}
return true;};this.IsValid=function()
{if(!(this.jm_o3xehbenv.jm_oxe&&this.jm_o3xehbenv.jm_oxe.IsValid()))
return false;if(!this.jm_o3xehbenv.jm_o3xehf)
return false;return true;};this._Get_CellInfo=function(ji_Col)
{if(!jt_this.jm_o3xehbenv.jm_o3xehf)
return null;var jr_oci={jm_Row:jt_this.jm_o3xehbenv.jm_o3xehf.jm_RowHF,jm_Col:ji_Col,jm_o3xehc:null,qm_oCellH:null,qm_oCell:null};if(!(jr_oci.jm_Row>=1))
return null;if(!(jr_oci.jm_Col>=1&&jr_oci.jm_Col<=jg_oe.jc_oHtml.jc_Col_Last))
return null;jr_oci.jm_o3xehc=jt_this.jm_o3xehbenv.jm_o3xehf.Get_Column(ji_Col);if(!jr_oci.jm_o3xehc)
return null;jr_oci.qm_oCellH=jr_oci.jm_o3xehc.Get_Elem(true);jr_oci.qm_oCell=jr_oci.jm_o3xehc.Get_Elem(false);if(!(jr_oci.qm_oCellH||jr_oci.qm_oCell))
return null;return jr_oci;};this.PrintHtml=function(ji_bHeader,ji_bLowPriority,ji_bOnDemand)
{return this._A3xaEntity_HtmlBox_PrintHtml(ji_bHeader,ji_bLowPriority,ji_bOnDemand);};this._A3xaEntity_HtmlBox_PrintHtml=function(ji_bHeader,ji_bLowPriority,ji_bOnDemand)
{var jt_oci=null;if(this.jm_col>0)
jt_oci=this._Get_CellInfo(this.jm_col);if(jt_oci)
{if(ji_bHeader)
{if(jt_oci.qm_oCellH&&jt_oci.qm_oCellH.length)
this.PrintHtml_BoxHeader(jt_oci.qm_oCellH,jt_oci.jm_Row,jt_oci.jm_Col);}
else if(!ji_bHeader&&!ji_bLowPriority)
{if(jt_oci.qm_oCell&&jt_oci.qm_oCell.length)
this.PrintHtml_BoxBody(jt_oci.qm_oCell,jt_oci.jm_Row,jt_oci.jm_Col);}
else if(!ji_bHeader&&ji_bLowPriority&&!ji_bOnDemand)
{if(jt_oci.qm_oCell&&jt_oci.qm_oCell.length)
this.PrintHtml_BoxBodyLopry(jt_oci.qm_oCell,jt_oci.jm_Row,jt_oci.jm_Col);}
else if(!ji_bHeader&&ji_bLowPriority&&ji_bOnDemand)
{if(jt_oci.qm_oCell&&jt_oci.qm_oCell.length)
this.PrintHtml_BoxBodyDemand(jt_oci.qm_oCell,jt_oci.jm_Row,jt_oci.jm_Col);}}
if(this.jm_ao3xehbox)
{for(var i=0;i<this.jm_ao3xehbox.length;i++)
{this.jm_ao3xehbox[i].PrintHtml(ji_bHeader,ji_bLowPriority,ji_bOnDemand);}}
return true;};this.Build=function(){return true;};this.PrintHtml_BoxHeader=function(qi_oCell,ji_Row,ji_Col){return true;};this.PrintHtml_BoxBody=function(qi_oCell,ji_Row,ji_Col){return true;};this.PrintHtml_BoxBodyLopry=function(qi_oCell,ji_Row,ji_Col){return true;};this.PrintHtml_BoxBodyDemand=function(qi_oCell,ji_Row,ji_Col){return true;};this._A3xaEntity_HtmlBox();}
function A3xaEntity_HtmlBox_IdTag(ji_o3xehbenv)
{A3xaEntity_HtmlBox.call(this,ji_o3xehbenv);var jt_this=this;this._A3xaEntity_HtmlBox_IdTag=function()
{};this.PrintHtml_BoxHeader=function(qi_oCell,ji_Row,ji_Col)
{if(!this.IsValid())
return false;if(!this.jm_o3xehbenv.jm_bNoShiftIdTag&&ji_Row>0)
ji_Row--;if(ji_Row>0)
qi_oCell.append("<span style='' title='Position'>"+ji_Row+
(this.jm_o3xehbenv.jm_oxe.Get_3xXEID().IsGroupMajor()?"":"*")+"</span>");return true;};this.PrintHtml_BoxBody=function(qi_oCell,ji_Row,ji_Col)
{this.PrintHtml_Score(qi_oCell,ji_Row,ji_Col);this.PrintHtml_Clicks(qi_oCell,ji_Row,ji_Col);this.PrintHtml_Likes(qi_oCell,ji_Row,ji_Col);this.PrintHtml_Date(qi_oCell,ji_Row,ji_Col);return true;};this.PrintHtml_BoxBodyLopry=function(qi_oCell,ji_Row,ji_Col)
{return true;};this.PrintHtml_BoxBodyDemand=function(qi_oCell,ji_Row,ji_Col)
{return true;};this.PrintHtml_Score=function(qi_oCell,ji_Row,ji_Col)
{if(!this.IsValid())
return false;var jt_oebid=this.jm_o3xehbenv.jm_oxe.Get_3xEBID();var qi_oDivScore=jQuery("<div>");qi_oDivScore.attr("id","score_"+this.jm_o3xehbenv.jm_oxe.Get_3xXEID().Get_TypEntity()+"_"+
this.jm_o3xehbenv.jm_oxe.Get_3xXEID().Get_IdEntity());qi_oDivScore.attr("title","Score");qi_oDivScore.text(""+parseInt(jt_oebid?jt_oebid.Get_Score():"?",10));qi_oCell.append(qi_oDivScore);return true;};this.PrintHtml_Clicks=function(qi_oCell,ji_Row,ji_Col)
{if(!this.IsValid())
return false;var jt_oebid=this.jm_o3xehbenv.jm_oxe.Get_3xEBID();var qi_oDivClicks=jQuery("<div>");qi_oDivClicks.attr("id","clicks_"+this.jm_o3xehbenv.jm_oxe.Get_3xXEID().Get_TypEntity()+"_"+
this.jm_o3xehbenv.jm_oxe.Get_3xXEID().Get_IdEntity());qi_oDivClicks.attr("title","Clicks");qi_oDivClicks.text(jt_oebid?jt_oebid.Get_Clicks():"?");qi_oCell.append(qi_oDivClicks);return true;};this.PrintHtml_Likes=function(qi_oCell,ji_Row,ji_Col)
{if(!this.IsValid())
return false;var jt_oebid=this.jm_o3xehbenv.jm_oxe.Get_3xEBID();var qi_oDivLikes=jQuery("<div>");qi_oDivLikes.attr("id","likes_"+this.jm_o3xehbenv.jm_oxe.Get_3xXEID().Get_TypEntity()+"_"+
this.jm_o3xehbenv.jm_oxe.Get_3xXEID().Get_IdEntity());qi_oDivLikes.attr("title","Likes");qi_oCell.append(qi_oDivLikes);var qi_oSpanLikes=jQuery("<span>");qi_oSpanLikes.attr("name","fans");qi_oSpanLikes.text(jt_oebid?jt_oebid.Get_LikesTotal():"?");qi_oDivLikes.append(qi_oSpanLikes);return true;};this.PrintHtml_Date=function(qi_oCell,ji_Row,ji_Col)
{if(!this.IsValid())
return false;var jt_o3xDate=new A3xaDateTime();jt_o3xDate.Set_DateTime(this.jm_o3xehbenv.jm_oxe.Get_3xEBIS().Get_Created());if(jt_o3xDate.IsValid())
{var qi_oDivDate=jQuery("<div>");qi_oDivDate.attr("id","edate_"+this.jm_o3xehbenv.jm_oxe.Get_3xXEID().Get_TypEntity()+"_"+
this.jm_o3xehbenv.jm_oxe.Get_3xXEID().Get_IdEntity());qi_oDivDate.attr("title","Entry Date");qi_oDivDate.text(jt_o3xDate.Get_Date());qi_oCell.append(qi_oDivDate);}
return true;};this._A3xaEntity_HtmlBox_IdTag();}
function A3xaEntity_HtmlBox_Land(ji_o3xehbenv)
{A3xaEntity_HtmlBox.call(this,ji_o3xehbenv);var jt_this=this;this._A3xaEntity_HtmlBox_Land=function()
{};this.PrintHtml_BoxHeader=function(qi_oCell,ji_Row,ji_Col)
{return this._A3xaEntity_HtmlBox_Land_PrintHtml_BoxHeader(qi_oCell,ji_Row,ji_Col);};this._A3xaEntity_HtmlBox_Land_PrintHtml_BoxHeader=function(qi_oCell,ji_Row,ji_Col)
{if(!this.IsValid())
return false;var jt_oglmLand=new A3xaMgrLand();jt_oglmLand.PrintHtml_FlagGeoCountry(qi_oCell,this.jm_o3xehbenv.jm_oxe);return true;};this.PrintHtml_BoxBody=function(qi_oCell,ji_Row,ji_Col)
{return this._A3xaEntity_HtmlBox_Land_PrintHtml_BoxBody(qi_oCell,ji_Row,ji_Col);};this._A3xaEntity_HtmlBox_Land_PrintHtml_BoxBody=function(qi_oCell,ji_Row,ji_Col)
{if(!this.IsValid())
return false;var jt_oglmLand=new A3xaMgrLand();jt_oglmLand.PrintHtml_IconGeoCity(qi_oCell,this.jm_o3xehbenv.jm_oxe);var jt_ocpLand=new A3xaPanelLandIcons3(null,-1,ji_Row,ji_Col,true,jg_oe.jc_oHtml.jc_Col_Identity);jt_ocpLand.PrintHtml_Buttons(qi_oCell);jt_oglmLand.PrintHtml_IconMap(qi_oCell,this.jm_o3xehbenv.jm_oxe,ji_Row,ji_Col);return true;};this.PrintHtml_BoxBodyLopry=function(qi_oCell,ji_Row,ji_Col)
{return true;};this.PrintHtml_BoxBodyDemand=function(qi_oCell,ji_Row,ji_Col)
{if(!this.IsValid())
return false;var jt_oglmLand=new A3xaMgrLand();jt_oglmLand.PrintHtml_FlagGeoRegion(qi_oCell,this.jm_o3xehbenv.jm_oxe,true);jt_oglmLand.PrintHtml_FlagGeoState(qi_oCell,this.jm_o3xehbenv.jm_oxe,true);return true;};this._A3xaEntity_HtmlBox_Land();}
function A3xaEntity_HtmlBox_CtrlInfo(ji_o3xehbenv)
{A3xaEntity_HtmlBox.call(this,ji_o3xehbenv);var jt_this=this;this._A3xaEntity_HtmlBox_CtrlInfo=function()
{};this.PrintHtml_BoxHeader=function(qi_oCell,ji_Row,ji_Col)
{this.PrintHtml_GLMore(qi_oCell,ji_Row,ji_Col);this.PrintHtml_IconsViewBox(qi_oCell,ji_Row,ji_Col);this.PrintHtml_CategoryBox(qi_oCell,ji_Row,ji_Col);return true;};this.PrintHtml_BoxBody=function(qi_oCell,ji_Row,ji_Col)
{this.PrintHtml_ControlIconsBox_Header(qi_oCell,ji_Row,ji_Col);this.PrintHtml_ControlIconsBox_Footer(qi_oCell,ji_Row,ji_Col);this.PrintHtml_IconsAdminBox(qi_oCell,ji_Row,ji_Col);this.PrintHtml_InfoIconsBox(qi_oCell,ji_Row,ji_Col);return true;};this.PrintHtml_BoxBodyLopry=function(qi_oCell,ji_Row,ji_Col)
{return true;};this.PrintHtml_BoxBodyDemand=function(qi_oCell,ji_Row,ji_Col)
{return true;};this.PrintHtml_GLMore=function(qi_oCell,ji_Row,ji_Col)
{var jt_ociPanel=new A3xaPanelControlIcons(null,-1,ji_Row,ji_Col,true,true);var jt_oBtnGLMore=jt_ociPanel.Get_Button("GLMore");jt_oBtnGLMore.PrintHtml(qi_oCell);return true;};this.PrintHtml_IconsViewBox=function(qi_oCell,ji_Row,ji_Col)
{if(!this.IsValid())
return false;var jt_oxeidGroup=new A3xaXEID();jt_oxeidGroup.CopyFrom(this.jm_o3xehbenv.jm_oxe);if(jt_oxeidGroup.IsGroupMinor())
jt_oxeidGroup.Set_IdEntity(jt_oxeidGroup.Get_IdGroup());var jt_oxur=new A3xaXur();jt_oxur.Set_UrlParams(jg_oe.jc_oXUR.jc_XURFN_ListEntity,null,null,jg_oe.jc_oXUR.jc_QUR_QueryViewEntity,jt_oxeidGroup.Get_String(),jg_oe.jc_oXUR.jc_XURTG_Single,null,null);jt_oxur.LinkMainData(jg_oe.Get_Database());jt_oxur.LinkCommonData(jg_oe.Get_Database(),false);var jt_te=jt_oxur.Get_3xXEID().Get_TypEntity();var jt_o3xaznc=jt_oxur.Get_3xXEID().Get_3xAZNC();var jt_o3xcat=jt_oxur.Get_3xXEID().Get_3xCat();var jt_o3xmngic=jg_oe.Get_3xAppMngIcons();var jt_odfic=jt_o3xmngic.Get_DefIcons();var jt_o3xurl=jt_oxur.Get_A3xaUrl(false,true);var jt_o3xhici=jt_o3xmngic.NewSprite(jg_oe.jc_oIcons.jc_oIconSS_ViewEntity.absid);jt_o3xhici.Set_UrlLink(jt_o3xurl.Get_Url());jt_o3xhici.Set_Title(this.jm_o3xehbenv.jm_oxe.Get_LName(),jg_oe.Get_AppXUR().QUR_Get_Descr2(jg_oe.jc_oXUR.jc_QUR_QueryViewEntity,jg_oe.jc_oXUR.jc_XURTG_Single,jt_oxur.Get_3xXEID()));jt_o3xhici.Set_Options(null,false);var jt_ohButton=new A3xaSimpleButton3(jt_o3xhici);jt_ohButton.PrintHtml(qi_oCell);return true;};this.PrintHtml_CategoryBox=function(qi_oCell)
{if(!this.IsValid())
return false;var jt_oglmCat=new GLMgrCategory(jg_oe.Get_Database().Get_MainDataTable(),jg_oe.jm_Itemid);jt_oglmCat.PrintHtml_Icon(qi_oCell,this.jm_o3xehbenv.jm_oxe);return true;};this.PrintHtml_ControlIconsBox_Header=function(qi_oCell,ji_Row,ji_Col)
{return this.PrintHtml_CtrlLikes(qi_oCell,ji_Row,ji_Col);};this.PrintHtml_CtrlLikes=function(qi_oCell,ji_Row,ji_Col)
{if(!this.IsValid())
return false;var jt_bBtnLikes=true;if(jt_bBtnLikes)
{var jt_oAjaxUrlParams=null;var jt_sfn="";if(jg_oe.jm_bCanLike)
{jt_sfn="jg_oPanelControlIcons_Builder.OnClick";var jt_oxur=new A3xaXur();jt_oxur.Set_UrlParams(jg_oe.jc_oXUR.jc_XURFN_AjaxEntity,null,jg_oe.jc_oXUR.jc_sAjaxTypFans,null,this.jm_o3xehbenv.jm_oxe.Get_3xXEID().Get_String(),null,null,null);jt_oAjaxUrlParams=jt_oxur.Get_A3xaUrl(true);jt_oAjaxUrlParams.Add_UrlParam2("p_TypRelation","F");jt_oAjaxUrlParams.Add_UrlParam2("p_Op","I");jt_oAjaxUrlParams.Add_UrlParam2("p_Rating","0");}
var jt_ohBtnLikes=new A3xaEntityButton2("Like",-1,ji_Row,ji_Col,null);var jt_o3xhici=jg_oe.Get_3xAppMngIcons().NewSprite(jg_oe.jc_oIcons.jc_oIconMS_Like.absid);jt_ohBtnLikes.Set_SrcInfo4(jt_o3xhici,["Like","Me gusta","Eu gosto","Mi piace"],"Like",jt_sfn,-1,jt_oAjaxUrlParams?jt_oAjaxUrlParams.Get_UrlParams():"");var qi_oDivLikes=jQuery("<div>");qi_oDivLikes.attr("id","btnlikes_"+this.jm_o3xehbenv.jm_oxe.Get_3xXEID().Get_TypEntity()+"_"+
this.jm_o3xehbenv.jm_oxe.Get_3xXEID().Get_IdEntity());qi_oCell.append(qi_oDivLikes);jt_ohBtnLikes.PrintHtml(qi_oDivLikes);}
return true;};this.PrintHtml_ControlIconsBox_Footer=function(qi_oCell,ji_Row,ji_Col)
{return true;};this.PrintHtml_InfoIconsBox=function(qi_oCell,ji_Row,ji_Col)
{if(!this.IsValid())
return false;var jt_aTypInfo=new Array(jg_oe.jc_oEntityInfo.jc_TI_Website,jg_oe.jc_oEntityInfo.jc_TI_Facebook,jg_oe.jc_oEntityInfo.jc_TI_Person,jg_oe.jc_oEntityInfo.jc_TI_Gallery,jg_oe.jc_oEntityInfo.jc_TI_A3xaGallery,jg_oe.jc_oEntityInfo.jc_TI_Video,jg_oe.jc_oEntityInfo.jc_TI_Twitter,jg_oe.jc_oEntityInfo.jc_TI_GooglePlus,jg_oe.jc_oEntityInfo.jc_TI_Phone,jg_oe.jc_oEntityInfo.jc_TI_Skype,jg_oe.jc_oEntityInfo.jc_TI_Email,jg_oe.jc_oEntityInfo.jc_TI_Wiki,jg_oe.jc_oEntityInfo.jc_TI_WaterCloset);for(var i=0;i<jt_aTypInfo.length;i++)
{var jt_aoeifa=this.jm_o3xehbenv.jm_oxe.Get_Info(jt_aTypInfo[i],null);var jt_ogeiattr=new A3xaEntityInfo_Attributes(this.jm_o3xehbenv.jm_oxe.Get_LName(),true,ji_Row,ji_Col);jg_oe.CanLogInfo()&&jg_oe.LogInfo("jt_aoeifa: "+
(jt_aoeifa?"OK":"null"),"","A3xaEntity_PrintHtml_InfoIconsBox");var jt_ogeiset=new A3xaEntityInfoSet(this.jm_o3xehbenv.jm_oxe,jt_aoeifa,jt_ogeiattr);jt_ogeiset.PrintHtml(qi_oCell);}
return true;};this.PrintHtml_IconsAdmin_NewMajor=function(qi_oCell,ji_Row,ji_Col)
{return true;};this.PrintHtml_IconsAdminBox=function(qi_oCell,ji_Row,ji_Col)
{var jr_b=true;if(!jg_oe.jm_bCanEdit)
return jr_b;if(!this.PrintHtml_IconsAdmin_NewMajor(qi_oCell,ji_Row,ji_Col))
jr_b=false;if(!this.PrintHtml_IconAdmin(qi_oCell,jg_oe.jc_oXUR.jc_QUR_QueryNewEntity,true))
jr_b=false;if(!this.PrintHtml_IconAdmin(qi_oCell,jg_oe.jc_oXUR.jc_QUR_QueryEditEntity,false))
jr_b=false;if(!this.PrintHtml_IconAdmin(qi_oCell,jg_oe.jc_oXUR.jc_QUR_QueryDeleteEntity,false))
jr_b=false;if(!this.PrintHtml_IconInfoAdmin(qi_oCell,jg_oe.jc_oXUR.jc_QUR_QueryNewEntity,null))
jr_b=false;if(!this.PrintHtml_IconInfoAdmin(qi_oCell,jg_oe.jc_oXUR.jc_QUR_QueryEditEntity,null))
jr_b=false;return jr_b;};this.PrintHtml_IconAdmin=function(qi_oCell,ji_QUR,ji_bSecundary)
{if(!this.IsValid())
return false;if(ji_QUR==jg_oe.jc_oXUR.jc_QUR_QueryNewEntity&&ji_bSecundary&&(!this.jm_o3xehbenv.jm_oxe.Get_3xXEID().IsGroupMajor()))
return false;var jt_oUrlLink=A3xaEntity_MakeUrl_Edit_Params2(jg_oe.jc_oXUR.jc_XURFN_EditEntity,ji_QUR,this.jm_o3xehbenv.jm_oxe.Get_3xXEID(),ji_QUR==jg_oe.jc_oXUR.jc_QUR_QueryNewEntity?ji_bSecundary:null,jg_oe.jm_Itemid);if(!jt_oUrlLink)
return false;var jt_o3xmngic=jg_oe.Get_3xAppMngIcons();var jt_odfic=jt_o3xmngic.Get_DefIcons();var jt_absid=jt_o3xmngic.Get_AbsidIconAdmin(ji_QUR,ji_bSecundary,false);var jt_o3xhici=jt_o3xmngic.NewSprite(jt_absid);jt_o3xhici.Set_Dim(24,24);jt_o3xhici.Set_UrlLink(jt_oUrlLink.Get_Url());jt_o3xhici.Set_Title(this.jm_o3xehbenv.jm_oxe.Get_LName(),jg_oe.Get_AppXUR().QUR_Get_Descr2(ji_QUR,jg_oe.jc_oXUR.jc_XURTG_Single,this.jm_o3xehbenv.jm_oxe.Get_3xXEID()));jt_o3xhici.Set_Options(null,false);var jt_ohButton=new A3xaSimpleButton3(jt_o3xhici);jt_ohButton.PrintHtml(qi_oCell);return true;};this.PrintHtml_IconInfoAdmin=function(qi_oCell,ji_QUR,ji_IdFieldInfo)
{if(!this.IsValid())
return false;var jt_oUrlLink=A3xaEntity_MakeUrl_EditInfo_Params(jg_oe.jc_oXUR.jc_XURFN_EditEntityInfo,ji_QUR,ji_IdFieldInfo,this.jm_o3xehbenv.jm_oxe.Get_3xXEID().Get_TypEntity(),this.jm_o3xehbenv.jm_oxe.Get_3xXEID().Get_IdEntity(),jg_oe.jm_Itemid);if(!jt_oUrlLink)
return false;var jt_o3xmngic=jg_oe.Get_3xAppMngIcons();var jt_odfic=jt_o3xmngic.Get_DefIcons();var jt_absid=jt_o3xmngic.Get_AbsidIconAdmin(ji_QUR,null,true);var jt_o3xhici=jt_o3xmngic.NewSprite(jt_absid);jt_o3xhici.Set_Dim(24,24);jt_o3xhici.Set_UrlLink(jt_oUrlLink.Get_Url());jt_o3xhici.Set_Title(this.jm_o3xehbenv.jm_oxe.Get_LName(),jg_oe.Get_AppXUR().QUR_Get_Descr2(ji_QUR,jg_oe.jc_oXUR.jc_XURTG_Single,this.jm_o3xehbenv.jm_oxe.Get_3xXEID()));jt_o3xhici.Set_Options(null,false);var jt_ohButton=new A3xaSimpleButton3(jt_o3xhici);jt_ohButton.PrintHtml(qi_oCell);return true;};this._A3xaEntity_HtmlBox_CtrlInfo();}
function A3xaEntity_HtmlBox_Identity(ji_o3xehbenv)
{A3xaEntity_HtmlBox.call(this,ji_o3xehbenv);var jt_this=this;this._A3xaEntity_HtmlBox_Identity=function()
{};this.PrintHtml_BoxHeader=function(qi_oCell,ji_Row,ji_Col)
{if(!this.IsValid())
return false;var qt_oParent=qi_oCell;var jt_sName=(this.jm_o3xehbenv.jm_oxe.Get_LName()||"Website");var jt_xTypEntity=this.jm_o3xehbenv.jm_oxe.Get_3xXEID().Get_TypEntity();var jt_xIdEntity=this.jm_o3xehbenv.jm_oxe.Get_3xXEID().Get_IdEntity();var jt_oUrlWebsite=new A3xaUrl(this.jm_o3xehbenv.jm_oxe.Get_3xEBIS().Get_Website(),null);var jt_sUrlWebsite=jt_oUrlWebsite.Get_Url();if(jt_sUrlWebsite)
{var qt_oWebsite=jQuery("<a>",{href:jt_sUrlWebsite,title:jt_sName,target:'_blank'});if(qt_oWebsite&&qt_oWebsite.length)
{qt_oParent.append(qt_oWebsite);qt_oWebsite.click(function()
{return jg_oApp.OnClickEntity(jt_xTypEntity,jt_xIdEntity,'',0,'');});qt_oParent=null;qt_oParent=qt_oWebsite;}}
qt_oParent.append("<span style='color: #8080F0; text-shadow: 1px 1px 0px #000000;'>"+"<strong>"+jt_sName+"</strong></span>");return true;};this.PrintHtml_BoxBody=function(qi_oCell,ji_Row,ji_Col)
{return true;};this.PrintHtml_BoxBodyLopry=function(qi_oCell,ji_Row,ji_Col)
{if(!this.IsValid())
return false;var jt_oglrCategory=this.jm_o3xehbenv.jm_oxe.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_Category);var jt_oglrGeoArea=this.jm_o3xehbenv.jm_oxe.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoArea);var jt_oglrGeoRegion=this.jm_o3xehbenv.jm_oxe.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoRegion);var jt_sUrlWebsite="";if(!jt_sUrlWebsite&&this.jm_o3xehbenv.jm_oxe)
jt_sUrlWebsite=this.jm_o3xehbenv.jm_oxe.Get_3xEBIS().Get_Website();if(!jt_sUrlWebsite&&jt_oglrGeoRegion)
jt_sUrlWebsite=jt_oglrGeoRegion.Get_3xEBIS().Get_Website();if(!jt_sUrlWebsite&&jt_oglrGeoArea)
jt_sUrlWebsite=jt_oglrGeoArea.Get_3xEBIS().Get_Website();var qt_oParent=qi_oCell;var jt_xTypEntity=this.jm_o3xehbenv.jm_oxe.Get_3xXEID().Get_TypEntity();var jt_xIdEntity=this.jm_o3xehbenv.jm_oxe.Get_3xXEID().Get_IdEntity();if(jt_sUrlWebsite)
{var qt_oWebsite=jQuery("<a>",{href:jt_sUrlWebsite,title:'Website',target:'_blank'});if(qt_oWebsite&&qt_oWebsite.length)
{qt_oParent.append(qt_oWebsite);qt_oWebsite.click(function()
{return jg_oApp.OnClickEntity(jt_xTypEntity,jt_xIdEntity,jg_oe.jc_oEntityInfo.jc_TI_Image,0,'');});qt_oParent=null;qt_oParent=qt_oWebsite;}}
var jt_ogeiattrCommon=new A3xaEntityInfo_Attributes(this.jm_o3xehbenv.jm_oxe.Get_LName(),true,ji_Row,ji_Col);var jt_aoeifaMain=this.jm_o3xehbenv.jm_oxe.Get_Info(jg_oe.jc_oEntityInfo.jc_TI_Image,null);var jt_ogeiset=new A3xaEntityInfoSet(this.jm_o3xehbenv.jm_oxe,jt_aoeifaMain,jt_ogeiattrCommon);jt_ogeiset.PrintHtml(qt_oParent);if(jt_oglrGeoRegion)
{var jt_aoeifaGeoRegion=jt_oglrGeoRegion.Get_Info(jg_oe.jc_oEntityInfo.jc_TI_Image,null);var jt_ogeisetGeoRegion=new A3xaEntityInfoSet(jt_oglrGeoRegion,jt_aoeifaGeoRegion,jt_ogeiattrCommon);jt_ogeisetGeoRegion.PrintHtml(qt_oParent);}
if(jt_oglrGeoArea)
{var jt_aoeifaGeoArea=jt_oglrGeoArea.Get_Info(jg_oe.jc_oEntityInfo.jc_TI_Image,null);var jt_ogeisetGeoArea=new A3xaEntityInfoSet(jt_oglrGeoArea,jt_aoeifaGeoArea,jt_ogeiattrCommon);jt_ogeisetGeoArea.PrintHtml(qt_oParent);}
var jt_oCPLandButtonStatus={jm_Value:null};var jt_ocpLand=new A3xaPanelLandIcons3(null,-1,ji_Row,jg_oe.jc_oHtml.jc_Col_LandIcons,true,ji_Col);jt_ocpLand.InitButtonsStatus(jt_oCPLandButtonStatus.jm_Value);return true;};this.PrintHtml_BoxBodyDemand=function(qi_oCell,ji_Row,ji_Col)
{return true;};this._A3xaEntity_HtmlBox_Identity();}
function A3xaEntity_HtmlBox_Info(ji_o3xehbenv)
{A3xaEntity_HtmlBox.call(this,ji_o3xehbenv);var jt_this=this;this._A3xaEntity_HtmlBox_Info=function()
{};this.PrintHtml_BoxHeader=function(qi_oCell,ji_Row,ji_Col)
{if(!this.IsValid())
return false;var jt_sDescr=this.jm_o3xehbenv.jm_oxe.Get_LDescr();if(jt_sDescr)
qi_oCell.append("<span style='color: #C0C080; text-shadow: 1px 1px 0px #000000;'><strong>"+
jt_sDescr+"</strong></span>");return true;};this.PrintHtml_BoxBody=function(qi_oCell,ji_Row,ji_Col)
{if(!this.PrintHtml_SummaryBox_Header(qi_oCell,ji_Row,ji_Col))
return false;if(!this.PrintHtml_SummaryBox_Footer(qi_oCell,ji_Row,ji_Col))
return false;return true;};this.PrintHtml_BoxBodyLopry=function(qi_oCell,ji_Row,ji_Col)
{return true;};this.PrintHtml_BoxBodyDemand=function(qi_oCell,ji_Row,ji_Col)
{return true;};this.PrintHtml_SummaryBox_Header=function(qi_oCell,ji_Row,ji_Col)
{if(!this.IsValid())
return false;var jt_aTypInfo=new Array(jg_oe.jc_oEntityInfo.jc_TI_QueryUnifiedRequest);for(var i=0;i<jt_aTypInfo.length;i++)
{var jt_aoeifa=this.jm_o3xehbenv.jm_oxe.Get_Info(jt_aTypInfo[i],null);var jt_ogeiattr=new A3xaEntityInfo_Attributes(this.jm_o3xehbenv.jm_oxe.Get_LName(),true,ji_Row,ji_Col);var jt_ogeiset=new A3xaEntityInfoSet(this.jm_o3xehbenv.jm_oxe,jt_aoeifa,jt_ogeiattr);jt_ogeiset.PrintHtml(qi_oCell);}
return true;};this.PrintHtml_SummaryBox_Footer=function(qi_oCell,ji_Row,ji_Col)
{if(!this.IsValid())
return false;var jt_aTypInfo=new Array(jg_oe.jc_oEntityInfo.jc_TI_Note);for(var i=0;i<jt_aTypInfo.length;i++)
{var jt_aoeifa=this.jm_o3xehbenv.jm_oxe.Get_Info(jt_aTypInfo[i],null);var jt_ogeiattr=new A3xaEntityInfo_Attributes(this.jm_o3xehbenv.jm_oxe.Get_LName(),true,ji_Row,ji_Col);var jt_ogeiset=new A3xaEntityInfoSet(this.jm_o3xehbenv.jm_oxe,jt_aoeifa,jt_ogeiattr);jt_ogeiset.PrintHtml(qi_oCell);}
return true;};this._A3xaEntity_HtmlBox_Info();}
function A3xaEntity_Html(ji_oxe_NotUsed,ji_o3xehf,ji_o3xehbenv)
{this.jm_bBuild_A3xaEntity_Html=false;if(!ji_o3xehbenv)
{ji_o3xehbenv=new A3xaEntity_HtmlBoxEnv();ji_o3xehbenv.jm_o3xehf=ji_o3xehf;this.jm_bBuild_A3xaEntity_Html=true;}
A3xaEntity_HtmlBox.call(this,ji_o3xehbenv);var jt_this=this;this.Build=function()
{var jt_o3xehbox_IdTag=new A3xaEntity_HtmlBox_IdTag(this.jm_o3xehbenv);this.AddChild(jt_o3xehbox_IdTag,jg_oe.jc_oHtml.jc_Col_IdTag,true);var jt_o3xehbox_Land=new A3xaEntity_HtmlBox_Land(this.jm_o3xehbenv);this.AddChild(jt_o3xehbox_Land,jg_oe.jc_oHtml.jc_Col_LandIcons,true);var jt_o3xehbox_CtrlInfo=new A3xaEntity_HtmlBox_CtrlInfo(this.jm_o3xehbenv);this.AddChild(jt_o3xehbox_CtrlInfo,jg_oe.jc_oHtml.jc_Col_CtrlInfoIcons,true);var jt_o3xehbox_Identity=new A3xaEntity_HtmlBox_Identity(this.jm_o3xehbenv);this.AddChild(jt_o3xehbox_Identity,jg_oe.jc_oHtml.jc_Col_Identity,true);var jt_o3xehbox_Info=new A3xaEntity_HtmlBox_Info(this.jm_o3xehbenv);this.AddChild(jt_o3xehbox_Info,jg_oe.jc_oHtml.jc_Col_Info,true);return true;};this._A3xaEntity_Html=function()
{if(this.jm_bBuild_A3xaEntity_Html)
this.Build();};this.PrintHtml=function(ji_bHeader,ji_bLowPriority,ji_bOnDemand)
{if(ji_bHeader)
this.ClearHtml(true);else if(!ji_bHeader&&!ji_bLowPriority&&!ji_bOnDemand)
this.ClearHtml(false);return this._A3xaEntity_HtmlBox_PrintHtml(ji_bHeader,ji_bLowPriority,ji_bOnDemand);};this.OnClick=function(ji_TypEntity,ji_IdEntity,ji_TypInfo,ji_IdInfo,ji_CodInfo)
{var jt_oxeid=new A3xaDCEntity();jt_oxeid.Get_3xXEID().Set_GEID(ji_TypEntity,ji_IdEntity,null,null);var jt_oxur=new A3xaXur();jt_oxur.Set_UrlParams(jg_oe.jc_oXUR.jc_XURFN_AjaxEntity,null,jg_oe.jc_oXUR.jc_sAjaxTypEntity,jg_oe.jc_oXUR.jc_QUR_QueryUpdateEntity,jt_oxeid.Get_3xXEID().Get_String(),null,null,null);var jt_oUrl=jt_oxur.Get_A3xaUrl(true);var jt_sAjaxUrlParams=jt_oUrl.Get_UrlParams();jt_sAjaxUrlParams+="&p_TypInfo="+ji_TypInfo+"&p_IdInfo="+ji_IdInfo+"&p_CodInfo="+ji_CodInfo+"&p_Op="+jg_oe.jc_oXUR.jc_AjaxOp_WriteDelta+"&p_Field=Clicks"+"&p_Value=1";jg_oe.jm_oAjax2.QueueRequest(new A3xaAjaxRequest2(jt_oUrl.Get_UrlBase(),jt_sAjaxUrlParams,this));return true;};this.OnAjaxReadyFn=function(ji_ogAjaxResponse)
{var jt_xmlAjaxTypEntity=ji_ogAjaxResponse.Get_ItemElement(jg_oe.jc_oXUR.jc_sAjaxTypEntity);if(jt_xmlAjaxTypEntity)
{var jt_oxur=new A3xaXur();jt_oxur.Set_XURString(ji_ogAjaxResponse.Get_ItemValue("p3x"));jt_oxur.Set_XUDString(ji_ogAjaxResponse.Get_ItemValue("p3d"));var jt_TypEntity=jt_oxur.Get_3xXEID().Get_TypEntity();var jt_IdEntity=jt_oxur.Get_3xXEID().Get_IdEntity();var jt_TypInfo=ji_ogAjaxResponse.Get_ItemValue("TypInfo");var jt_IdInfo=ji_ogAjaxResponse.Get_ItemValue("IdInfo");var jt_CodInfo=ji_ogAjaxResponse.Get_ItemValue("CodInfo");var jt_Field=ji_ogAjaxResponse.Get_ItemValue("Field");var jt_Value=ji_ogAjaxResponse.Get_ItemValue("Value");if(jt_TypEntity&&jt_IdEntity&&jt_Field=="Clicks")
{var jt_Score=ji_ogAjaxResponse.Get_ItemValue("Score");var qt_oCounter=jQuery("#clicks_"+jt_TypEntity+"_"+jt_IdEntity);if(qt_oCounter&&qt_oCounter.length)
{qt_oCounter.html(jt_Value);}
var qt_oScore=jQuery("#score_"+jt_TypEntity+"_"+jt_IdEntity);if(qt_oScore&&qt_oScore.length)
{qt_oScore.html(jt_Score);}}}
return true;};this._A3xaEntity_Html();}
function A3xaEntity_MakeUrl_Edit_Params2(ji_FormEvent,ji_QUR,ji_ogle,ji_bSecundary,ji_Itemid)
{if(!ji_FormEvent||!ji_QUR)
return null;if(ji_QUR!=jg_oe.jc_oXUR.jc_QUR_QueryNewEntity&&ji_QUR!=jg_oe.jc_oXUR.jc_QUR_QueryEditEntity&&ji_QUR!=jg_oe.jc_oXUR.jc_QUR_QueryDeleteEntity)
return null;var jt_oxur=new A3xaXur();jt_oxur.Set_UrlParams(ji_FormEvent,null,null,ji_QUR,ji_ogle.Get_3xXEID().Get_String(),null,ji_bSecundary?jg_oe.jc_oXUR.jc_XURTG_Secundary:jg_oe.jc_oXUR.jc_XURTG_Master,null);return jt_oxur.Get_A3xaUrl();}
function A3xaEntity_MakeUrl_EditInfo_Params(ji_FormEvent,ji_QUR,ji_IdFieldInfo,ji_TypEntity,ji_IdEntity,ji_Itemid)
{if(!ji_FormEvent||!ji_QUR)
return null;if(ji_QUR!=jg_oe.jc_oXUR.jc_QUR_QueryNewEntity&&ji_QUR!=jg_oe.jc_oXUR.jc_QUR_QueryEditEntity&&ji_QUR!=jg_oe.jc_oXUR.jc_QUR_QueryDeleteEntity)
return null;var jt_oxeid=new A3xaDCEntity();jt_oxeid.Get_3xXEID().Set_GEID(ji_TypEntity,ji_IdEntity,null,null);var jt_oxur=new A3xaXur();jt_oxur.Set_UrlParams(ji_FormEvent,null,null,ji_QUR,jt_oxeid.Get_3xXEID().Get_String(),null,null,null);var jr_oUrlLink=jt_oxur.Get_A3xaUrl(false);if(ji_IdFieldInfo>0)
jr_oUrlLink.Add_UrlParam2("p_IdFieldInfo",ji_IdFieldInfo);return jr_oUrlLink;}
function GLMgrCategory(ji_bShowLabel)
{this.jm_o3xmcr=new A3xaMgrCategory_Request(ji_bShowLabel);this.Get_MgrRequestCategory=function(){return this.jm_o3xmcr;};this.jm_o3xmcs=new A3xaMgrCategory_Select(ji_bShowLabel);this.Get_MgrSelectCategory=function(){return this.jm_o3xmcs;};this.PrintHtml_Icon=function(qi_oParent,ji_oglrMain)
{if(!(qi_oParent&&qi_oParent.length&&ji_oglrMain))
return false;var jt_oglrCategory=ji_oglrMain.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_Category);if(!jt_oglrCategory)
return false;var jt_o3xcat=ji_oglrMain.Get_3xXEID().Get_3xCat();if(jt_o3xcat.IsEmpty()||!jt_oglrCategory.Get_3xEBIS().Get_Descr())
return false;var jt_oxur=new A3xaXur();jt_oxur.Set_UrlParams(jg_oe.jc_oXUR.jc_XURFN_ListEntity,null,null,jg_oe.jc_oXUR.jc_QUR_QueryViewEntity,jt_oglrCategory.Get_3xXEID().Get_String(),jg_oe.jc_oXUR.jc_XURTG_Single,"",null);var jt_o3xmngic=jg_oe.Get_3xAppMngIcons();var jt_odfic=jt_o3xmngic.Get_DefIcons();var jt_o3xurl=jt_oxur.Get_A3xaUrl();var jt_o3xhici=jt_o3xmngic.NewSprite(jt_oglrCategory.Get_3xEBIS().Get_Idsym());jt_o3xhici.Set_Dim(24,24);jt_o3xhici.Set_UrlLink(jt_o3xurl.Get_Url());jt_o3xhici.Set_Title(jt_oglrCategory.Get_LName(),jt_o3xcat.Get_Code());jt_o3xhici.Set_Options(null,false);var jt_ohButton=new A3xaSimpleButton3(jt_o3xhici);if(!jt_ohButton.PrintHtml(qi_oParent))
return false;return true;};}
function A3xaDefines_SelectCategory()
{this.jc_asSelCategory=["Highlight","Destacar","Destaque","Evidenzia"];this.jc_asALL=["*** ALL ***","*** TODOS ***","*** TUDO ***","*** TUTTI ***"];this.jc_ColorsBGHL=["FF6080","FF80A0","FFC0E0"];}
function A3xaDDItemCategory(ji_sValue,ji_sDescr)
{A3xaDDItem.call(this,ji_sValue,ji_sDescr);this.jm_Order=null;this.Get_Order=function(){return this.jm_Order;};this.Set_Order=function(ji_Order){this.jm_Order=ji_Order;return true;};this.ValueMatch=function(ji_s)
{if(!ji_s)
return!this.jm_sValue;if(this.jm_sValue==ji_s)
return true;var jt_o3xcatl=new A3xaCategoryList(this.jm_sValue);var jt_o3xcat=new A3xaCategoryCode();jt_o3xcat.Set_String(ji_s,"-");return jt_o3xcatl.Match(jt_o3xcat);};this.Add_Category=function(ji_oglr,ji_oxeidLandFilter,ji_ogldtCategory)
{if(!ji_oglr)
return false;if(!(this.jm_TreeLevel==1))
return false;var jt_te=ji_oglr.Get_3xXEID().Get_TypEntity();if(ji_oglr.Get_3xXEID().Get_3xCat().IsEmpty())
{jg_oe.LogErr("Fail","3xCat().IsEmpty","A3xaDDItemCategory.Add_Category");return false;}
jg_oe.CanLogInfo()&&jg_oe.LogInfo("Typ,Cat: "+jt_te+","+ji_oglr.Get_3xXEID().Get_3xCat().Get_String("-"),"","A3xaDDItemCategory.Add_Category");if(jt_te==jg_oe.jc_oEntity.jc_Typ_MetaSystemControl)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Skip MSC: ","","A3xaDDItemCategory.Add_Category");return true;}
var jt_oglrCategory=ji_ogldtCategory.Get_GLRecord(ji_ogldtCategory.AltKey_2_PrimaryKey(ji_ogldtCategory.BuildAltKey(ji_oglr)));if(!jt_oglrCategory)
{var jt_AltKey=ji_ogldtCategory.BuildAltKey(ji_oglr);var jt_Key=ji_ogldtCategory.AltKey_2_PrimaryKey(jt_AltKey);jg_oe.LogErr("Fail","jt_oglrCategory:K,AltK="+jt_Key+","+jt_AltKey,"A3xaDDItemCategory.Add_Category");return false;}
var jt_oglrCategoryGroup=ji_ogldtCategory.Find(function(ji_oglrCatCur)
{if(ji_oglrCatCur.Get_3xXEID().Get_3xCat().Get_Vcat())
return false;if(ji_oglrCatCur.Get_3xXEID().Get_3xCat().Get_Ucat()==jt_oglrCategory.Get_3xXEID().Get_3xCat().Get_Ucat())
return true;return false;});if(!jt_oglrCategoryGroup)
{jg_oe.LogErr("Fail","jt_oglrCategoryGroup","A3xaDDItemCategory.Add_Category");return false;}
var jt_sCat=jt_oglrCategory.Get_3xXEID().Get_3xCat().Get_String("-");var jt_sCatGroup=jt_oglrCategoryGroup.Get_3xXEID().Get_3xCat().Get_String("-");var jt_bRestricted=false;if(ji_oxeidLandFilter)
{var jt_odce=new A3xaDCEntity();jt_odce.Get_3xXEID().CopyFrom(ji_oglr);jt_odce.Get_3xXEID().Clear_GEID();jt_odce.Get_3xXEID().Get_3xCat().Clear();var jt_bMatchesLand=jt_odce.Get_3xXEID().Matches(ji_oxeidLandFilter,true);jt_bRestricted=!jt_bMatchesLand;jg_oe.CanLogInfo()&&jg_oe.LogInfo("MatchLand:"+
(jt_bMatchesLand?"Y,":"N,")+"CurEntity="+ji_oglr.Get_3xXEID().Get_String()+",Filter="+(ji_oxeidLandFilter?ji_oxeidLandFilter.Get_String():"null"),"","A3xaDDItemCategory.Add_Category");}
var jt_oddig=this.Get_Child(jt_sCatGroup);if(!jt_oddig)
{jt_oddig=new A3xaDDItemCategory();jt_oddig.Set_Key(jt_sCatGroup);jt_oddig.Set_Value(jt_sCatGroup);jt_oddig.Set_Descr(jt_oglrCategoryGroup.Get_LDescr());jt_oddig.Set_Order(jt_oglrCategoryGroup.Get_3xEBIS().Get_Order());this.Add_Child(jt_oddig);}
var jt_oddie=jt_oddig.Get_Child(jt_sCat);if(!jt_oddie)
{jt_oddie=new A3xaDDItemCategory();jt_oddie.Set_Key(jt_sCat);jt_oddie.Set_Value(jt_sCat);jt_oddie.Set_Descr(jt_oglrCategory.Get_LDescr());jt_oddie.Set_Order(jt_oglrCategory.Get_3xEBIS().Get_Order());jt_oddig.Set_Value(jt_oddig.Get_Value()+","+jt_sCat);jt_oddig.Add_Child(jt_oddie);}
jt_oddie.IncrementCounters(!jt_bRestricted);jt_oddig.IncrementCounters(!jt_bRestricted);this.IncrementCounters(!jt_bRestricted);return true;};}
function A3xaMgrCategory_Select(ji_bShowLabel)
{this.jc_o3xdef=new A3xaDefines_SelectCategory();this.jm_oDDCategoryCodeFilter=null;this.jm_oDDPairLandFilter=null;this.jm_oddiCategory=new A3xaDDItem();this.jm_oddboxCategory=new A3xaDDSelectBox(null,"Filter_Category",ji_bShowLabel?this.jc_o3xdef.jc_asSelCategory:null);this.jm_oddboxCategory.NewDDItem=function(){return new A3xaDDItemCategory();};this.jm_oddboxCategory.OnChange=function(ji_eddbox,ji_oddi)
{return jg_oApp.Get_ECPMgr().OnChangeDD_Category(ji_eddbox,ji_oddi);};this.jm_oddboxCategory.Set_ColorsBGHL(this.jc_o3xdef.jc_ColorsBGHL);this._CompareEntityOrder=function(ji_oddi_a,ji_oddi_b)
{var jt_1=1;if(!(ji_oddi_a&&ji_oddi_b))
return 0;var jt_delta=Number(ji_oddi_a.Get_Order())-Number(ji_oddi_b.Get_Order());if(jt_delta>0)
return jt_1;if(jt_delta<0)
return-jt_1;return 0;};this.PrintHtmlDD=function(qi_oParent)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Begin","","GLMgrCategory.PrintHtmlDD");return this.jm_oddboxCategory.PrintHtml(qi_oParent);};this.RefreshHtmlDD=function(ji_oDDCategoryCodeFilter,ji_oDDPairLandFilter)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("CategoryFilter:"+
(ji_oDDCategoryCodeFilter?ji_oDDCategoryCodeFilter.Get_DDValue():"null"),"","GLMgrCategory.RefreshHtmlDD");this.jm_oddboxCategory.jm_sKeySelected=(ji_oDDCategoryCodeFilter?ji_oDDCategoryCodeFilter.Get_Key():null);return this.jm_oddboxCategory.Refresh();};this.LoadDataDD=function(ji_oDDCategoryCodeFilter,ji_oDDPairLandFilter)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Begin","","GLMgrCategory.LoadDataDD");this.jm_oDDCategoryCodeFilter=ji_oDDCategoryCodeFilter;this.jm_oDDPairLandFilter=ji_oDDPairLandFilter;var jt_odb=jg_oe.Get_Database();if(!jt_odb)
return false;var jt_ogldtMain=jt_odb.Get_MainDataTable();if(!jt_ogldtMain)
return false;var jt_ogldtCategory=jt_odb.Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_Category);if(!jt_ogldtCategory)
{jg_oe.LogErr("Fail","jt_ogldtCategory","A3xaMgrCategory_Select.LoadDataDD");return false;}
var jt_oxeidLandFilter=null;if(ji_oDDPairLandFilter)
{var jt_oxeid=new A3xaDCEntity();jt_oxeid.Get_3xXEID().Set_String(ji_oDDPairLandFilter.Get_Key());jt_oxeidLandFilter=jt_oxeid.Get_3xXEID();}
var jt_oddiCategory=new A3xaDDItemCategory();jt_oddiCategory.Set_ADescr(this.jc_o3xdef.jc_asALL);var jt_aoglr=jt_ogldtMain.Get_Recordsel();var jt_nOfRows=jt_aoglr.Get_Count();for(var i=0;i<jt_nOfRows;i++)
{var jt_oglr=jt_aoglr.Get_Item_ByIndex(i);if(!jt_oddiCategory.Add_Category(jt_oglr,jt_oxeidLandFilter,jt_ogldtCategory))
{jg_oe.LogErr("Fail","jt_oddiCategory.Add_Category","A3xaMgrCategory_Select.LoadDataDD");return false;}}
jt_oddiCategory.Sort_Children(this._CompareEntityOrder,true);if(jt_nOfRows>jg_oe.jc_oHtml.jc_MaxViewRows)
{jt_oddiCategory.jm_bVisible=false;var jt_oddi1stGroup=jt_oddiCategory.Get_Child_ByIndex(0);if(jt_oddi1stGroup)
this.jm_oddboxCategory.jm_sKeySelected=jt_oddi1stGroup.Get_Key();if(!jg_oApp.Get_ECPMgr().jm_oDDCategoryCode)
jg_oApp.Get_ECPMgr().jm_oDDCategoryCode=jt_oddi1stGroup;}
else
{this.jm_oddboxCategory.jm_sKeySelected=jt_oddiCategory.Get_Key();}
this.jm_oddiCategory=jt_oddiCategory;this.jm_oddboxCategory.jm_oddiRoot=this.jm_oddiCategory;return true;};}
function A3xaDefines_RequestCategory()
{this.jc_asReqCategory=["Category","CategorÃ­a","Categoria","Categoria"];this.jc_asALL=["*** ALL ***","*** TODOS ***","*** TUDO ***","*** TUTTI ***"];this.jc_ColorsBGHL=["FF6080","FF80A0","FFC0E0"];}
function A3xaDDItemRequestCategory(ji_sKey,ji_sDescr)
{A3xaDDItem.call(this,ji_sKey,ji_sDescr);this.jm_Order=null;this.Get_Order=function(){return this.jm_Order;};this.Set_Order=function(ji_Order){this.jm_Order=ji_Order;return true;};this.ValueMatch=function(ji_s)
{if(!ji_s)
return!this.jm_sValue;if(this.jm_sValue==ji_s)
return true;var jt_o3xcatl=new A3xaCategoryList(this.jm_sValue);var jt_o3xcat=new A3xaCategoryCode();jt_o3xcat.Set_String(ji_s,"-");return jt_o3xcatl.Match(jt_o3xcat);};this.Set_ValueXUR=function(ji_odc,ji_s)
{var jt_oxur=this._MakeXUR(ji_odc);this.Set_Value((jt_oxur?"p3x="+jt_oxur.Get_XURString():"")+(ji_s?"#"+ji_s:""));return true;};this.Add_CategoryGroup=function(ji_oglr)
{if(!ji_oglr)
return false;if(!(this.jm_TreeLevel==1))
return false;var jt_o3xcat_xapp=new A3xaCategoryCode_XApp(ji_oglr.Get_3xXEID());var jt_te=ji_oglr.Get_3xXEID().Get_TypEntity();var jt_oxur=jg_oApp.Get_AppXUR().Get_3xXUR();var jt_TypGeo=jt_o3xcat_xapp.ToTypGeo();if(jt_o3xcat_xapp.IsGroup_Metasystem()||jt_o3xcat_xapp.IsGroup_Category()||jt_o3xcat_xapp.IsGroup_Topic()||(jt_o3xcat_xapp.IsGroup_Geo()&&jt_oxur&&New_A3xaAZNC_XApp(jt_oxur.Get_3xXEID()).IsBestFromBabylon()))
return false;var jt_sCatGroup=ji_oglr.Get_3xXEID().Get_3xCat().Get_String("-");var jt_oddig=this.Get_Child(jt_sCatGroup);if(!jt_oddig)
{jt_oddig=new A3xaDDItemRequestCategory();jt_oddig.Set_Key(jt_sCatGroup);jt_oddig.Set_ValueXUR(ji_oglr,jt_sCatGroup);jt_oddig.Set_Descr(ji_oglr.Get_LDescr());jt_oddig.Set_Order(ji_oglr.Get_3xEBIS().Get_Order());this.Add_Child(jt_oddig);}
jt_oddig.IncrementCounters(true);return true;};this.Add_Category=function(ji_oglr,ji_ogldtCategory)
{if(!ji_oglr)
return false;if(!(this.jm_TreeLevel==1))
return false;var jt_te=ji_oglr.Get_3xXEID().Get_TypEntity();var jt_sCat=ji_oglr.Get_3xXEID().Get_3xCat().Get_String("-");var jt_oxur=jg_oApp.Get_AppXUR().Get_3xXUR();var jt_o3xcat_xapp=new A3xaCategoryCode_XApp(ji_oglr.Get_3xXEID());var jt_TypGeo=jt_o3xcat_xapp.ToTypGeo();if(jt_TypGeo)
{var jt_xA=jt_oxur.Get_3xXEID().Get_3xAZNC().Get_A();var jt_xZ=jt_oxur.Get_3xXEID().Get_3xAZNC().Get_Z();var jt_xN=jt_oxur.Get_3xXEID().Get_3xAZNC().Get_N();var jt_xC=jt_oxur.Get_3xXEID().Get_3xAZNC().Get_C();var jt_xP=jt_oxur.Get_3xXEID().Get_3xPS().Get_P();var jt_xS=jt_oxur.Get_3xXEID().Get_3xPS().Get_S();var jt_xV_cat=ji_oglr.Get_3xXEID().Get_3xCat().Get_Vcat();var jt_xte=jt_oxur.Get_3xXEID().Get_TypEntity();var jt_xWholeCountry=(jt_xZ>="3"&&jt_xZ<="9");var jt_xWholeArea=(jt_xZ>="1"&&jt_xZ<="2");var jt_xWholeAC=(jt_xWholeArea||jt_xWholeCountry);if(jt_TypGeo==jg_oe.jc_oEntity.jc_Typ_GeoArea)
{if(jt_xA||jt_xS)
return false;}
else if(jt_TypGeo==jg_oe.jc_oEntity.jc_Typ_GeoCountry)
{if(jt_xA||jt_xP)
return false;}
else if(jt_TypGeo==jg_oe.jc_oEntity.jc_Typ_GeoCity)
{if(!jt_xN||jt_xC)
return false;}
else if(jt_TypGeo==jg_oe.jc_oEntity.jc_Typ_GeoRegion)
{if(jt_xV_cat!=jg_oe.jc_oEntity.jc_VCat_Geo_Region)
return false;if(!jt_xZ)
return false;if(jt_xWholeAC)
return false;if(jt_xN)
return false;}
else if(jt_TypGeo==jg_oe.jc_oEntity.jc_Typ_GeoState)
{if(jt_xV_cat!=jg_oe.jc_oEntity.jc_VCat_Geo_State)
return false;if(!jt_xP)
return false;if((jt_xS||jt_xC)&&jt_xte!=jg_oe.jc_oEntity.jc_Typ_GeoCountry)
return false;}}
else
{}
var jt_oglrCategoryGroup=ji_ogldtCategory.Find(function(ji_oglrCatCur)
{if(ji_oglrCatCur.Get_3xXEID().Get_3xCat().Get_Vcat())
return false;if(ji_oglrCatCur.Get_3xXEID().Get_3xCat().Get_Ucat()==ji_oglr.Get_3xXEID().Get_3xCat().Get_Ucat())
return true;return false;});if(!jt_oglrCategoryGroup)
return false;jt_sCatGroup=jt_oglrCategoryGroup.Get_3xXEID().Get_3xCat().Get_String("-");var jt_oddig=this.Get_Child(jt_sCatGroup);if(!jt_oddig)
return false;var jt_oddie=jt_oddig.Get_Child(jt_sCat);if(!jt_oddie)
{jt_oddie=new A3xaDDItemRequestCategory();jt_oddie.Set_Key(jt_sCat);jt_oddie.Set_ValueXUR(ji_oglr);jt_oddie.Set_Descr(ji_oglr.Get_LDescr());jt_oddie.Set_Order(ji_oglr.Get_3xEBIS().Get_Order());jt_oddig.Set_Value(jt_oddig.Get_Value()+","+jt_sCat);jt_oddig.Add_Child(jt_oddie);}
jt_oddie.IncrementCounters(true);jt_oddig.IncrementCounters(false);this.IncrementCounters(true);return true;};this._MakeXUR=function(ji_odc)
{var jr_oxur=new A3xaXur();jr_oxur.CopyFromXUR(jg_oApp.Get_AppXUR().Get_3xXUR());if(ji_odc)
jr_oxur.Get_3xXEID().Get_3xCat().CopyFrom(ji_odc.Get_3xXEID());else
jr_oxur.Get_3xXEID().Get_3xCat().Clear();var jt_o3xcat_xapp=new A3xaCategoryCode_XApp(jr_oxur.Get_3xXEID());var jt_TypGeo=jt_o3xcat_xapp.ToTypGeo();if(jt_TypGeo==jg_oe.jc_oEntity.jc_Typ_GeoArea)
{jr_oxur.Get_3xXEID().Set_GEID(jt_TypGeo,null,null,null);jr_oxur.Get_3xXEID().Get_3xAZNC().Clear();jr_oxur.Get_3xXEID().Get_3xPS().Clear();jr_oxur.MakeQUR(true,false);jr_oxur.jm_Single=jg_oe.jc_oXUR.jc_XURTG_Unlimited;jr_oxur.jm_SubEntity=jg_oe.jc_oXUR.jc_XURTG_Master;}
else if(jt_TypGeo==jg_oe.jc_oEntity.jc_Typ_GeoRegion)
{if(!jr_oxur.Get_3xXEID().Get_3xAZNC().Get_Z()||New_A3xaAZNC_XApp(jr_oxur.Get_3xXEID()).IsBestFromBabylon())
return null;jr_oxur.Get_3xXEID().Get_3xCat().Clear();jr_oxur.Get_3xXEID().Set_GEID(jt_TypGeo,null,null,null);jr_oxur.Get_3xXEID().Get_3xAZNC().Clear_NC();jr_oxur.Get_3xXEID().Get_3xPS().Clear();jr_oxur.MakeQUR(true,false);jr_oxur.jm_Single=jg_oe.jc_oXUR.jc_XURTG_Unlimited;jr_oxur.jm_SubEntity=jg_oe.jc_oXUR.jc_XURTG_Master;}
else if(jt_TypGeo==jg_oe.jc_oEntity.jc_Typ_GeoCity)
{if(!jr_oxur.Get_3xXEID().Get_3xAZNC().Get_Z()||New_A3xaAZNC_XApp(jr_oxur.Get_3xXEID()).IsBestFromBabylon())
return null;jr_oxur.Get_3xXEID().Get_3xCat().Clear();jr_oxur.Get_3xXEID().Set_GEID(jt_TypGeo,null,null,null);jr_oxur.Get_3xXEID().Get_3xAZNC().Clear_C();jr_oxur.Get_3xXEID().Get_3xPS().Clear();jr_oxur.MakeQUR(true,false);jr_oxur.jm_Single=jg_oe.jc_oXUR.jc_XURTG_Unlimited;jr_oxur.jm_SubEntity=jg_oe.jc_oXUR.jc_XURTG_Master;}
else if(jt_TypGeo==jg_oe.jc_oEntity.jc_Typ_GeoCountry)
{jr_oxur.Get_3xXEID().Set_GEID(jt_TypGeo,null,null,null);jr_oxur.Get_3xXEID().Get_3xAZNC().Clear();jr_oxur.Get_3xXEID().Get_3xPS().Clear();jr_oxur.MakeQUR(true,false);jr_oxur.jm_Single=jg_oe.jc_oXUR.jc_XURTG_Unlimited;jr_oxur.jm_SubEntity=jg_oe.jc_oXUR.jc_XURTG_Master;}
else if(jt_TypGeo==jg_oe.jc_oEntity.jc_Typ_GeoState)
{if(!jr_oxur.Get_3xXEID().Get_3xPS().Get_P()||New_A3xaAZNC_XApp(jr_oxur.Get_3xXEID()).IsBestFromBabylon())
return null;jr_oxur.Get_3xXEID().Set_GEID(jt_TypGeo,null,null,null);jr_oxur.Get_3xXEID().Get_3xAZNC().Clear();jr_oxur.Get_3xXEID().Get_3xPS().Clear_S();jr_oxur.MakeQUR(true,false);jr_oxur.jm_Single=jg_oe.jc_oXUR.jc_XURTG_Unlimited;jr_oxur.jm_SubEntity=jg_oe.jc_oXUR.jc_XURTG_Master;}
else
{jr_oxur.Get_3xXEID().Set_GEID(jg_oe.jc_oEntity.jc_Typ_Enterprise,null,null,null);jr_oxur.Get_3xXEID().Get_3xPS().Clear();if(New_A3xaAZNC_XApp(jr_oxur.Get_3xXEID()).IsBestFromBabylon())
{if(jr_oxur.Get_3xXEID().Get_3xCat().IsEmpty())
{jr_oxur.MakeQUR(false,false);jr_oxur.jm_Single=jg_oe.jc_oXUR.jc_XURTG_Limited;}
else
{jr_oxur.MakeQUR(true,false);jr_oxur.jm_Single=jg_oe.jc_oXUR.jc_XURTG_Unlimited;}}
else if(!jr_oxur.Get_3xXEID().Get_3xAZNC().Get_N())
{jr_oxur.MakeQUR(false,false);jr_oxur.jm_Single=jg_oe.jc_oXUR.jc_XURTG_Limited;}
else if(true)
{jr_oxur.jm_QUR=jg_oe.jc_oXUR.jc_QUR_QuerySBS;jr_oxur.jm_Single=jg_oe.jc_oXUR.jc_XURTG_Unlimited;}
jr_oxur.jm_SubEntity=jg_oe.jc_oXUR.jc_XURTG_Master;}
return jr_oxur;};}
function A3xaMgrCategory_Request(ji_bShowLabel)
{this.jc_o3xdef=new A3xaDefines_RequestCategory();this.jm_oddiRoot=null;this.jm_oddbox=null;this._A3xaMgrCategory_Request=function()
{this.jm_oddbox=new A3xaDDSelectBox(null,"RequestCategory",ji_bShowLabel?this.jc_o3xdef.jc_asReqCategory:null);this.jm_oddbox.NewDDItem=function(){return new A3xaDDItemRequestCategory();};this.jm_oddbox.OnChange=function(ji_eddbox,ji_oddi)
{var jt_sUrlParams=ji_oddi.Get_Value();jg_oe.CanLogInfo()&&jg_oe.LogInfo("url-params="+(jt_sUrlParams||""),"","A3xaMgrCategory_Request.jm_oddbox.OnChange");if(!jt_sUrlParams)
return false;var jt_asUrlParams=((jt_sUrlParams&&jt_sUrlParams.length)?jt_sUrlParams.split("#"):null);if(jt_asUrlParams&&jt_asUrlParams[0]&&jt_asUrlParams[0].substring(0,3)=="p3x")
jt_sUrlParams=jt_asUrlParams[0];return jg_oApp.Get_AppXUR().OnChange_QUR(jt_sUrlParams);};this.jm_oddbox.Set_ColorsBGHL(this.jc_o3xdef.jc_ColorsBGHL);return true;};this._CompareEntityOrder=function(ji_oddi_a,ji_oddi_b)
{var jt_1=1;if(!(ji_oddi_a&&ji_oddi_b))
return 0;var jt_delta=Number(ji_oddi_a.Get_Order())-Number(ji_oddi_b.Get_Order());if(jt_delta>0)
return jt_1;if(jt_delta<0)
return-jt_1;return 0;};this.PrintHtmlDD=function(qi_oParent)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Begin","","A3xaMgrCategory_Request.PrintHtmlDD");this.ConfigDD();if(!this.jm_oddbox.PrintHtml(qi_oParent))
return false;{if(!this.jm_oddbox.Refresh())
return false;}
return true;};this.RefreshHtmlDD=function(ji_oDDCategoryCodeFilter,ji_oDDPairLandFilter)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("CategoryFilter:"+
(ji_oDDCategoryCodeFilter?ji_oDDCategoryCodeFilter.Get_DDValue():"null"),"","A3xaMgrCategory_Request.RefreshHtmlDD");this.ConfigDD(ji_oDDCategoryCodeFilter,ji_oDDPairLandFilter);var jr_b=this.jm_oddbox.Refresh();return jr_b;};this.ConfigDD=function(ji_oDDCategoryCodeFilter,ji_oDDPairLandFilter)
{this.jm_oddbox.jm_sKeySelected=null;var jt_sxeidSelected=null;if(jg_oApp.Get_AppXUR().Get_3xXUR().Get_3xXEID()&&true)
{var jt_te=jg_oApp.Get_AppXUR().Get_3xXUR().Get_3xXEID().Get_TypEntity();var jt_o3xcat=new A3xaCategoryCode();jt_o3xcat.CopyFrom(jg_oApp.Get_AppXUR().Get_3xXUR().Get_3xXEID().Get_3xCat());if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoCity)
{if(!jt_o3xcat.Get_Ucat())
jt_o3xcat.Set_Category(jg_oe.jc_oEntity.jc_UCat_Geo,jg_oe.jc_oEntity.jc_VCat_Geo_City);}
else if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoRegion)
{if(!jt_o3xcat.Get_Ucat())
jt_o3xcat.Set_Category(jg_oe.jc_oEntity.jc_UCat_Geo,jg_oe.jc_oEntity.jc_VCat_Geo_Region);}
else if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoArea)
{if(!jt_o3xcat.Get_Ucat())
jt_o3xcat.Set_Category(jg_oe.jc_oEntity.jc_UCat_Geo,jg_oe.jc_oEntity.jc_VCat_Geo_Area);}
else if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoState)
{if(!jt_o3xcat.Get_Ucat())
jt_o3xcat.Set_Category(jg_oe.jc_oEntity.jc_UCat_Geo,jg_oe.jc_oEntity.jc_VCat_Geo_State);}
else if(jt_te==jg_oe.jc_oEntity.jc_Typ_GeoCountry)
{if(!jt_o3xcat.Get_Ucat())
jt_o3xcat.Set_Category(jg_oe.jc_oEntity.jc_UCat_Geo,jg_oe.jc_oEntity.jc_VCat_Geo_Country);}
this.jm_oddbox.jm_sKeySelected=jt_o3xcat.Get_String("-");if(ji_oDDCategoryCodeFilter&&ji_oDDCategoryCodeFilter.Get_Key())
this.jm_oddbox.jm_sKeySelected=ji_oDDCategoryCodeFilter.Get_Key();jg_oe.CanLogInfo()&&jg_oe.LogInfo("GroupFocus key:"+
this.jm_oddbox.jm_sKeyGroupFocus,"","A3xaMgrCategory_Request.ConfigDD");this.jm_oddbox.jm_bVisibleGroupFocus=false;}
this.jm_oddbox.jm_bShowCount=false;return true;};this.LoadDataDD=function(ji_oDDCategoryCodeFilter,ji_oDDPairLandFilter)
{this.ConfigDD(ji_oDDCategoryCodeFilter,ji_oDDPairLandFilter);var jt_odb=jg_oe.Get_Database();if(!jt_odb)
return false;var jt_ogldtCategory=jt_odb.Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_Category);if(!jt_ogldtCategory)
return false;var jt_oddiRequestCategory=new A3xaDDItemRequestCategory();var jt_nOfRows=jt_ogldtCategory.Get_Recordset().Get_Count();jt_oddiRequestCategory.Set_ADescr(this.jc_o3xdef.jc_asALL);jt_oddiRequestCategory.Set_ValueXUR(null);for(var i=0;i<jt_nOfRows;i++)
{var jt_oglr=jt_ogldtCategory.Get_Recordset().Get_Item_ByIndex(i);if(!jt_oglr)
continue;if(jt_oglr.Get_3xXEID().Get_3xCat().Get_Vcat())
continue;if(!jt_oddiRequestCategory.Add_CategoryGroup(jt_oglr));}
for(i=0;i<jt_nOfRows;i++)
{var jt_oglr=jt_ogldtCategory.Get_Recordset().Get_Item_ByIndex(i);if(!jt_oglr)
continue;if(!jt_oglr.Get_3xXEID().Get_3xCat().Get_Vcat())
continue;if(!jt_oddiRequestCategory.Add_Category(jt_oglr,jt_ogldtCategory));}
jt_oddiRequestCategory.Sort_Children(this._CompareEntityOrder,true);this.jm_oddiRoot=jt_oddiRequestCategory;this.jm_oddbox.jm_oddiRoot=this.jm_oddiRoot;return true;};this._A3xaMgrCategory_Request();}
var jg_aoglGoogleMap=new Array();function A3xaGoogleMap(ji_Row,ji_Col,ji_Lat,ji_Lon,ji_Zoom,ji_sTip)
{this.jm_mapconfig=null;this.jm_mapstyled=null;this.jm_varname_Googlemap=null;this.jm_Row=ji_Row;this.jm_Lat=ji_Lat;this.jm_Lon=ji_Lon;this.jm_sSuffixId="0_rbm61_"+this.jm_Row;this.jm_sUrlTwitterMapIcon="";this.jm_sUrlTuristaIcon="";this.jm_shImgGoogleMapIcon=null;this._A3xaGoogleMap=function()
{this.jm_sUrlTwitterMapIcon=jg_oe.Get_3xAppMngIcons().MakeUrlIcon_Base("media/plugin_googlemap2/site/Twitter/twitter_map_icon");this.jm_sUrlTuristaIcon=jg_oe.Get_3xAppMngIcons().MakeUrlIcon_Main(jg_oe.jc_oIcons.jc_sIcon_Turista);var jt_o3xmngic=jg_oe.Get_3xAppMngIcons();var jt_odfic=jt_o3xmngic.Get_DefIcons();var jt_o3xhici=jt_o3xmngic.NewSprite(jt_odfic.jc_oIconSS_Googlemap.absid);jt_o3xhici.Set_Dim(24,24);jt_o3xhici.Set_Title("Map","MAP");jt_o3xhici.Set_Options(null,false);var jt_ohButton=new A3xaSimpleButton3(jt_o3xhici);this.jm_shImgGoogleMapIcon=jt_ohButton.Get_Html();this.jm_varname_Googlemap="googlemap"+this.jm_sSuffixId;window[this.jm_varname_Googlemap]=null;this.jm_mapconfig={"debug":"0","show":"0","mapclass":"","loadmootools":"1","googlewebsite":"maps.google.com","align":"center","width":"400px","height":"400px","effect":"none","deflatitude":this.jm_Lat,"deflongitude":this.jm_Lon,"centerlat":"","centerlon":"","address":"","latitudeid":"","latitudedesc":"1","latitudecoord":"0","latitudeform":"0","controltype":"UI","zoomtype":"3D-large","svcontrol":"1","zoom":ji_Zoom,"corzoom":"0","minzoom":"0","maxzoom":"19","rotation":"1","zoomnew":"0","zoomwheel":"0","keyboard":"0","maptype":"Normal","showmaptype":"1","shownormalmaptype":"1","showsatellitemaptype":"1","showhybridmaptype":"1","showterrainmaptype":"1","showearthmaptype":"1","showscale":"0","overview":"0","ovzoom":"-3","navlabel":"1","dragging":"1","marker":"1","traffic":"0","transit":"0","bicycle":"0","panoramio":"popular","panotype":"none","panoorder":"popularity","panomax":"50","youtube":"none","wiki":"none","adsmanager":"0","maxads":"3","localsearch":"0","adsense":"","channel":"","googlebar":"0","searchlist":"inline","searchtarget":"_blank","searchzoompan":"1","weather":"0","weathercloud":"0","weatherinfo":"1","weathertempunit":"celsius","weatherwindunit":"km","dir":"0","dirtype":"D","avoidhighways":"0","diroptimize":"0","diralternatives":"0","showdir":"1","animdir":"0","animspeed":"1","animautostart":"0","animunit":"kilometers","formspeed":"0","formdirtype":"0","formaddress":"0","formdir":"0","autocompl":"both","txtdir":"Directions: ","txtgetdir":"Get Directions","txtfrom":"From here","txtto":"To here","txtdiraddr":"Address: ","txt_driving":"","txt_avhighways":"","txt_walking":"","txt_bicycle":"","txt_transit":"","txt_optimize":"","txt_alternatives":"","dirdefault":"0","gotoaddr":"0","gotoaddrzoom":"0","txtaddr":"Address: ##","erraddr":"Address ## not found!","clientgeotype":"google","lightbox":"1","txtlightbox":this.jm_shImgGoogleMapIcon,"lbxcaption":"","lbxwidth":"400px","lbxheight":"400px","lbxcenterlat":this.jm_Lat,"lbxcenterlon":this.jm_Lon,"lbxzoom":"","sv":"none","svwidth":"100%","svheight":"300px","svautorotate":"0","svaddress":"1","earthtimeout":"100","earthborders":"1","earthbuildings":"0","earthroads":"0","earthterrain":"0","kmlrenderer":"google","kmlsidebar":"none","kmlsbwidth":"200px","kmllightbox":"0","proxy":"1","tilelayer":"","tilemethod":"","tileopacity":"1","tilebounds":"","tileminzoom":"0","tilemaxzoom":"19","imageurl":"","imagex":"","imagey":"","imagexyunits":"pixels","imagewidth":"","imageheight":"","imageanchorx":"","imageanchory":"","imageanchorunits":"pixels","twittername":"","twittertweets":"15","twittericon":this.jm_sUrlTwitterMapIcon,"twitterline":"#ff0000ff","twitterlinewidth":"4","twitterstartloc":"0,0,0","lang":"en","mapType":"hybrid","geocoded":0,"tolat":"","tolon":"","toaddress":"","description":"","tooltip":ji_sTip,"kml":[],"kmlsb":[],"layer":[],"lookat":[],"camera":[],"msid":"","searchtext":"","latitude":this.jm_Lat,"longitude":this.jm_Lon,"waypoints":[],"mapnm":this.jm_sSuffixId,"descr":"0","geoxmloptions":{"titlestyle":" ","veryquiet":true,"quiet":true,"nozoom":true,"iwmethod":"click","sortbyname":null,"linktarget":"_self","linkmethod":"dblclick","baseicon":"A"},"markericon":[{"name":"A","imageurl":this.jm_sUrlTuristaIcon,"iconwidth":"64","iconheight":"96","iconshadow":"","iconshadowwidth":"10","iconshadowheight":"10","iconanchorx":"0","iconanchory":"0","iconimagemap":"13,0,15,1,16,2,17,3,18,4,18,5,19,6,19,7,19,8,19,9,19,10,19,11,19,12,19,13,18,14,18,15,17,16,16,17,15,18,14,19,14,20,13,21,13,22,12,23,12,24,12,25,12,26,11,27,11,28,11,29,11,30,11,31,11,32,11,33,8,33,8,32,8,31,8,30,8,29,8,28,8,27,8,26,7,25,7,24,7,23,6,22,6,21,5,20,5,19,4,18,3,17,2,16,1,15,1,14,0,13,0,12,0,11,0,10,0,9,0,8,0,7,0,6,1,5,1,4,2,3,3,2,4,1,6,0,13,0"}],"icontype":"A"};};this.PrintHtml=function(qi_oParent)
{if(!(qi_oParent&&qi_oParent.length))
return false;var jt_sh1="<a href='javascript:void(0)' onclick='javascript:MOOdalBox.open(\"googlemap"+this.jm_sSuffixId+"\", \"\", \"400px 400px\", googlemap"+this.jm_sSuffixId+".map, {mapcenter : \""+this.jm_Lat+" "+this.jm_Lon+"\"});return false;' class='lightboxlink'>"+
this.jm_shImgGoogleMapIcon+"</a>";qi_oParent.append(jt_sh1);var jt_sh2="<div id='mapbody"+this.jm_sSuffixId+"' style='display: none; text-align:center'><div id='lightbox"+this.jm_sSuffixId+"' class='maplightbox' style='display:none;text-align:center;'><div id='googlemap"+this.jm_sSuffixId+"' class='map' style='margin-right: auto; margin-left: auto; width:400px; height:400px;'></div></div></div>";qi_oParent.append(jt_sh2);window[this.jm_varname_Googlemap]=new GoogleMaps(this.jm_sSuffixId,this.jm_mapconfig,this.jm_mapstyled);return true;};this._A3xaGoogleMap();}
function A3xaMgrLand()
{this.jm_o3xmlra=null;this.jm_o3xmlrr=null;this.jm_o3xmlsp=null;this._A3xaMgrLand=function()
{this.jm_o3xmlra=new A3xaMgrLand_RequestArea(jg_oe.jc_oEntity.jc_Typ_GeoArea);this.jm_o3xmlrr=new A3xaMgrLand_RequestArea(jg_oe.jc_oEntity.jc_Typ_GeoRegion);this.jm_o3xmlsp=new A3xaMgrLand_SelectPlace();};this.Get_MgrRequestArea=function(ji_TypEntity)
{if(ji_TypEntity==jg_oe.jc_oEntity.jc_Typ_GeoArea||!ji_TypEntity)
return this.jm_o3xmlra;if(ji_TypEntity==jg_oe.jc_oEntity.jc_Typ_GeoRegion)
return this.jm_o3xmlrr;return null;};this.Get_MgrSelectPlace=function(){return this.jm_o3xmlsp;};this.PrintHtml_FlagGeoCountry=function(qi_oParent,ji_oglrMain)
{if(!(qi_oParent&&qi_oParent.length&&ji_oglrMain))
return false;var jt_oglrCategory=ji_oglrMain.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_Category);var jt_oglrGeoArea=ji_oglrMain.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoArea);var jt_oglrGeoRegion=ji_oglrMain.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoRegion);var jt_oglrGeoCity=ji_oglrMain.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoCity);var jt_oglrGeoCountry=ji_oglrMain.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoCountry);var jt_oglrGeoState=ji_oglrMain.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoState);if(jt_oglrGeoCountry)
{var jt_oxur=new A3xaXur();jt_oxur.Set_UrlParams(jg_oe.jc_oXUR.jc_XURFN_ListEntity,null,null,jg_oe.jc_oXUR.jc_QUR_QueryViewEntity,null,jg_oe.jc_oXUR.jc_XURTG_Single,"",null);jt_oxur.CopyFrom(jt_oglrGeoCountry,true,true,false,false);var jt_o3xmngic=jg_oe.Get_3xAppMngIcons();var jt_odfic=jt_o3xmngic.Get_DefIcons();var jt_o3xurl=jt_oxur.Get_A3xaUrl(false,true);var jt_o3xhici=jt_o3xmngic.NewSprite(jt_oglrGeoCountry.Get_3xEBIS().Get_Idsym());jt_o3xhici.Set_Dim(24,16);jt_o3xhici.Set_UrlLink(jt_o3xurl.Get_Url());jt_o3xhici.Set_Title(jt_oglrGeoCountry.Get_LName(),jt_oglrGeoCountry.Get_3xXEID().Get_3xPS().Get_P());jt_o3xhici.Set_Options(null,false);var jt_ohButton=new A3xaSimpleButton3(jt_o3xhici);if(!jt_ohButton.PrintHtml(qi_oParent))
return false;}
return true;};this.PrintHtml_FlagGeoState=function(qi_oParent,ji_oglrMain,ji_bPrepend)
{if(!(qi_oParent&&qi_oParent.length&&ji_oglrMain))
return false;var jt_oglrCategory=ji_oglrMain.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_Category);var jt_oglrGeoArea=ji_oglrMain.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoArea);var jt_oglrGeoRegion=ji_oglrMain.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoRegion);var jt_oglrGeoCity=ji_oglrMain.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoCity);var jt_oglrGeoCountry=ji_oglrMain.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoCountry);var jt_oglrGeoState=ji_oglrMain.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoState);if(jt_oglrGeoState)
{var jt_oxur=new A3xaXur();jt_oxur.Set_UrlParams(jg_oe.jc_oXUR.jc_XURFN_ListEntity,null,null,jg_oe.jc_oXUR.jc_QUR_QueryViewEntity,null,jg_oe.jc_oXUR.jc_XURTG_Single,"",null);jt_oxur.CopyFrom(jt_oglrGeoState,true,true,false,false);jt_oxur.LinkCommonData(jg_oe.Get_Database(),true);var jt_o3xmngic=jg_oe.Get_3xAppMngIcons();var jt_odfic=jt_o3xmngic.Get_DefIcons();var jt_o3xurl=jt_oxur.Get_A3xaUrl(false,true);var jt_o3xhici=jt_o3xmngic.NewSprite(jt_oglrGeoState.Get_3xEBIS().Get_Idsym());jt_o3xhici.Set_Dim(24,16);jt_o3xhici.Set_UrlLink(jt_o3xurl.Get_Url());jt_o3xhici.Set_Title(jt_oglrGeoState.Get_LName()+" ("+jt_oglrGeoState.Get_3xXEID().Get_3xPS().Get_P()+")",jt_oglrGeoState.Get_3xXEID().Get_3xPS().Get_S()+"("+jt_oglrGeoState.Get_3xXEID().Get_3xPS().Get_P()+")");jt_o3xhici.Set_Options(null,false);var jt_ohButton=new A3xaSimpleButton3(jt_o3xhici);if(!jt_ohButton.PrintHtml(qi_oParent,ji_bPrepend))
return false;}
return true;};this.PrintHtml_FlagGeoRegion=function(qi_oParent,ji_oglrMain,ji_bPrepend)
{if(!(qi_oParent&&qi_oParent.length&&ji_oglrMain))
return false;var jt_oglrCategory=ji_oglrMain.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_Category);var jt_oglrGeoArea=ji_oglrMain.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoArea);var jt_oglrGeoRegion=ji_oglrMain.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoRegion);var jt_oglrGeoCity=ji_oglrMain.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoCity);var jt_oglrGeoCountry=ji_oglrMain.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoCountry);var jt_oglrGeoState=ji_oglrMain.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoState);if(jt_oglrGeoRegion&&jt_oglrGeoArea)
{var jt_oxur=new A3xaXur();jt_oxur.Set_UrlParams(jg_oe.jc_oXUR.jc_XURFN_ListEntity,null,null,jg_oe.jc_oXUR.jc_QUR_QueryViewEntity,null,jg_oe.jc_oXUR.jc_XURTG_Single,"",null);jt_oxur.CopyFrom(jt_oglrGeoRegion,true,true,false,false);jt_oxur.LinkCommonData(jg_oe.Get_Database(),true);var jt_flagCode=A3xaToString(jt_oglrGeoArea.Get_3xXEID().Get_3xAZNC().Get_A())+
A3xaToString(jt_oglrGeoArea.Get_3xXEID().Get_3xAZNC().Get_Z());var jt_shortdescr=jt_oglrGeoRegion.Get_3xXEID().Get_3xAZNC().Get_N()+"("+jt_flagCode+")";var jt_o3xmngic=jg_oe.Get_3xAppMngIcons();var jt_odfic=jt_o3xmngic.Get_DefIcons();var jt_o3xurl=jt_oxur.Get_A3xaUrl(false,true);var jt_o3xhici=jt_o3xmngic.NewSprite(jt_oglrGeoArea.Get_3xEBIS().Get_Idsym());jt_o3xhici.Set_Dim(24,16);jt_o3xhici.Set_UrlLink(jt_o3xurl.Get_Url());jt_o3xhici.Set_Title(jt_oglrGeoRegion.Get_LName()+", "+jt_oglrGeoArea.Get_LName(),jt_shortdescr);jt_o3xhici.Set_Options(null,false);var jt_ohButton=new A3xaSimpleButton3(jt_o3xhici);if(!jt_ohButton.PrintHtml(qi_oParent,ji_bPrepend))
return false;}
return true;};this.PrintHtml_IconGeoCity=function(qi_oParent,ji_oglrMain)
{if(!(qi_oParent&&qi_oParent.length&&ji_oglrMain))
return false;var jt_oglrCategory=ji_oglrMain.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_Category);var jt_oglrGeoArea=ji_oglrMain.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoArea);var jt_oglrGeoRegion=ji_oglrMain.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoRegion);var jt_oglrGeoCity=ji_oglrMain.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoCity);var jt_oglrGeoCountry=ji_oglrMain.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoCountry);var jt_oglrGeoState=ji_oglrMain.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoState);if(jt_oglrGeoCity)
{var jt_oxur=new A3xaXur();jt_oxur.Set_UrlParams(jg_oe.jc_oXUR.jc_XURFN_ListEntity,null,null,jg_oe.jc_oXUR.jc_QUR_QueryViewEntity,null,jg_oe.jc_oXUR.jc_XURTG_Single,"",null);jt_oxur.CopyFrom(jt_oglrGeoCity,true,true,false,false);jt_oxur.LinkCommonData(jg_oe.Get_Database(),true);var jt_o3xcat_Category_Geo_City=new A3xaCategoryCode();jt_o3xcat_Category_Geo_City.Set_Category(jg_oe.jc_oEntity.jc_UCat_Geo,jg_oe.jc_oEntity.jc_VCat_Geo_City);var jt_o3xmngic=jg_oe.Get_3xAppMngIcons();var jt_odfic=jt_o3xmngic.Get_DefIcons();var jt_o3xurl=jt_oxur.Get_A3xaUrl(false,true);var jt_o3xhici=jt_o3xmngic.NewSprite(jt_odfic.jc_oIconCat_City.absid);jt_o3xhici.Set_Dim(24,24);jt_o3xhici.Set_UrlLink(jt_o3xurl.Get_Url());jt_o3xhici.Set_Title(jt_oglrGeoCity.Get_LName(),"CTY");jt_o3xhici.Set_Options(null,false);var jt_ohButton=new A3xaSimpleButton3(jt_o3xhici);if(!jt_ohButton.PrintHtml(qi_oParent))
return false;}
return true;};this.PrintHtml_IconMap=function(qi_oParent,ji_oglrMain,ji_Row,ji_Col)
{if(!(qi_oParent&&qi_oParent.length&&ji_oglrMain))
return false;var jt_oglrCategory=ji_oglrMain.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_Category);var jt_oglrGeoArea=ji_oglrMain.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoArea);var jt_oglrGeoRegion=ji_oglrMain.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoRegion);var jt_oglrGeoCity=ji_oglrMain.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoCity);var jt_oglrGeoCountry=ji_oglrMain.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoCountry);var jt_oglrGeoState=ji_oglrMain.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoState);var jt_Lat=0.0;var jt_Lon=0.0;var jt_Zoom=4;var jt_sTip="location";if(jt_oglrGeoCity)
{jt_Lat=jt_oglrGeoCity.Get_3xEBIS().Get_Lat();jt_Lon=jt_oglrGeoCity.Get_3xEBIS().Get_Lon();jt_sTip=jt_oglrGeoCity.Get_LName();jt_Zoom=12;}
else if(jt_oglrGeoRegion)
{jt_Lat=jt_oglrGeoRegion.Get_3xEBIS().Get_Lat();jt_Lon=jt_oglrGeoRegion.Get_3xEBIS().Get_Lon();jt_sTip=jt_oglrGeoRegion.Get_LName();jt_Zoom=8;}
else if(jt_oglrGeoArea)
{jt_Lat=jt_oglrGeoArea.Get_3xEBIS().Get_Lat();jt_Lon=jt_oglrGeoArea.Get_3xEBIS().Get_Lon();jt_sTip=jt_oglrGeoArea.Get_LName();jt_Zoom=4;}
var jt_oglGoogleMap=new A3xaGoogleMap(ji_Row,ji_Col,jt_Lat,jt_Lon,jt_Zoom,jt_sTip);jg_aoglGoogleMap.push(jt_oglGoogleMap);jt_oglGoogleMap.PrintHtml(qi_oParent);return true;};this._A3xaMgrLand();}
function A3xaDefines_LandSelectPlace()
{this.jc_asSelPlace=["Highlight place and category","Destacar lugar y categoria","Destaque lugar e categoria","Evidenzia luogo e categoria"];this.jc_asALL=["*** ALL ***","*** TODOS ***","*** TUDO ***","*** TUTTI ***"];this.jc_ColorsBGHL=["FFFF80","FFFF80","FFFFC0"];}
function A3xaDDItemEntity(ji_sKey,ji_sDescr)
{A3xaDDItem.call(this,ji_sKey,ji_sDescr);this.jm_bAZNC=true;this.jm_bPS=false;this.jm_odce=null;this.Set_DCEntity=function(ji_odce)
{this.jm_odce=ji_odce;if(this.jm_odce)
{this.Set_Key(this.jm_odce.Get_3xXEID().Get_String());this.Set_Value(this.jm_odce.Get_3xXEID().Get_String());}
return true;};this.Add_Place=function(ji_oglr,ji_oDDCategoryCodeFilter,ji_ogldtArea,ji_ogldtRegion,ji_ogldtCity)
{if(!ji_oglr)
return false;if(!(this.jm_TreeLevel==1))
return false;var jt_te=ji_oglr.Get_3xXEID().Get_TypEntity();var jt_o3xcat=ji_oglr.Get_3xXEID().Get_3xCat();var jt_C=ji_oglr.Get_3xXEID().Get_3xAZNC().Get_C();jg_oe.CanLogInfo()&&jg_oe.LogInfo("Typ,Cat: "+jt_te+","+jt_o3xcat.Get_String(),"","A3xaDDItemEntity.Add_Place");if(jt_te==jg_oe.jc_oEntity.jc_Typ_MetaSystemControl)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Skip MSC: ","","A3xaDDItemEntity.Add_Place");return true;}
var jt_bRestricted=false;if(ji_oDDCategoryCodeFilter&&ji_oDDCategoryCodeFilter.Get_Value()&&!ji_oDDCategoryCodeFilter.ValueMatch(jt_o3xcat.Get_String("-")))
jt_bRestricted=true;var jt_Order=Number(0);var jt_oglRecord_A=null;if(ji_ogldtArea)
jt_oglRecord_A=ji_ogldtArea.Get_GLRecord(ji_ogldtArea.AltKey_2_PrimaryKey(ji_ogldtArea.BuildAltKey(ji_oglr)));if(jt_oglRecord_A)
jt_Order=Number(jt_oglRecord_A.Get_3xEBIS().Get_Order())*10;var jt_oglRecord_R=null;if(ji_ogldtRegion)
jt_oglRecord_R=ji_ogldtRegion.Get_GLRecord(ji_ogldtRegion.AltKey_2_PrimaryKey(ji_ogldtRegion.BuildAltKey(ji_oglr)));if(jt_oglRecord_R)
jt_Order+=Number(jt_oglRecord_R.Get_3xEBIS().Get_Order());var jt_oddigNew=new A3xaDDItemEntity();var jt_odceg=new A3xaDCEntity();jt_odceg.Get_3xXEID().CopyFrom(ji_oglr);jt_odceg.Get_3xXEID().Clear_GEID();jt_odceg.Get_3xXEID().Get_3xCat().Clear();jt_odceg.Get_3xXEID().Get_3xAZNC().Clear_C();jt_odceg.Get_3xXEID().Get_3xPS().Clear();if(jt_oglRecord_A)
jt_odceg.Get_3xEBIS().Set_Order(jt_Order);jt_oddigNew.Set_DCEntity(jt_odceg);if(jt_oddigNew.IsEmpty())
return false;if(jt_odceg.Get_3xXEID().Get_3xAZNC().Get_Z())
{var jt_oddig=this.Get_Child(jt_oddigNew.Get_Key());if(!jt_oddig)
{jt_oddigNew.BuildDescr(ji_ogldtArea,ji_ogldtRegion,null);jt_oddig=jt_oddigNew;this.Add_Child(jt_oddigNew);}
if(jt_odceg.Get_3xXEID().Get_3xAZNC().Get_N()&&jt_C)
{var jt_oddieNew=new A3xaDDItemEntity();var jt_odce=new A3xaDCEntity();jt_odce.Get_3xXEID().CopyFrom(ji_oglr);jt_odce.Get_3xXEID().Clear_GEID();jt_odce.Get_3xXEID().Get_3xCat().Clear();jt_odce.Get_3xXEID().Get_3xPS().Clear();jt_oddieNew.Set_DCEntity(jt_odce);if(jt_oddieNew.IsEmpty())
return false;var jt_oddie=jt_oddig.Get_Child(jt_oddieNew.Get_Key());if(!jt_oddie)
{jt_oddieNew.BuildDescr(null,null,ji_ogldtCity);jt_oddie=jt_oddieNew;jt_oddig.Add_Child(jt_oddieNew);}
jt_oddie.IncrementCounters(!jt_bRestricted);}
jt_oddig.IncrementCounters(!jt_bRestricted);}
this.IncrementCounters(!jt_bRestricted);return true;};this.BuildDescr=function(ji_ogldtArea,ji_ogldtRegion,ji_ogldtCity)
{var jt_oglRecord_A=null;var jt_oglRecord_R=null;var jt_oglRecord_C=null;if(ji_ogldtArea)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("GLDDEntity_BuildDescr,Name: "+
ji_ogldtArea.Get_Recordset().Get_Item_ByIndex(0));jg_oe.CanLogInfo()&&jg_oe.LogInfo("GLDDEntity_BuildDescr,BuildAltKey: "+
ji_ogldtArea.Get_Recordset().Get_Count()+"--"+ji_ogldtArea.BuildAltKey(this.jm_odce));jg_oe.CanLogInfo()&&jg_oe.LogInfo("GLDDEntity_BuildDescr,AltKey_2_PrimaryKey: "+
ji_ogldtArea.AltKey_2_PrimaryKey(ji_ogldtArea.BuildAltKey(this.jm_odce)));jt_oglRecord_A=ji_ogldtArea.Get_GLRecord(ji_ogldtArea.AltKey_2_PrimaryKey(ji_ogldtArea.BuildAltKey(this.jm_odce)));jg_oe.CanLogInfo()&&jg_oe.LogInfo("GLDDEntity_BuildDescr,Get_GLRecord: "+
(jt_oglRecord_A?jt_oglRecord_A.Get_LName():"A=NULL"));}
if(ji_ogldtRegion)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("GLDDEntity_BuildDescr,Name: "+
ji_ogldtRegion.Get_Recordset().Get_Item_ByIndex(0));jg_oe.CanLogInfo()&&jg_oe.LogInfo("GLDDEntity_BuildDescr,BuildAltKey: "+
ji_ogldtRegion.Get_Recordset().Get_Count()+"--"+ji_ogldtRegion.BuildAltKey(this.jm_odce));jg_oe.CanLogInfo()&&jg_oe.LogInfo("GLDDEntity_BuildDescr,AltKey_2_PrimaryKey: "+
ji_ogldtRegion.AltKey_2_PrimaryKey(ji_ogldtRegion.BuildAltKey(this.jm_odce)));jt_oglRecord_R=ji_ogldtRegion.Get_GLRecord(ji_ogldtRegion.AltKey_2_PrimaryKey(ji_ogldtRegion.BuildAltKey(this.jm_odce)));jg_oe.CanLogInfo()&&jg_oe.LogInfo("GLDDEntity_BuildDescr,Get_GLRecord: "+
(jt_oglRecord_R?jt_oglRecord_R.Get_LName():"R=NULL"));}
if(ji_ogldtCity)
jt_oglRecord_C=ji_ogldtCity.Get_GLRecord(ji_ogldtCity.AltKey_2_PrimaryKey(ji_ogldtCity.BuildAltKey(this.jm_odce)));var jt_sCity=(jt_oglRecord_C?jt_oglRecord_C.Get_LName():"");var jt_sArea=(jt_oglRecord_A?jt_oglRecord_A.Get_LName():"");var jt_sRegion=(jt_oglRecord_R?jt_oglRecord_R.Get_LName():"");var jt_sDescr="";if(jt_sCity)
jt_sDescr=jt_sCity;if(jt_sRegion)
jt_sDescr+=(jt_sDescr?" - ":"")+jt_sRegion;if(jt_sArea)
jt_sDescr+=(jt_sDescr?" - ":"")+jt_sArea;this.Set_Descr(jt_sDescr);return true;};}
function A3xaMgrLand_SelectPlace()
{this.jc_o3xdef=new A3xaDefines_LandSelectPlace();this.jm_oDDCategoryCodeFilter=null;this.jm_oDDPairLandFilter=null;this.jm_oddiLand=new A3xaDDItem();this.jm_oddboxLand=new A3xaDDSelectBox(null,"Filter_City",this.jc_o3xdef.jc_asSelPlace);this.jm_oddboxLand.NewDDItem=function(){return new A3xaDDItemEntity();};this.jm_oddboxLand.OnChange=function(ji_eddbox,ji_oddi)
{return jg_oApp.Get_ECPMgr().OnChangeDD_City(ji_eddbox,ji_oddi);};this.jm_oddboxLand.Set_ColorsBGHL(this.jc_o3xdef.jc_ColorsBGHL);this.Get_DDSelected=function()
{return this.jm_oddboxLand.Get_DDItemUpdated(this.jm_oDDPairLandFilter);};this._CompareEntityOrder=function(ji_oddi_a,ji_oddi_b)
{var jt_1=1;if(!(ji_oddi_a&&ji_oddi_b))
return 0;var jt_o3xdce_a=ji_oddi_a.jm_odce;var jt_o3xdce_b=ji_oddi_b.jm_odce;if(!(jt_o3xdce_a&&jt_o3xdce_b))
return 0;var jt_oebis_a=jt_o3xdce_a.Get_3xEBIS();var jt_oebis_b=jt_o3xdce_b.Get_3xEBIS();if(!(jt_oebis_a&&jt_oebis_b))
return 0;var jt_delta=Number(jt_oebis_a.Get_Order())-Number(jt_oebis_b.Get_Order());if(jt_delta>0)
return jt_1;if(jt_delta<0)
return-jt_1;return 0;};this.PrintHtmlDD=function(qi_oParent,ji_oDDCategoryCodeFilter,ji_oDDPairLandFilter)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Begin","","GLMgrLand_PrintHtmlDD");this.jm_oddboxLand.jm_sKeySelected=(ji_oDDPairLandFilter?ji_oDDPairLandFilter.Get_Key():null);var jr_b=this.jm_oddboxLand.PrintHtml(qi_oParent);return jr_b;};this.RefreshHtmlDD=function(ji_oDDCategoryCodeFilter,ji_oDDPairLandFilter)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("CategoryFilter:"+
(ji_oDDCategoryCodeFilter?ji_oDDCategoryCodeFilter.Get_DDValue():"null"),"","GLMgrLand_RefreshHtmlDD");this.jm_oddboxLand.jm_sKeySelected=(ji_oDDPairLandFilter?ji_oDDPairLandFilter.Get_Key():null);return this.jm_oddboxLand.Refresh();};this.LoadDataDD=function(ji_oDDCategoryCodeFilter,ji_oDDPairLandFilter)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Begin, catfilter"+
(ji_oDDCategoryCodeFilter?ji_oDDCategoryCodeFilter.Get_DDValue():"null"),"","GLMgrLand_LoadData");this.jm_oDDPairLandFilter=ji_oDDPairLandFilter;var jt_odb=jg_oe.Get_Database();if(!jt_odb)
return false;var jt_ogldtMain=jt_odb.Get_MainDataTable();if(!jt_ogldtMain)
return false;var jt_ogldtCategory=jt_odb.Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_Category);if(!jt_ogldtCategory)
return false;var jt_ogldtArea=jt_odb.Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_GeoArea);if(!jt_ogldtArea)
return false;var jt_ogldtRegion=jt_odb.Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_GeoRegion);var jt_ogldtCity=jt_odb.Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_GeoCity);var jt_oddiLand=new A3xaDDItemEntity();jt_oddiLand.Set_ADescr(this.jc_o3xdef.jc_asALL);var jt_aoglr=jt_ogldtMain.Get_Recordsel();var jt_nOfRows=jt_aoglr.Get_Count();for(var i=0;i<jt_nOfRows;i++)
{var jt_oglr=jt_aoglr.Get_Item_ByIndex(i);if(!jt_oddiLand.Add_Place(jt_oglr,ji_oDDCategoryCodeFilter,jt_ogldtArea,jt_ogldtRegion,jt_ogldtCity))
return false;}
jt_oddiLand.Sort_Children(this._CompareEntityOrder,false);this.jm_oddiLand=jt_oddiLand;this.jm_oddboxLand.jm_oddiRoot=this.jm_oddiLand;return true;};}
function A3xaDefines_RequestArea()
{this.jc_asReqArea=["Area, Region, Category","Area, Region, CategorÃ­a","Ãrea, RegiÃ£o, Categoria","Area, Regione, Categoria"];this.jc_asALL=["*** ALL ***","*** TODOS ***","*** TUDO ***","*** TUTTI ***"];this.jc_ColorsBGHL=["80FF80","80FF80","C0FFC0"];}
function A3xaDDItemRequestArea(ji_sKey,ji_sDescr)
{A3xaDDItem.call(this,ji_sKey,ji_sDescr);this.jm_odce=null;this.Set_DCEntity=function(ji_odce)
{this.jm_odce=ji_odce;if(this.jm_odce)
{var jt_sxeid=this.jm_odce.Get_3xXEID().Get_String();this.jm_odce.Get_3xXEID().Set_TypEntity(jg_oe.jc_oEntity.jc_Typ_Enterprise);var jt_sxeidQUR=this.jm_odce.Get_3xXEID().Get_String();this.Set_Key(jt_sxeid);var jt_oxur=new A3xaXur();if(this.jm_odce.Get_3xXEID().Get_3xAZNC().Get_N())
{jt_oxur.Set_UrlParams(null,null,null,jg_oe.jc_oXUR.jc_QUR_QuerySBS,jt_sxeidQUR,jg_oe.jc_oXUR.jc_XURTG_Unlimited,null,null);this.Set_Value("p3x="+jt_oxur.Get_XURString());}
else if(this.jm_odce.Get_3xXEID().Get_3xAZNC().Get_Z())
{jt_oxur.Set_UrlParams(null,null,null,jg_oe.jc_oXUR.jc_QUR_QuerySBS,jt_sxeidQUR,jg_oe.jc_oXUR.jc_XURTG_Limited,null,null);this.Set_Value("p3x="+jt_oxur.Get_XURString());}
else if(this.jm_odce.Get_3xXEID().Get_3xAZNC().Get_A())
{this.jm_bOnChange=false;jt_oxur.Set_UrlParams(null,null,null,jg_oe.jc_oXUR.jc_QUR_QuerySBS,jt_sxeidQUR,jg_oe.jc_oXUR.jc_XURTG_Limited,null,null);this.Set_Value("p3x="+jt_oxur.Get_XURString());}
else
{jt_oxur.Set_UrlParams(null,null,null,jg_oe.jc_oXUR.jc_QUR_QuerySBS,jt_sxeidQUR,jg_oe.jc_oXUR.jc_XURTG_Limited,null,null);this.Set_Value("p3x="+jt_oxur.Get_XURString());}}
return true;};this.Add_TopArea=function(ji_oglrTopArea)
{if(!ji_oglrTopArea)
return false;if(!(this.jm_TreeLevel==1))
return false;var jt_te=ji_oglrTopArea.Get_3xXEID().Get_TypEntity();var jt_oddigNew=new A3xaDDItemRequestArea();var jt_odceg=new A3xaDCEntity();jt_odceg.Get_3xXEID().CopyFrom(ji_oglrTopArea);jt_odceg.Get_3xXEID().Clear_GEID();jt_odceg.Get_3xXEID().Get_3xCat().Clear();jt_odceg.Get_3xXEID().Get_3xAZNC().Clear_ZNC();jt_odceg.Get_3xXEID().Get_3xPS().Clear();var jt_odcTopA=New_A3xaAZNC_XApp(jt_odceg.Get_3xXEID()).TopAreaTo3xDCEntity();jt_odceg.Copy3xsNameFrom(jt_odcTopA);jt_odceg.Get_3xEBIS().CopyFrom(jt_odcTopA.Get_3xEBIS());jt_oddigNew.Set_DCEntity(jt_odceg);if(jt_oddigNew.IsEmpty())
return false;var jt_oddig=this.Get_Child(jt_oddigNew.Get_Key());if(!jt_oddig)
{jt_oddigNew.Set_Descr(New_A3xaAZNC_XApp(jt_odceg.Get_3xXEID()).TopAreaToName2());jt_oddig=jt_oddigNew;this.Add_Child(jt_oddigNew);}
jt_oddig.IncrementCounters(false);return true;};this.Add_Area=function(ji_oglrArea)
{if(!ji_oglrArea)
return false;if(!(this.jm_TreeLevel==1))
return false;var jt_te=ji_oglrArea.Get_3xXEID().Get_TypEntity();var jt_odceg=new A3xaDCEntity();jt_odceg.Get_3xXEID().CopyFrom(ji_oglrArea);jt_odceg.Get_3xXEID().Clear_GEID();jt_odceg.Get_3xXEID().Get_3xCat().Clear();jt_odceg.Get_3xXEID().Get_3xAZNC().Clear_ZNC();jt_odceg.Get_3xXEID().Get_3xPS().Clear();var jt_oddig=this.Get_Child(jt_odceg.Get_3xXEID().Get_String());if(jt_oddig)
{var jt_oddirNew=new A3xaDDItemRequestArea();var jt_odcer=new A3xaDCEntity();jt_odcer.Get_3xXEID().CopyFrom(ji_oglrArea);jt_odcer.Get_3xXEID().Clear_GEID();jt_odcer.Get_3xXEID().Get_3xCat().Clear();jt_odcer.Get_3xXEID().Get_3xAZNC().Clear_NC();jt_odcer.Get_3xXEID().Get_3xPS().Clear();jt_odcer.Get_3xEBIS().Set_Order(ji_oglrArea.Get_3xEBIS().Get_Order());jt_oddirNew.Set_DCEntity(jt_odcer);if(jt_oddirNew.IsEmpty())
return false;jt_oddirNew.Set_Descr(ji_oglrArea.Get_LName());jt_oddig.Add_Child(jt_oddirNew);jt_oddirNew.IncrementCounters(true);jt_oddig.IncrementCounters(false);}
this.IncrementCounters(true);return true;};this.Add_Region=function(ji_oglrRegion)
{if(!ji_oglrRegion)
return false;if(!(this.jm_TreeLevel==1))
return false;var jt_te=ji_oglrRegion.Get_3xXEID().Get_TypEntity();var jt_oddirNew=new A3xaDDItemRequestArea();var jt_odcer=new A3xaDCEntity();jt_odcer.Get_3xXEID().CopyFrom(ji_oglrRegion);jt_odcer.Get_3xXEID().Clear_GEID();jt_odcer.Get_3xXEID().Get_3xCat().Clear();jt_odcer.Get_3xXEID().Get_3xAZNC().Clear_C();jt_odcer.Get_3xXEID().Get_3xPS().Clear();jt_odcer.Get_3xEBIS().Set_Order(ji_oglrRegion.Get_3xEBIS().Get_Order());jt_oddirNew.Set_DCEntity(jt_odcer);if(jt_oddirNew.IsEmpty())
return false;jt_oddirNew.Set_Descr(ji_oglrRegion.Get_LName());this.Add_Child(jt_oddirNew);var jt_odtExtH=null;if(jt_odcer.Get_3xXEID().Get_3xAZNC().Get_N())
jt_odtExtH=jg_oApp.Get_Database().Get_MainDataTable(jt_odcer.Get_3xXEID().Get_3xAZNC().Get_A(),jt_odcer.Get_3xXEID().Get_3xAZNC().Get_Z(),jt_odcer.Get_3xXEID().Get_3xAZNC().Get_N());jt_oddirNew.IncrementCounters(jt_odtExtH?true:false);this.IncrementCounters(true);return true;};this.Add_City=function(ji_oglrCity)
{if(!ji_oglrCity)
return false;if(!(this.jm_TreeLevel==1))
return false;var jt_te=ji_oglrCity.Get_3xXEID().Get_TypEntity();var jt_odceg=new A3xaDCEntity();jt_odceg.Get_3xXEID().CopyFrom(ji_oglrCity);jt_odceg.Get_3xXEID().Clear_GEID();jt_odceg.Get_3xXEID().Get_3xCat().Clear();jt_odceg.Get_3xXEID().Get_3xAZNC().Clear_C();jt_odceg.Get_3xXEID().Get_3xPS().Clear();var jt_oddig=this.Get_Child(jt_odceg.Get_3xXEID().Get_String());if(jt_oddig)
{var jt_oddirNew=new A3xaDDItemRequestArea();var jt_odcer=new A3xaDCEntity();jt_odcer.Get_3xXEID().CopyFrom(ji_oglrCity);jt_odcer.Get_3xXEID().Clear_GEID();jt_odcer.Get_3xXEID().Get_3xCat().Clear();jt_odcer.Get_3xXEID().Get_3xPS().Clear();jt_oddirNew.Set_DCEntity(jt_odcer);if(jt_oddirNew.IsEmpty())
return false;jt_oddirNew.Set_Descr(ji_oglrCity.Get_LName());jt_oddig.Add_Child(jt_oddirNew);var jt_odtExtH=null;if(jt_odcer.Get_3xXEID().Get_3xAZNC().Get_N())
jt_odtExtH=jg_oApp.Get_Database().Get_MainDataTable(jt_odcer.Get_3xXEID().Get_3xAZNC().Get_A(),jt_odcer.Get_3xXEID().Get_3xAZNC().Get_Z(),jt_odcer.Get_3xXEID().Get_3xAZNC().Get_N());jt_oddirNew.IncrementCounters(jt_odtExtH?true:false);jt_oddig.IncrementCounters(false);}
this.IncrementCounters(true);return true;};}
function A3xaMgrLand_RequestArea(ji_TypEntity)
{var jt_this=this;this.jc_o3xdef=new A3xaDefines_RequestArea();this.jm_oddiRoot=null;this.jm_oddbox=null;this._A3xaMgrLand_RequestArea=function()
{if(this.IsArea())
this.jm_oddbox=new A3xaDDSelectBox(null,"RequestArea",this.jc_o3xdef.jc_asReqArea);else if(this.IsRegion())
this.jm_oddbox=new A3xaDDSelectBox(null,"RequestRegion",null);else
return false;this.jm_oddbox.NewDDItem=function(){return new A3xaDDItemRequestArea();};this.jm_oddbox.OnChange=function(ji_eddbox,ji_oddi)
{var jt_sUrlParams=ji_oddi.Get_Value();jg_oe.CanLogInfo()&&jg_oe.LogInfo("url-params="+(jt_sUrlParams||""),"","A3xaMgrLand_RequestArea.jm_oddbox.OnChange");if(!jt_sUrlParams)
return false;return jg_oApp.Get_AppXUR().OnChange_QUR(jt_sUrlParams);};this.jm_oddbox.Set_ColorsBGHL(this.jc_o3xdef.jc_ColorsBGHL);return true;};this._CompareEntityOrder=function(ji_oddi_a,ji_oddi_b)
{var jt_1=1;if(!(ji_oddi_a&&ji_oddi_b))
return 0;var jt_o3xdce_a=ji_oddi_a.jm_odce;var jt_o3xdce_b=ji_oddi_b.jm_odce;if(!(jt_o3xdce_a&&jt_o3xdce_b))
return 0;var jt_oebis_a=jt_o3xdce_a.Get_3xEBIS();var jt_oebis_b=jt_o3xdce_b.Get_3xEBIS();if(!(jt_oebis_a&&jt_oebis_b))
return 0;var jt_delta=Number(jt_oebis_a.Get_Order())-Number(jt_oebis_b.Get_Order());if(jt_delta>0)
return jt_1;if(jt_delta<0)
return-jt_1;return 0;};this.jm_TypReqArea=(ji_TypEntity?ji_TypEntity:jg_oe.jc_oEntity.jc_Typ_GeoArea);this.IsArea=function(){return this.jm_TypReqArea==jg_oe.jc_oEntity.jc_Typ_GeoArea;};this.IsRegion=function(){return this.jm_TypReqArea==jg_oe.jc_oEntity.jc_Typ_GeoRegion;};this.PrintHtmlDD=function(qi_oParent)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Begin","","A3xaMgrLand_RequestArea.PrintHtmlDD");this.ConfigDD();if(!this.jm_oddbox.PrintHtml(qi_oParent))
return false;{if(!this.jm_oddbox.Refresh())
return false;}
return true;};this.RefreshHtmlDD=function(ji_oDDCategoryCodeFilter,ji_oDDPairLandFilter)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("CategoryFilter:"+
(ji_oDDCategoryCodeFilter?ji_oDDCategoryCodeFilter.Get_DDValue():"null"),"","A3xaMgrLand_RequestArea.RefreshHtmlDD");this.ConfigDD(ji_oDDCategoryCodeFilter,ji_oDDPairLandFilter);var jr_b=this.jm_oddbox.Refresh();return jr_b;};this.ConfigDD=function(ji_oDDCategoryCodeFilter,ji_oDDPairLandFilter)
{this.jm_oddbox.jm_sKeySelected=null;var jt_sxeidSelected=null;if(jg_oApp.Get_AppXUR().Get_3xXUR().Get_3xXEID()&&jg_oApp.Get_AppXUR().Get_3xXUR().Get_3xXEID().Get_3xAZNC().Get_A())
{var jt_odcSelected=new A3xaDCEntity();var jt_o3xxeid=jt_odcSelected.Get_3xXEID();jt_o3xxeid.CopyFrom(jg_oApp.Get_AppXUR().Get_3xXUR().Get_XEIDHighlights());if(ji_oDDPairLandFilter&&ji_oDDPairLandFilter.Get_Key())
jt_o3xxeid.Set_String(ji_oDDPairLandFilter.Get_Key());jt_o3xxeid.Clear_GEID();jt_o3xxeid.Get_3xCat().Clear();jt_o3xxeid.Get_3xPS().Clear();if(this.IsArea())
{jt_odcSelected.Get_3xXEID().Get_3xAZNC().Clear_NC();this.jm_oddbox.jm_sKeySelected=jt_odcSelected.Get_3xXEID().Get_String();jt_odcSelected.Get_3xXEID().Get_3xAZNC().Clear_ZNC();this.jm_oddbox.jm_sKeyGroupFocus=jt_odcSelected.Get_3xXEID().Get_String();}
else if(this.IsRegion())
{this.jm_oddbox.jm_sKeySelected=jt_odcSelected.Get_3xXEID().Get_String();jt_odcSelected.Get_3xXEID().Get_3xAZNC().Clear_C();this.jm_oddbox.jm_sKeyGroupFocus=jt_odcSelected.Get_3xXEID().Get_String();}
else
{}
jg_oe.CanLogInfo()&&jg_oe.LogInfo("GroupFocus key:"+
this.jm_oddbox.jm_sKeyGroupFocus,"","A3xaMgrLand_RequestArea.ConfigDD");this.jm_oddbox.jm_bVisibleGroupFocus=false;}
this.jm_oddbox.jm_bShowCount=false;return true;};this.LoadDataDD=function(ji_oDDCategoryCodeFilter,ji_oDDPairLandFilter)
{this.ConfigDD(ji_oDDCategoryCodeFilter,ji_oDDPairLandFilter);if(this.IsArea())
return this._LoadDataDD_Area();else if(this.IsRegion())
return this._LoadDataDD_Region();return false;};this._LoadDataDD_Area=function()
{var jt_odb=jg_oe.Get_Database();if(!jt_odb)
{jg_oe.LogErr("Fail","Get Database","A3xaMgrLand_RequestArea::LoadDataDD");return false;}
var jt_ogldtCategory=jt_odb.Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_Category);var jt_ogldtArea=jt_odb.Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_GeoArea);var jt_ogldtRegion=jt_odb.Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_GeoRegion);var jt_ogldtCity=jt_odb.Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_GeoCity);if(!jt_ogldtCategory)
{jg_oe.LogErr("Fail","Get Tb Category","A3xaMgrLand_RequestArea::LoadDataDD");return false;}
if(!jt_ogldtArea)
{jg_oe.LogErr("Fail","Get Tb Area","A3xaMgrLand_RequestArea::LoadDataDD");return false;}
var jt_oddiRequestArea=new A3xaDDItemRequestArea();var jt_nOfRows=jt_ogldtArea.Get_Recordset().Get_Count();jt_oddiRequestArea.Set_ADescr(this.jc_o3xdef.jc_asALL);var jt_odcer=new A3xaDCEntity();jt_odcer.Get_3xXEID().Set_GEID(jg_oe.jc_oEntity.jc_Typ_Enterprise,null,null,null);jt_odcer.Get_3xXEID().Get_3xCat().Clear();jt_odcer.Get_3xXEID().Get_3xAZNC().Clear();jt_odcer.Get_3xXEID().Get_3xPS().Clear();jt_oddiRequestArea.Set_DCEntity(jt_odcer);for(var i=0;i<jt_nOfRows;i++)
{var jt_oglrArea=jt_ogldtArea.Get_Recordset().Get_Item_ByIndex(i);if(!jt_oglrArea)
continue;if(New_A3xaAZNC_XApp(jt_oglrArea.Get_3xXEID()).IsBestFromBabylon())
continue;if(!jt_oddiRequestArea.Add_TopArea(jt_oglrArea))
{jg_oe.LogErr("Fail","jt_oddiRequestArea.Add_TopArea()","A3xaMgrLand_RequestArea::LoadDataDD");return false;}}
for(var i=0;i<jt_nOfRows;i++)
{var jt_oglrArea=jt_ogldtArea.Get_Recordset().Get_Item_ByIndex(i);if(!jt_oglrArea)
continue;if(New_A3xaAZNC_XApp(jt_oglrArea.Get_3xXEID()).IsBestFromBabylon())
continue;if(!jt_oddiRequestArea.Add_Area(jt_oglrArea))
{jg_oe.LogErr("Fail","jt_oddiRequestArea.Add_Area()","A3xaMgrLand_RequestArea::LoadDataDD");return false;}}
jt_oddiRequestArea.Sort_Children(this._CompareEntityOrder,true);this.jm_oddiRoot=jt_oddiRequestArea;this.jm_oddbox.jm_oddiRoot=this.jm_oddiRoot;return true;};this._LoadDataDD_Region=function()
{var jt_odb=jg_oe.Get_Database();if(!jt_odb)
{jg_oe.LogErr("Fail","Get Database","A3xaMgrLand_RequestArea::LoadDataDD");return false;}
var jt_ogldtCategory=jt_odb.Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_Category);var jt_ogldtArea=jt_odb.Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_GeoArea);var jt_ogldtRegion=jt_odb.Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_GeoRegion);var jt_ogldtCity=jt_odb.Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_GeoCity);if(!jt_ogldtCategory)
{jg_oe.LogErr("Fail","Get Tb Category","A3xaMgrLand_RequestArea::LoadDataDD");return false;}
if(!jt_ogldtArea)
{jg_oe.LogErr("Fail","Get Tb Area","A3xaMgrLand_RequestArea::LoadDataDD");return false;}
var jt_oxeidCurrent=jg_oApp.Get_AppXUR().Get_3xXUR().Get_3xXEID();var jt_oddiRequestArea=new A3xaDDItemRequestArea();jt_oddiRequestArea.Set_ADescr(this.jc_o3xdef.jc_asALL);var jt_odcer=new A3xaDCEntity();jt_odcer.Get_3xXEID().Set_GEID(jg_oe.jc_oEntity.jc_Typ_Enterprise,null,null,null);jt_odcer.Get_3xXEID().Get_3xCat().Clear();jt_odcer.Get_3xXEID().Set_3xAZ(jt_oxeidCurrent);jt_odcer.Get_3xXEID().Get_3xPS().Clear();jt_oddiRequestArea.Set_DCEntity(jt_odcer);var jt_nOfRegions=jt_ogldtRegion.Get_Recordset().Get_Count();jg_oe.CanLogInfo()&&jg_oe.LogInfo("NOFRegion="+jt_nOfRegions,"","A3xaMgrLand_RequestArea.LoadDataDD");for(var ir=0;ir<jt_nOfRegions;ir++)
{var jt_oglrRegion=jt_ogldtRegion.Get_Recordset().Get_Item_ByIndex(ir);jg_oe.CanLogInfo()&&jg_oe.LogInfo("Region="+
(jt_oglrRegion?jt_oglrRegion.Get_LName():""),"","A3xaMgrLand_RequestArea.LoadDataDD");if(!(jt_oglrRegion.Get_3xXEID().Get_3xAZNC().Get_A()&&jt_oglrRegion.Get_3xXEID().Get_3xAZNC().Get_Z()))
continue;if(jt_oglrRegion.Get_3xXEID().Get_3xAZNC().Get_A()!=jt_oxeidCurrent.Get_3xXEID().Get_3xAZNC().Get_A())
continue;if(jt_oglrRegion.Get_3xXEID().Get_3xAZNC().Get_Z()!=jt_oxeidCurrent.Get_3xXEID().Get_3xAZNC().Get_Z())
continue;if(!jt_oddiRequestArea.Add_Region(jt_oglrRegion))
{jg_oe.LogErr("Fail","jt_oddiRequestArea.Add_Region()","A3xaMgrLand_RequestArea::LoadDataDD");return false;}}
jt_oddiRequestArea.Sort_Children(this._CompareEntityOrder,false);var jt_nOfCities=jt_ogldtCity.Get_Recordset().Get_Count();jg_oe.CanLogInfo()&&jg_oe.LogInfo("NOFCity="+jt_nOfCities,"","A3xaMgrLand_RequestArea.LoadDataDD");for(var ic=0;ic<jt_nOfCities;ic++)
{var jt_oglrCity=jt_ogldtCity.Get_Recordset().Get_Item_ByIndex(ic);jg_oe.CanLogInfo()&&jg_oe.LogInfo("City="+
(jt_oglrCity?jt_oglrCity.Get_LName():""),"","A3xaMgrLand_RequestArea.LoadDataDD");var jt_A=jt_oglrCity.Get_3xXEID().Get_3xAZNC().Get_A();var jt_Z=jt_oglrCity.Get_3xXEID().Get_3xAZNC().Get_Z();if(!(jt_A&&jt_Z))
continue;if(jt_A!=jt_oxeidCurrent.Get_3xXEID().Get_3xAZNC().Get_A())
continue;if(jt_Z!=jt_oxeidCurrent.Get_3xXEID().Get_3xAZNC().Get_Z())
continue;if(!jt_oddiRequestArea.Add_City(jt_oglrCity))
{jg_oe.LogErr("Fail","jt_oddiRequestArea.Add_City()","A3xaMgrLand_RequestArea::LoadDataDD");return false;}}
this.jm_oddiRoot=jt_oddiRequestArea;this.jm_oddbox.jm_oddiRoot=this.jm_oddiRoot;return true;};this._A3xaMgrLand_RequestArea();}
function A3xaImageMap_Scale(ji_offsetX,ji_offsetY,ji_scaleX,ji_scaleY)
{this.jm_offsetX=Number(ji_offsetX||0);this.jm_offsetY=Number(ji_offsetY||0);this.jm_LonMin=Number(0.0);this.jm_LatMin=Number(0.0);this.jm_LonMax=Number(0.0);this.jm_LatMax=Number(0.0);this.jm_LonCentre=Number(0.0);this.jm_LatCentre=Number(0.0);this.jm_GeoBoxSideMax=Number(0.0);this.jm_bGBSMLon=false;this.jm_scaleX=Number(ji_scaleX||0.0);this.jm_scaleY=Number(ji_scaleY||0.0);this.jm_KMSide=Number(0.0);this.Set_Box=function(ji_LonMin,ji_LatMin,ji_LonMax,ji_LatMax)
{this.jm_LonMin=Number(ji_LonMin);this.jm_LatMin=Number(ji_LatMin);this.jm_LonMax=Number(ji_LonMax);this.jm_LatMax=Number(ji_LatMax);this.jm_LonCentre=((this.jm_LonMin+this.jm_LonMax)/2);this.jm_LatCentre=((this.jm_LatMin+this.jm_LatMax)/2);var jt_LonSide=Math.abs(this.jm_LonMin-this.jm_LonMax);var jt_LatSide=Math.abs(this.jm_LatMin-this.jm_LatMax);if(jt_LonSide>(jt_LatSide*1.333))
{this.jm_GeoBoxSideMax=jt_LonSide;this.jm_bGBSMLon=true;}
else
{this.jm_GeoBoxSideMax=jt_LatSide;this.jm_bGBSMLon=false;}
if(this.jm_scaleX>=0.1&&this.jm_GeoBoxSideMax<0.1)
{this.jm_GeoBoxSideMax=75.0/this.jm_scaleX;this.jm_bGBSMLon=false;}
var jt_px=222.4;this.jm_KMSide=this.jm_GeoBoxSideMax*jt_px;return true;};this.AutoScale=function()
{var jt_pxx=(this.jm_bGBSMLon?100.0:75.0);if(this.jm_GeoBoxSideMax>=0.1)
{this.jm_scaleX=jt_pxx/this.jm_GeoBoxSideMax;this.jm_scaleY=jt_pxx/this.jm_GeoBoxSideMax;}
return true;};}
function A3xaImageMap_HotSpotRect(ji_XL,ji_YU,ji_W,ji_H)
{this.jm_XL=ji_XL;this.jm_YU=ji_YU;this.jm_W=ji_W;this.jm_H=ji_H;}
function A3xaImageMap_HotSpot(ji_o3ximap_Scale,ji_odc,ji_bBig,ji_fnClick)
{var jt_this=this;this.jm_odc=null;this.jm_Lon=0;this.jm_Lat=0;this.jm_sLabel="";this.jm_bBig=(ji_bBig||false);this.jm_fnClick=(ji_fnClick||null);this.jm_o3ximap_Scale=ji_o3ximap_Scale;this.jm_X=0;this.jm_Y=0;this.jm_XLeft=0;this.jm_XRight=0;this.jm_YUp=0;this.jm_YDown=0;this.jm_Zoom=0;this._A3xaImageMap_HotSpot=function()
{this._InitCoords();};this._InitCoords=function()
{if(!ji_odc)
return false;this.jm_odc=ji_odc;this.jm_Lon=(ji_odc.Get_3xEBIS().Get_Lon()||0);this.jm_Lat=(ji_odc.Get_3xEBIS().Get_Lat()||0);this.jm_sLabel=(ji_odc.Get_LName()||"");this._CalcRect(1);return true;};this._CalcRect=function(ji_Zoom)
{var jt_zoffX=1;var jt_zoffY=1;if(ji_Zoom>1.799)
{jt_zoffX=Number(1.8);jt_zoffY=Number(1.8);}
this.jm_X=A3xaMathFloor(this.jm_o3ximap_Scale.jm_offsetX*jt_zoffX+
(Number(this.jm_Lon)-this.jm_o3ximap_Scale.jm_LonCentre)*this.jm_o3ximap_Scale.jm_scaleX*ji_Zoom);this.jm_Y=A3xaMathFloor(this.jm_o3ximap_Scale.jm_offsetY*jt_zoffY-
(Number(this.jm_Lat)-this.jm_o3ximap_Scale.jm_LatCentre)*this.jm_o3ximap_Scale.jm_scaleY*ji_Zoom);this.jm_XLeft=((this.jm_X-2)|0);if(this.jm_XLeft<0)this.jm_XLeft=0;this.jm_XRight=((this.jm_X+2)|0);if(this.jm_XRight>=200)this.jm_XRight=199;this.jm_YUp=((this.jm_Y-2)|0);if(this.jm_YUp<0)this.jm_YUp=0;this.jm_YDown=((this.jm_Y+2)|0);if(this.jm_YDown>=150)this.jm_YDown=149;return true;};this._Get_Rect=function(ji_big,ji_Zoom)
{if(ji_Zoom===1||ji_Zoom>1.0)
this._CalcRect(ji_Zoom);var jt_XL=A3xaMathFloor(this.jm_XLeft);var jt_YU=A3xaMathFloor(this.jm_YUp);if(ji_big)
return new A3xaImageMap_HotSpotRect(jt_XL-8,jt_YU+0,24,24);return new A3xaImageMap_HotSpotRect(jt_XL,jt_YU,8,8);};this.Intersect=function(ji_o3xhs)
{return!(ji_o3xhs.jm_XLeft>this.jm_XRight||ji_o3xhs.jm_XRight<this.jm_XLeft||ji_o3xhs.jm_YUp>this.jm_YDown||ji_o3xhs.jm_YDown<this.jm_YUp);};this._MakeId=function()
{if(!this.jm_odc)
return"";var jt_ide=this.jm_odc.Get_3xXEID().Get_IdEntity();if(!(jt_ide>0))
return"";return"hsicon_"+jt_ide;};this.PrintHtml=function(qi_oParent,ji_sStarUrl,ji_sbgImageId)
{if(!(qi_oParent&&qi_oParent.length))
return false;var jt_hsrectNormal=this._Get_Rect(this.jm_bBig);var jt_hsrectBig=this._Get_Rect(true);var qt_oMapHS_Div=jQuery("<div>",{id:this._MakeId(),border:'0'});qt_oMapHS_Div.css({position:'absolute',top:jt_hsrectNormal.jm_YU.toString()+'px',left:jt_hsrectNormal.jm_XL.toString()+'px'});var qt_oMapHS_Link=jQuery("<a>",{href:'javascript:void(0)',title:this.jm_sLabel});qt_oMapHS_Link.css({backgroundColor:'transparent'});if(this.jm_fnClick)
qt_oMapHS_Link.click(this.jm_fnClick);var qt_oMapHS_Icon=jQuery("<img>",{src:ji_sStarUrl,width:jt_hsrectNormal.jm_W,height:jt_hsrectNormal.jm_H,border:'0'});qt_oMapHS_Icon.hover(function()
{A3xaImageMap_HotSpotUpdIcon(jQuery(this),false,true,jt_this._Get_Rect(true,jt_this.jm_Zoom));},function()
{A3xaImageMap_HotSpotUpdIcon(jQuery(this),false,false,jt_this._Get_Rect(jt_this.jm_bBig,jt_this.jm_Zoom));});qi_oParent.append(qt_oMapHS_Div);qt_oMapHS_Div.append(qt_oMapHS_Link);qt_oMapHS_Link.append(qt_oMapHS_Icon);};this.HotSpotUpdIcon=function(ji_bBig)
{var jt_idq=this._MakeId();if(!jt_idq)
return false;this.jm_bBig=(ji_bBig||false);A3xaImageMap_HotSpotUpdIcon(jQuery('#'+jt_idq),true,this.jm_bBig,this._Get_Rect(this.jm_bBig,this.jm_Zoom));return true;};this.HotSpotZoom=function(ji_Zoom)
{var jt_idq=this._MakeId();if(!jt_idq)
return false;if(ji_Zoom)
this.jm_Zoom=ji_Zoom;else
this.jm_Zoom=0;A3xaImageMap_HotSpotUpdIcon(jQuery('#'+jt_idq),true,this.jm_bBig,this._Get_Rect(this.jm_bBig,this.jm_Zoom),true);return true;};this._A3xaImageMap_HotSpot();}
function A3xaImageMap_HotSpotUpdIcon(qi_o,ji_bDiv,ji_bBig,ji_rect,ji_Zoom,ji_bZoomOnly)
{if(!(qi_o&&qi_o.length))
return false;var qt_this=null;var qt_div=null;if(ji_bDiv)
{qt_div=qi_o;qt_this=qt_div.children().first();if(qt_this&&qt_this.length)
qt_this=qt_this.children().first();}
else
{qt_this=qi_o;qt_div=qt_this.parent().parent();}
if(!(qt_this&&qt_this.length))
return false;if(!(qt_div&&qt_div.length))
return false;qt_div.css({top:ji_rect.jm_YU.toString()+'px',left:ji_rect.jm_XL.toString()+'px'});if(ji_bZoomOnly)
return true;qt_this.width(ji_rect.jm_W);qt_this.height(ji_rect.jm_H);if(ji_bBig)
{}
else
{var qt_divOuter=qt_div.parent();if(qt_divOuter&&qt_divOuter.length)
{qt_div.detach();qt_divOuter.prepend(qt_div);}}
return true;}
function A3xaImageMap_AZNC_ZoomContext()
{this.jm_qMapDiv_css="";this.jm_qMapImg_css="";this.Save=function(qi_oMapDiv,qi_oMapImg)
{this.jm_qMapDiv_css=qi_oMapDiv.attr('style');this.jm_qMapImg_css=qi_oMapImg.attr('style');return true;}
this.Restore=function(qi_oMapDiv,qi_oMapImg)
{qi_oMapDiv.attr('style',this.jm_qMapDiv_css);qi_oMapImg.attr('style',this.jm_qMapImg_css);return true;}}
function A3xaImageMap_AZNC(ji_odt,ji_oxeidFilter,ji_fnZoom)
{var jt_this=this;this.jm_odt=(ji_odt||null);this.jm_oxeidFilter=(ji_oxeidFilter||new A3xaDCEntity());this.jm_ao3ximhs=null;this.jm_o3ximap_Scale=null;this.jm_AZNC_code=null;this.jm_fnZoon=(ji_fnZoom||null);this.jm_o3xzoomctx=null;this._A3xaImageMap_AZNC=function()
{if(this.IsLA())
{this.jm_o3ximap_Scale=new A3xaImageMap_Scale(85,75,1.5,1.5);this.jm_AZNC_code="LA";}
else if(this.IsArea())
{this.jm_o3ximap_Scale=new A3xaImageMap_Scale(100,70,20,20);this.jm_AZNC_code=this.jm_oxeidFilter.Get_3xXEID().Get_3xAZNC().Get_Code(false,false);}
else if(this.IsRegion())
{this.jm_o3ximap_Scale=new A3xaImageMap_Scale(100,70,200,200);this.jm_AZNC_code=this.jm_oxeidFilter.Get_3xXEID().Get_3xAZNC().Get_Code(true,false);}};this.IsLA=function()
{if(!this.jm_oxeidFilter.Get_3xXEID().Get_3xAZNC().Get_A()||this.jm_oxeidFilter.Get_3xXEID().Get_3xAZNC().Get_A()=='L')
return true;return false;};this.IsYB=function()
{if(this.jm_oxeidFilter.Get_3xXEID().Get_3xAZNC().IsEmpty()||New_A3xaAZNC_XApp(this.jm_oxeidFilter.Get_3xXEID()).IsBestFromBabylon())
return true;return false;};this.IsArea=function()
{if(this.IsLA()||this.IsYB())
return false;if(!this.jm_oxeidFilter.Get_3xXEID().Get_3xAZNC().Get_Z())
return false;if(!this.jm_oxeidFilter.Get_3xXEID().Get_3xAZNC().Get_N())
return true;return false;};this.IsRegion=function()
{if(this.IsLA()||this.IsYB())
return false;if(this.IsArea())
return false;if(!this.jm_oxeidFilter.Get_3xXEID().Get_3xAZNC().Get_C())
return true;return false;};this.IsCurrent=function(ji_odc)
{if(!ji_odc)
return false;if(!jg_oApp.Get_AppXUR().Get_3xXUR())
return false;return(jg_oApp.Get_AppXUR().Get_3xXUR().Get_3xXEID().Get_3xAZNC().Matches(ji_odc.Get_3xXEID(),true,this.IsArea(),this.IsRegion()));};this._Get_OnClickCallback=function(ji_odc,ji_Row,ji_Col)
{if(!ji_odc)
return null;var jt_QUR=jg_oe.jc_oXUR.jc_QUR_QuerySBS;var jt_Single=jg_oe.jc_oXUR.jc_XURTG_Limited;var jt_odc=new A3xaDCEntity();jt_odc.CopyFrom(ji_odc,true,false,false,false);jt_odc.Get_3xXEID().Set_GEID(jg_oe.jc_oEntity.jc_Typ_Enterprise,null,null,null);jt_odc.Get_3xXEID().Get_3xCat().Clear();if(this.IsArea())
{jt_QUR=jg_oe.jc_oXUR.jc_QUR_QuerySBS;jt_Single=jg_oe.jc_oXUR.jc_XURTG_Unlimited;jt_odc.Get_3xXEID().Get_3xAZNC().Clear_C();}
else if(this.IsRegion())
{jt_QUR=jg_oe.jc_oXUR.jc_QUR_QuerySBS;jt_Single=jg_oe.jc_oXUR.jc_XURTG_Unlimited;}
else
{jt_odc.Get_3xXEID().Get_3xAZNC().Clear_NC();}
jt_odc.Get_3xXEID().Get_3xPS().Clear();var jt_sxeid=(jt_odc.Get_3xXEID().Get_String()||"");if(!jt_sxeid)
return null;var jt_oxur=new A3xaXur();jt_oxur.Set_UrlParams(null,null,null,jt_QUR,jt_sxeid,jt_Single,null,null);var qt_oMapDiv=jQuery('#'+this._MakeId(ji_Row,ji_Col));var jr_fnClick=function(ji_event)
{ji_event.stopImmediatePropagation();jt_this.OnZoom(qt_oMapDiv,-100,ji_Row,ji_Col);return jg_oApp.Get_AppXUR().OnChange_QUR("p3x="+jt_oxur.Get_XURString());};return jr_fnClick;};this._MakeId=function(ji_Row,ji_Col)
{var jr_sQHMapId="Cell_NavMapUnk_"+ji_Row+"_"+ji_Col;if(this.IsLA()||this.IsYB())
jr_sQHMapId="Cell_NavMapLA_"+ji_Row+"_"+ji_Col;else if(this.IsArea())
jr_sQHMapId="Cell_NavMapArea_"+ji_Row+"_"+ji_Col;else if(this.IsRegion())
jr_sQHMapId="Cell_NavMapRegion_"+ji_Row+"_"+ji_Col;return jr_sQHMapId;};this.Foreground=function(ji_Row,ji_Col)
{var jt_sQHMapId=this._MakeId(ji_Row,ji_Col);var qt_oMapDiv=jQuery("#"+jt_sQHMapId);if(!(qt_oMapDiv&&qt_oMapDiv.length))
return false;var qt_oCell=qt_oMapDiv.parent();if(!(qt_oCell&&qt_oCell.length))
return false;qt_oMapDiv.detach();qt_oCell.append(qt_oMapDiv);return true;};this._Get_UrlImageMap=function(ji_bBlank)
{var jt_AZNC_code=this.jm_AZNC_code;if(ji_bBlank===true)
{if(this.IsArea())
jt_AZNC_code="A0";else if(this.IsRegion())
jt_AZNC_code="R0";else
jt_AZNC_code="";}
if(!jt_AZNC_code)
return"";return jg_oe.Get_3xAppMngIcons().Get_UrlImageMap(jt_AZNC_code);};this.PrintHtml=function(qi_oCell,ji_Row,ji_Col)
{if(!this.jm_odt)
return false;var jt_sMapUrlBlank=this._Get_UrlImageMap(true);var jt_sMapUrl=this._Get_UrlImageMap();var jt_sQHMapId=this._MakeId(ji_Row,ji_Col);var qt_oMapDiv=jQuery("<div>",{id:jt_sQHMapId,width:'202',height:'152',border:'0'});qt_oMapDiv.css({position:'absolute',top:'0px',left:'2px','box-shadow':'3px 3px 10px #000000'});if(!(qt_oMapDiv&&qt_oMapDiv.length))
return false;var qt_oMapImg=jQuery("<img>",{width:'200',height:'150',border:'0'});if(!(qt_oMapImg&&qt_oMapImg.length))
return false;qt_oMapImg.error(function()
{var qt_this=jQuery(this);var jt_src=qt_this.attr("src");if(jt_src!=jt_sMapUrlBlank)
qt_this.attr("src",jt_sMapUrlBlank);});qt_oMapImg.attr("src",jt_sMapUrl);qt_oMapImg.css({position:'absolute',top:'1px',left:'1px'});qi_oCell.append(qt_oMapDiv);qt_oMapDiv.append(qt_oMapImg);var jt_CountHS=0;var jt_aoglr=null;if(ji_odt)
jt_aoglr=ji_odt.Get_Recordset();if(jt_aoglr)
jt_CountHS=jt_aoglr.Get_Count();var jt_ao3ximhs=new Array();var jt_LonMin=0.0;var jt_LatMin=0.0;var jt_LonMax=0.0;var jt_LatMax=0.0;var jt_bdynoffinit=false;var i=0;for(i=0;i<jt_CountHS;i++)
{var jt_oglr=jt_aoglr.Get_Item_ByIndex(i);if(!jt_oglr)
continue;if(this.IsLA()||this.IsYB()||(this.IsArea()&&this.jm_oxeidFilter.Get_3xXEID().Get_3xAZNC().Matches(jt_oglr.Get_3xXEID(),true,false,false))||(this.IsRegion()&&this.jm_oxeidFilter.Get_3xXEID().Get_3xAZNC().Matches(jt_oglr.Get_3xXEID(),true,true,false)))
{var jt_lon=Number(jt_oglr.Get_3xEBIS().Get_Lon());var jt_lat=Number(jt_oglr.Get_3xEBIS().Get_Lat());if(!jt_bdynoffinit)
{jt_bdynoffinit=true;jt_LonMax=jt_LonMin=jt_lon;jt_LatMax=jt_LatMin=jt_lat;}
else
{if(jt_LonMin>jt_lon)
jt_LonMin=jt_lon;if(jt_LatMin<jt_lat)
jt_LatMin=jt_lat;if(jt_LonMax<jt_lon)
jt_LonMax=jt_lon;if(jt_LatMax>jt_lat)
jt_LatMax=jt_lat;}}}
this.jm_o3ximap_Scale.Set_Box(jt_LonMin,jt_LatMin,jt_LonMax,jt_LatMax);if(this.IsArea()||this.IsRegion())
this.jm_o3ximap_Scale.AutoScale();for(i=0;i<jt_CountHS;i++)
{var jt_oglr=jt_aoglr.Get_Item_ByIndex(i);if(!jt_oglr)
continue;if(this.IsLA()||this.IsYB()||(this.IsArea()&&this.jm_oxeidFilter.Get_3xXEID().Get_3xAZNC().Matches(jt_oglr.Get_3xXEID(),true,false,false))||(this.IsRegion()&&this.jm_oxeidFilter.Get_3xXEID().Get_3xAZNC().Matches(jt_oglr.Get_3xXEID(),true,true,false)))
{var jt_bCurrent=this.IsCurrent(jt_oglr);var jt_o3ximhs=new A3xaImageMap_HotSpot(this.jm_o3ximap_Scale,jt_oglr,jt_bCurrent,this._Get_OnClickCallback(jt_oglr,ji_Row,ji_Col));if(jt_bCurrent)
jt_ao3ximhs.unshift(jt_o3ximhs);else
jt_ao3ximhs.push(jt_o3ximhs);}}
jt_CountHS=jt_ao3ximhs.length;var qt_oMapDivHSBox=jQuery("<div>",{width:'202',height:'152',border:'0'});qt_oMapDivHSBox.css({position:'absolute',top:'0px',left:'0px'});if(!(qt_oMapDivHSBox&&qt_oMapDivHSBox.length))
return false;qt_oMapDiv.append(qt_oMapDivHSBox);qt_oMapDiv.click(function()
{return jt_this.OnZoom(jQuery(this),0,ji_Row,ji_Col);});var jt_sHSStarUrl=jg_oe.Get_3xAppMngIcons().MakeUrlIcon_Main(jg_oe.jc_oIcons.jc_sIcon_Star);for(i=0;i<jt_CountHS;i++)
jt_ao3ximhs[i].PrintHtml(qt_oMapDivHSBox,jt_sHSStarUrl,jt_sQHMapId);this.jm_ao3ximhs=jt_ao3ximhs;return true;};this._Get_QImg=function(qi_oMapDiv)
{if(!(qi_oMapDiv&&qi_oMapDiv.length))
return null;var jt_aqChildren=qi_oMapDiv.children();for(var i=0;i<jt_aqChildren.length;i++)
{var qr_oChild=jQuery(jt_aqChildren[i]);if(qr_oChild.is("img"))
return qr_oChild;}
return null;}
this.OnZoom=function(qi_oMapDiv,ji_TypZoom,ji_Row,ji_Col)
{if(!this.jm_fnZoom)
return false;if(!(this.IsRegion()||ji_TypZoom==-100))
return false;var jt_TypZoom=this.jm_fnZoom(this,qi_oMapDiv,ji_TypZoom,ji_Row,ji_Col);};this.Zoom=function(qi_oMapDiv,ji_TypZoom,ji_Row,ji_Col)
{if(!(qi_oMapDiv&&qi_oMapDiv.length))
{qi_oMapDiv=jQuery('#'+this._MakeId(ji_Row,ji_Col));if(!(qi_oMapDiv&&qi_oMapDiv.length))
return false;}
var qt_oImg=this._Get_QImg(qi_oMapDiv);if(!(qt_oImg&&qt_oImg.length))
return false;if(!this.IsRegion())
return false;if(ji_TypZoom===1)
{if(!this.jm_o3xzoomctx)
{this.jm_o3xzoomctx=new A3xaImageMap_AZNC_ZoomContext();this.jm_o3xzoomctx.Save(qi_oMapDiv,qt_oImg);}
qi_oMapDiv.css({width:'362px',height:'272px'});qt_oImg.css({width:'360px',height:'270px'});if(this.jm_ao3ximhs)
{for(var i=0;i<this.jm_ao3ximhs.length;i++)
this.jm_ao3ximhs[i].HotSpotZoom(Number(1.8));}}
else if(ji_TypZoom===2)
{if(this.jm_ao3ximhs)
{for(var i=0;i<this.jm_ao3ximhs.length;i++)
this.jm_ao3ximhs[i].HotSpotZoom(Number(3.4));}}
else if(ji_TypZoom===-1)
{if(this.jm_o3xzoomctx)
{if(this.jm_ao3ximhs)
{for(var i=0;i<this.jm_ao3ximhs.length;i++)
this.jm_ao3ximhs[i].HotSpotZoom(1);}
this.jm_o3xzoomctx.Restore(qi_oMapDiv,qt_oImg);this.jm_o3xzoomctx=null;}}
return true;};this.ShowSelectedHotSpot=function(ji_aoxeid)
{if(!(this.jm_ao3ximhs&&ji_aoxeid))
return false;var ihs=0;var szhs=this.jm_ao3ximhs.length;var isel=0;var szsel=ji_aoxeid.length;for(ihs=0;ihs<szhs;ihs++)
{var jt_o3ximhs=this.jm_ao3ximhs[ihs];var jt_bigSelected=false;for(isel=0;isel<szsel;isel++)
{var jt_oxeidsel=ji_aoxeid[isel];if(!jt_oxeidsel)
continue;if(jt_o3ximhs.jm_odc.Get_3xXEID().Get_3xAZNC().Matches(jt_oxeidsel.Get_3xXEID(),false,true,true))
{jt_bigSelected=true;break;}}
jt_o3ximhs.HotSpotUpdIcon(jt_bigSelected);}
return true;};this._A3xaImageMap_AZNC();};function A3xaImageMap_Tab(ji_sTypArea,ji_Row,ji_Col,ji_fnOver,ji_bEnable)
{var jt_this=this;this.jm_sTypArea=(ji_sTypArea||"");this.jm_Row=ji_Row;this.jm_Col=ji_Col;this.jm_fnOver=(ji_fnOver||null);this.jm_bEnable=(ji_bEnable===true);this.jm_o3xhIconInfo=null;this._A3xaImageMap_Tab=function()
{if(this.jm_sTypArea=="LA")
this.jm_o3xhIconInfo=jg_oe.Get_3xAppMngIcons().NewSprite(jg_oe.jc_oIcons.jc_oIconMS_StaticMapLA.absid);else if(this.jm_sTypArea=="Area")
this.jm_o3xhIconInfo=jg_oe.Get_3xAppMngIcons().NewSprite(jg_oe.jc_oIcons.jc_oIconMS_StaticMapArea.absid);else if(this.jm_sTypArea=="Region")
this.jm_o3xhIconInfo=jg_oe.Get_3xAppMngIcons().NewSprite(jg_oe.jc_oIcons.jc_oIconMS_StaticMapRegion.absid);if(this.jm_o3xhIconInfo)
{this.jm_o3xhIconInfo.Set_Dim(16,16);this.jm_o3xhIconInfo.Set_Options(null,false);}};this.IsSprite=function(){return this.jm_o3xhIconInfo&&this.jm_o3xhIconInfo.IsSprite();};this.Get_Id=function()
{return"Cell_ImgTabs_"+this.jm_sTypArea+"_"+this.jm_Row+"_"+this.jm_Col;};this.PrintHtml=function(qi_oParent)
{var jt_sQHTabsImg=this.Get_Id();var qt_oTabsImg=null;if(this.IsSprite())
{qt_oTabsImg=jQuery("<img>",{id:jt_sQHTabsImg,src:this.jm_o3xhIconInfo.Get_UrlImageTransparent(),width:'16',height:'16',border:'0'});qt_oTabsImg.css(this.jm_o3xhIconInfo.Get_StyleArray(jg_oe.jc_oIcons.jc_oIconMS_Status.offdis-1));qt_oTabsImg.attr("q3xStatus",jg_oe.jc_oIcons.jc_oIconMS_Status.offdis);}
if(!(qt_oTabsImg&&qt_oTabsImg.length))
return false;qt_oTabsImg.hover(function(){jt_this.UpdateStatus("ON");},function(){});qi_oParent.append(qt_oTabsImg);return true;};this.Get_Status=function(qi_oThis)
{if(!(qi_oThis&&qi_oThis.length))
{qi_oThis=jQuery("#"+this.Get_Id());if(!(qi_oThis&&qi_oThis.length))
return null;}
if(this.IsSprite())
{var jt_Status=qi_oThis.attr("q3xStatus");if(jt_Status==jg_oe.jc_oIcons.jc_oIconMS_Status.offdis||jt_Status==jg_oe.jc_oIcons.jc_oIconMS_Status.ondis)
return"DIS";if(jt_Status==jg_oe.jc_oIcons.jc_oIconMS_Status.on)
return"ON";if(jt_Status==jg_oe.jc_oIcons.jc_oIconMS_Status.off)
return"OFF";}
return null;};this._ExecUpdateStatus=function(qi_oTabsImg,ji_Status)
{if(!ji_Status)
ji_Status="DIS";if(this.IsSprite())
{var ji_rowStatus=jg_oe.jc_oIcons.jc_oIconMS_Status.offdis;if(ji_Status=="OFF")
ji_rowStatus=jg_oe.jc_oIcons.jc_oIconMS_Status.off;else if(ji_Status=="ON")
ji_rowStatus=jg_oe.jc_oIcons.jc_oIconMS_Status.on;var jt_sxposStatus=this.jm_o3xhIconInfo.Get_XPos_String(ji_rowStatus-1);qi_oTabsImg.attr("q3xStatus",ji_rowStatus);qi_oTabsImg.css({"background-position":jt_sxposStatus});}
return true;};this.UpdateStatus=function(ji_Status)
{if(!ji_Status)
return false;var jt_fnOver=this.jm_fnOver;var qt_oTabsImg=jQuery("#"+this.Get_Id());if(!(qt_oTabsImg&&qt_oTabsImg.length))
return false;var jt_StatusCur=this.Get_Status(qt_oTabsImg);if(!jt_StatusCur)
return false;if(jt_StatusCur==ji_Status)
return true;if(jt_StatusCur=="DIS"&&!this.jm_bEnable)
return false;if(ji_Status=="ON")
{if(this.jm_fnOver&&!this.jm_fnOver(this))
return false;}
return this._ExecUpdateStatus(qt_oTabsImg,ji_Status);};this._A3xaImageMap_Tab();}
function A3xaImageMap_Tabs(ji_fnChangeTab,ji_bEnableArea)
{this.jm_fnChangeTab=(ji_fnChangeTab||null);this.jm_bEnableLA=true;this.jm_bEnableArea=(ji_bEnableArea||false);this.jm_bEnableRegion=false;this.jm_KM=Number(0.0);this._MakeId=function(ji_Row,ji_Col)
{var jr_sQHTabsDiv="Cell_DivTabs_"+ji_Row+"_"+ji_Col;return jr_sQHTabsDiv;};this.PrintHtml=function(qi_oCell,ji_Row,ji_Col)
{var jt_sQHTabsDiv=this._MakeId(ji_Row,ji_Col);var qt_oTabsDiv=jQuery("<div>",{id:jt_sQHTabsDiv});qt_oTabsDiv.css({position:'relative'});qi_oCell.append(qt_oTabsDiv);var jt_fnOver=null;var jt_o3ximap_tab_LA=new A3xaImageMap_Tab("LA",ji_Row,ji_Col,jt_fnOver,true);var jt_o3ximap_tab_Area=new A3xaImageMap_Tab("Area",ji_Row,ji_Col,jt_fnOver,this.jm_bEnableArea);var jt_o3ximap_tab_Region=new A3xaImageMap_Tab("Region",ji_Row,ji_Col,jt_fnOver,this.jm_bEnableRegion);var jt_fnChangeTab=this.jm_fnChangeTab;var jt_fnOver=function(ji_o3ximap_tab)
{if(jt_fnChangeTab&&!jt_fnChangeTab(ji_o3ximap_tab))
return false;if(ji_o3ximap_tab.jm_sTypArea!="LA")
jt_o3ximap_tab_LA.UpdateStatus("OFF");if(ji_o3ximap_tab.jm_sTypArea!="Area")
jt_o3ximap_tab_Area.UpdateStatus("OFF");if(ji_o3ximap_tab.jm_sTypArea!="Region")
jt_o3ximap_tab_Region.UpdateStatus("OFF");return true;};jt_o3ximap_tab_LA.jm_fnOver=jt_fnOver;jt_o3ximap_tab_Area.jm_fnOver=jt_fnOver;jt_o3ximap_tab_Region.jm_fnOver=jt_fnOver;jt_o3ximap_tab_LA.PrintHtml(qt_oTabsDiv);jt_o3ximap_tab_Area.PrintHtml(qt_oTabsDiv);jt_o3ximap_tab_Region.PrintHtml(qt_oTabsDiv);jt_o3ximap_tab_LA.UpdateStatus("ON");jt_o3ximap_tab_Area.UpdateStatus("OFF");jt_o3ximap_tab_Region.UpdateStatus("OFF");if(this.jm_bEnableRegion)
jt_o3ximap_tab_Region.UpdateStatus("ON");else if(this.jm_bEnableArea)
jt_o3ximap_tab_Area.UpdateStatus("ON");else
jt_o3ximap_tab_LA.UpdateStatus("ON");var qt_oSpanKM=jQuery("<span>",{});qt_oTabsDiv.append(qt_oSpanKM);qt_oSpanKM.text("km="+this.jm_KM);return true;};this.RefreshKM=function(ji_KM,ji_Row,ji_Col)
{if(ji_KM<0.0)
return false;var jt_sQHTabsDiv=this._MakeId(ji_Row,ji_Col);var qt_oTabsDiv=jQuery('#'+jt_sQHTabsDiv);if(!(qt_oTabsDiv&&qt_oTabsDiv.length))
return false;var jt_aqChildren=qt_oTabsDiv.children();var qt_oSpanKM=null;for(var i=0;i<jt_aqChildren.length;i++)
{var qt_oChild=jQuery(jt_aqChildren[i]);if(qt_oChild.is("span"))
{qt_oSpanKM=qt_oChild;break;}}
if(!(qt_oSpanKM&&qt_oSpanKM.length))
return false;if(ji_KM>=0.1)
qt_oSpanKM.text(" km "+A3xaMathFloor(ji_KM*1.333)+"x"+A3xaMathFloor(ji_KM));else
qt_oSpanKM.text("");return true;};}
function A3xaImageMap_ZoomContext()
{this.jm_TypZoom=-1;this.jm_qMapIntDiv_css="";this.qm_oHook=null;this.qm_oParent=null;this.Save=function(qi_oMapIntDiv)
{this.jm_TypZoom=1;this.jm_qMapIntDiv_css=qi_oMapIntDiv.attr('style');this.qm_oHook=qi_oMapIntDiv.prev();this.qm_oParent=qi_oMapIntDiv.parent();return true;}
this.Restore=function(qi_oMapIntDiv)
{qi_oMapIntDiv.attr('style',this.jm_qMapIntDiv_css);qi_oMapIntDiv.detach();if(this.qm_oHook&&this.qm_oHook.length)
this.qm_oHook.after(qi_oMapIntDiv);else
this.qm_oParent.append(qi_oMapIntDiv);return true;}}
function A3xaMgrLand_InteractiveMap()
{var jt_this=this;this.jm_o3ximapTabs=null;this.jm_o3ximapLA=null;this.jm_o3ximapArea=null;this.jm_o3ximapRegion=null;this.jm_o3ximapzoomctx=null;this._A3xaMgrLand_InteractiveMap=function()
{var jt_oxur=jg_oApp.Get_AppXUR().Get_3xXUR().Get_3xXEID();this.jm_o3ximapTabs=new A3xaImageMap_Tabs(null);var jt_ogldtGeoArea=jg_oe.Get_Database().Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_GeoArea);this.jm_o3ximapLA=new A3xaImageMap_AZNC(jt_ogldtGeoArea,null);if(jt_oxur&&jt_oxur.Get_3xXEID().Get_3xAZNC().Get_Z()&&!New_A3xaAZNC_XApp(jt_oxur.Get_3xXEID()).IsLA()&&!New_A3xaAZNC_XApp(jt_oxur.Get_3xXEID()).IsBestFromBabylon())
{this.jm_o3ximapTabs.jm_bEnableArea=true;var jt_ogldtGeoRegion=jg_oe.Get_Database().Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_GeoRegion);var jt_oxeidArea=new A3xaDCEntity();jt_oxeidArea.Get_3xXEID().Set_3xAZ(jt_oxur);this.jm_o3ximapArea=new A3xaImageMap_AZNC(jt_ogldtGeoRegion,jt_oxeidArea);if(jt_oxur.Get_3xXEID().Get_3xAZNC().Get_N())
{this.jm_o3ximapTabs.jm_bEnableRegion=true;var jt_ogldtGeoCity=jg_oe.Get_Database().Get_DataTable(jg_oe.jc_oA3xaDbZero.jc_GLID_GeoCity);var jt_oxeidRegion=new A3xaDCEntity();jt_oxeidRegion.Get_3xXEID().Set_3xAZN(jt_oxur.Get_3xXEID());var jt_fnZoom=null;this.jm_o3ximapRegion=new A3xaImageMap_AZNC(jt_ogldtGeoCity,jt_oxeidRegion,jt_fnZoom);}}};this.PrintHtml=function(qi_oCell,ji_Row,ji_Col)
{var jt_sQHMapIntDiv="Cell_DivMapint_"+ji_Row+"_"+ji_Col;var qt_oMapIntDiv=jQuery("<div>",{id:jt_sQHMapIntDiv,width:'204',height:'174',border:'0'});qt_oMapIntDiv.css({position:'relative'});qi_oCell.append(qt_oMapIntDiv);if(this.jm_o3ximapTabs)
{var jt_o3ximapLA=this.jm_o3ximapLA;var jt_o3ximapArea=this.jm_o3ximapArea;var jt_o3ximapRegion=this.jm_o3ximapRegion;this.jm_o3ximapTabs.jm_fnChangeTab=function(ji_o3ximap_tab)
{if(!ji_o3ximap_tab)
return false;if(ji_o3ximap_tab.jm_sTypArea=="LA")
{jt_o3ximapLA.Foreground(ji_Row,ji_Col);if(jt_o3ximapLA&&jt_o3ximapLA.jm_o3ximap_Scale)
jt_this.jm_o3ximapTabs.RefreshKM(0.0,ji_Row,ji_Col);return true;}
else if(ji_o3ximap_tab.jm_sTypArea=="Area")
{jt_o3ximapArea.Foreground(ji_Row,ji_Col);if(jt_o3ximapArea&&jt_o3ximapArea.jm_o3ximap_Scale)
jt_this.jm_o3ximapTabs.RefreshKM(jt_o3ximapArea.jm_o3ximap_Scale.jm_KMSide,ji_Row,ji_Col);return true;}
else if(ji_o3ximap_tab.jm_sTypArea=="Region")
{jt_o3ximapRegion.Foreground(ji_Row,ji_Col);if(jt_o3ximapRegion&&jt_o3ximapRegion.jm_o3ximap_Scale)
{var jt_KM=jt_this.jm_o3ximapRegion.jm_o3ximap_Scale.jm_KMSide;if(jt_this.jm_o3ximapzoomctx&&jt_this.jm_o3ximapzoomctx.jm_TypZoom==2)
jt_KM*=1.8/3.4;jt_this.jm_o3ximapTabs.RefreshKM(jt_KM,ji_Row,ji_Col);}
return true;}
return false;};this.jm_o3ximapTabs.PrintHtml(qt_oMapIntDiv,ji_Row,ji_Col);}
var qt_oMapDiv=jQuery("<div>",{});qt_oMapDiv.css({position:'relative'});qt_oMapIntDiv.append(qt_oMapDiv);var jt_fnZoom=function(ji_o3ximap,qi_o3ximapDiv,ji_TypZoom,ji_Row,ji_Col)
{if(!(ji_o3ximap&&qi_o3ximapDiv&&qi_o3ximapDiv.length))
return false;var qt_oMapIntDiv2=qi_o3ximapDiv.parent().parent();if(!(qt_oMapIntDiv2&&qt_oMapIntDiv2.length))
return false;if(!jt_this.jm_o3ximapzoomctx)
{if(ji_TypZoom==-100)
return false;}
if(!jt_this.jm_o3ximapzoomctx)
{jt_this.jm_o3ximapzoomctx=new A3xaImageMap_ZoomContext();jt_this.jm_o3ximapzoomctx.Save(qt_oMapIntDiv2);var jt_pos=qt_oMapIntDiv2.offset();qt_oMapIntDiv2.css({position:'absolute',left:(A3xaMathFloor(jt_pos.left)-160).toString()+'px',top:(A3xaMathFloor(jt_pos.top)-0).toString()+'px',width:'364px',height:'300px','z-index':1000,'background-color':'#FFFFFF','box-shadow':'3px 3px 10px #000000'});qt_oMapIntDiv2.detach();qt_oMapIntDiv2.appendTo("body");if(jt_this.jm_o3ximapRegion)
jt_this.jm_o3ximapRegion.Zoom(null,jt_this.jm_o3ximapzoomctx.jm_TypZoom,ji_Row,ji_Col);}
else if(jt_this.jm_o3ximapzoomctx.jm_TypZoom==1)
{jt_this.jm_o3ximapzoomctx.jm_TypZoom=2;if(jt_this.jm_o3ximapRegion)
jt_this.jm_o3ximapRegion.Zoom(null,jt_this.jm_o3ximapzoomctx.jm_TypZoom,ji_Row,ji_Col);if(jt_this.jm_o3ximapRegion&&jt_this.jm_o3ximapRegion.jm_o3ximap_Scale)
{var jt_KM=jt_this.jm_o3ximapRegion.jm_o3ximap_Scale.jm_KMSide*1.8/3.4;jt_this.jm_o3ximapTabs.RefreshKM(jt_KM,ji_Row,ji_Col);}}
else
{jt_this.jm_o3ximapzoomctx.jm_TypZoom=-1;if(jt_this.jm_o3ximapRegion)
jt_this.jm_o3ximapRegion.Zoom(null,jt_this.jm_o3ximapzoomctx.jm_TypZoom,ji_Row,ji_Col);jt_this.jm_o3ximapzoomctx.Restore(qt_oMapIntDiv2);if(jt_this.jm_o3ximapRegion&&jt_this.jm_o3ximapRegion.jm_o3ximap_Scale)
{var jt_KM=jt_this.jm_o3ximapRegion.jm_o3ximap_Scale.jm_KMSide;jt_this.jm_o3ximapTabs.RefreshKM(jt_KM,ji_Row,ji_Col);}
jt_this.jm_o3ximapzoomctx=null;}};if(this.jm_o3ximapRegion)
this.jm_o3ximapRegion.jm_fnZoom=jt_fnZoom;if(this.jm_o3ximapArea)
this.jm_o3ximapArea.jm_fnZoom=jt_fnZoom;if(this.jm_o3ximapLA)
this.jm_o3ximapLA.jm_fnZoom=jt_fnZoom;if(this.jm_o3ximapTabs.jm_bEnableRegion)
{if(this.jm_o3ximapLA)
this.jm_o3ximapLA.PrintHtml(qt_oMapDiv,ji_Row,ji_Col);if(this.jm_o3ximapArea)
this.jm_o3ximapArea.PrintHtml(qt_oMapDiv,ji_Row,ji_Col);if(this.jm_o3ximapRegion)
this.jm_o3ximapRegion.PrintHtml(qt_oMapDiv,ji_Row,ji_Col);if(this.jm_o3ximapRegion&&this.jm_o3ximapRegion.jm_o3ximap_Scale)
this.jm_o3ximapTabs.RefreshKM(this.jm_o3ximapRegion.jm_o3ximap_Scale.jm_KMSide,ji_Row,ji_Col);}
else if(this.jm_o3ximapTabs.jm_bEnableArea)
{if(this.jm_o3ximapRegion)
this.jm_o3ximapRegion.PrintHtml(qt_oMapDiv,ji_Row,ji_Col);if(this.jm_o3ximapLA)
this.jm_o3ximapLA.PrintHtml(qt_oMapDiv,ji_Row,ji_Col);if(this.jm_o3ximapArea)
this.jm_o3ximapArea.PrintHtml(qt_oMapDiv,ji_Row,ji_Col);if(this.jm_o3ximapArea&&this.jm_o3ximapArea.jm_o3ximap_Scale)
this.jm_o3ximapTabs.RefreshKM(this.jm_o3ximapArea.jm_o3ximap_Scale.jm_KMSide,ji_Row,ji_Col);}
else
{if(this.jm_o3ximapArea)
this.jm_o3ximapArea.PrintHtml(qt_oMapDiv,ji_Row,ji_Col);if(this.jm_o3ximapRegion)
this.jm_o3ximapRegion.PrintHtml(qt_oMapDiv,ji_Row,ji_Col);if(this.jm_o3ximapLA)
this.jm_o3ximapLA.PrintHtml(qt_oMapDiv,ji_Row,ji_Col);if(this.jm_o3ximapLA&&this.jm_o3ximapLA.jm_o3ximap_Scale)
this.jm_o3ximapTabs.RefreshKM(0.0,ji_Row,ji_Col);}
return true;};this.ShowSelectedHotSpot=function(ji_aoxeid)
{if(this.jm_o3ximapRegion&&!this.jm_o3ximapRegion.ShowSelectedHotSpot(ji_aoxeid))
return false;return true;};this._A3xaMgrLand_InteractiveMap();};function A3xaDefines_ECPOrder()
{this.jc_asECPOrder=["Order","Orden","Ordem","Ordine"];this.jc_asALL=["*** ALL ***","*** TODOS ***","*** TUDO ***","*** TUTTI ***"];this.jc_ColorsBGHL=["FF6080","FF80A0","FFC0E0"];this.jc_asByScore=["Score","PuntuaciÃ³n","PontuaÃ§Ã£o","Punteggio"];this.jc_asByClicks=["Clicks","Clicks","Clicks","Clicks"];this.jc_asByLatestClick=["Latest Click","Ãltimas Click","Ãltimas Click","Ultimo Click"];this.jc_asByLatest=["Latest Entry","Ãltimas entrada","Ãltimas entrada","Ultimo inserito"];this.jc_asByName=["Name","Nombre","Nome","Nome"];this.jc_Opt_By=100;this.jc_Opt_ByScore=1000;this.jc_Opt_ByScoreDesc=1200;this.jc_Opt_ByTime=2000;this.jc_Opt_ByTimeDesc=2200;this.jc_Opt_ByClick=3000;this.jc_Opt_ByClickDesc=3200;this.jc_Opt_ByName=4000;this.jc_Opt_ByNameDesc=4200;this.jc_Opt_ByLatestClick=5000;this.jc_Opt_ByLatestClickDesc=5200;}
function A3xaECPOrder_DDIOption(ji_sKey,ji_sValue,ji_asDescr)
{A3xaDDItem2.call(this,ji_sKey,ji_sValue,ji_asDescr);}
function A3xaECPOrder_Mgr()
{var jt_this=this;this.jc_o3xdef=new A3xaDefines_ECPOrder();this.jm_oddi=new A3xaECPOrder_DDIOption();this.jm_oddbox=new A3xaDDSelectBox(this.jm_oddi,"ECPOrder",this.jc_o3xdef.jc_asECPOrder);this.jm_oddbox.NewDDItem=function(){return new A3xaECPOrder_DDIOption();};this.jm_oddbox.OnChange=function(ji_eddbox,ji_oddi)
{return jt_this.OnChangeDD_Order(ji_eddbox,ji_oddi);};this.OnChangeDD_Order=function(ji_eddbox,ji_oddi)
{var jt_oDatabase=jg_oe.Get_Database();var jt_ohes=jg_oe.Get_HtmlSetEntity();var jt_oxur=jg_oApp.Get_AppXUR().Get_3xXUR();var jt_oxurNew=new A3xaXur();jt_oxurNew.CopyFromXUR(jt_oxur);if(ji_oddi.Get_Value()==this.jc_o3xdef.jc_Opt_ByTimeDesc)
{if(jt_oxurNew.IsSortByTime())
return false;jt_oxurNew.SortByTime();return jg_oApp.Get_AppXUR().OnChange_QUR("p3x="+jt_oxurNew.Get_XURString());}
else if(ji_oddi.Get_Value()==this.jc_o3xdef.jc_Opt_ByLatestClickDesc)
{if(jt_oxurNew.IsSortByLatestClick())
return false;jt_oxurNew.SortByLatestClick();return jg_oApp.Get_AppXUR().OnChange_QUR("p3x="+jt_oxurNew.Get_XURString());}
else if(ji_oddi.Get_Value()==this.jc_o3xdef.jc_Opt_ByScoreDesc)
{if(jt_oxurNew.IsSortByScore())
return false;jt_oxurNew.SortByScore();return jg_oApp.Get_AppXUR().OnChange_QUR("p3x="+jt_oxurNew.Get_XURString());}
else if(ji_oddi.Get_Value()==this.jc_o3xdef.jc_Opt_ByClickDesc)
{if(jt_oxurNew.IsSortByClick())
return false;jt_oxurNew.SortByClick();return jg_oApp.Get_AppXUR().OnChange_QUR("p3x="+jt_oxurNew.Get_XURString());}
else if(ji_oddi.Get_Value()==this.jc_o3xdef.jc_Opt_ByName)
{if(jt_oxurNew.IsSortByName())
return false;jt_oxurNew.SortByName();return jg_oApp.Get_AppXUR().OnChange_QUR("p3x="+jt_oxurNew.Get_XURString());}
else
return false;return true;};this.PrintHtmlDD=function(qi_oParent)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Begin","","A3xaECPOrder_Mgr.PrintHtml");if(!this.jm_oddbox.PrintHtml(qi_oParent))
return false;return true;};this.LoadDataDD=function()
{this.jm_oddbox.jm_bShowCount=false;var jt_oxur=jg_oApp.Get_AppXUR().Get_3xXUR();if(jt_oxur.IsSortByClick())
this.jm_oddbox.jm_sKeySelected=this.jc_o3xdef.jc_Opt_ByClickDesc;else if(jt_oxur.IsSortByLatestClick())
this.jm_oddbox.jm_sKeySelected=this.jc_o3xdef.jc_Opt_ByLatestClickDesc;else if(jt_oxur.IsSortByTime())
this.jm_oddbox.jm_sKeySelected=this.jc_o3xdef.jc_Opt_ByTimeDesc;else if(jt_oxur.IsSortByName())
this.jm_oddbox.jm_sKeySelected=this.jc_o3xdef.jc_Opt_ByName;else
this.jm_oddbox.jm_sKeySelected=this.jc_o3xdef.jc_Opt_ByScoreDesc;this.jm_oddi.jm_bVisible=false;var jt_oddip=new A3xaECPOrder_DDIOption(this.jc_o3xdef.jc_Opt_By,this.jc_o3xdef.jc_Opt_By,this.jc_o3xdef.jc_asECPOrder);this.jm_oddi.Add_Child(jt_oddip);jt_oddip.jm_bVisible=false;jt_oddip.Add_Child(new A3xaECPOrder_DDIOption(this.jc_o3xdef.jc_Opt_ByScoreDesc,this.jc_o3xdef.jc_Opt_ByScoreDesc,this.jc_o3xdef.jc_asByScore));jt_oddip.Add_Child(new A3xaECPOrder_DDIOption(this.jc_o3xdef.jc_Opt_ByClickDesc,this.jc_o3xdef.jc_Opt_ByClickDesc,this.jc_o3xdef.jc_asByClicks));jt_oddip.Add_Child(new A3xaECPOrder_DDIOption(this.jc_o3xdef.jc_Opt_ByLatestClickDesc,this.jc_o3xdef.jc_Opt_ByLatestClickDesc,this.jc_o3xdef.jc_asByLatestClick));jt_oddip.Add_Child(new A3xaECPOrder_DDIOption(this.jc_o3xdef.jc_Opt_ByTimeDesc,this.jc_o3xdef.jc_Opt_ByTimeDesc,this.jc_o3xdef.jc_asByLatest));jt_oddip.Add_Child(new A3xaECPOrder_DDIOption(this.jc_o3xdef.jc_Opt_ByName,this.jc_o3xdef.jc_Opt_ByName,this.jc_o3xdef.jc_asByName));return true;};}
function A3xaEntity_HtmlBoxEnv_ECP()
{A3xaEntity_HtmlBoxEnv.call(this);this.jm_oDDCategoryCode=null;this.jm_oDDPairLand=null;this.jm_oecpOrder=null;this.jm_o3xAppLogger=null;this.jm_o3xMgrLand_IMap=null;}
function A3xaEntity_HtmlBox_ECPIdTag(ji_o3xehbenv)
{A3xaEntity_HtmlBox_IdTag.call(this,ji_o3xehbenv);this.PrintHtml_BoxBody=function(qi_oCell,ji_Row,ji_Col)
{this.PrintHtml_Clicks(qi_oCell,ji_Row,ji_Col);return true;};}
function A3xaEntity_HtmlBox_ECPLand(ji_o3xehbenv)
{A3xaEntity_HtmlBox_Land.call(this,ji_o3xehbenv);this.PrintHtml_BoxBody=function(qi_oCell,ji_Row,ji_Col)
{var jt_o3xtopmenu=new A3xaTopMenu();jt_o3xtopmenu.PrintHtml(qi_oCell);return this._A3xaEntity_HtmlBox_Land_PrintHtml_BoxBody(qi_oCell,ji_Row,ji_Col);};}
function A3xaEntity_HtmlBox_ECPCtrlInfo(ji_o3xehbenv)
{A3xaEntity_HtmlBox_CtrlInfo.call(this,ji_o3xehbenv);this.PrintHtml_BoxHeader=function(qi_oCell,ji_Row,ji_Col)
{this.PrintHtml_GLMore(qi_oCell,ji_Row,ji_Col);return true;};this.PrintHtml_BoxBody=function(qi_oCell,ji_Row,ji_Col)
{if(!this.PrintHtml_ControlIconsBox_Header(qi_oCell,ji_Row,ji_Col));var jt_ociPanel=new A3xaPanelControlIcons(null,-1,ji_Row,ji_Col,true,true);var jt_oBtnTurbo=jt_ociPanel.Get_Button("Turbo");jt_oBtnTurbo.PrintHtml(qi_oCell);this.PrintHtml_IconsQuery(qi_oCell,ji_Row,ji_Col);if(!this.PrintHtml_ControlIconsBox_Footer(qi_oCell,ji_Row,ji_Col));this.PrintHtml_IconsAdminBox(qi_oCell,ji_Row,ji_Col);this.PrintHtml_InfoIconsBox(qi_oCell,ji_Row,ji_Col);return true;};this.PrintHtml_CtrlLikes=function(qi_oCell,ji_Row,ji_Col){return true;};this.PrintHtml_IconsQuery=function(qi_oCell,ji_Row,ji_Col)
{var jt_oQueryRank_Icon=null;var jt_oQueryEntity_Icon=null;var jt_oQueryOrderby_Icon=null;var jt_o3xmngic=jg_oe.Get_3xAppMngIcons();var jt_odfic=jt_o3xmngic.Get_DefIcons();var jt_oxur=jg_oApp.Get_AppXUR().Get_3xXUR();if(!jt_oxur)
return false;jt_oQueryRank_Icon=jt_oxur.Get_QueryRankIcon();jt_oQueryEntity_Icon=jt_oxur.Get_QueryEntityIcon();jt_oQueryOrderby_Icon=jt_oxur.Get_QueryOrderbyIcon();if(jt_oQueryRank_Icon)
{var jt_o3xhiciRank=jt_o3xmngic.NewSprite(jt_oQueryRank_Icon.absid);jt_o3xhiciRank.Set_Dim(24,24);jt_o3xhiciRank.Set_Title(jt_oQueryRank_Icon.title,jt_oQueryRank_Icon.alt);jt_o3xhiciRank.Set_Options(null,false);var jt_ohQueryRank_Button=new A3xaSimpleButton3(jt_o3xhiciRank);jt_ohQueryRank_Button.Set_Status({on:true});jt_ohQueryRank_Button.PrintHtml(qi_oCell);}
if(jt_oQueryEntity_Icon)
{var jt_o3xhiciEntity=jt_o3xmngic.NewSprite(jt_oQueryEntity_Icon.absid);jt_o3xhiciEntity.Set_Dim(24,24);jt_o3xhiciEntity.Set_Title(jt_oQueryEntity_Icon.title,jt_oQueryEntity_Icon.alt);jt_o3xhiciEntity.Set_Options(null,false);var jt_ohQueryEntity_Button=new A3xaSimpleButton3(jt_o3xhiciEntity);jt_ohQueryEntity_Button.PrintHtml(qi_oCell);}
if(jt_oQueryOrderby_Icon)
{var jt_o3xhiciOrderby=jt_o3xmngic.NewSprite(jt_oQueryOrderby_Icon.absid);jt_o3xhiciOrderby.Set_Dim(24,24);jt_o3xhiciOrderby.Set_Title(jt_oQueryOrderby_Icon.title,jt_oQueryOrderby_Icon.alt);jt_o3xhiciOrderby.Set_Options(null,false);var jt_ohQueryOrderby_Button=new A3xaSimpleButton3(jt_o3xhiciOrderby);jt_ohQueryOrderby_Button.Set_Status({on:true});jt_ohQueryOrderby_Button.PrintHtml(qi_oCell);}
return true;};this.PrintHtml_IconsAdmin_NewMajor=function(qi_oCell,ji_Row,ji_Col)
{if(!this.PrintHtml_IconAdmin(qi_oCell,jg_oe.jc_oXUR.jc_QUR_QueryNewEntity,false))
{}
return true;};}
function A3xaEntity_HtmlBox_ECPIdentity(ji_o3xehbenv)
{A3xaEntity_HtmlBox_Identity.call(this,ji_o3xehbenv);this.PrintHtml_BoxBody=function(qi_oCell,ji_Row,ji_Col)
{var jt_oCPLandButtonStatus={jm_Value:null};this.PrintHtml_FilterBox(qi_oCell,ji_Row,ji_Col,jt_oCPLandButtonStatus);var jt_ocpLand=new A3xaPanelLandIcons3(null,-1,ji_Row,jg_oe.jc_oHtml.jc_Col_LandIcons,true,ji_Col);jt_ocpLand.InitButtonsStatus(jt_oCPLandButtonStatus.jm_Value);return true;};this.PrintHtml_BoxBodyLopry=function(qi_oCell,ji_Row,ji_Col)
{return true;};this.PrintHtml_BoxBodyDemand=function(qi_oCell,ji_Row,ji_Col)
{return true;};this.PrintHtml_FilterBox=function(qi_oCell,ji_Row,ji_Col,ji_oCPLandButtonStatus)
{if(!this.IsValid())
return false;jg_oe.CanLogInfo()&&jg_oe.LogInfo("","","A3xaECP_Mgr.PrintHtml_FilterBox");var jt_bBestFromBabylon=New_A3xaAZNC_XApp(this.jm_o3xehbenv.jm_oxe.Get_3xXEID()).IsBestFromBabylon();var jt_oglmLand=new A3xaMgrLand();var jt_oglmCategory=new GLMgrCategory(jt_bBestFromBabylon);if(!jt_bBestFromBabylon)
{var jt_bRequestArea=true;var jt_o3xmlra=jt_oglmLand.Get_MgrRequestArea(jg_oe.jc_oEntity.jc_Typ_GeoArea);jt_bRequestArea=jt_o3xmlra.LoadDataDD();jt_bRequestArea=(jt_bRequestArea&&jt_o3xmlra.PrintHtmlDD(qi_oCell));if(!jt_bRequestArea)
{jg_oe.LogErr("Fail","DDRequestArea","A3xaEntity_PrintHtml_SummaryBox");}
var jt_o3xmlrr=jt_oglmLand.Get_MgrRequestArea(jg_oe.jc_oEntity.jc_Typ_GeoRegion);jt_bRequestArea=(jt_bRequestArea&&jt_o3xmlrr.LoadDataDD());jt_bRequestArea=(jt_bRequestArea&&jt_o3xmlrr.PrintHtmlDD(qi_oCell));if(!jt_bRequestArea)
{jg_oe.LogErr("Fail","DDRequestRegion","A3xaEntity_PrintHtml_SummaryBox");}}
var jt_bRequestCategory=true;var jt_o3xmcr=jt_oglmCategory.Get_MgrRequestCategory();jt_bRequestCategory=jt_o3xmcr.LoadDataDD();jt_bRequestCategory=(jt_bRequestCategory&&jt_o3xmcr.PrintHtmlDD(qi_oCell));if(!jt_bRequestCategory)
{jg_oe.LogErr("Fail","DDRequestCategory","A3xaEntity_PrintHtml_SummaryBox");}
if(!jt_bBestFromBabylon)
{var jt_bLand=true;jt_bLand=jt_oglmLand.Get_MgrSelectPlace().LoadDataDD();jt_bLand=(jt_bLand&&jt_oglmLand.Get_MgrSelectPlace().PrintHtmlDD(qi_oCell,this.jm_o3xehbenv.jm_oDDCategoryCode,this.jm_o3xehbenv.jm_oDDPairLand));if(!jt_bLand)
{jg_oe.LogErr("Fail","LandDD","A3xaECP_Mgr.PrintHtml_FilterBox");}}
var jt_bCategory=true;jt_bCategory=jt_oglmCategory.Get_MgrSelectCategory().LoadDataDD();if(!jt_bCategory)
{jg_oe.LogErr("Fail","CategoryDD-LoadDataDD","A3xaECP_Mgr.PrintHtml_FilterBox");}
jt_bCategory=(jt_bCategory&&jt_oglmCategory.Get_MgrSelectCategory().PrintHtmlDD(qi_oCell));if(!jt_bCategory)
{jg_oe.LogErr("Fail","CategoryDD-PrintHtmlDD","A3xaECP_Mgr.PrintHtml_FilterBox");}
if(ji_oCPLandButtonStatus)
ji_oCPLandButtonStatus.jm_Value="OFF";this.jm_o3xehbenv.jm_oecpOrder.LoadDataDD();this.jm_o3xehbenv.jm_oecpOrder.PrintHtmlDD(qi_oCell);return true;};}
function A3xaEntity_HtmlBox_ECPInfo(ji_o3xehbenv)
{A3xaEntity_HtmlBox_Info.call(this,ji_o3xehbenv);this.PrintHtml_BoxBody=function(qi_oCell,ji_Row,ji_Col)
{if(this.IsValid())
{if(!this.PrintHtml_SummaryBox_Header(qi_oCell,ji_Row,ji_Col))
return false;if(!this.jm_o3xehbenv.jm_o3xMgrLand_IMap)
this.jm_o3xehbenv.jm_o3xMgrLand_IMap=new A3xaMgrLand_InteractiveMap();if(this.jm_o3xehbenv.jm_o3xMgrLand_IMap)
this.jm_o3xehbenv.jm_o3xMgrLand_IMap.PrintHtml(qi_oCell,ji_Row,ji_Col);if(!this.PrintHtml_SummaryBox_Footer(qi_oCell,ji_Row,ji_Col))
return false;}
this.jm_o3xehbenv.jm_o3xAppLogger.LoadDataDD();this.jm_o3xehbenv.jm_o3xAppLogger.PrintHtmlDD(qi_oCell);return true;};}
function A3xaECP_Mgr(ji_oxe_NOTUSED,ji_o3xehf,ji_o3xehbenv)
{this.jm_bBuild_A3xaECP_Mgr=false;if(!ji_o3xehbenv)
{ji_o3xehbenv=new A3xaEntity_HtmlBoxEnv_ECP();ji_o3xehbenv.jm_o3xehf=ji_o3xehf;this.jm_bBuild_A3xaECP_Mgr=true;}
A3xaEntity_Html.call(this,null,ji_o3xehf,ji_o3xehbenv);var jt_this=this;this._A3xaECP_Mgr=function()
{if(this.jm_bBuild_A3xaECP_Mgr&&!(this.CountChildren()>0))
{var jt_o3xehbox_IdTag=new A3xaEntity_HtmlBox_ECPIdTag(this.jm_o3xehbenv);this.AddChild(jt_o3xehbox_IdTag,jg_oe.jc_oHtml.jc_Col_IdTag,true);var jt_o3xehbox_Land=new A3xaEntity_HtmlBox_ECPLand(this.jm_o3xehbenv);this.AddChild(jt_o3xehbox_Land,jg_oe.jc_oHtml.jc_Col_LandIcons,true);var jt_o3xehbox_CtrlInfo=new A3xaEntity_HtmlBox_ECPCtrlInfo(this.jm_o3xehbenv);this.AddChild(jt_o3xehbox_CtrlInfo,jg_oe.jc_oHtml.jc_Col_CtrlInfoIcons,true);var jt_o3xehbox_Identity=new A3xaEntity_HtmlBox_ECPIdentity(this.jm_o3xehbenv);this.AddChild(jt_o3xehbox_Identity,jg_oe.jc_oHtml.jc_Col_Identity,true);var jt_o3xehbox_Info=new A3xaEntity_HtmlBox_ECPInfo(this.jm_o3xehbenv);this.AddChild(jt_o3xehbox_Info,jg_oe.jc_oHtml.jc_Col_Info,true);}
this.jm_o3xehbenv.jm_oDDCategoryCode=null;this.jm_o3xehbenv.jm_oDDPairLand=null;var jt_oxeidHL=jg_oApp.Get_AppXUR().Get_3xXUR().Get_XEIDHighlights();if(jt_oxeidHL)
{var jt_odcSelected=new A3xaDCEntity();jt_odcSelected.Get_3xXEID().CopyFrom(jt_oxeidHL);jt_odcSelected.Get_3xXEID().Clear_GEID();jt_odcSelected.Get_3xXEID().Get_3xCat().Clear();jt_odcSelected.Get_3xXEID().Get_3xPS().Clear();jt_oDDPairLand=new A3xaDDItemEntity();jt_oDDPairLand.Set_DCEntity(jt_odcSelected);this.jm_o3xehbenv.jm_oDDPairLand=jt_oDDPairLand;}
if(!this.jm_o3xehbenv.jm_oecpOrder)
this.jm_o3xehbenv.jm_oecpOrder=new A3xaECPOrder_Mgr();if(!this.jm_o3xehbenv.jm_o3xAppLogger)
this.jm_o3xehbenv.jm_o3xAppLogger=new A3xaAppLogger();};this.Set_DataSource=function(ji_oxe)
{this.jm_o3xehbenv.jm_oxe=ji_oxe;this._A3xaECP_Mgr();return true;};this.ResetECP=function()
{this.jm_o3xehbenv.jm_oDDCategoryCode=null;this.jm_o3xehbenv.jm_oDDPairLand=null;this.jm_o3xehbenv.jm_oecpOrder=null;this.jm_o3xehbenv.jm_o3xMgrLand_IMap=null;return true;};this.Get_AppLogger=function(){return this.jm_o3xehbenv.jm_o3xAppLogger;};this._A3xaECP_Mgr_Build=function()
{};this.ShowHtmlSelected=function()
{var jt_oheSet=jg_oe.Get_HtmlSetEntity();if(jt_oheSet&&!jt_oheSet.ShowHtmlSelected(this.jm_o3xehbenv.jm_oDDCategoryCode,this.jm_o3xehbenv.jm_oDDPairLand))
return false;if(this.jm_o3xehbenv.jm_o3xMgrLand_IMap)
this.jm_o3xehbenv.jm_o3xMgrLand_IMap.ShowSelectedHotSpot(jt_oheSet.Get_XEIDRowList(true,false));return true;};this.OnChangeDD_Category=function(ji_edd,ji_oddi)
{this.jm_o3xehbenv.jm_oDDCategoryCode=ji_oddi;return this.ShowHtmlSelected();};this.OnChangeDD_City=function(ji_edd,ji_oddi)
{this.jm_o3xehbenv.jm_oDDPairLand=ji_oddi;return this.ShowHtmlSelected();};this._A3xaECP_Mgr();}
function A3xaDefines_EntityInfoSet()
{this.jc_as=["","Pagina Facebook","",""];this.jc_as=["","Grupo Facebook","",""];this.jc_as=["","Perfil Facebook","",""];this.jc_as=["","Galeria Foto","",""];this.jc_as=["","Galeria Foto A3xa","",""];this.jc_as=["Person","","",""];}
function A3xaEntityInfo_Attributes(ji_sName,ji_bVisible,ji_Row,ji_Col)
{this.jm_sName=ji_sName;this.jm_bVisible=(ji_bVisible==true);this.jm_Row=ji_Row;this.jm_Col=ji_Col;this.jm_bSkip=false;}
function A3xaEntityInfo(ji_oglr,ji_oeifa)
{this.jm_oglr=ji_oglr;this.jm_oeifa=ji_oeifa;this.PrintHtml=function(qi_oParent){return false;};this.IsValid=function(){return this._A3xaEntityInfo_IsValid();};this._A3xaEntityInfo_IsValid=function()
{if(!this.jm_oglr)
return false;if(!(this.jm_oeifa&&this.jm_oeifa.Get_Master()))
return false;return true;};}
function A3xaEntityInfoSet(ji_oglr,ji_aoeifa,ji_ogeiattrCommon)
{this.jc_o3xdef=new A3xaDefines_EntityInfoSet();this.NewGEI=A3xaEntityInfoSet_NewGEI;this.PrintHtml=A3xaEntityInfoSet_PrintHtml;this.Set_CommonAttrib=A3xaEntityInfoSet_Set_CommonAttrib;this.IsValid=A3xaEntityInfoSet_IsValid;this.jm_oglr=ji_oglr;this.jm_aoeifa=ji_aoeifa;this.jm_ogeiattrCommon=ji_ogeiattrCommon;}
function A3xaEntityInfoSet_Set_CommonAttrib(ji_ogeiattrCommon)
{this.jm_ogeiattrCommon=ji_ogeiattrCommon;return true;}
function A3xaEntityInfoSet_IsValid()
{if(!this.jm_oglr)
return false;if(!(this.jm_aoeifa&&this.jm_aoeifa.length))
return false;for(var i=0;i<this.jm_aoeifa.length;i++)
{if(!(this.jm_aoeifa[i]&&this.jm_aoeifa[i].Get_Master()))
return false;}
return true;}
function A3xaEntityInfoSet_NewGEI(ji_oeifa)
{if(!ji_oeifa)
return null;var jt_ti=ji_oeifa.Get_Master()[jg_oe.jc_oA3xaDbZero.jc_Eifa_Typ];var jr_gei=null;if(!jt_ti)
jr_gei=null;else if(jt_ti==jg_oe.jc_oEntityInfo.jc_TI_Website)
jr_gei=new GEISimpleButton(this.jm_oglr,ji_oeifa,new Array(new GEISimpleButton_Parameters2(jg_oe.jc_oEntityInfo.jc_CI_Website_Button,true,jg_oe.jc_oIcons.jc_oIconSS_Url,"Website","www"),new GEISimpleButton_Parameters2(jg_oe.jc_oEntityInfo.jc_CI_Website_Bold,false,null,"Website","www",null,null,null,true,false)));else if(jt_ti==jg_oe.jc_oEntityInfo.jc_TI_Video)
jr_gei=new GEISB_Video(this.jm_oglr,ji_oeifa,new Array(new GEISimpleButton_Parameters2(jg_oe.jc_oEntityInfo.jc_CI_Video_YoutubeId,true,jg_oe.jc_oIcons.jc_oIconSS_Video,"Youtube","ytb",null,null,null,null,false,false,null,null,true),new GEISimpleButton_Parameters2(jg_oe.jc_oEntityInfo.jc_CI_Video_VimeoId,true,jg_oe.jc_oIcons.jc_oIconSS_Video,"Vimeo","vmo",null,null,null,null,false,false,null,null,true),new GEISimpleButton_Parameters2(jg_oe.jc_oEntityInfo.jc_CI_Video_Url,true,jg_oe.jc_oIcons.jc_oIconSS_VideoUrl,"Video Link","vdl",null,null,null,null,false,false,null,null,null)));else if(jt_ti==jg_oe.jc_oEntityInfo.jc_TI_Facebook)
jr_gei=new GEISimpleButton(this.jm_oglr,ji_oeifa,new Array(new GEISimpleButton_Parameters2(jg_oe.jc_oEntityInfo.jc_CI_Facebook_Page,true,jg_oe.jc_oIcons.jc_oIconSS_FacebookPage,"Facebook page","fbp"),new GEISimpleButton_Parameters2(jg_oe.jc_oEntityInfo.jc_CI_Facebook_Group,false,jg_oe.jc_oIcons.jc_oIconSS_FacebookGroup,"Facebook group","fbg"),new GEISimpleButton_Parameters2(jg_oe.jc_oEntityInfo.jc_CI_Facebook_User,false,jg_oe.jc_oIcons.jc_oIconSS_FacebookUser,"Facebook profile","fbu")));else if(jt_ti==jg_oe.jc_oEntityInfo.jc_TI_Twitter)
jr_gei=new GEISimpleButton(this.jm_oglr,ji_oeifa,new Array(new GEISimpleButton_Parameters2(jg_oe.jc_oEntityInfo.jc_CI_Twitter_Url,true,jg_oe.jc_oIcons.jc_oIconSS_Twitter,"Twitter","twt")));else if(jt_ti==jg_oe.jc_oEntityInfo.jc_TI_GooglePlus)
jr_gei=new GEISimpleButton(this.jm_oglr,ji_oeifa,new Array(new GEISimpleButton_Parameters2(jg_oe.jc_oEntityInfo.jc_CI_GooglePlus_Url,true,jg_oe.jc_oIcons.jc_oIconSS_Gplus,"G+","gpl")));else if(jt_ti==jg_oe.jc_oEntityInfo.jc_TI_Phone)
jr_gei=new GEISimpleButton(this.jm_oglr,ji_oeifa,new Array(new GEISimpleButton_Parameters2(jg_oe.jc_oEntityInfo.jc_CI_Phone_Number,true,jg_oe.jc_oIcons.jc_oIconSS_Phone,"Tel","tel",null,null,null,null,false,true)));else if(jt_ti==jg_oe.jc_oEntityInfo.jc_TI_Skype)
jr_gei=new GEISimpleButton(this.jm_oglr,ji_oeifa,new Array(new GEISimpleButton_Parameters2(jg_oe.jc_oEntityInfo.jc_CI_Skype_Id,true,jg_oe.jc_oIcons.jc_oIconSS_Skypetxt,"Skype","skp",null,null,null,null,false,null,"skype:","?call")));else if(jt_ti==jg_oe.jc_oEntityInfo.jc_TI_Note)
jr_gei=new GEINote(this.jm_oglr,ji_oeifa);else if(jt_ti==jg_oe.jc_oEntityInfo.jc_TI_Email)
jr_gei=new GEISB_Email(this.jm_oglr,ji_oeifa,new Array(new GEISimpleButton_Parameters2(jg_oe.jc_oEntityInfo.jc_CI_Email_Addr,true,jg_oe.jc_oIcons.jc_oIconSS_Email,"Email","eml",null,null,null,null,false,null,null,null)));else if(jt_ti==jg_oe.jc_oEntityInfo.jc_TI_Image)
jr_gei=new GEIImage(this.jm_oglr,ji_oeifa);else if(jt_ti==jg_oe.jc_oEntityInfo.jc_TI_Gallery)
jr_gei=new GEISimpleButton(this.jm_oglr,ji_oeifa,new Array(new GEISimpleButton_Parameters2(jg_oe.jc_oEntityInfo.jc_CI_Gallery_FlickrUrl,true,jg_oe.jc_oIcons.jc_oIconSS_Flickrtxt,"Photo Gallery","gal"),new GEISimpleButton_Parameters2(jg_oe.jc_oEntityInfo.jc_CI_Gallery_Flickrset,true,jg_oe.jc_oIcons.jc_oIconSS_Flickrtxt,"Flickr-set","gfs",null,null,null,null,null,null,jg_oe.jc_oUrls.jc_sFlickrset_avenidaazul),new GEISimpleButton_Parameters2(jg_oe.jc_oEntityInfo.jc_CI_A3xaGallery_FlickrGallery,true,jg_oe.jc_oIcons.jc_oIconSS_Flickrtxt,"Flickr-gallery","gfg",null,null,null,null,null,null,jg_oe.jc_oUrls.jc_sFlickrgal_avenidaazul)));else if(jt_ti==jg_oe.jc_oEntityInfo.jc_TI_A3xaGallery)
jr_gei=new GEISimpleButton(this.jm_oglr,ji_oeifa,new Array(new GEISimpleButton_Parameters2(jg_oe.jc_oEntityInfo.jc_CI_A3xaGallery_Url,true,jg_oe.jc_oIcons.jc_oIconSS_A3xaGallery,"Photo Gallery A3xa","gaa"),new GEISimpleButton_Parameters2(jg_oe.jc_oEntityInfo.jc_CI_A3xaGallery_Flickrset,true,jg_oe.jc_oIcons.jc_oIconSS_A3xaGallery,"Photo Gallery A3xa","gaa",null,null,null,null,null,null,"index.php?option=com_content&view=article&id=34"+"&Itemid=397"+"&p_TypInfo="+jg_oe.jc_oEntityInfo.jc_TI_A3xaGallery+"&p_CodInfo="+jg_oe.jc_oEntityInfo.jc_CI_A3xaGallery_Flickrset+"&p_Flickrset=")));else if(jt_ti==jg_oe.jc_oEntityInfo.jc_TI_Person)
jr_gei=new GEISimpleButton(this.jm_oglr,ji_oeifa,new Array(new GEISimpleButton_Parameters2(jg_oe.jc_oEntityInfo.jc_CI_Person_Name,true,jg_oe.jc_oIcons.jc_oIconSS_Person,"Person","psn",null,null,null,null,false,true)));else if(jt_ti==jg_oe.jc_oEntityInfo.jc_TI_Wiki)
jr_gei=new GEISimpleButton(this.jm_oglr,ji_oeifa,new Array(new GEISimpleButton_Parameters2(jg_oe.jc_oEntityInfo.jc_CI_Wikipedia,true,jg_oe.jc_oIcons.jc_oIconSS_Wikipedia,"Wiki Geographic","wkg"),new GEISimpleButton_Parameters2(jg_oe.jc_oEntityInfo.jc_CI_Wikiphoneprefix,true,jg_oe.jc_oIcons.jc_oIconSS_Wikiphoneprefix,"Wiki Phone Prefix","wkp"),new GEISimpleButton_Parameters2(jg_oe.jc_oEntityInfo.jc_CI_Wikitravel,false,jg_oe.jc_oIcons.jc_oIconSS_Wikitravel,"Wikitravel","wkt")));else if(jt_ti==jg_oe.jc_oEntityInfo.jc_TI_WaterCloset)
jr_gei=new GEISimpleButton(this.jm_oglr,ji_oeifa,new Array(new GEISimpleButton_Parameters2(jg_oe.jc_oEntityInfo.jc_CI_WCUrl,true,jg_oe.jc_oIcons.jc_oIconSS_WCUrl,"WC","wc")));else if(jt_ti==jg_oe.jc_oEntityInfo.jc_TI_MetasystemControl)
jr_gei=null;else if(jt_ti==jg_oe.jc_oEntityInfo.jc_TI_QueryUnifiedRequest)
jr_gei=null;if(!jr_gei)
return null;if(this.jm_ogeiattrCommon)
ji_oeifa.Attach_Attributes(this.jm_ogeiattrCommon);return jr_gei;}
function A3xaEntityInfoSet_PrintHtml(qi_oParent)
{if(!this.IsValid())
return false;var jr_b=true;for(var i=0;i<this.jm_aoeifa.length;i++)
{jt_oeifa=this.jm_aoeifa[i];jt_ogei=this.NewGEI(jt_oeifa);if(jt_ogei)
{if(!jt_ogei.PrintHtml(qi_oParent))
jr_b=false;}
var jt_aMaster=jt_oeifa.Get_Master();if(jt_aMaster[jg_oe.jc_oA3xaDbZero.jc_Eifa_Typ]==jg_oe.jc_oEntityInfo.jc_TI_A3xaGallery&&jt_aMaster[jg_oe.jc_oA3xaDbZero.jc_Eifa_Cod]==jg_oe.jc_oEntityInfo.jc_CI_A3xaGallery_Flickrset)
{jt_oeifaTwin=new A3xaREntityInfo(null,null);jt_oeifaTwin.CopyFrom(jt_oeifa);var jt_aMasterTwin=jt_oeifaTwin.Get_Master();jt_aMasterTwin[jg_oe.jc_oA3xaDbZero.jc_Eifa_Typ]=jg_oe.jc_oEntityInfo.jc_TI_Gallery;jt_aMasterTwin[jg_oe.jc_oA3xaDbZero.jc_Eifa_Cod]=jg_oe.jc_oEntityInfo.jc_CI_Gallery_Flickrset;jt_ogeiTwin=this.NewGEI(jt_oeifaTwin);if(jt_ogeiTwin)
{if(!jt_ogeiTwin.PrintHtml(qi_oParent))
jr_b=false;}}}
return true;}
function GEINote(ji_oglr,ji_oeifa)
{A3xaEntityInfo.call(this,ji_oglr,ji_oeifa);this.PrintHtml=function(qi_oParent)
{if(!this.IsValid())
return false;if(!(qi_oParent&&qi_oParent.length))
return false;var jt_aMaster=this.jm_oeifa.Get_Master();var jt_ogeiattr=this.jm_oeifa.Get_Attributes();var jt_sText=jt_aMaster[jg_oe.jc_oA3xaDbZero.jc_Eifa_Info];var jt_CodInfo=jt_aMaster[jg_oe.jc_oA3xaDbZero.jc_Eifa_Cod];if(!jt_CodInfo||jt_CodInfo==jg_oe.jc_oEntityInfo.jc_CI_Note_Text)
{qi_oParent.append("<p>"+jt_sText+"</p>");}
return true;};}
function GEIImage(ji_oglr,ji_oeifa)
{A3xaEntityInfo.call(this,ji_oglr,ji_oeifa);this.PrintHtml=function(qi_oParent)
{if(!this.IsValid())
return false;if(!(qi_oParent&&qi_oParent.length))
return false;var jt_aMaster=this.jm_oeifa.Get_Master();var jt_ogeiattr=this.jm_oeifa.Get_Attributes();var jt_TypEntity=this.jm_oglr.Get_3xXEID().Get_TypEntity();var jt_IdEntity=this.jm_oglr.Get_3xXEID().Get_IdEntity();var jt_TypInfo=jt_aMaster[jg_oe.jc_oA3xaDbZero.jc_Eifa_Typ];var jt_IdInfo=jt_aMaster[jg_oe.jc_oA3xaDbZero.jc_Eifa_Id];var jt_CodInfo=jt_aMaster[jg_oe.jc_oA3xaDbZero.jc_Eifa_Cod];var jt_sUrl=jt_aMaster[jg_oe.jc_oA3xaDbZero.jc_Eifa_Info];var jt_sId="";if(!jt_CodInfo||jt_CodInfo==jg_oe.jc_oEntityInfo.jc_CI_Image_Url)
{if(jt_ogeiattr)
{if(jt_ogeiattr.jm_bSkip)
return true;jt_ogeiattr.jm_bSkip=true;}
jt_sId="Cell_Image_";}
else if(jt_CodInfo==jg_oe.jc_oEntityInfo.jc_CI_Image_StaticMapUrl)
{if(jt_TypEntity==jg_oe.jc_oEntity.jc_Typ_GeoArea)
jt_sId="Cell_StaticMapA_";else if(jt_TypEntity==jg_oe.jc_oEntity.jc_Typ_GeoRegion)
jt_sId="Cell_StaticMapR_";else
jt_sId="Cell_StaticMapU_";}
else
jt_sId="Cell_ImageUnk_";var jt_sName="";var jt_bVisible=true;if(jt_ogeiattr)
{if(jt_ogeiattr.jm_Row>0&&jt_ogeiattr.jm_Col>0)
jt_sId+=jt_ogeiattr.jm_Row+"_"+jt_ogeiattr.jm_Col;jt_sName=jt_ogeiattr.jm_sName;jt_bVisible=jt_ogeiattr.jm_bVisible;jt_ogeiattr.jm_bVisible=false;}
var qt_oImg=jQuery("<img>",{id:jt_sId,src:jt_sUrl,alt:jt_sName,title:jt_sName,width:'200',height:'150',border:'0'});if(!(qt_oImg&&qt_oImg.length))
return false;qt_oImg.css({margin:'0px'});if(!jt_bVisible)
{qt_oImg.css("visibility","hidden");qt_oImg.css("position","absolute");}
qi_oParent.append(qt_oImg);return true;};}
function GEISimpleButton_Parameters2(ji_CodInfo,ji_bCodNull,ji_oIconFileName,ji_sTitle,ji_sAlt,ji_Width,ji_Height,ji_bTargetNew,ji_bShadow,ji_bParagraph,ji_bTipPopup,ji_sUrlLead,ji_sUrlTrail,ji_bSimplePopupPlugin)
{this.jm_CodInfo=ji_CodInfo;this.jm_bCodNull=(ji_bCodNull==true?true:false);this.jm_oIconFileName=(ji_oIconFileName||null);this.jm_sTitle=ji_sTitle;this.jm_sAlt=ji_sAlt;this.jm_Width=ji_Width;this.jm_Height=ji_Height;this.jm_bTargetNew=(ji_bTargetNew==false?false:true);this.jm_bShadow=ji_bShadow;this.jm_bParagraph=(ji_bParagraph==true?true:false);this.jm_bTipPopup=(ji_bTipPopup==true?true:false);this.jm_bSimplePopupPlugin=(ji_bSimplePopupPlugin==true?true:false);this.jm_sUrlLead="";this.jm_sUrlTrail="";if(ji_sUrlLead&&ji_sUrlLead.length)
this.jm_sUrlLead=ji_sUrlLead;if(ji_sUrlTrail&&ji_sUrlTrail.length)
this.jm_sUrlTrail=ji_sUrlTrail;}
function GEISimpleButton(ji_oglr,ji_oeifa,ji_aoParametersSB)
{A3xaEntityInfo.call(this,ji_oglr,ji_oeifa);this.jm_aoParametersSB=null;this.IsValid=function()
{if(!this._A3xaEntityInfo_IsValid())
return false;if(!(this.jm_aoParametersSB&&this.jm_aoParametersSB.length))
return false;return true;};this.Set_ParametersSB=function(ji_aoParametersSB)
{this.jm_aoParametersSB=ji_aoParametersSB;return true;};this.ConvertUrlLink=function(ji_s,ji_oParametersSB){return ji_s;};this.ConvertSimplePopupPluginContents=function(ji_s,ji_oParametersSB)
{return{contents:ji_s,fnAlt:null};};this.PrintHtml=function(qi_oParent)
{if(!this.IsValid())
return false;if(!(qi_oParent&&qi_oParent.length))
return false;var jt_aMaster=this.jm_oeifa.Get_Master();var jt_arsSlaves=this.jm_oeifa.Get_Slaves();var jt_TypEntity=this.jm_oglr.Get_3xXEID().Get_TypEntity();var jt_IdEntity=this.jm_oglr.Get_3xXEID().Get_IdEntity();var jt_TypInfo=jt_aMaster[jg_oe.jc_oA3xaDbZero.jc_Eifa_Typ];var jt_CodInfo=jt_aMaster[jg_oe.jc_oA3xaDbZero.jc_Eifa_Cod];var jt_IdInfo=jt_aMaster[jg_oe.jc_oA3xaDbZero.jc_Eifa_Id];var jt_sInfo=jt_aMaster[jg_oe.jc_oA3xaDbZero.jc_Eifa_Info];var jr_b=false;for(var i=0;i<this.jm_aoParametersSB.length;i++)
{var jt_oParSB=this.jm_aoParametersSB[i];if((!jt_CodInfo&&jt_oParSB.jm_bCodNull)||jt_CodInfo==jt_oParSB.jm_CodInfo)
{var jt_oUrlLink=null;var jt_sTitle=null;var jt_sId=null;var jt_oSimplePopupPluginContents=null;if(jt_oParSB.jm_bSimplePopupPlugin)
{jt_sId=jt_TypEntity+jt_IdEntity+"_"+
jt_TypInfo+"_"+jt_CodInfo+"_"+jt_IdInfo;jt_sTitle=jt_oParSB.jm_sTitle;jt_oSimplePopupPluginContents=this.ConvertSimplePopupPluginContents(jt_sInfo,jt_oParSB);}
else if(jt_oParSB.jm_bTipPopup)
{jt_sTitle=jt_sInfo;for(var s=0;jt_arsSlaves&&s<jt_arsSlaves.length;s++)
jt_sTitle+=" - "+jt_arsSlaves[s][jg_oe.jc_oA3xaDbZero.jc_Eifa_Info];}
else
{jt_oUrlLink=new A3xaUrl(this.ConvertUrlLink(jt_oParSB.jm_sUrlLead+jt_sInfo+
jt_oParSB.jm_sUrlTrail,jt_oParSB),null);jt_sTitle=jt_oParSB.jm_sTitle;}
var jt_o3xmngic=jg_oe.Get_3xAppMngIcons();var jt_odfic=jt_o3xmngic.Get_DefIcons();var jt_o3xhici=jt_o3xmngic.NewSprite(jt_oParSB.jm_oIconFileName.absid);jt_o3xhici.Set_HtmId(jt_sId);jt_o3xhici.Set_Dim(jt_oParSB.jm_Width,jt_oParSB.jm_Height,true);jt_o3xhici.Set_UrlLink(jt_oUrlLink?jt_oUrlLink.Get_Url():null,jt_oParSB.jm_bTargetNew);jt_o3xhici.Set_Title(jt_sTitle,jt_oParSB.jm_sAlt);jt_o3xhici.Set_Options(jt_oParSB.jm_bShadow,jt_oParSB.jm_bParagraph);var jt_ohButton=new A3xaSimpleButton3(jt_o3xhici);jt_ohButton.Set_Options(jt_oParSB.jm_bTipPopup,jt_oSimplePopupPluginContents?jt_oSimplePopupPluginContents.contents:null,jt_oSimplePopupPluginContents?jt_oSimplePopupPluginContents.fnAlt:null);jr_b=jt_ohButton.PrintHtml(qi_oParent);break;}}
return jr_b;};if(ji_aoParametersSB&&ji_aoParametersSB.length)
this.jm_aoParametersSB=ji_aoParametersSB;}
function GEISB_Email(ji_oglr,ji_oeifa,ji_aoParametersSB)
{GEISimpleButton.call(this,ji_oglr,ji_oeifa,ji_aoParametersSB);this.ConvertUrlLink=function(ji_s,ji_oParametersSB){return EmailAntispam_UrlLink(ji_s);};}
function GEISB_Video(ji_oglr,ji_oeifa,ji_aoParametersSB)
{GEISimpleButton.call(this,ji_oglr,ji_oeifa,ji_aoParametersSB);this.ConvertSimplePopupPluginContents=GEISB_Video_ConvertSimplePopupPluginContents;}
function GEISB_Video_ConvertSimplePopupPluginContents(ji_s,ji_oParametersSB)
{if(!ji_s)
return null;var jt_opdim=jg_oe.Get_PopupDim();var jr_osppc={contents:"",fnAlt:function(qi_ospuContent,qi_ospu)
{var jt_opdyndim=jg_oe.Get_PopupDim();if(qi_ospuContent&&qi_ospuContent.length&&jt_opdyndim&&jt_opdyndim.w>10&&jt_opdyndim.h>10)
{qi_ospuContent.width(jt_opdyndim.w);qi_ospuContent.height(jt_opdyndim.h);}}};if(ji_oParametersSB.jm_CodInfo==jg_oe.jc_oEntityInfo.jc_CI_Video_YoutubeId)
{jr_osppc.contents="<iframe width='"+jt_opdim.w+"' height='"+jt_opdim.h+"' src='http://www.youtube.com/embed/"+
ji_s+"' frameborder='0' allowfullscreen></iframe>";return jr_osppc;}
else if(ji_oParametersSB.jm_CodInfo==jg_oe.jc_oEntityInfo.jc_CI_Video_VimeoId)
{jr_osppc.contents="<iframe src='http://player.vimeo.com/video/"+
ji_s+"' width='"+jt_opdim.w+"' height='"+jt_opdim.h+"' frameborder='0'"+" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>";return jr_osppc;}
return null;}
function A3xaPanelControlIcons(ji_aNames,ji_Rows,ji_Row,ji_Col,ji_bMasterSlave,ji_bAjax)
{if(ji_aNames==null)
ji_aNames=new Array("Like","Turbo","GLMore");A3xaEntityButtonSet2.call(this,ji_aNames,ji_Rows,ji_Row,ji_Col,ji_bMasterSlave,ji_bAjax,false);this.OnBtnChangeStatus=A3xaPanelControlIcons_OnBtnChangeStatus;this.NewSlavePanel=A3xaPanelControlIcons_NewSlavePanel;this.Get_AjaxUrlParams=A3xaPanelControlIcons_Get_AjaxUrlParams;this.Set_AjaxUrlParams=A3xaPanelControlIcons_Set_AjaxUrlParams;this.OnAjaxReadyFn=A3xaPanelControlIcons_OnAjaxReadyFn;this.AsyncChangeStatus=A3xaPanelControlIcons_AsyncChangeStatus;this.jm_sAjaxUrlParams=null;var jt_oBtnTurbo=this.Get_Button("Turbo");if(jt_oBtnTurbo&&this.IsMaster())
{var jt_oAjaxUrlParams=new A3xaUrl(null,null);jt_oAjaxUrlParams.Add_UrlParam2("p_GLTurbo",jg_oe.Get_TurboString());jt_oAjaxUrlParams.Add_UrlParam2("p_GLHeader",jg_oe.jc_oA3xaDbZero.jc_GLID_All+
jg_oe.jc_oA3xaDbZero.jc_GLMID_DT);var jt_o3xhici=jg_oe.Get_3xAppMngIcons().NewSprite(jg_oe.jc_oIcons.jc_oIconMS_Turbo.absid);jt_oBtnTurbo.Set_SrcInfo4(jt_o3xhici,["A3xaTurboZero (...developing...) - now is "+jg_oe.Get_TurboDescr(),"A3xaTurboZero (...en desarrollo...) - ahora estÃ¡ "+jg_oe.Get_TurboDescr(),"A3xaTurboZero (...em construÃ§Ã£o...) - agora Ã© "+jg_oe.Get_TurboDescr(),"A3xaTurboZero (...in sviluppo...) - ora Ã¨ "+jg_oe.Get_TurboDescr()],"Turbo","jg_oPanelControlIcons_Builder.OnClick",-1,jt_oAjaxUrlParams?jt_oAjaxUrlParams.Get_UrlParams():"",jg_oe.IsTurboON()?"ON":"OFF");jt_oBtnTurbo.AttachProperties(false,false,true);}
var jt_oBtnGLMore=this.Get_Button("GLMore");if(jt_oBtnGLMore)
{var jt_o3xhici=jg_oe.Get_3xAppMngIcons().NewSprite(jg_oe.jc_oIcons.jc_oIconMS_GLMore.absid);jt_oBtnGLMore.Set_SrcInfo4(jt_o3xhici,["Expand","Expandir","Expandir","Ampliare"],"xpd","jg_oPanelControlIcons_Builder.OnClick",-1,null);jt_oBtnGLMore.Set_Properties(false);jt_oBtnGLMore.AttachProperties(this.IsMaster(),true,false);}
var jt_oBtnLike=this.Get_Button("Like");if(jt_oBtnLike)
{jt_oBtnLike.Set_Properties(false);jt_oBtnLike.AttachProperties(false,false,true);}}
function A3xaPanelControlIcons_AsyncChangeStatus(ji_Name,ji_NewStatus)
{if(ji_Name=="Turbo")
{if(ji_NewStatus=="ON")
{jg_oe.Set_TurboStatus(true);}
else if(ji_NewStatus=="OFF")
jg_oe.Set_TurboStatus(false);}
return A3xaEntityButtonSet2_AsyncChangeStatus.call(this,ji_Name,ji_NewStatus);}
function A3xaPanelControlIcons_NewSlavePanel(ji_aNames,ji_Rows,ji_Row,ji_Col)
{if(ji_Rows==null)
ji_Rows=this.jm_Rows;if(ji_Col==null)
ji_Col=this.jm_Col;if(!(ji_Row>0&&ji_Col>0))
return null;return new A3xaPanelControlIcons(ji_aNames,ji_Rows,ji_Row,ji_Col,true,true);}
function A3xaPanelControlIcons_Set_AjaxUrlParams(ji_ButtonName,ji_sAjaxUrlParams)
{if(ji_ButtonName=="Like")
this.jm_sAjaxUrlParams=ji_sAjaxUrlParams;return true;}
function A3xaPanelControlIcons_Get_AjaxUrlParams(ji_ButtonName,ji_ButtonStatus)
{if(ji_ButtonName=="Like")
return this.jm_sAjaxUrlParams;if(ji_ButtonName=="Turbo")
{var jt_oHostReporter=jg_oe.Get_Reporter();return jt_oHostReporter.Get_AjaxUrlParams();}
return"";}
function A3xaPanelControlIcons_OnAjaxReadyFn(ji_ogAjaxResponse)
{var jt_ButtonName=ji_ogAjaxResponse.Get_ItemValue("ButtonName");var jt_ButtonStatus=ji_ogAjaxResponse.Get_ItemValue("ButtonStatus");if(jt_ButtonName=="Like")
{var jt_IdEntity=ji_ogAjaxResponse.Get_ItemValue("IdEntity");var jt_TypEntity=ji_ogAjaxResponse.Get_ItemValue("TypEntity");var jt_LikesTotal=ji_ogAjaxResponse.Get_ItemValue("LikesTotal");var jt_Fan=ji_ogAjaxResponse.Get_ItemValue("Fan");var jt_elemEntity=null;var div_Entity_Children=null;if(jt_IdEntity>0&&jt_TypEntity!=null&&jt_LikesTotal!=null&&jt_Fan!=null)
jt_elemEntity=document.getElementById("likes_"+jt_TypEntity+"_"+jt_IdEntity);if(jt_elemEntity!=null)
div_Entity_Children=jt_elemEntity.childNodes;for(var i=0;div_Entity_Children!=null&&i<div_Entity_Children.length;i++)
{if(div_Entity_Children.item(i).nodeName=='SPAN')
div_Entity_Children.item(i).innerHTML=jt_LikesTotal;}}
else if(jt_ButtonName=="Turbo")
{}
return A3xaEntityButtonSet2_OnAjaxReadyFn.call(this,ji_ogAjaxResponse);}
function A3xaPanelControlIcons_OnBtnChangeStatus(ji_Name,ji_btnStatus)
{if(ji_Name=="GLMore")
{var jt_bStatus=null;if(ji_btnStatus=="ON")
jt_bStatus=true;else if(ji_btnStatus=="OFF")
jt_bStatus=false;var jt_oheSet=jg_oe.Get_HtmlSetEntity();if(jt_oheSet)
jt_oheSet.OnGLMore(this.jm_Row,jt_bStatus);}
return A3xaEntityButtonSet2_OnBtnChangeStatus.call(this,ji_Name,ji_btnStatus);}
jg_oPanelControlIcons_Builder=new A3xaPanelControlIcons_Builder();function A3xaPanelControlIcons_Builder()
{this.OnPageFooterEnd=function()
{var jt_Row=1;var jt_RowElem=document.getElementById("Row_"+jt_Row);if(jt_RowElem==null)
jt_RowElem=document.getElementById("RowS_"+jt_Row);if(jt_RowElem==null)
return true;var jt_oxeid=new A3xaDCEntity();var jt_o3xxeid=jt_oxeid.Get_3xXEID();jt_o3xxeid.Set_String(jt_RowElem.getAttribute('XEIDCode'));var jt_TypEntity=jt_o3xxeid.Get_TypEntity();if(!(jt_TypEntity==jg_oe.jc_oEntity.jc_Typ_MetaSystemControl))
return true;var jt_oExecPanel=new A3xaPanelControlIcons(null,-1,jt_Row,jg_oe.jc_oHtml.jc_Col_CtrlInfoIcons,true,true,"");var jt_oHostReporter=jg_oe.Get_Reporter();jt_oHostReporter.Set_AjaxUrlParams("&p_GLTurbo="+jg_oe.Get_TurboString()+"&p_GLHeader="+jg_oe.jc_oA3xaDbZero.jc_GLID_All+jg_oe.jc_oA3xaDbZero.jc_GLMID_DT);jt_oHostReporter.Set_ExecDevice(jt_oExecPanel);var jt_bSingle=false;var jt_oxur=null;var jt_oAppXUR=jg_oApp.Get_AppXUR();if(jt_oAppXUR)
jt_oxur=jt_oAppXUR.Get_3xXUR();if(jt_oxur)
jt_bSingle=jt_oxur.IsSingle();if(jt_bSingle)
{var jt_oBtnGLMore=null;jt_oBtnGLMore=jt_oExecPanel.Get_Button("GLMore");if(jt_oBtnGLMore)
jt_oBtnGLMore.Set_Status("ON",false);}
return true;};this.OnClick=function(ji_Name,ji_Rows,ji_Row,ji_Col,ji_ColTarget,ji_sAjaxUrlParams)
{if(!(ji_Row>0&&ji_Col>0))
return false;var jt_oHostReporter=jg_oe.Get_Reporter();var jt_oPanel=jt_oHostReporter.Get_ExecDevice();if(!(jt_oPanel&&jt_oPanel.jm_Row==ji_Row&&jt_oPanel.jm_Col==ji_Col))
{jt_oPanel=null;jt_oPanel=new A3xaPanelControlIcons(null,ji_Rows,ji_Row,ji_Col,true,true);}
if(ji_Name=="Like")
{jt_oPanel.Set_AjaxUrlParams(ji_Name,ji_sAjaxUrlParams);}
else if(ji_Name=="Turbo")
{var jt_CurrentStatus=jt_oPanel.Get_ButtonStatus(ji_Name);return jg_oApp.OnClickTurbo(jt_CurrentStatus=="ON",function(){jt_oPanel.OnButtonClick(ji_Name);});}
jt_oPanel.OnButtonClick(ji_Name);return true;};this.Builder_RefreshButtonStatus=function(ji_Name)
{var jt_oHostReporter=jg_oe.Get_Reporter();var jt_oPanel=jt_oHostReporter.Get_ExecDevice();if(!jt_oPanel)
return false;jt_oPanel.Set_SlavesButtonStatus(ji_Name,"KS");return true;};}
function A3xaPanelLandIcons3(ji_aNames,ji_Rows,ji_Row,ji_Col,ji_bMasterSlave,ji_ColImages)
{if(ji_aNames==null)
ji_aNames=new Array("StaticMapA","StaticMapR");A3xaEntityButtonSet2.call(this,ji_aNames,ji_Rows,ji_Row,ji_Col,ji_bMasterSlave,false,true);this.OnBtnChangeStatus=A3xaPanelLandIcons3_OnBtnChangeStatus;this.NewSlavePanel=A3xaPanelLandIcons3_NewSlavePanel;this.ShowImage=A3xaPanelLandIcons3_ShowImage;this.InitButtonsStatus=A3xaPanelLandIcons3_InitButtonsStatus;this.jm_oImage=null;this.jm_oStaticMapA=null;this.jm_oStaticMapR=null;this.jm_ColImages=ji_ColImages;var jt_oBtnStaticMapA=this.Get_Button("StaticMapA");if(jt_oBtnStaticMapA)
{var jt_o3xhici=jg_oe.Get_3xAppMngIcons().NewSprite(jg_oe.jc_oIcons.jc_oIconMS_StaticMapArea.absid);jt_o3xhici.Set_Options=(null,false);jt_oBtnStaticMapA.Set_SrcInfo4(jt_o3xhici,["Map Area","Mapa Area","Mapa Area","Mappa Area"],"MapA","A3xaPanelLandIcons3_OnClick",ji_ColImages,"",null);jt_oBtnStaticMapA.Set_Properties(false);jt_oBtnStaticMapA.AttachProperties(this.IsMaster(),false,false);}
var jt_oBtnStaticMapR=this.Get_Button("StaticMapR");if(jt_oBtnStaticMapR)
{var jt_o3xhici=jg_oe.Get_3xAppMngIcons().NewSprite(jg_oe.jc_oIcons.jc_oIconMS_StaticMapRegion.absid);jt_o3xhici.Set_Options=(null,false);jt_oBtnStaticMapR.Set_SrcInfo4(jt_o3xhici,["Map Region","Mapa Region","Mapa RegiÃ£o","Mappa Regione"],"MapR","A3xaPanelLandIcons3_OnClick",ji_ColImages,"",null);jt_oBtnStaticMapR.Set_Properties(false);jt_oBtnStaticMapR.AttachProperties(this.IsMaster(),false,false);}
this.jm_oImage=new A3xaHtmlItem2("Cell_Image_"+this.jm_Row+"_"+this.jm_ColImages);this.jm_oStaticMapA=new A3xaHtmlItem2("Cell_StaticMapA_"+this.jm_Row+"_"+this.jm_ColImages);this.jm_oStaticMapR=new A3xaHtmlItem2("Cell_StaticMapR_"+this.jm_Row+"_"+this.jm_ColImages);}
function A3xaPanelLandIcons3_OnBtnChangeStatus(ji_Name,ji_btnStatus)
{this.ShowImage(ji_Name,ji_btnStatus=="ON");return A3xaEntityButtonSet2_OnBtnChangeStatus.call(this,ji_Name,ji_btnStatus);}
function A3xaPanelLandIcons3_NewSlavePanel(ji_aNames,ji_Rows,ji_Row,ji_Col)
{if(ji_Rows==null)
ji_Rows=this.jm_Rows;if(ji_Col==null)
ji_Col=this.jm_Col;var jt_ColImages=this.jm_ColImages;if(!(ji_Row>0&&ji_Col>0&&jt_ColImages>0))
return null;return new A3xaPanelLandIcons3(ji_aNames,ji_Rows,ji_Row,ji_Col,false,jt_ColImages);}
function A3xaPanelLandIcons3_ShowImage(ji_Name,ji_bShow)
{var jt_bShowImage=false;var jt_bShowStaticMapA=false;var jt_bShowStaticMapR=false;if(ji_Name=="")
jt_bShowImage=ji_bShow;else if(ji_Name=="StaticMapA")
jt_bShowStaticMapA=ji_bShow;else if(ji_Name=="StaticMapR")
jt_bShowStaticMapR=ji_bShow;else
return false;if(!(jt_bShowImage||jt_bShowStaticMapA||jt_bShowStaticMapR))
jt_bShowImage=true;if(this.jm_oImage)
this.jm_oImage.Show(jt_bShowImage);if(this.jm_oStaticMapA)
this.jm_oStaticMapA.Show(jt_bShowStaticMapA);if(this.jm_oStaticMapR)
this.jm_oStaticMapR.Show(jt_bShowStaticMapR);return true;}
function A3xaPanelLandIcons3_InitButtonsStatus(ji_Status)
{if(ji_Status)
return A3xaEntityButtonSet2_InitButtonsStatus.call(this,ji_Status);if(!this.IsValid())
return false;for(var i=0;i<this.jm_aoButtons.length;i++)
{var jt_oStaticMap=null;var jt_o=this.jm_aoButtons[i];var jt_n=jt_o.Get_Name();if(jt_n=="StaticMapA")
jt_oStaticMap=this.jm_oStaticMapA;else if(jt_n=="StaticMapR")
jt_oStaticMap=this.jm_oStaticMapR;else
continue;jt_o.Set_Status((jt_oStaticMap&&jt_oStaticMap.IsValid()?"OFF":"DIS"),false);}
return true;}
function A3xaPanelLandIcons3_OnClick(ji_Name,ji_Rows,ji_Row,ji_Col,ji_ColImages)
{if(!(ji_Row>0&&ji_Col>0))
return false;var jt_oPanel=new A3xaPanelLandIcons3(null,ji_Rows,ji_Row,ji_Col,true,ji_ColImages);jt_oPanel.OnButtonClick(ji_Name);return true;}
function A3xaEntity_HtmlFrameColumn(ji_o3xehf,ji_oxe_NOT_USED,ji_Row,ji_Col)
{this.jm_o3xehf=ji_o3xehf;this.jm_oxe=null;this.jm_Row=(ji_Row||null);this.jm_Col=(ji_Col||null);this.jm_Header_Id="CellH_"+this.jm_Row+"_"+this.jm_Col;this.jm_Body_Id="Cell_"+this.jm_Row+"_"+this.jm_Col;this.jm_Header_Width=jg_oe.jc_oHtml.jc_Col_DefaultWidth;this.jm_Header_Colspan=null;this.jm_Header_Padding=1;this.jm_Header_Align=null;this.jm_Header_VerticalAlign=null;this.jm_Header_Float=null;this.jm_Header_Height=null;this.jm_Header_Bkgnd_o3xhIconInfo=null;this.jm_Header_BkgndColor="FFFFFF";this.jm_Body_Width=jg_oe.jc_oHtml.jc_Col_DefaultWidth;this.jm_Body_Padding=1;this.jm_Body_Align=null;this.jm_Body_VerticalAlign=null;this.jm_Body_Float=null;this.jm_Body_Height=null;this.jm_Body_Bkgnd_o3xhIconInfo=null;this.jm_Body_BkgndColor="FFFFFF";this._A3xaEntity_HtmlFrameColumn=function()
{};this.Set_XtdEntity=function(ji_oxe)
{this.jm_oxe=(ji_oxe||null);var jt_sColorH=null;var jt_sColorB=null;if(this.jm_oxe)
jt_sColorH=this.jm_oxe.Get_3xEBIS().Get_Color();else
{jt_sColorH="303030";jt_sColorB="303030";}
this.Set_Options_Header_Bkgnd(jt_sColorH);if(this.jm_Col==jg_oe.jc_oHtml.jc_Col_LandIcons)
this.Set_Options_Body_Bkgnd(jt_sColorB);return true;};this.Get_Elem=function(ji_bHeader,ji_tagName,ji_IdCell)
{if(!ji_IdCell)
ji_IdCell=(ji_bHeader?this.jm_Header_Id:this.jm_Body_Id);var qt_oCell=jQuery((ji_tagName||"div")+"#"+ji_IdCell);if(!(qt_oCell&&qt_oCell.length))
return null;return qt_oCell;};this.Show=function(ji_bHeader,ji_bShow,ji_bHook)
{var ji_IdCell=(ji_bHeader?this.jm_Header_Id:this.jm_Body_Id);var qt_oCell=jQuery((ji_bHook?"div":"td")+"#"+ji_IdCell);if(!(qt_oCell&&qt_oCell.length))
return false;if(ji_bShow)
{qt_oCell.css("width",ji_bHeader?this.jm_Header_Width:this.jm_Body_Width);qt_oCell.show();}
else
{qt_oCell.css("width","0px");qt_oCell.hide();}
return true;};this.AppendHook=function(ji_bHeader,ji_IdCellFrame,ji_IdCellHook)
{if(ji_bHeader)
{var qt_oCellH_Frame=this.Get_Elem(true,"td",ji_IdCellFrame);if(qt_oCellH_Frame&&qt_oCellH_Frame.length)
{if(!ji_IdCellHook)
ji_IdCellHook=this.jm_Header_Id;var qt_oCellH_Hook=this.Get_Elem(true,null,ji_IdCellHook);if(qt_oCellH_Hook&&qt_oCellH_Hook.length)
qt_oCellH_Hook.detach();else
qt_oCellH_Hook=jQuery("<div>",{id:ji_IdCellHook});qt_oCellH_Frame.append(qt_oCellH_Hook);}}
else
{var qt_oCell_Frame=this.Get_Elem(false,"td",ji_IdCellFrame);if(qt_oCell_Frame&&qt_oCell_Frame.length)
{if(!ji_IdCellHook)
ji_IdCellHook=this.jm_Body_Id;var qt_oCell_Hook=this.Get_Elem(false,null,ji_IdCellHook);if(qt_oCell_Hook&&qt_oCell_Hook.length)
qt_oCell_Hook.detach();else
qt_oCell_Hook=jQuery("<div>",{id:ji_IdCellHook});qt_oCell_Frame.append(qt_oCell_Hook);}}
return true;};this.Set_Options_Header=function(ji_Width,ji_Padding,ji_VerticalAlign,ji_Float,ji_Height,ji_Colspan)
{if(!(ji_Width===null))
this.jm_Header_Width=ji_Width;if(!(ji_Colspan===null))
this.jm_Header_Colspan=ji_Colspan;if(!(ji_Padding===null))
this.jm_Header_Padding=ji_Padding;if(!(ji_VerticalAlign===null))
this.jm_Header_VerticalAlign=ji_VerticalAlign;if(!(ji_Float===null))
this.jm_Header_Float=ji_Float;if(!(ji_Height===null))
this.jm_Header_Height=ji_Height;return true;};this.Set_Options_Header_Bkgnd=function(ji_BkgndColor)
{if(!(ji_BkgndColor===null))
this.jm_Header_BkgndColor=ji_BkgndColor;return true;};this.Set_Options_Header_Bkgnd2=function(ji_Header_Bkgnd_o3xhIconInfo)
{this.jm_Header_Bkgnd_o3xhIconInfo=ji_Header_Bkgnd_o3xhIconInfo;return true;};this.Set_XtdOptions_Header=function(ji_Align)
{if(!(ji_Align===null))
this.jm_Header_Align=ji_Align;return true;};this.Set_Options_Body=function(ji_Width,ji_Padding,ji_VerticalAlign,ji_Float,ji_Height)
{if(!(ji_Width===null))
this.jm_Body_Width=ji_Width;if(!(ji_Padding===null))
this.jm_Body_Padding=ji_Padding;if(!(ji_VerticalAlign===null))
this.jm_Body_VerticalAlign=ji_VerticalAlign;if(!(ji_Float===null))
this.jm_Body_Float=ji_Float;if(!(ji_Height===null))
this.jm_Body_Height=ji_Height;return true;};this.Set_Options_Body_Bkgnd=function(ji_BkgndColor)
{if(!(ji_BkgndColor===null))
this.jm_Body_BkgndColor=ji_BkgndColor;return true;};this.Set_Options_Body_Bkgnd2=function(ji_Body_Bkgnd_o3xhIconInfo)
{this.jm_Body_Bkgnd_o3xhIconInfo=ji_Body_Bkgnd_o3xhIconInfo;return true;};this.Set_XtdOptions_Body=function(ji_Align)
{if(!(ji_Align===null))
this.jm_Body_Align=ji_Align;return true;};this.Init=function()
{return true;};this.PrintHtml=function(ji_bFrameHeader,ji_bUpdateOnly)
{if(!this.jm_o3xehf)
return false;if(!(this.jm_Row>0&&this.jm_Col>0))
return false;var jt_oglrCategory=null;var jt_oglrGeoArea=null;var jt_oglrGeoCountry=null;if(this.jm_oxe)
{jt_oglrCategory=this.jm_oxe.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_Category);jt_oglrGeoArea=this.jm_oxe.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoArea);jt_oglrGeoCountry=this.jm_oxe.Get_CommonLinkedRecord(jg_oe.jc_oEntity.jc_Typ_GeoCountry);}
var jt_sBgColor=null;if(jt_oglrCategory)
jt_sBgColor=jt_oglrCategory.Get_3xEBIS().Get_Color();if(this.jm_Col==jg_oe.jc_oHtml.jc_Col_IdTag)
{this.Set_Options_Header(jg_oe.jc_oHtml.jc_Col_IdTagWidth,null,null,null,null,null);this.Set_Options_Body(jg_oe.jc_oHtml.jc_Col_IdTagWidth,null,"top","none","none");this.Set_Options_Header_Bkgnd("");this.Set_XtdOptions_Header("right");this.Set_XtdOptions_Body("right");}
else if(this.jm_Col==jg_oe.jc_oHtml.jc_Col_LandIcons)
{this.Set_Options_Header(jg_oe.jc_oHtml.jc_Col_DefaultWidth,null,null,null,null,null);this.Set_Options_Body(jg_oe.jc_oHtml.jc_Col_DefaultWidth,null,"top","none","none");var jt_o3xhici=null;if(jt_oglrGeoArea)
{jt_o3xhici=jg_oe.Get_3xAppMngIcons().NewSprite(jt_oglrGeoArea.Get_3xEBIS().Get_Idsym(),jg_oe.Get_DefIcons().jm_Idsprite_AreaBkgnd);jt_o3xhici.Set_Dim(this.jm_Header_Width,null);jt_o3xhici.Set_Options(null,null,jt_oglrGeoArea.Get_3xEBIS().Get_Color()||null,true,false);}
this.Set_Options_Header_Bkgnd2(jt_o3xhici);this.Set_Options_Body_Bkgnd2(jt_o3xhici);}
else if(this.jm_Col==jg_oe.jc_oHtml.jc_Col_CtrlInfoIcons)
{this.Set_Options_Header(jg_oe.jc_oHtml.jc_Col_CtrlInfoIconsWidth,null,null,null,null,null);this.Set_Options_Body(jg_oe.jc_oHtml.jc_Col_CtrlInfoIconsWidth,null,"top","none","none");}
else if(this.jm_Col==jg_oe.jc_oHtml.jc_Col_Identity)
{this.Set_Options_Header(jg_oe.jc_oHtml.jc_Col_IdentityWidth,null,null,null,null,null);this.Set_Options_Body(jg_oe.jc_oHtml.jc_Col_IdentityWidth,"1px","top","none","none");this.Set_Options_Header_Bkgnd(jt_sBgColor);}
else if(this.jm_Col==jg_oe.jc_oHtml.jc_Col_Info)
{this.Set_Options_Header("",null,null,null,null,null);this.Set_Options_Body("",null,"top","none","none");this.Set_Options_Header_Bkgnd(jt_sBgColor);}
if(ji_bFrameHeader)
{var qt_oCellH=this.Get_Elem(true,"td");if(!qt_oCellH)
{qt_oCellH=jQuery("<td>",{id:this.jm_Header_Id});if(!(qt_oCellH&&qt_oCellH.length))
return false;}
if(!this.PrintHtml_Header2(qt_oCellH,ji_bUpdateOnly))
return false;}
else
{jg_oe.CanLogInfo({VW:4})&&jg_oe.LogInfo("p1","","A3xaEntity_HtmlFrameColumn.PrintHtml(body)");var qt_oCell=this.Get_Elem(false,"td");if(!qt_oCell)
{qt_oCell=jQuery("<td>",{id:this.jm_Body_Id});if(!(qt_oCell&&qt_oCell.length))
return false;}
jg_oe.CanLogInfo({VW:4})&&jg_oe.LogInfo("p2","","A3xaEntity_HtmlFrameColumn.PrintHtml(body)");if(!this.PrintHtml_Body2(qt_oCell,ji_bUpdateOnly))
return false;}
return true;};this.PrintHtml_Header2=function(qi_oCell,ji_bUpdateOnly)
{if(this.jm_Header_Width)
qi_oCell.css("width",this.jm_Header_Width);if(this.jm_Header_Padding)
qi_oCell.css("padding",this.jm_Header_Padding);if(this.jm_Header_Align)
qi_oCell.css("text-align",this.jm_Header_Align);if(this.jm_Header_VerticalAlign)
qi_oCell.css("vertical-align",this.jm_Header_VerticalAlign);if(this.jm_Header_Float)
qi_oCell.css("float",this.jm_Header_Float);if(this.jm_Header_Height)
qi_oCell.css("height",this.jm_Header_Height);if(this.jm_Header_BkgndColor)
qi_oCell.css("background-color","#"+this.jm_Header_BkgndColor);if(this.jm_Header_Bkgnd_o3xhIconInfo)
{var jt_oStyle=this.jm_Header_Bkgnd_o3xhIconInfo.Get_StyleArray();if(this.jm_Header_Bkgnd_o3xhIconInfo.IsSprite())
{if(this.jm_Header_Bkgnd_o3xhIconInfo.Get_SpriteRow()>0&&this.jm_Header_Bkgnd_o3xhIconInfo.Get_SpriteColumn()>0)
{if(jt_oStyle)
qi_oCell.css(jt_oStyle);}}}
if(this.jm_Header_Colspan)
qi_oCell.attr("colspan",this.jm_Header_Colspan);var qt_oCellPrevH=null;var qt_oCellH=jQuery("td#"+this.jm_Header_Id);if(!(qt_oCellH&&qt_oCellH.length))
{for(var ih=this.jm_Col-1;ih>0&&!(qt_oCellPrevH&&qt_oCellPrevH.length);ih--)
qt_oCellPrevH=jQuery("#CellH_"+this.jm_Row+"_"+ih);if(qt_oCellPrevH&&qt_oCellPrevH.length)
qt_oCellPrevH.after(qi_oCell);else
{var qt_oRowH=this.jm_o3xehf.Get_ElemRowH();if(qt_oRowH&&qt_oRowH.length)
{qt_oRowH.prepend(qi_oCell);}}}
return true;};this.PrintHtml_Body2=function(qi_oCell,ji_bUpdateOnly)
{jg_oe.CanLogInfo({VW:4})&&jg_oe.LogInfo("","","A3xaEntity_HtmlFrameColumn.PrintHtml_Body2");if(this.jm_Body_Width)
qi_oCell.css("width",this.jm_Body_Width);if(this.jm_Body_Padding)
qi_oCell.css("padding",this.jm_Body_Padding);if(this.jm_Body_Align)
qi_oCell.css("text-align",this.jm_Body_Align);if(this.jm_Body_VerticalAlign)
qi_oCell.css("vertical-align",this.jm_Body_VerticalAlign);if(this.jm_Body_Float)
qi_oCell.css("float",this.jm_Body_Float);if(this.jm_Body_Height)
qi_oCell.css("height",this.jm_Body_Height);if(this.jm_Body_BkgndColor)
qi_oCell.css("background-color","#"+this.jm_Body_BkgndColor);if(this.jm_Body_Bkgnd_o3xhIconInfo)
{var jt_oStyle=this.jm_Body_Bkgnd_o3xhIconInfo.Get_StyleArray();if(this.jm_Body_Bkgnd_o3xhIconInfo.IsSprite())
{if(this.jm_Body_Bkgnd_o3xhIconInfo.Get_SpriteRow()>0&&this.jm_Body_Bkgnd_o3xhIconInfo.Get_SpriteColumn()>0)
{if(jt_oStyle)
{qi_oCell.css(jt_oStyle);}}}}
var qt_oCellPrev=null;var qt_oCell=jQuery("td#"+this.jm_Body_Id);if(!(qt_oCell&&qt_oCell.length))
{for(var ib=this.jm_Col-1;ib>0&&!(qt_oCellPrev&&qt_oCellPrev.length);ib--)
qt_oCellPrev=jQuery("#Cell_"+this.jm_Row+"_"+ib);if(qt_oCellPrev&&qt_oCellPrev.length)
qt_oCellPrev.after(qi_oCell);else
{var qt_oRow=this.jm_o3xehf.Get_ElemRow();if(qt_oRow&&qt_oRow.length)
qt_oRow.prepend(qi_oCell);}}
return true;};this._A3xaEntity_HtmlFrameColumn();}
function A3pqhfpair()
{this.qoh=null;this.qob=null;this.bstick=false;this.IsEOT=function(){return!(this.qoh&&this.qoh.length);};this.HasBody=function(){return this.qob&&this.qob.length;};this.IsStick=function(){return this.bstick;};this.QPClear=function()
{this.qoh=null;this.qob=null;this.bstick=false;return true;};}
function A3xaEntity_HtmlFrame(ji_RowHF,ji_bLoad)
{A3pqhfpair.call(this);this.jm_RowHF=(ji_RowHF||null);this.jm_oxeid=null;this.jm_oxe=null;this.jm_ao3xehc=new Array();this.jm_IdNarrowView=null;this.Set_XtdEntity=function(ji_oxe,ji_bStick)
{this.jm_oxe=(ji_oxe||null);if(this.jm_oxe)
{this.jm_oxeid=this.jm_oxe.Get_3xXEID();if(this.jm_oxeid.Get_TypEntity()==jg_oe.jc_oEntity.jc_Typ_MetaSystemControl)
this.bstick=true;}
if(ji_bStick===true)
this.bstick=true;else if(ji_bStick===false)
this.bstick=false;return true;};this.Get_XtdEntity=function(){return this.jm_oxe;};this.Get_3xXEID=function(){return this.jm_oxeid||null;};this.ReplaceId=function(ji_RowHF)
{if(this.IsEOT())
return false;this.qoh.attr("id","RowH_"+ji_RowHF);this.qob.attr("id",(this.IsStick()?"RowS_":"Row_")+ji_RowHF);this.jm_RowHF=ji_RowHF;return true;};this.Clear=function()
{this.jm_oxeid=null;this.QPClear();return true;};this.Get_QItemPair=function(ji_bQReload)
{var qt_oHeader=this.qoh;var qt_oBody=this.qob;var jt_bStick=this.bstick;if(ji_bQReload)
{qt_oHeader=jQuery("#RowH_"+this.jm_RowHF);qt_oBody=jQuery("#Row_"+this.jm_RowHF);if(!(qt_oBody&&qt_oBody.length))
{qt_oBody=jQuery("#RowS_"+this.jm_RowHF);jt_bStick=true;}}
if(!(qt_oHeader&&qt_oHeader.length))
return{};if(!(qt_oBody&&qt_oBody.length))
return{};return{qoh:qt_oHeader,qob:qt_oBody,bstick:jt_bStick};};this.RemoveHtml=function(ji_bRemoveStick,ji_bQReload)
{var jt_oqpair=this.Get_QItemPair(ji_bQReload);if(!(jt_oqpair&&jt_oqpair.qoh&&jt_oqpair.qob))
return false;if(jt_oqpair.bstick&&!ji_bRemoveStick)
return false;jt_oqpair.qoh.remove();jt_oqpair.qob.remove();return true;};this.LoadFromHtml=function()
{this.Clear();if(!(this.jm_RowHF>0))
return false;var qt_oHeader=jQuery("#RowH_"+this.jm_RowHF);if(!(qt_oHeader&&qt_oHeader.length))
return false;this.qoh=qt_oHeader;var qt_oBody=jQuery("#Row_"+this.jm_RowHF);if(!(qt_oBody&&qt_oBody.length))
{qt_oBody=jQuery("#RowS_"+this.jm_RowHF);if(qt_oBody&&qt_oBody.length)
this.bstick=true;}
if(qt_oBody&&qt_oBody.length)
this.qob=qt_oBody;var jt_sxeid=this.qoh.attr('XEIDCode');if(jt_sxeid&&jt_sxeid.length)
{var jt_oxeid=new A3xaDCEntity();if(jt_oxeid.Get_3xXEID().Set_String(jt_sxeid))
this.jm_oxeid=jt_oxeid.Get_3xXEID();}
return true;};this.Get_ElemRowH=function()
{if(!(this.qoh&&this.qoh.length))
{if(!(this.jm_RowHF>0))
return null;this.qoh=jQuery('#RowH_'+this.jm_RowHF);if(!(this.qoh&&this.qoh.length))
return null;}
return this.qoh;};this.Get_ElemRow=function()
{if(!(this.qob&&this.qob.length))
{if(!(this.jm_RowHF>0))
return null;this.qob=jQuery('#Row_'+this.jm_RowHF);if(!(this.qob&&this.qob.length))
{this.qob=jQuery('#RowS_'+this.jm_RowHF);if(!(this.qob&&this.qob.length))
return null;}}
return this.qob;};this.MoveAfter=function(ji_RowHF,ji_bReplaceId)
{this.InsertAfter(new A3xaEntity_HtmlFrame(ji_RowHF,true));if(ji_bReplaceId)
{var jt_o3xehf_Next=new A3xaEntity_HtmlFrame(ji_RowHF+1,true);jt_o3xehf_Next.ReplaceId(this.jm_RowHF);this.ReplaceId(ji_RowHF+1);}
return true;};this.InsertAfter=function(ji_o3xehf_Prev)
{this.qoh.detach();this.qob.detach();if(!ji_o3xehf_Prev||ji_o3xehf_Prev.IsEOT())
jQuery("#A3xaTableMainBody").prepend(this.qoh);else
this.qoh.insertAfter(ji_o3xehf_Prev.qob);this.qob.insertAfter(this.qoh);return true;};this.IsVisible=function()
{if(this.IsEOT())
return false;if(this.qoh.css("visibility")=="hidden")
return false;return true;};this.IsGrayed=function()
{if(this.IsEOT())
return false;if(this.qoh.attr('Grayed')=="Y")
return true;return false;};this.IsActive=function(){return this.IsVisible()&&!this.IsGrayed();};this._ShowHeaderElem=function(ji_bShow)
{if(this.IsEOT())
return false;if(ji_bShow==true)
this.qoh.css({"visibility":"visible","position":"relative","left":"none","top":"none"});else if(ji_bShow===false)
this.qoh.css({"visibility":"hidden","position":"absolute","left":"0px","top":"0px"});return true;};this._ShowBodyElem=function(ji_bShow)
{if(this.IsEOT())
return false;if(!this.qob)
return false;if(ji_bShow==true)
this.qob.css({"visibility":"visible","position":"relative","left":"none","top":"none"});else if(ji_bShow===false)
this.qob.css({"visibility":"hidden","position":"absolute","left":"0px","top":"0px"});return true;};this._GrayHeaderElem=function(ji_bGray)
{if(this.IsEOT())
return false;if(ji_bGray==true)
{var jt_ColorGray="#606060";this.qoh.attr({"Grayed":"Y"});jQuery("td",this.qoh).each(function()
{var jt_bkColor=jQuery(this).css("background-color");if(jt_bkColor&&jt_bkColor.length&&jt_bkColor!="transparent")
{var jt_bkColorSaved=jQuery(this).attr('BkColorSaved');if(!(jt_bkColorSaved&&jt_bkColorSaved.length))
jQuery(this).attr({"BkColorSaved":jt_bkColor});jQuery(this).css({"background-color":jt_ColorGray});}});}
else if(ji_bGray===false)
{this.qoh.attr({"Grayed":"N"});jQuery("td",this.qoh).each(function()
{var jt_bkColorSaved=jQuery(this).attr("BkColorSaved");if(jt_bkColorSaved&&jt_bkColorSaved.length)
jQuery(this).css({"background-color":jt_bkColorSaved});});}
return true;};this.ShowHeader=function(ji_bShow,ji_bGray)
{if(this.IsStick())
return false;if(this._ShowHeaderElem(ji_bShow)&&ji_bShow==true)
this._GrayHeaderElem(ji_bGray);if(!this.IsActive())
this._ShowBodyElem(false);return true;};this.ShowBody=function(ji_bShow)
{if(this.IsStick())
return false;var jt_bHeaderActive=this.IsActive();if(ji_bShow==true&&jt_bHeaderActive)
this._ShowBodyElem(true);else if(ji_bShow===false||!jt_bHeaderActive)
this._ShowBodyElem(false);return true;}
this.ShowByFilter=function(ji_oxeidLand,ji_o3xcatl,ji_bHideOrGray,ji_bLandCountHigher)
{if(this.IsEOT())
return false;var jt_bMatchesLand=true;var jt_bMatchesCategory=true;if(ji_o3xcatl&&!ji_o3xcatl.Match(this.jm_oxeid))
jt_bMatchesCategory=false;if(ji_oxeidLand)
{jt_bMatchesLand=this.Get_3xXEID().Matches(ji_oxeidLand,true);jg_oe.CanLogInfo()&&jg_oe.LogInfo("MatchingLand y/n,trg,src "+
(jt_bMatchesLand?"y":"n")+","+
this.jm_oxeid.Get_String()+","+ji_oxeidLand.Get_String(),"","A3xaEntity_HtmlFrame.ShowByFilter");}
var jt_bHeader=true;var jt_bGray=false;if(!(jt_bMatchesLand&&jt_bMatchesCategory))
{jt_bGray=true;if(ji_bHideOrGray&&(!ji_oxeidLand||!jt_bMatchesLand||ji_bLandCountHigher))
jt_bHeader=false;}
this.ShowHeader(jt_bHeader,jt_bGray);return true;};this.Get_Column=function(ji_Col)
{if(!(ji_Col>=1))
return null;if(!(this.jm_ao3xehc&&this.jm_ao3xehc.length>=ji_Col))
return null;return this.jm_ao3xehc[ji_Col-1];};this.Get_XEIDCode=function(){return(this.jm_oxe?this.jm_oxe.Get_3xXEID().Get_String():"");};this.Get_RowHeaderHtmlID=function(){return"RowH_"+this.jm_RowHF;};this.Get_RowBodyHtmlID=function(){return(this.IsStick()?"RowS_":"Row_")+this.jm_RowHF;};this.CheckNarrowView=function()
{var qt_oBody=jQuery("body");if(!(qt_oBody&&qt_oBody.length))
return null;var jt_BrowserWidth=qt_oBody.width();if(this.jm_IdNarrowView==jg_oe.jc_oHtml.jc_Body_MicroWidthId)
{if(jt_BrowserWidth>=jg_oe.jc_oHtml.jc_Body_NormalWidth)
{this.Set_NarrowView(jg_oe.jc_oHtml.jc_Body_NormalWidthId);return this.jm_IdNarrowView;}
else if(jt_BrowserWidth>=jg_oe.jc_oHtml.jc_Body_SmallWidth)
{this.Set_NarrowView(jg_oe.jc_oHtml.jc_Body_SmallWidthId);return this.jm_IdNarrowView;}}
else if(this.jm_IdNarrowView==jg_oe.jc_oHtml.jc_Body_SmallWidthId)
{if(jt_BrowserWidth>=jg_oe.jc_oHtml.jc_Body_NormalWidth)
{this.Set_NarrowView(jg_oe.jc_oHtml.jc_Body_NormalWidthId);return this.jm_IdNarrowView;}
else if(jt_BrowserWidth<jg_oe.jc_oHtml.jc_Body_MicroWidth)
{this.Set_NarrowView(jg_oe.jc_oHtml.jc_Body_MicroWidthId);return this.jm_IdNarrowView;}}
else if(this.jm_IdNarrowView==jg_oe.jc_oHtml.jc_Body_NormalWidthId)
{if(jt_BrowserWidth<jg_oe.jc_oHtml.jc_Body_MicroWidth)
{this.Set_NarrowView(jg_oe.jc_oHtml.jc_Body_MicroWidthId);return this.jm_IdNarrowView;}
else if(jt_BrowserWidth<jg_oe.jc_oHtml.jc_Body_SmallWidth)
{this.Set_NarrowView(jg_oe.jc_oHtml.jc_Body_SmallWidthId);return this.jm_IdNarrowView;}}
else
{if(jt_BrowserWidth>=jg_oe.jc_oHtml.jc_Body_SmallWidth)
this.Set_NarrowView(jg_oe.jc_oHtml.jc_Body_NormalWidthId);else if(jt_BrowserWidth>=jg_oe.jc_oHtml.jc_Body_MicroWidth)
this.Set_NarrowView(jg_oe.jc_oHtml.jc_Body_SmallWidthId);else
this.Set_NarrowView(jg_oe.jc_oHtml.jc_Body_MicroWidthId);return this.jm_IdNarrowView;}
return null;};this.Set_NarrowView=function(ji_IdNarrowView)
{this.jm_IdNarrowView=ji_IdNarrowView;return true;};this.Get_NarrowView=function(){return this.jm_IdNarrowView;};this.PrintHtml=function(ji_bUpdateOnly)
{if(ji_bUpdateOnly)
return this.UpdateHtml();var jt_shTableRowH="<tr id='"+this.Get_RowHeaderHtmlID()+"'"+" XEIDCode='"+this.Get_XEIDCode()+"'"+" style='float:none; height:none; visibility: visible;'></tr>";var qt_oRowB=jQuery("#"+this.Get_RowBodyHtmlID());if(qt_oRowB&&qt_oRowB.length)
qt_oRowB.before(jt_shTableRowH);else
{jQuery("#A3xaTableMainBody").append(jt_shTableRowH);}
var jt_shTableRow="<tr id='"+this.Get_RowBodyHtmlID()+"'"+" XEIDCode='"+this.Get_XEIDCode()+"'";if(this.IsStick())
{jt_shTableRow+=" style='float:none; height:none; visibility: visible;'>";}
else
{jt_shTableRow+=" style='float:none; height:none; "+"visibility: hidden; position:absolute; left:0px; top:0px;'>";}
jt_shTableRow+="</tr>";var qt_oRowH=jQuery("#"+this.Get_RowHeaderHtmlID());if(qt_oRowH&&qt_oRowH.length)
qt_oRowH.after(jt_shTableRow);else;this.jm_ao3xehc.push(new A3xaEntity_HtmlFrameColumn(this,null,this.jm_RowHF,jg_oe.jc_oHtml.jc_Col_IdTag));this.jm_ao3xehc.push(new A3xaEntity_HtmlFrameColumn(this,null,this.jm_RowHF,jg_oe.jc_oHtml.jc_Col_LandIcons));this.jm_ao3xehc.push(new A3xaEntity_HtmlFrameColumn(this,null,this.jm_RowHF,jg_oe.jc_oHtml.jc_Col_CtrlInfoIcons));this.jm_ao3xehc.push(new A3xaEntity_HtmlFrameColumn(this,null,this.jm_RowHF,jg_oe.jc_oHtml.jc_Col_Identity));this.jm_ao3xehc.push(new A3xaEntity_HtmlFrameColumn(this,null,this.jm_RowHF,jg_oe.jc_oHtml.jc_Col_Info));var i=0;for(i=0;i<this.jm_ao3xehc.length;i++)
this.jm_ao3xehc[i].Set_XtdEntity(this.jm_oxe);var bh=true;while(bh!==null)
{for(i=0;i<this.jm_ao3xehc.length;i++)
{if(this.Get_NarrowView()==jg_oe.jc_oHtml.jc_Body_SmallWidthId&&this.jm_ao3xehc[i].jm_Col==jg_oe.jc_oHtml.jc_Col_Info)
{if(this.jm_ao3xehc[i].PrintHtml(bh))
{}}
else if(this.Get_NarrowView()==jg_oe.jc_oHtml.jc_Body_MicroWidthId&&this.jm_ao3xehc[i].jm_Col==jg_oe.jc_oHtml.jc_Col_CtrlInfoIcons)
{if(this.jm_ao3xehc[i].PrintHtml(bh))
{}}
else if(this.Get_NarrowView()==jg_oe.jc_oHtml.jc_Body_MicroWidthId&&this.jm_ao3xehc[i].jm_Col==jg_oe.jc_oHtml.jc_Col_IdTag)
{if(this.jm_ao3xehc[i].PrintHtml(bh))
{}}
else
{if(this.jm_ao3xehc[i].PrintHtml(bh))
{this.jm_ao3xehc[i].AppendHook(bh);}}}
if(bh===true)
bh=false;else if(bh===false)
bh=null;}
this.UpdateHtmlOnResize();return true;};this.UpdateHtmlOnResize=function()
{if(!this.jm_ao3xehc)
return true;var jt_o3xehcIdentity=this.Get_Column(jg_oe.jc_oHtml.jc_Col_Identity);var jt_o3xehcInfo=this.Get_Column(jg_oe.jc_oHtml.jc_Col_Info);var jt_o3xehcCtrlInfo=this.Get_Column(jg_oe.jc_oHtml.jc_Col_CtrlInfoIcons);var jt_o3xehcIdTag=this.Get_Column(jg_oe.jc_oHtml.jc_Col_IdTag);if(this.Get_NarrowView()==jg_oe.jc_oHtml.jc_Body_MicroWidthId)
{jt_o3xehcIdentity.AppendHook(true,null,jt_o3xehcInfo.jm_Header_Id);jt_o3xehcIdentity.AppendHook(true,null,jt_o3xehcCtrlInfo.jm_Header_Id);jt_o3xehcIdentity.AppendHook(true,null,jt_o3xehcIdTag.jm_Header_Id);jt_o3xehcCtrlInfo.Show(true,false);jt_o3xehcIdTag.Show(true,false);jt_o3xehcIdentity.AppendHook(false,null,jt_o3xehcCtrlInfo.jm_Body_Id);jt_o3xehcIdentity.AppendHook(false,null,jt_o3xehcIdentity.jm_Body_Id);jt_o3xehcIdentity.AppendHook(false,null,jt_o3xehcInfo.jm_Body_Id);jt_o3xehcIdentity.AppendHook(false,null,jt_o3xehcIdTag.jm_Body_Id);jt_o3xehcCtrlInfo.Show(false,false);jt_o3xehcIdTag.Show(false,false);}
else if(this.Get_NarrowView()==jg_oe.jc_oHtml.jc_Body_SmallWidthId)
{jt_o3xehcIdTag.AppendHook(true,null,jt_o3xehcIdTag.jm_Header_Id);jt_o3xehcCtrlInfo.AppendHook(true,null,jt_o3xehcCtrlInfo.jm_Header_Id);jt_o3xehcIdentity.AppendHook(true,null,jt_o3xehcInfo.jm_Header_Id);jt_o3xehcCtrlInfo.Show(true,true);jt_o3xehcIdTag.Show(true,true);jt_o3xehcIdTag.AppendHook(false,null,jt_o3xehcIdTag.jm_Body_Id);jt_o3xehcCtrlInfo.AppendHook(false,null,jt_o3xehcCtrlInfo.jm_Body_Id);jt_o3xehcIdentity.AppendHook(false,null,jt_o3xehcInfo.jm_Body_Id);jt_o3xehcCtrlInfo.Show(false,true);jt_o3xehcIdTag.Show(false,true);}
else
{jt_o3xehcIdTag.AppendHook(true,null,jt_o3xehcIdTag.jm_Header_Id);jt_o3xehcCtrlInfo.AppendHook(true,null,jt_o3xehcCtrlInfo.jm_Header_Id);jt_o3xehcInfo.AppendHook(true,null,jt_o3xehcInfo.jm_Header_Id);jt_o3xehcCtrlInfo.Show(true,true);jt_o3xehcIdTag.Show(true,true);jt_o3xehcIdTag.AppendHook(false,null,jt_o3xehcIdTag.jm_Body_Id);jt_o3xehcCtrlInfo.AppendHook(false,null,jt_o3xehcCtrlInfo.jm_Body_Id);jt_o3xehcInfo.AppendHook(false,null,jt_o3xehcInfo.jm_Body_Id);jt_o3xehcCtrlInfo.Show(false,true);jt_o3xehcIdTag.Show(false,true);}
return true;};this.UpdateHtml=function()
{var qt_oRowH=jQuery("#"+this.Get_RowHeaderHtmlID());var qt_oRowB=jQuery("#"+this.Get_RowBodyHtmlID());if(!(qt_oRowH&&qt_oRowH.length))
return false;if(!(qt_oRowB&&qt_oRowB.length))
return false;if(!(this.jm_ao3xehc&&this.jm_ao3xehc.length))
return false;qt_oRowH.attr("XEIDCode",this.Get_XEIDCode());qt_oRowB.attr("XEIDCode",this.Get_XEIDCode());var i=0;for(i=0;i<this.jm_ao3xehc.length;i++)
this.jm_ao3xehc[i].Set_XtdEntity(this.jm_oxe);for(i=0;i<this.jm_ao3xehc.length;i++)
{if(!this.jm_ao3xehc[i].PrintHtml(true,true))
{}}
for(i=0;i<this.jm_ao3xehc.length;i++)
{if(!this.jm_ao3xehc[i].PrintHtml(false,true))
{}}
return true;};if(ji_bLoad)
this.LoadFromHtml();}
function A3xaHtmlEntityAbs()
{var jt_this=this;this.jm_TimerLoPry=null;this.jm_bReleased=false;this.jm_FirstFrameRow=0;this.jm_nRows=0;this.jm_ao3xehf=new Array();this.jm_ao3xeh=new Array();this.jm_bCanRemoveStick=false;this.jm_bUpdateHtml=false;this._A3xaHtmlEntityAbs=function()
{};this.CanRemoveStick=function(ji_b,ji_bUpdateHtml)
{this.jm_bCanRemoveStick=(ji_b===false?false:true);this.jm_bUpdateHtml=(ji_bUpdateHtml===true?true:false);return true;};this.AbortPrintHtmlLowPriority=function()
{this.jm_TimerLoPry=null;return true;};this.Get_3xEH=function(ji_Row)
{if(!ji_Row)
ji_Row=1;return(this.jm_ao3xeh[ji_Row-1]||null);};this.IsValid=function(){return this._A3xaHtmlEntityAbs_IsValid();};this.InitData=function(){return this._A3xaHtmlEntityAbs_InitData();};this.LoadData=function(ji_bReload,ji_bTemplate){return false;};this.Release=function(ji_bClearHtml){return false;};this.RemoveHtml=function(){return this._A3xaHtmlEntityAbs_RemoveHtml();};this.PrintHtmlFrame=function(){return this._A3xaHtmlEntityAbs_PrintHtmlFrame();};this.PrintHtml=function(ji_bLowPriority,ji_bOnDemand)
{return this._A3xaHtmlEntityAbs_PrintHtml(ji_bLowPriority,ji_bOnDemand);};this._A3xaHtmlEntityAbs_PrintHtml=function(ji_bLowPriority,ji_bOnDemand)
{if(!this.PrintHtmlFrame())
return false;if(!this.PrintHtmlContents(ji_bLowPriority,ji_bOnDemand))
return false;return true;};this.PrintHtmlContents=function(ji_bLowPriority,ji_bOnDemand)
{return this._A3xaHtmlEntityAbs_PrintHtmlContents(ji_bLowPriority,ji_bOnDemand);};this._A3xaHtmlEntityAbs_IsValid=function()
{return(this.jm_ao3xehf[0]&&this.jm_ao3xeh[0]);};this._A3xaHtmlEntityAbs_InitData=function()
{this.jm_TimerLoPry=null;this.jm_bReleased=false;if(!this.jm_bUpdateHtml)
{this.jm_FirstFrameRow=0;this.jm_nRows=0;this.jm_ao3xehf=new Array();this.jm_ao3xeh=new Array();}
return true;};this._A3xaHtmlEntityAbs_PrintHtmlFrame=function()
{if(!(this.jm_ao3xehf&&this.jm_ao3xehf.length))
return false;for(var ixf=0;ixf<this.jm_ao3xehf.length;ixf++)
{this.jm_ao3xehf[ixf].PrintHtml(this.jm_bUpdateHtml);}
return true;};this._A3xaHtmlEntityAbs_PrintHtmlContents=function(ji_bLowPriority,ji_bOnDemand)
{if(!(this.jm_nRows>0))
return false;if(!(this.jm_ao3xeh&&this.jm_ao3xeh.length))
return false;if(!ji_bLowPriority)
{for(var ixh=0;ixh<this.jm_ao3xeh.length;ixh++)
this.jm_ao3xeh[ixh].PrintHtml(true);for(var ixb=0;ixb<this.jm_ao3xeh.length;ixb++)
this.jm_ao3xeh[ixb].PrintHtml(false,false);}
else
{var jt_ehCount=0;if(this.jm_ao3xeh)
jt_ehCount=this.jm_ao3xeh.length;this.jm_TimerLoPry=setTimeout(function()
{for(var i=0;i<jt_ehCount;i++)
{if(!jt_this.jm_TimerLoPry||jt_this.jm_bReleased)
break;jt_this.jm_ao3xeh[i].PrintHtml(false,true,ji_bOnDemand);}},(ji_bOnDemand?10:500));}
return true;}
this._A3xaHtmlEntityAbs_RemoveHtml=function()
{var jr_b=false;if(this.jm_ao3xehf&&this.jm_ao3xehf.length)
{for(var i=0;i<this.jm_ao3xehf.length;i++)
{this.jm_ao3xehf[i].RemoveHtml(this.jm_bCanRemoveStick,false);}
jr_b=true;}
this.jm_ao3xehf=new Array();this.jm_ao3xeh=new Array();this.jm_nRows=0;this.jm_FirstFrameRow=0;return jr_b;};this._A3xaHtmlEntityAbs();}
function A3xaHtmlEntityCP()
{A3xaHtmlEntityAbs.call(this);this._A3xaHtmlEntityCP=function()
{};this.LoadData=function(ji_bReload,ji_bTemplate)
{if(!ji_bReload&&this.IsValid())
return true;this.InitData();var jt_odb=null;var jt_o3xxeCP=null;if(!ji_bTemplate)
{jt_odb=jg_oe.Get_Database();if(!jt_odb)
return false;jt_o3xxeCP=jt_odb.Get_3xXEMSC_ByXUR();if(!jt_o3xxeCP)
return false;}
this.jm_FirstFrameRow=1;this.jm_nRows=1;if(!(this.jm_bUpdateHtml&&this.IsValid()))
{this.jm_ao3xehf[0]=new A3xaEntity_HtmlFrame(this.jm_FirstFrameRow);this.jm_ao3xeh[0]=new A3xaECP_Mgr(null,this.jm_ao3xehf[0]);}
this.jm_ao3xehf[0].Set_XtdEntity(jt_o3xxeCP,true);this.jm_ao3xeh[0].Set_DataSource(jt_o3xxeCP);return true;};this._A3xaHtmlEntityCP();}
function A3xaHtmlEntitySet()
{this.jm_o3xheCP=null;this.jm_bFirstClickGLMore=false;A3xaHtmlEntityAbs.call(this);this._A3xaHtmlEntitySet=function()
{this.jm_o3xheCP=new A3xaHtmlEntityCP();};this.CanRemoveStick=function(ji_b,ji_bUpdateHtml)
{this.jm_bCanRemoveStick=(ji_b===false?false:true);this.jm_bUpdateHtml=false;this.jm_o3xheCP.CanRemoveStick(this.jm_bCanRemoveStick,ji_bUpdateHtml);return true;};this.LoadData=function(ji_bReload,ji_bTemplateCP)
{if(!ji_bReload&&this.IsValid())
return true;this.InitData();this.jm_bFirstClickGLMore=false;var jr_b=this.jm_o3xheCP.LoadData(ji_bReload,ji_bTemplateCP);if(ji_bTemplateCP)
{this.OnWindowResize(false);return jr_b;}
var jt_ogldtMain=null;var jt_odb=jg_oe.Get_Database();if(jt_odb)
jt_ogldtMain=jt_odb.Get_MainDataTable();var jt_o3xait=null;if(jt_ogldtMain)
jt_o3xait=jt_ogldtMain.Get_Recordsel();if(jt_o3xait)
this.jm_nRows=jt_o3xait.Get_Count();if(!(this.jm_nRows>0))
{this.OnWindowResize(false);return false;}
this.jm_FirstFrameRow=((this.jm_o3xheCP&&this.jm_o3xheCP.Get_3xEH())?2:1);var jt_FrameRow=this.jm_FirstFrameRow;while(!jt_o3xait.IsEOF())
{var jt_oxe=jt_o3xait.Get_CurrentItem();var jt_o3xehf=new A3xaEntity_HtmlFrame(jt_FrameRow);jt_o3xehf.Set_XtdEntity(jt_oxe,false);this.jm_ao3xehf.push(jt_o3xehf);var jt_o3xeh=new A3xaEntity_Html(null,jt_o3xehf);jt_o3xeh.Set_DataSource(jt_oxe);this.jm_ao3xeh.push(jt_o3xeh);jt_FrameRow++;jt_o3xait.Next();}
this.OnWindowResize(false);return true;};this.OnWindowResize=function(ji_bUpdateHtml)
{var jt_o3xhePilot=null;if(this.jm_o3xheCP.jm_ao3xehf&&this.jm_o3xheCP.jm_ao3xehf[0])
jt_o3xhePilot=this.jm_o3xheCP;else if(this.jm_ao3xehf&&this.jm_ao3xehf[0])
jt_o3xhePilot=this;if(!jt_o3xhePilot)
return null;var jr_idnv=jt_o3xhePilot.jm_ao3xehf[0].CheckNarrowView();if(this.jm_ao3xehf)
{for(var ixf=0;ixf<this.jm_ao3xehf.length;ixf++)
this.jm_ao3xehf[ixf].Set_NarrowView(jr_idnv||jt_o3xhePilot.jm_ao3xehf[0].Get_NarrowView());}
if(ji_bUpdateHtml&&jr_idnv)
{jt_o3xhePilot.jm_ao3xehf[0].UpdateHtmlOnResize();for(var ixf=0;ixf<this.jm_ao3xehf.length;ixf++)
{this.jm_ao3xehf[ixf].UpdateHtmlOnResize();}}
if(jr_idnv)
{jg_oe.Set_ItemsNarrowView(jr_idnv);}
return jr_idnv;};this.Release=function(ji_bClearHtml)
{this.jm_bReleased=true;this.jm_TimerLoPry=null;this.jm_bFirstClickGLMore=false;if(ji_bClearHtml)
{this.RemoveHtml();}
jg_oe.CanLogInfo({VW:4})&&jg_oe.LogInfo("OK","","A3xaHtmlEntitySet.Release");return true;};this.Get_ECPMgr=function(){return this.jm_o3xheCP.Get_3xEH();};this.RemoveHtml=function()
{if(this.jm_o3xheCP.jm_bCanRemoveStick)
this.jm_o3xheCP.RemoveHtml();return this._A3xaHtmlEntityAbs_RemoveHtml();};this.Get_HtmlSetCP=function(){return(this.jm_o3xheCP||null);};this.PrintHtml=function(ji_bLowPriority,ji_bOnDemand)
{if(this.jm_bReleased)
return false;var jt_bPrintHeader=true;var jt_bPrintBody=true;if(!jg_oe.IsTurboON())
{jt_bPrintHeader=false;}
var jt_bCP=false;if(!ji_bLowPriority)
jt_bCP=this.jm_o3xheCP.PrintHtml(ji_bLowPriority,ji_bOnDemand);var jt_bRows=this._A3xaHtmlEntityAbs_PrintHtml(ji_bLowPriority,ji_bOnDemand);return(jt_bCP||jt_bRows);};this.PrintHtml2=function(ji_bUpdateHtmlCP,ji_bTemplateHtmlCP)
{this.CanRemoveStick(false,ji_bUpdateHtmlCP);this.LoadData(true,ji_bTemplateHtmlCP);if(ji_bTemplateHtmlCP)
return this.jm_o3xheCP.PrintHtml();return this.PrintHtml();};this.ShowHtmlSelected=function(ji_oDDCategoryCode,ji_oDDPairLand)
{var jt_oxeidDD=null;if(ji_oDDPairLand)
{var jt_oxeidDDt=new A3xaDCEntity();jt_oxeidDD=jt_oxeidDDt.Get_3xXEID();jt_oxeidDD.Set_String(ji_oDDPairLand.Get_Key());}
var jt_odb=jg_oe.Get_Database();if(!jt_odb)
return false;if(!(this.jm_nRows>0))
return(this.jm_o3xheCP.Get_3xEH()?true:false);var jt_oglmLand=new A3xaMgrLand();var jt_oglmCategory=new GLMgrCategory();var jt_o3xmlrr=jt_oglmLand.Get_MgrRequestArea(jg_oe.jc_oEntity.jc_Typ_GeoRegion);var jt_bo3xmlrr=(jt_o3xmlrr?jt_o3xmlrr.LoadDataDD(ji_oDDCategoryCode,ji_oDDPairLand):false);var jt_bDDLand=jt_oglmLand.Get_MgrSelectPlace().LoadDataDD(ji_oDDCategoryCode,ji_oDDPairLand);var jt_bDDCategory=jt_oglmCategory.Get_MgrSelectCategory().LoadDataDD(ji_oDDCategoryCode,ji_oDDPairLand);var jt_oDDPairLand=jt_oglmLand.Get_MgrSelectPlace().Get_DDSelected();jt_bo3xmlrr&&jt_o3xmlrr.RefreshHtmlDD(ji_oDDCategoryCode,ji_oDDPairLand);jt_bDDLand&&jt_oglmLand.Get_MgrSelectPlace().RefreshHtmlDD(ji_oDDCategoryCode,ji_oDDPairLand);jt_bDDCategory&&jt_oglmCategory.Get_MgrSelectCategory().RefreshHtmlDD(ji_oDDCategoryCode,ji_oDDPairLand);var jt_bHideOrGray=false;var jt_bLandCountHigher=false;if(this.jm_nRows>jg_oe.jc_oHtml.jc_MaxViewRows)
{jt_bHideOrGray=true;if(!jt_oDDPairLand||jt_oDDPairLand.jm_Count>jg_oe.jc_oHtml.jc_MaxViewRows)
jt_bLandCountHigher=true;}
var jt_FrameRow=1;while(1)
{var jt_o3xehf=new A3xaEntity_HtmlFrame(jt_FrameRow,true);if(jt_o3xehf.IsEOT())
break;if(jt_o3xehf.IsStick())
{jt_FrameRow++;continue;}
var jt_o3xcatl=null;if(ji_oDDCategoryCode&&ji_oDDCategoryCode.Get_Value())
jt_o3xcatl=new A3xaCategoryList(ji_oDDCategoryCode.Get_Value());jt_o3xehf.ShowByFilter(jt_oxeidDD,jt_o3xcatl,jt_bHideOrGray,jt_bLandCountHigher);jt_FrameRow++;}
jg_oPanelControlIcons_Builder.Builder_RefreshButtonStatus("GLMore");return true;};this.Get_XEIDRowList=function(ji_bActiveOnly,ji_bIncludeStick)
{var jr_aoxeid=new Array();var jt_FrameRow=1;while(1)
{var jt_o3xehf=new A3xaEntity_HtmlFrame(jt_FrameRow,true);if(jt_o3xehf.IsEOT())
break;if(!jt_o3xehf.Get_3xXEID())
{jt_FrameRow++;continue;}
if(!ji_bIncludeStick&&jt_o3xehf.IsStick())
{jt_FrameRow++;continue;}
if(ji_bActiveOnly&&!jt_o3xehf.IsActive())
{jt_FrameRow++;continue;}
jr_aoxeid.push(jt_o3xehf.Get_3xXEID());jt_FrameRow++;}
return jr_aoxeid;};this.OnClickEntity=function(ji_TypEntity,ji_IdEntity,ji_TypInfo,ji_IdInfo,ji_CodInfo)
{var jt_o3xeh=new A3xaEntity_Html(null);jt_o3xeh.Set_DataSource(null);if(!jt_o3xeh.OnClick(ji_TypEntity,ji_IdEntity,ji_TypInfo,ji_IdInfo,ji_CodInfo))
{}
return true;};this.OnGLMore=function(ji_Row,ji_bStatus)
{if(!this.jm_bFirstClickGLMore&&ji_bStatus)
{this.jm_bFirstClickGLMore=true;this.PrintHtmlContents(true,true);this.PrintHtmlContents(true,false);}
var jt_o3xehf=new A3xaEntity_HtmlFrame(ji_Row,true);if(!jt_o3xehf.ShowBody(ji_bStatus))
{}
return true;};this._A3xaHtmlEntitySet();}
function A3xaDDXEID(ji_sId,ji_helem)
{this.jm_TypEntity=null;this.jm_IdEntity=null;this.jm_TypGroup=null;this.jm_IdGroup=null;this.jm_Ucat=null;this.jm_Vcat=null;this.jm_A=null;this.jm_Z=null;this.jm_N=null;this.jm_C=null;this.jm_P=null;this.jm_S=null;var jt_selValue=null;if(!ji_sId)
{if(!ji_helem)
return;var jt_selIndex=ji_helem.selectedIndex;jt_selValue=ji_helem.options[jt_selIndex].value;}
else
{var qt_oDD=jQuery("#"+ji_sId);if(!(qt_oDD&&qt_oDD.length))
return;jt_selValue=qt_oDD.val();}
if(!jt_selValue)
return;var jt_aSelValue=jt_selValue.trim().split(",");if(!jt_aSelValue)
return;var jt_nofSVFields=jt_aSelValue.length;if(jt_nofSVFields>0)
this.jm_TypEntity=jt_aSelValue[0];if(jt_nofSVFields>1)
this.jm_IdEntity=jt_aSelValue[1];if(jt_nofSVFields>2)
this.jm_TypGroup=jt_aSelValue[2];if(jt_nofSVFields>3)
this.jm_IdGroup=jt_aSelValue[3];if(jt_nofSVFields>4);if(jt_nofSVFields>5)
this.jm_A=jt_aSelValue[5];if(jt_nofSVFields>6)
this.jm_Z=jt_aSelValue[6];if(jt_nofSVFields>7)
this.jm_N=jt_aSelValue[7];if(jt_nofSVFields>8)
this.jm_C=jt_aSelValue[8];if(jt_nofSVFields>9)
this.jm_P=jt_aSelValue[9];if(jt_nofSVFields>10)
this.jm_S=jt_aSelValue[10];if(jt_nofSVFields>11)
this.jm_Ucat=jt_aSelValue[11];if(jt_nofSVFields>12)
this.jm_Vcat=jt_aSelValue[12];}
function A3xaHtmlEntityEdit()
{this.PrintHtml=A3xaHtmlEntityEdit_PrintHtml;this.OnChangeDD=A3xaHtmlEntityEdit_OnChangeDD;this.OnChangeDD_EditEntityInfoList=A3xaHtmlEntityEdit_OnChangeDD_EditEntityInfoList;this.Get_Cache=A3xaHtmlEntityEdit_Get_Cache;this.jm_ogle=new A3xaDCEntity();}
function A3xaHtmlEntityEdit_PrintHtml()
{return true;}
function A3xaHtmlEntityEdit_OnChangeDD(ji_eDropDown,ji_QUR,ji_oxeid,ji_bSecundary,ji_Itemid)
{var jt_oUrlLink=A3xaEntity_MakeUrl_Edit_Params2(jg_oe.jc_oXUR.jc_XURFN_ReloadEntity,ji_QUR,this.Get_Cache(true,true,false),ji_bSecundary,ji_Itemid);jt_oUrlLink.Redirect();return true;}
function A3xaHtmlEntityEdit_OnChangeDD_EditEntityInfoList(ji_eDropDown,ji_QUR,ji_TypEntity,ji_IdEntity,ji_Itemid)
{var jt_selIndex=ji_eDropDown.selectedIndex;var jt_selValue=ji_eDropDown.options[jt_selIndex].value.trim();if(jt_selValue=='')
return true;var jt_IdFieldInfo=jt_selValue;if(!(jt_IdFieldInfo>0))
jt_IdFieldInfo=null;var jt_oUrlLink=A3xaEntity_MakeUrl_EditInfo_Params(jg_oe.jc_oXUR.jc_XURFN_EditEntityInfo,ji_QUR,jt_IdFieldInfo,ji_TypEntity,ji_IdEntity,ji_Itemid);jt_oUrlLink.Redirect();return true;}
function A3xaHtmlEntityEdit_Get_Cache(ji_bGEID,ji_bEC,ji_bAll)
{if(ji_bGEID||ji_bEC||ji_bAll)
{var qt_oTypEntity=jQuery("#h_TypEntity");if(qt_oTypEntity&&qt_oTypEntity.length)
this.jm_ogle.jm_TypEntity=qt_oTypEntity.val();}
if(ji_bGEID||ji_bAll)
{var qt_oIdEntity=jQuery("#h_IdEntity");if(qt_oIdEntity&&qt_oIdEntity.length)
this.jm_ogle.jm_IdEntity=qt_oIdEntity.val();var qt_oTypGroup=jQuery("#h_TypGroup");if(qt_oTypGroup&&qt_oTypGroup.length)
this.jm_ogle.jm_TypGroup=qt_oTypGroup.val();var qt_oIdGroup=jQuery("#h_IdGroup");if(qt_oIdGroup&&qt_oIdGroup.length)
this.jm_ogle.jm_IdGroup=qt_oIdGroup.val();}
if(ji_bEC||ji_bAll)
{this.jm_ogle.jm_Ucat=null;this.jm_ogle.jm_Vcat=null;var jt_oDDCategory=new A3xaDDXEID("h_Category");this.jm_ogle.jm_Ucat=jt_oDDCategory.jm_Ucat;this.jm_ogle.jm_Vcat=jt_oDDCategory.jm_Vcat;this.jm_ogle.jm_A=null;this.jm_ogle.jm_Z=null;this.jm_ogle.jm_N=null;this.jm_ogle.jm_C=null;var jt_oDDNAZ=new A3xaDDXEID("h_NAZ");var jt_oDDNN=new A3xaDDXEID("h_NN");var jt_oDDCity=new A3xaDDXEID("h_City");this.jm_ogle.jm_A=jt_oDDNAZ.jm_A;this.jm_ogle.jm_Z=jt_oDDNAZ.jm_Z;if(jt_oDDNAZ.jm_A&&(jt_oDDNN.jm_A==jt_oDDNAZ.jm_A)&&jt_oDDNAZ.jm_Z&&(jt_oDDNN.jm_Z==jt_oDDNAZ.jm_Z))
{this.jm_ogle.jm_N=jt_oDDNN.jm_N;if(jt_oDDNN.jm_N&&(jt_oDDCity.jm_A==jt_oDDNN.jm_A)&&(jt_oDDCity.jm_Z==jt_oDDNN.jm_Z)&&(jt_oDDCity.jm_N==jt_oDDNN.jm_N))
{this.jm_ogle.jm_C=jt_oDDCity.jm_C;}}
this.jm_ogle.jm_P=null;this.jm_ogle.jm_S=null;var jt_oDDCountry=new A3xaDDXEID("h_Country");var jt_oDDState=new A3xaDDXEID("h_State");this.jm_ogle.jm_P=jt_oDDCountry.jm_P;if(jt_oDDCountry.jm_P&&(jt_oDDState.jm_P==jt_oDDCountry.jm_P))
{this.jm_ogle.jm_S=jt_oDDState.jm_S;}}
if(ji_bAll)
{var qt_oName=jQuery("#h_EName");if(qt_oName&&qt_oName.length)
this.jm_ogle.jm_sName=qt_oName.val();var qt_oDescr=jQuery("#h_EDescr");if(qt_oDescr&&qt_oDescr.length)
this.jm_ogle.jm_sDescr=qt_oDescr.val();var qt_oWebsite=jQuery("#h_EWebsite");if(qt_oWebsite&&qt_oWebsite.length)
this.jm_ogle.jm_sWebsite=qt_oWebsite.val();var qt_oColor=jQuery("#h_EColor");if(qt_oColor&&qt_oColor.length)
this.jm_ogle.jm_Color=qt_oColor.val();var qt_oLat=jQuery("#h_ELat");if(qt_oLat&&qt_oLat.length)
this.jm_ogle.jm_Lat=qt_oLat.val();var qt_oLon=jQuery("#h_ELon");if(qt_oLon&&qt_oLon.length)
this.jm_ogle.jm_Lon=qt_oLon.val();var qt_oLikes=jQuery("#h_ELikes");if(qt_oLikes&&qt_oLikes.length)
this.jm_ogle.jm_Likes=qt_oLikes.val();var qt_oLikesBonus=jQuery("#h_ELikesBonus");if(qt_oLikesBonus&&qt_oLikesBonus.length)
this.jm_ogle.jm_LikesBonus=qt_oLikesBonus.val();var qt_oRating=jQuery("#h_ERating");if(qt_oRating&&qt_oRating.length)
this.jm_ogle.jm_Rating=qt_oRating.val();var qt_oClicks=jQuery("#h_EClicks");if(qt_oClicks&&qt_oClicks.length)
this.jm_ogle.jm_Clicks=qt_oClicks.val();var qt_oScore=jQuery("#h_EScore");if(qt_oScore&&qt_oScore.length)
this.jm_ogle.jm_Score=qt_oScore.val();}
return this.jm_ogle;}
function A3xaTopMenu()
{this._A3xaTopMenu=function()
{};this.PrintHtml=function(qi_oParent)
{if(!(qi_oParent&&qi_oParent.length))
return false;var jt_o3xxur=jg_oApp.Get_AppXUR().Get_3xXUR();var jt_bYB=New_A3xaAZNC_XApp(jt_o3xxur.Get_3xXEID()).IsBestFromBabylon();var jt_o3xmngic=jg_oe.Get_3xAppMngIcons();var jt_odfic=jt_o3xmngic.Get_DefIcons();var jt_o3xhici_Home=jt_o3xmngic.NewSprite(jt_odfic.jc_oIconMS_TopMenu_Home.absid);jt_o3xhici_Home.Set_Dim(24,24);jt_o3xhici_Home.Set_UrlLink(jg_oe.jm_sHomeDir+jg_oe.jm_sLang+"/",false);jt_o3xhici_Home.Set_Title(jt_odfic.jc_oIconMS_TopMenu_Home.title,jt_odfic.jc_oIconMS_TopMenu_Home.alt);jt_o3xhici_Home.Set_Options(null,false);var jt_ohButton_Home=new A3xaSimpleButton3(jt_o3xhici_Home);jt_ohButton_Home.Set_Status({off:true});if(!jt_ohButton_Home.PrintHtml(qi_oParent))
return false;var jt_o3xhici_LA=jt_o3xmngic.NewSprite(jt_odfic.jc_oIconMS_TopMenu_LA.absid);jt_o3xhici_LA.Set_Dim(24,24);if(jt_bYB)
jt_o3xhici_LA.Set_UrlLink(jg_oe.jm_sHomeDir+jg_oe.jm_sLang+"/"+jg_oe.jc_oUrls.jc_sRelHomeDirLA,false);jt_o3xhici_LA.Set_Title(jt_odfic.jc_oIconMS_TopMenu_LA.title,jt_odfic.jc_oIconMS_TopMenu_LA.alt);jt_o3xhici_LA.Set_Options(null,false);var jt_ohButton_LA=new A3xaSimpleButton3(jt_o3xhici_LA);if(jt_bYB)
jt_ohButton_LA.Set_Status({off:true});else
jt_ohButton_LA.Set_Status({on:true});if(!jt_ohButton_LA.PrintHtml(qi_oParent))
return false;var jt_o3xhici_YB=jt_o3xmngic.NewSprite(jt_odfic.jc_oIconMS_TopMenu_YB.absid);jt_o3xhici_YB.Set_Dim(24,24);if(!jt_bYB)
jt_o3xhici_YB.Set_UrlLink(jg_oe.jm_sHomeDir+jg_oe.jm_sLang+"/"+jg_oe.jc_oUrls.jc_sRelHomeDirYB,false);jt_o3xhici_YB.Set_Title(jt_odfic.jc_oIconMS_TopMenu_YB.title,jt_odfic.jc_oIconMS_TopMenu_YB.alt);jt_o3xhici_YB.Set_Options(null,false);var jt_ohButton_YB=new A3xaSimpleButton3(jt_o3xhici_YB);if(jt_bYB)
jt_ohButton_YB.Set_Status({on:true});else
jt_ohButton_YB.Set_Status({off:true});if(!jt_ohButton_YB.PrintHtml(qi_oParent))
return false;var jt_o3xhici_D3=jt_o3xmngic.NewSprite(jt_odfic.jc_oIconMS_TopMenu_D3.absid);jt_o3xhici_D3.Set_Dim(24,24);jt_o3xhici_D3.Set_Title(jt_odfic.jc_oIconMS_TopMenu_D3.title,jt_odfic.jc_oIconMS_TopMenu_D3.alt);jt_o3xhici_D3.Set_Options(null,false);var jt_ohButton_D3=new A3xaSimpleButton3(jt_o3xhici_D3);jt_ohButton_D3.Set_Status({dis:true});if(!jt_ohButton_D3.PrintHtml(qi_oParent))
return false;return true;};this._A3xaTopMenu();}
var jg_oApp=new A3xaAppManager();function A3xaAppManager()
{A3xaEnvironment.call(this);this.jm_odbLoaderManager=null;var jt_this=this;this._A3xaAppManager=function()
{this.jc_oStorage=new A3xaDefines_Storage();this.jm_StorageTypeDefault=this.jc_oStorage.jc_FLY;this.jc_oA3xaDbZero=new A3xaDefines_A3xaDbZero();this.jc_oA3xaDbZero.Init(this.jc_oStorage);this.jc_oEntity=new A3xaDefines_Entity();this.jc_oEntityInfo=new A3xaDefines_EntityInfo();this.jc_oHtml=new A3xaDefines_Html();this.jc_oUrls=new A3xaDefines_Urls();this.jm_oAppXUR=new A3xaAppXUR();this.jm_oAppXUR.Set_DefXUR(new A3xaDefines_XUR());this.jc_oXUR=this.jm_oAppXUR.Get_DefXUR();this.jm_oAppMngIcons=new A3xaAppMngIcons();this.jm_oAppMngIcons.Set_DefIcons(new A3xaDefines_Icons());this.jc_oIcons=this.jm_oAppMngIcons.Get_DefIcons();this.Set_Storage(new A3xaStorageFLY());this.Set_Storage(new A3xaStorageSS());this.Set_Storage(new A3xaStorageLS());this.Set_Storage(new A3xaStorageIDB());this.Set_Reporter(new A3xaReporter());this.Set_Database(new A3xaDbZero());this.Set_TurboStatus(false);};this.Set_CommonValues=function(ji_bDebug,ji_bCanEdit,ji_bCanLike,ji_IdUser,ji_Itemid,ji_sxur,ji_sDirBase,ji_sHomeDir,ji_sLang)
{this.A3xaAbsEnvironment_Set_CommonValues(ji_bDebug,ji_bCanEdit,ji_bCanLike,ji_IdUser,ji_Itemid,ji_sDirBase,ji_sHomeDir,ji_sLang);this.Set_Debug((ji_bDebug?1:0),{VW:3,DB:3});this.Get_AppXUR().Set_XURString(ji_sxur);return true;};this.Get_ECPMgr=function()
{return(this.Get_HtmlSetEntity()?this.Get_HtmlSetEntity().Get_ECPMgr():null);};this._OnDocumentReady=function()
{this.ResetApp();this.ShowCPTemplate();this.LogStatusBar2(new A3xaString(["Ready","Listo","Pronto","Pronto"]),false,true);this.StoreData();return true;};this.StoreData=function()
{this.Get_Database().jm_oDTStatus.jm_fnOnChange=function(ji_oDTStatus)
{jt_this.OnDatabaseStore(ji_oDTStatus);}
this.Get_Database().StoreAllData(true);return true;};this.OnDatabaseStore=function(ji_oDTStatus)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Event ("+ji_oDTStatus.Get_Descr()+")","","A3xaAppManager.OnDatabaseStore");var jt_this=this;if(ji_oDTStatus.IsFail())
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Fail ("+ji_oDTStatus.Get_Descr()+")","","A3xaAppManager.OnDatabaseStore");this.Get_Database().jm_aoDTStatus_TableToClear=null;this.Get_Database().jm_aoglDataTableStore=new A3xaArray();return true;}
var jt_DTStatus=ji_oDTStatus.Get();if(jt_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_Stored||jt_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_Empty)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Begin","Load Database","A3xaAppManager.OnDatabaseStore");this.Get_Database().jm_aoDTStatus_TableToClear=null;this.Get_Database().jm_aoglDataTableStore=new A3xaArray();return this.LoadData();}
return true;};this.LoadData=function()
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Begin","QuickLoad Database","A3xaAppManager.LoadData");this.jm_odbLoaderManager=new A3xaDbLoaderManager(function(ji_oDTStatus)
{return jt_this.OnLoadDataDone(ji_oDTStatus);},this.Get_Database());this.jm_odbLoaderManager.Load();return true;};this.OnLoadDataDone=function(ji_oDTStatus)
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Event ("+ji_oDTStatus.Get_Descr()+")","","A3xaAppManager.OnLoadDataDone");jg_oe.CanLogInfo()&&jg_oe.LogInfo("descr2 ("+ji_oDTStatus.Get_Descr2()+")","","A3xaAppManager.OnLoadDataDone");var jt_this=this;if(ji_oDTStatus.IsFail())
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Fail ("+ji_oDTStatus.Get_Descr()+")","","A3xaAppManager.OnLoadDataDone");return true;}
var jt_DTStatus=ji_oDTStatus.Get();if(jt_DTStatus==jg_oe.jc_oA3xaDbZero.jc_DTStatus_Loaded||ji_oDTStatus.IsEmpty())
{jg_oe.CanLogInfo()&&jg_oe.LogInfo("Loaded OK","","A3xaAppManager.OnLoadDataDone");this.Get_AppXUR().OnDataLoadedSetup();this.Get_Database().OnDataLoadedSetup();this.DocumentShow();}
jg_oe.CanLogInfo()&&jg_oe.LogInfo("Void event","","A3xaAppManager.OnLoadDataDone");return true;};this.ResetApp=function()
{if(this.Get_ECPMgr())
this.Get_ECPMgr().ResetECP();this.Set_Reporter(new A3xaReporter());return true;};this._ExecLogStatusBar2=function(ji_o3xsText,ji_bAsChild,ji_bClear)
{if(this.Get_ECPMgr()&&this.Get_ECPMgr().Get_AppLogger())
return this.Get_ECPMgr().Get_AppLogger().Append2(ji_o3xsText,ji_bAsChild,ji_bClear);return false;};this.OnClickTurbo=function(ji_bCurrentStatus,ji_fnChangeStatus)
{if(!ji_bCurrentStatus)
{if(!this.IsTurboAvailable())
{alert("A3xaTurboZero is not allowed on your browser,"+" because you are browsing in Private-Mode and/or "+" your browser DOM-storage is switched-off");return false;}}
var jt_odb=this.Get_Database();jt_odb.ClearArrayDTLoad({jp_bTyp_TurboHeader:true});this.Set_TurboStatus(!ji_bCurrentStatus);this.jm_odbLoaderManager=new A3xaDbLoaderManager(ji_fnChangeStatus,jt_odb);this.jm_odbLoaderManager.DatabaseLoadTurboHeader();return true;};this.ShowCPTemplate=function()
{var jr_b=true;var jt_oheSet=this.Get_HtmlSetEntity();if(!jt_oheSet)
{jt_oheSet=new A3xaHtmlEntitySet();this.Set_HtmlSetEntity(jt_oheSet);}
if(!jt_oheSet.PrintHtml2(false,true))
jr_b=false;this.HideLeftPanel();return jr_b;};this.Set_ItemsNarrowView=function(ji_IdNarrowView)
{this.Set_BrowserNarrowView(ji_IdNarrowView);this.Set_PopupDimNarrowView(ji_IdNarrowView);return true;};this.Set_BrowserNarrowView=function(ji_IdNarrowView)
{if(ji_IdNarrowView==jg_oe.jc_oHtml.jc_Body_NormalWidthId)
{this.AppendPageBreadCrumbs("a3xaw20bar","a3xaw20hook");}
else if(ji_IdNarrowView==jg_oe.jc_oHtml.jc_Body_SmallWidthId)
{this.AppendPageBreadCrumbs("a3xaw20bar","a3xaw20hook");}
else if(ji_IdNarrowView==jg_oe.jc_oHtml.jc_Body_MicroWidthId)
{this.AppendPageBreadCrumbs("a3xaw20bar");}
else
return false;return true;};this.DocumentShow=function()
{var jr_b=true;try
{this.Get_AppXUR().UpdatePageTitle();var jt_oheSet=this.Get_HtmlSetEntity();if(!(jt_oheSet&&jt_oheSet.PrintHtml2(true)))
jr_b=false;if(jr_b)
{jg_oPanelControlIcons_Builder.OnPageFooterEnd();if(this.Get_ECPMgr())
{if(!this.Get_ECPMgr().ShowHtmlSelected())
jr_b=false;}
var jt_o3xAppWindow=new A3xaAppWindow();jt_o3xAppWindow.Set_EHResize(function()
{var jt_IdNarrowView=jt_oheSet.OnWindowResize(true);});}}
catch(e)
{this.ExceptionMessage(e,"ShowHtmlPage");jr_b=false;}
if(jr_b);return jr_b;};this.ClearView=function()
{var jt_ohse=this.Get_HtmlSetEntity();if(jt_ohse)
{var jt_o3xAppWindow=new A3xaAppWindow();jt_o3xAppWindow.Set_EHResize(null);jg_oe.LogStatusBar2(new A3xaString(["Clean App Logger","Limpia de registrador","Limpo do registrador","Pulizia Registratore"]),false,true);jt_ohse.Release(true);this.AbortHttpRequests();}
return true;};this.WriteGLRS2=function(ji_glid,ji_sGLRS)
{var jr_b=false;try
{if(this.Get_Database()&&ji_glid)
{var jt_StorageType=this.Get_Database().Get_StorageType(ji_glid);if(jg_oe.jc_oA3xaDbZero.IsDefaultGlid(ji_glid)&&jt_StorageType==jg_oe.jc_oStorage.jc_FLY)
{this.Get_Database().Get_Storage_ByType(jt_StorageType).Clear();}
jr_b=this.Get_Database().WriteGLRS2(ji_glid,ji_sGLRS);}}
catch(e)
{this.ExceptionMessage(e,"WriteLocalStorage");}
return jr_b;};this.OnClickEntity=function(ji_TypEntity,ji_IdEntity,ji_TypInfo,ji_IdInfo,ji_CodInfo)
{try
{var jt_oheSet=this.Get_HtmlSetEntity();if(!jt_oheSet.OnClickEntity(ji_TypEntity,ji_IdEntity,ji_TypInfo,ji_IdInfo,ji_CodInfo))
{}}
catch(e)
{this.ExceptionMessage(e,"ClickEntity");}
return true;};this.OnChangeDD_EditEntity=function(ji_eDropDown,ji_QUR,ji_sXEID,ji_bSecundary,ji_Itemid)
{var jt_oheEdit=new A3xaHtmlEntityEdit();var jt_oxeid=new A3xaDCEntity();jt_oxeid.Get_3xXEID().Set_String(ji_sXEID);return jt_oheEdit.OnChangeDD(ji_eDropDown,ji_QUR,jt_oxeid,ji_bSecundary,ji_Itemid);};this.OnChangeDD_EditEntityInfoList=function(ji_eDropDown,ji_QUR,ji_TypEntity,ji_IdEntity,ji_Itemid)
{var jt_oheEdit=new A3xaHtmlEntityEdit();return jt_oheEdit.OnChangeDD_EditEntityInfoList(ji_eDropDown,ji_QUR,ji_TypEntity,ji_IdEntity,ji_Itemid);};this._A3xaAppManager();}
